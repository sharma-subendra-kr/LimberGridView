/*

LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.

Copyright Â© 2018-2020, Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("IntervalTreeJS"),require("ClosestBST")):"function"==typeof define&&define.amd?define(["IntervalTreeJS","ClosestBST"],e):"object"==typeof exports?exports.LimberGridView=e(require("IntervalTreeJS"),require("ClosestBST")):t.LimberGridView=e(t.IntervalTreeJS,t.ClosestBST)}(window,(function(t,e){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=4)}([function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(2),i(3);const r=function(t){return t.store.constants.privateConstants},o=function(t,e){t.store.constants.privateConstants.WIDTH=e},n=function(t,e){t.store.constants.privateConstants.HEIGHT=e},s=function(t,e){t.store.constants.privateConstants.WIDTH_SCALE_FACTOR=e},l=function(t,e){t.store.constants.privateConstants.MARGIN=e},d=function(t,e){t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=e};var a=r;const c=function(t,e,i){t.store.constants.publicConstants.hasOwnProperty(e)&&(t.store.constants.publicConstants[e]=i)};var u=function(t){return t.store.constants.publicConstants};let h=function(t){const e=t.options.isMobileCheck;return e?e():window.matchMedia("only screen and (max-width: 979px) and (min-width : 1px)").matches};const m=(t,e=6)=>Math.trunc(t*Math.pow(10,e))/Math.pow(10,e),b=t=>{const e=t.length,i=new Array(e);let r=0;for(let o=0;o<e;o++)null!==t[o]&&void 0!==t[o]&&(i[r++]=t[o]);const o=new Array(r);for(let t=0;t<r;t++)o[t]=i[t];return o},w=(t=22)=>{const e=new Array(t);for(let i=0;i<t;i++)e[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return e.join("")},y=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.positionData=r},I=function(t){return t.store.variables.essentials.positionData},g=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.modifiedPositionData=r},p=function(t){return t.store.variables.essentials.modifiedPositionData},v=function(t){return t.store.variables.essentials.callbacks};const f=function(t,e){t.store.variables.elements.$el=e},x=function(t,e){t.store.variables.elements.$limberGridViewItems=e};var T=function(t){return t.store.variables.elements};const D=function(t,e){const i=T(t),r=u(t);i.$limberGridView.scrollHeight-e<=r.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=e+r.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")},A=function(t,e,i){const r=T(t),o=u(t),n=a(t),s=r.$limberGridView.scrollTop;let l=!1;return e>0&&(i-e<o.AUTO_SCROLL_POINT&&(r.$limberGridView.scrollTop=s+o.AUTO_SCROLL_DISTANCE,l=!0),e<n.HEIGHT/10&&0!==s&&(r.$limberGridView.scrollTop=s-o.AUTO_SCROLL_DISTANCE,l=!0)),l},G=function(t,e){const i=T(t),r=a(t),o=i.$limberGridView.getBoundingClientRect();if(e.clientX>=o.left&&e.clientX<=o.left+o.width&&e.clientY>=o.top&&e.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,n=i.$limberGridView.scrollLeft,s=e.clientX-o.left-r.PADDING_LEFT+n,l=e.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},C=function(t,e){const i=T(t),r=a(t),o=i.$limberGridView.getBoundingClientRect();let n;if(n="touchend"===e.type?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},n.clientX>=o.left&&n.clientX<=o.left+o.width&&n.clientY>=o.top&&n.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,e=i.$limberGridView.scrollLeft,s=n.clientX-o.left-r.PADDING_LEFT+e,l=n.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},E=function(t,e){const i=T(t).$limberGridViewItems[e.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(e.touches[0].clientX>=i.left&&e.touches[0].clientX<=i.left+i.width&&e.touches[0].clientY>=i.top&&e.touches[0].clientY<=i.top+i.height){return{x:e.touches[0].clientX-i.left,y:e.touches[0].clientY-i.top}}return!1},R=function(t){return t.options};var _=R;const M=(t,e)=>{const i=u(t),r=_(t),o=I(t),n=parseInt(e.currentTarget.attributes["data-index"].value);let s,l,d,a;if(1===e.which)s=Math.sqrt(Math.pow(0-e.offsetX,2)+Math.pow(0-e.offsetY,2)),d=e.offsetX,a=e.offsetY;else{if(0!==e.which)return!1;l=E(t,e),s=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),d=l.x,a=l.y}const c=e.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,h=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,m=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return r.itemMouseDownMoveCheck&&r.itemMouseDownMoveCheck(d,a,{...o[n]},n,e.target)||s<=i.MOVE_GUIDE_RADIUS&&!r.itemMouseDownMoveCheck?{type:"move",itemIndex:e.currentTarget.attributes["data-index"].value}:r.itemMouseDownResizeCheck&&r.itemMouseDownResizeCheck(d,a,{...o[n]},n,e.target)||d>=c&&d<=c+m&&a>=h&&a<=h+b&&!r.itemMouseDownResizeCheck?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:void 0},N=(t,e)=>{const i=T(t),r=I(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=r.width+"px",i.$limberGridViewPseudoItem.style.height=r.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${e.itemX}px,${e.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let t=0;t<o;t++)i.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},$=(t,e,i)=>{const r=T(t),o=I(t)[e.itemIndex];r.$limberGridViewHeightAdjustGuide.style.height="0px",r.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),r.$limberGridViewItems[e.itemIndex].classList.add("limber-grid-view-item-demo"),r.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),r.$pseudoContainerItem.style.width=o.width+"px",r.$pseudoContainerItem.style.height=o.height+"px",1===i.which?r.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(r.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`),r.$body.classList.add("limber-grid-view-body-tag-state-editing")},V=(t,e,i,r)=>{const o=T(t);I(t)[e.itemIndex];"move"===r?(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),1===i.which?o.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(o.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`)):"resize"===r&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},H=(t,e)=>{const i=B(t);try{return e.x>i.tl.x&&e.x<i.tr.x&&e.y>i.tl.y&&e.y<i.bl.y}catch(t){return null}},L=(t,e)=>{const i=B(t);try{return e.x>=i.tl.x&&e.x<=i.tr.x&&e.y>=i.tl.y&&e.y<=i.bl.y&&!H(t,e)}catch(t){return null}},O=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>=n.x||o.x>=r.x)&&!(i.y>=n.y||o.y>=r.y)}catch(t){return null}},S=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>n.x||o.x>r.x)&&(!(i.y>n.y||o.y>r.y)&&!1===O(t,e))}catch(t){return null}},P=(t,e,i)=>{if(!O(t,e))return null;const r=B(t),o=B(e),n={subRectT:{tl:r.tl,tr:r.tr,br:{x:r.tr.x,y:o.tr.y},bl:{x:r.tl.x,y:o.tl.y}},subRectR:{tl:{x:o.tr.x,y:r.tr.y},tr:r.tr,br:r.br,bl:{x:o.br.x,y:r.br.y}},subRectB:{tl:{x:r.bl.x,y:o.bl.y},tr:{x:r.br.x,y:o.br.y},br:r.br,bl:r.bl},subRectL:{tl:r.tl,tr:{x:o.tl.x,y:r.tl.y},br:{x:o.bl.x,y:r.bl.y},bl:r.bl}},s=Object.keys(n);for(let t=0;t<s.length;t++)z(n[s[t]])||delete n[s[t]];let l,d,a,c,u,h,m,b,w,y,I,g,p,v,f,x,T;return n.subRectT&&n.subRectR&&(w={tl:n.subRectT.tl,tr:n.subRectR.tl,br:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},a={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectT.br,bl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y}},g={tl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},tr:n.subRectT.br,br:n.subRectR.br,bl:n.subRectR.bl}),n.subRectR&&n.subRectB&&(I={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectB.tr,bl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y}},u={tl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectR.bl},v={tl:n.subRectB.tl,tr:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},br:n.subRectR.bl,bl:n.subRectB.bl}),n.subRectB&&n.subRectL&&(x={tl:n.subRectL.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},bl:n.subRectB.tl},m={tl:n.subRectB.tl,tr:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},br:n.subRectL.br,bl:n.subRectB.bl},p={tl:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectL.br}),n.subRectL&&n.subRectT&&(f={tl:n.subRectT.bl,tr:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},br:n.subRectL.br,bl:n.subRectL.bl},l={tl:n.subRectT.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},y={tl:n.subRectL.tr,tr:n.subRectT.tr,br:n.subRectT.br,bl:{x:n.subRectL.tr.x,y:n.subRectT.bl.y}}),d=W(w,l)||W(y,a)||w||y,c=k(I,a)||k(g,u)||I||g,h=W(p,u)||W(v,m)||p||v,b=k(f,m)||k(x,l)||f||x,T=i?[l,d,a,c,u,h,m,b]:[U(l),U(d),U(a),U(c),U(u),U(h),U(m),U(b)],T=T.filter(t=>t),0===T.length&&(T=Object.keys(n).map(t=>i?n[t]:U(n[t]))),T},W=(t,e)=>{if(!t&&!e)return null;if(!O(U(t),U(e)))return null;let i=null;return t.tl.x===e.tl.x||Math.abs(t.tl.x-e.tl.x)<Math.abs(t.tr.x-e.tr.x)?i={tl:e.tr,tr:t.tr,br:t.br,bl:e.br}:(t.tr===e.tr||Math.abs(e.tl.x-t.tl.x)>Math.abs(e.tr.x-t.tr.x))&&(i={tl:t.tl,tr:e.tl,br:e.bl,bl:t.bl}),i},k=(t,e)=>{if(!t&&!e)return null;if(!O(U(t),U(e)))return null;let i=null;return t.tl.y===e.tl.y||Math.abs(t.tl.y-e.tl.y)<Math.abs(t.bl.y-e.bl.y)?i={tl:e.bl,tr:e.br,br:t.br,bl:t.bl}:(t.bl.y===e.bl.y||Math.abs(e.tl.y-t.tl.y)>Math.abs(e.bl.y-t.bl.y))&&(i={tl:t.tl,tr:t.tr,br:e.tr,bl:e.tl}),i},z=function(t){try{let e,i,r,o;return e=t.tr.x-t.tl.x,i=t.br.y-t.tr.y,r=t.br.x-t.bl.x,o=t.bl.y-t.tl.y,!(e<=0||i<=0||r<=0||o<=0)}catch(t){return null}},B=function(t){return{tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},br:{x:t.x+t.width,y:t.y+t.height},bl:{x:t.x,y:t.y+t.height}}},U=function(t){return z(t)?{x:t.tl.x,y:t.tl.y,width:t.tr.x-t.tl.x,height:t.bl.y-t.tl.y}:null},j=(t,e)=>{const i=B(t),r=B(e);return(Math.abs(i.tl.x-r.tr.x)<1||Math.abs(r.tl.x-i.tr.x)<1||Math.abs(i.tl.y-r.bl.y)<1||Math.abs(r.tl.y-i.bl.y)<1)&&(i.tl.y>=r.tl.y&&i.tl.y<r.bl.y||r.tl.y>=i.tl.y&&r.tl.y<i.bl.y||i.tl.x>=r.tl.x&&i.tl.x<r.tr.x||r.tl.x>=i.tl.x&&r.tl.x<i.tr.x||i.bl.y<=r.bl.y&&i.bl.y>r.tl.y||r.bl.y<=i.bl.y&&r.bl.y>i.tl.y||i.tr.x<=r.tr.x&&i.tr.x>r.tl.x||r.tr.x<=i.tr.x&&r.tr.x>i.tl.x)},X=(t,e,i)=>{const r=B(t),o=B(e);let n;const s=(t,e)=>{let i;if(t.tl.x>=e.bl.x&&t.tl.x<e.br.x&&t.tl.y>=e.bl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:e.tl.y},tr:{x:r,y:e.tl.y},br:{x:r,y:t.bl.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.tl.y>=e.tr.y&&t.tl.y<e.br.y&&t.tl.x>=e.tr.x){let r=t.br.y<e.br.y?t.br.y:e.br.y;i={tl:{x:e.tl.x,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.br.x,y:r},bl:{x:e.bl.x,y:r}}}if(t.tr.x<=e.br.x&&t.tr.x>e.bl.x&&t.tr.y>=e.bl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:e.tl.y},tr:{x:t.tr.x,y:e.tr.y},br:{x:t.br.x,y:t.br.y},bl:{x:r,y:t.bl.y}}}if(t.tr.y>=e.tl.y&&t.tr.y<e.bl.y&&t.tr.x<=e.tl.x){let r=t.bl.y<e.bl.y?t.bl.y:e.bl.y;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:e.tr.x,y:t.tl.y},br:{x:e.br.x,y:r},bl:{x:t.bl.x,y:r}}}if(t.br.x<=e.tr.x&&t.br.x>e.tl.x&&t.br.y<=e.tl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.tr.x,y:e.br.y},bl:{x:r,y:e.bl.y}}}if(t.br.y<=e.bl.y&&t.br.y>e.tl.y&&t.br.x<=e.tl.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:t.tl.x,y:r},tr:{x:e.tr.x,y:r},br:{x:e.br.x,y:t.br.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.bl.x>=e.tl.x&&t.bl.x<e.tr.x&&t.bl.y<=e.tl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:r,y:t.tr.y},br:{x:r,y:e.br.y},bl:{x:t.bl.x,y:e.bl.y}}}if(t.bl.y<=e.br.y&&t.bl.y>e.tr.y&&t.bl.x>=e.tr.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:e.tl.x,y:r},tr:{x:t.tr.x,y:r},br:{x:t.br.x,y:t.br.y},bl:{x:e.bl.x,y:t.bl.y}}}return i};return n=s(r,o),n||(n=s(o,r)),n&&(n=[n]),n||Y(t,e)||Y(e,t)||(n=(()=>{const i=P(t,e,!0),r=new Array((null==i?void 0:i.length)||0);let n,l=0;const d=r.length;for(let e=0;e<d;e++)n=s(i[e],o),n&&!Y(t,U(n))&&(r[l++]=n);const a=new Array(l);for(let t=0;t<l;t++)a[t]=r[t];return a.length?a:null})()),!!n&&(i?n:n.map(t=>U(t)))},Y=(t,e)=>{const i=B(t),r=B(e);return i.tl.x<=r.tl.x&&i.tr.x>=r.tr.x&&i.tl.y<=r.tl.y&&i.bl.y>=r.bl.y},F=(t,e)=>{var i,r,o,n;return(null==t||null===(i=t.tl)||void 0===i?void 0:i.x)&&(null==t||null===(r=t.tr)||void 0===r?void 0:r.x)&&(null==e||null===(o=e.tl)||void 0===o?void 0:o.x)&&(null==t||null===(n=t.tr)||void 0===n?void 0:n.x)?!(t.tl.x>=e.tr.x||e.tl.x>=t.tr.x):null},Z=(t,e)=>t.tl.x===e.tl.x&&t.tl.y===e.tl.y&&t.tr.x===e.tr.x&&t.tr.y===e.tr.y&&t.br.x===e.br.x&&t.br.y===e.br.y&&t.bl.x===e.bl.x&&t.bl.y===e.bl.y,q=t=>{const e=T(t),i=u(t);e.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");for(let t=0;t<r;t++)e.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state");"ADD"===i.DESK_INTERACTION_MODE?e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},K=(t,e,i,r,o,n)=>{const s=I(t),l=a(t);let d=Number.MAX_SAFE_INTEGER,c=0,u=Number.MAX_SAFE_INTEGER,h=0;const m=e.length;for(let t=0;t<m;t++)s[e[t]].y<d&&(d=s[e[t]].y),s[e[t]].y+s[e[t]].height>c&&(c=s[e[t]].y+s[e[t]].height),s[e[t]].x<u&&(u=s[e[t]].x),s[e[t]].x+s[e[t]].width>h&&(h=s[e[t]].x+s[e[t]].width);return r>c&&(c=r),i>h&&(h=i),o<d&&(d=o),n>c&&(c=n),{minX:u-l.MARGIN,maxX:h+l.MARGIN,minY:d-l.MARGIN,maxY:c+l.MARGIN}},Q=(t,e,i,r)=>{let o,n;e.tl.y>0&&(o={tl:{x:i,y:0},tr:{x:r,y:0},br:{x:r,y:e.tr.y},bl:{x:i,y:e.tl.y}});const s=((t,e,i)=>{const r=I(t),o=p(t),n=a(t);let s,l,d=0;const c=r.length;for(let t=0;t<c;t++)s=et(n.MARGIN,r[t]),l=et(n.MARGIN,o[t]),r[t].y+r[t].height>d&&s.x<i&&s.x+s.width>e&&(d=r[t].y+r[t].height),o[t].y+o[t].height>d&&l.x<i&&l.x+l.width>e&&(d=o[t].y+o[t].height);return d})(t,i,r);return s>e.bl.y&&(n={tl:{x:i,y:e.bl.y},tr:{x:r,y:e.bl.y},br:{x:r,y:s},bl:{x:i,y:s}}),{topWorkSpaceCo:o,bottomWorkSpaceCo:n}},J=(t,e,i=!1)=>{const r=p(t),o=a(t),n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)O(e,et(o.MARGIN,r[t]))&&(s[l++]=i?t:r[t]);const d=new Array(l);for(let t=0;t<l;t++)d[t]=s[t];return d},tt=(t,e,i,r,o,n,s,l=!1)=>{const d=p(t),c=a(t),u={tl:{...(null==i?void 0:i.tl)?i.tl:e.tl},tr:{...(null==i?void 0:i.tr)?i.tr:e.tr},br:{...e.br},bl:{...e.bl}},h=U(u),m=U(r),w=U(o);let y=0;const I=s.length,g=new Array(I);for(let t=0;t<I;t++)n[s[t]]||(g[y++]=s[t]);const v=b(g),f=d.length,x=new Array(f);let T=0;const D=new Array(f);let A=0;for(let t=0;t<f;t++){const e=et(c.MARGIN,d[t]);O(w,e)&&(n[t]||O(h,e)||O(m,e)&&!Y(m,e)?D[A++]=l?t:d[t]:O(m,e)&&Y(m,e)&&!n[t]&&(x[T++]=t,d[t].x=void 0,d[t].y=void 0))}return{updatedItemsToArrange:b([...v,...x]),itemsInWorkSpace:b(D)}},et=(t,e)=>{const i={...e};return i.x-=t,i.y-=t,i.width+=2*t,i.height+=2*t,i},it=function(t){return(e,i,r)=>e.d.rect.width>=t.width&&e.d.rect.height>=t.height},rt=function(t){return e=>e.v>t},ot=function(){return!0},nt=(t,e)=>(t.width+t.height)/e,st=(t,e)=>{const i=t.length;for(let r=0;r<i;r++)t[r].d.score=nt(t[r].d.rect,e);return t.sort((t,e)=>t.d.score-e.d.score),t[0]},lt=(t,e,i)=>{const r=p(t),o=e.length;for(let t=0;t<o;t++)r[e[t]].y+=i},dt=function(t,e,i){const r=I(t),o=T(t),n=r.length;for(let t=0;t<n;t++)r[t].y>=e&&(r[t].y-=i,o.$limberGridViewItems[t].style.transform="translate("+r[t].x+"px, "+r[t].y+"px)")},at=function(t,e,i,r,o){const n=a(t),s=u(t),l=I(t);var d={x:e-n.MARGIN,y:i-n.MARGIN,width:r+2*s.MARGIN,height:o+2*s.MARGIN};if(e<0||i<0)return!1;if("number"!=typeof r||"number"!=typeof o)return!1;if(e+r>n.WIDTH)return!1;if(r<50||o<50)return!1;let c;const h=l.length;for(let t=0;t<h;t++)if(c=O(et(n.MARGIN,l[t]),d)||S(et(n.MARGIN,l[t]),d),c)return!1;return!0},ct=function(t,e,i,r,o){const n=a(t),s=I(t),l={x:0,y:i,width:n.WIDTH,height:o};if("number"!=typeof r||"number"!=typeof o)return!1;let d,c=Number.MAX_SAFE_INTEGER,u=0,h=!1;const m=s.length;for(let t=0;t<m;t++){if(Y(l,et(n.MARGIN,s[t])))return!1;if(d=O(l,et(n.MARGIN,s[t]))||S(l,et(n.MARGIN,s[t])),d){h=!0;const e={x:s[t].x,y:s[t].y-n.MARGIN},i={x:s[t].x,y:s[t].y+s[t].height+n.MARGIN};s[t].y-n.MARGIN<c&&(H(l,e)||L(l,e))&&(c=s[t].y-n.MARGIN),s[t].y+s[t].height+n.MARGIN>u&&(H(l,i)||L(l,i))&&(u=s[t].y+s[t].height+n.MARGIN)}}return h?(c===Number.MAX_SAFE_INTEGER&&(c=i),0===u&&(u=i+o),c-u>0&&{y:u,shiftHeight:c-u}):{y:i,shiftHeight:o}},ut=t=>t.store.variables.bindedFunctions,ht=function(){const t=_(this),e=T(this),i=v(this),r=ut(this);if(!0===t.editable){h(this)||!1!==t.enableInteractiveAddAndCut&&(e.$limberGridView.addEventListener("mousedown",r.onDeskMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridView.addEventListener("touchstart",r.onDeskTouchStart));for(var o=e.$limberGridViewItems.length,n=0;n<o;n++)h(this)||(e.$limberGridViewItems[n].addEventListener("mousedown",r.onItemMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridViewItems[n].addEventListener("touchstart",r.onItemTouchStart)),i.onItemClickCallback&&e.$limberGridViewItems[n].addEventListener("click",r.onItemClick)}},mt=function(){const t=_(this),e=T(this),i=ut(this);if(!0===t.editable&&(void 0!==e.$limberGridView&&(e.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),e.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),void 0!==e.$limberGridViewItems)){const t=e.$limberGridViewItems.length;for(let r=0;r<t;r++)e.$limberGridViewItems[r].removeEventListener("mousedown",i.onItemMouseDown),e.$limberGridViewItems[r].removeEventListener("touchstart",i.onItemTouchStart),e.$limberGridViewItems[r].removeEventListener("click",i.onItemClick)}},bt=function(){const t=T(this),e=ut(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].addEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].addEventListener("touchstart",e.onItemTouchStart)}},wt=function(){const t=T(this),e=ut(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].removeEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].removeEventListener("touchstart",e.onItemTouchStart)}},yt=function(t){return t.store.variables.eventSpecific.itemInteraction},It=function(t){return t.store.variables.eventSpecific.deskInteraction};var gt=i(0),pt=i(1);const vt=t=>{let e,i,r=t.length;for(let o=0;o<r;o++)i=Math.floor(Math.random()*(o+1)),e=t[o],t[o]=t[i],t[i]=e;return t},ft=function(){this.length=100,this.stack=new Array(this.length),this.ptr=-1};ft.prototype.constructor=ft,ft.prototype.push=function(t){return null!=t&&(this.ptr<this.length-1||this.resize(),this.stack[++this.ptr]=t,!0)},ft.prototype.pop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.ptr--,t}},ft.prototype.wipePop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.stack[this.ptr]=void 0,this.ptr--,t}},ft.prototype.resize=function(){const t=this.length,e=this.stack;this.length+=100,this.stack=new Array(this.length);for(let i=0;i<t;i++)this.stack[i]=e[i]},ft.prototype.getTop=function(){return this.ptr>=0?this.stack[this.ptr]:null},ft.prototype.isEmpty=function(){return this.ptr<0},ft.prototype.getData=function(){const t=new Array(this.ptr+1);for(let e=0;e<=this.ptr;e++)t[e]=this.stack[e];return t},ft.prototype.getAllData=function(){const t=new Array(this.length);for(let e=0;e<this.length;e++)t[e]=this.stack[e];return t},ft.prototype.getSize=function(){return this.ptr+1},ft.prototype.empty=function(){this.ptr=-1},ft.prototype.wipe=function(){this.length=100,this.stack=new Array(this.length),this.ptr=-1};var xt=ft;const Tt=async(t,e,i,r,o=!1)=>{const n=a(t),s=(u(t),p(t)),l=performance.now(),d={idCount:0},{minY:c,maxY:h}=K(t,e,void 0,void 0,i,r),m=new Array(e.length-1),b=e.length-1;for(let t=0;t<b;t++)m[t]=e[t];const w={tl:{x:0,y:c},tr:{x:n.WIDTH,y:c},br:{x:n.WIDTH,y:h},bl:{x:0,y:h}},y={tl:{...w.tl},tr:{...w.tr},br:{...w.br},bl:{...w.bl}},{topWorkSpaceCo:I,bottomWorkSpaceCo:g}=Q(t,w,0,n.WIDTH),v=Gt(t,I,g);v.integrateTop&&(y.tl={...I.tl},y.tr={...I.tr}),v.integrateBottom&&(y.br={...g.br},y.bl={...g.bl});let f=J(t,U(g),!0);const x=((t,e,i=!1)=>{const r=p(t),o=a(t);if(!e)return[];const n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)e.bl.y<=et(o.MARGIN,r[t]).y&&(s[l++]=i?t:r[t]);const d=new Array(l);for(let t=0;t<l;t++)d[t]=s[t];return d})(t,g,!0);let T=U(y),D=J(t,T);const A=(n.DEFINED_MIN_HEIGHT_AND_WIDTH-2*n.MARGIN)/2;let G={},C=0,E=0,R=0;for(;C!==b;){D.sort((t,e)=>t.x-e.x);const{it:e,idCount:i}=Rt(t,T,y,D,d.idCount);d.idCount=i;const r=e.getSortedData();vt(r),_t(e);const{mergedRects:o,idCount:n}=await Mt(r,d.idCount);d.idCount=n;const{overlappedRects:s}=Vt(o),{arranged:l,itemsInBottomWorkSpace:a,idCount:c}=await Ht(t,m.filter(t=>!G[t]),s,U(I),U(g),y,d.idCount);d.idCount=c,f=[...f,...Object.keys(a)],G={...G,...l};const u=Object.values(l);if(D=[...D,...u],C+=u.length,C!==b&&(E++,console.log("workSpaceResizeCount",E),w.br.y+=A,w.bl.y+=A,g&&(g.tl.y+=A,g.tr.y+=A,g.br.y+=A,g.bl.y+=A),y.br.y+=A,y.bl.y+=A,T=U(y),lt(t,f,A)),R++,R>50)throw"Arrange time out"}if(E>0){lt(t,x,A*E);let e=f.length;for(let t=0;t<e;t++)G[f[t]]=s[f[t]];e=x.length;for(let t=0;t<e;t++)G[x[t]]=s[x[t]]}const _=performance.now();return console.log("p1: ",l),console.log("p2: ",_),console.log("arrange total: ",_-l),G},Dt=async(t,e,i,r,o=!1)=>{const n=a(t),s=(u(t),performance.now()),l={idCount:0},{minX:d,maxX:c,minY:h,maxY:m}=K(t,e,r,i,void 0,void 0);let b=new Array(e.length-1),w=e.length-1;for(let t=0;t<w;t++)b[t]=e[t];const y={tl:{x:0,y:h},tr:{x:n.WIDTH,y:h},br:{x:n.WIDTH,y:m},bl:{x:0,y:m}},I={tl:{...y.tl},tr:{...y.tr},br:{...y.br},bl:{...y.bl}},{topWorkSpaceCo:g,bottomWorkSpaceCo:p}=Q(t,y,0,n.WIDTH),v=Gt(t,g,p);v.integrateTop&&(I.tl={...g.tl},I.tr={...g.tr}),v.integrateBottom&&(I.br={...p.br},I.bl={...p.bl});const f={tl:{x:d,y:h},tr:{x:c,y:h},br:{x:c,y:m},bl:{x:d,y:m}},x={tl:{...f.tl},tr:{...f.tr},br:{...f.br},bl:{...f.bl}},{topWorkSpaceCo:T,bottomWorkSpaceCo:D}=Q(t,f,d-n.MARGIN,c+n.MARGIN);Gt(t,T).integrateTop&&(x.tl={...T.tl},x.tr={...T.tr}),D&&(x.br={...D.br},x.bl={...D.bl});const A=U(I);let G=J(t,A),C=U(x);const E=2*n.DEFINED_MIN_HEIGHT_AND_WIDTH;let R=0,_={},M=0,N=0;for(;M!==w;){let e;if(0===R){G.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Rt(t,A,I,G,l.idCount);e=i,l.idCount=r}else{if(1===R){const{itemsInWorkSpace:e,updatedItemsToArrange:i}=tt(t,f,T,D,x,_,b);G=e,b=i,w=i.length+M,R++;continue}if(R>=2){G.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Rt(t,C,x,G,l.idCount);e=i,l.idCount=r}}const i=e.getSortedData();vt(i),_t(e);const{mergedRects:r,idCount:o}=await Mt(i,l.idCount);l.idCount=o;const{overlappedRects:n}=Vt(r),{arranged:s,idCount:d}=await Ht(t,b.filter(t=>!_[t]),n,U(g),U(p),0===R?I:x,l.idCount);l.idCount=d,_={..._,...s};const a=Object.values(s);if(G=[...G,...a],M+=a.length,M!==w&&R>=2&&(N++,console.log("workSpaceResizeCount",N),x.br.y+=E,x.bl.y+=E,C=U(x)),R++,R>50)throw"Arrange time out"}const $=performance.now();return console.log("p1: ",s),console.log("p2: ",$),console.log("arrange total: ",$-s),_},At=async(t,e,i)=>{const r=a(t),o=(u(t),performance.now()),n={idCount:0},s=r.WIDTH,l=i,d=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,c=e.length,h={tl:{x:0,y:l},tr:{x:s,y:l},br:{x:s,y:d},bl:{x:0,y:d}},m={tl:{...h.tl},tr:{...h.tr},br:{...h.br},bl:{...h.bl}},{topWorkSpaceCo:b}=Q(t,h,0,r.WIDTH);Gt(t,b).integrateTop&&(m.tl={...b.tl},m.tr={...b.tr});let w=U(m),y=J(t,w);const I=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let g=0,p={},v=0,f=0;for(;v!==c;){y.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Rt(t,w,m,y,n.idCount);n.idCount=r;const o=i.getSortedData();vt(o),_t(i);const{mergedRects:s,idCount:l}=await Mt(o,n.idCount);n.idCount=l;const{overlappedRects:d}=Vt(s),{arranged:a,idCount:u}=await Ht(t,e.filter(t=>!p[t]),d,U(b),void 0,m,n.idCount);n.idCount=u,p={...p,...a};const x=Object.values(a);if(y=[...y,...x],v+=x.length,v!==c&&(f++,console.log("workSpaceResizeCount",f),h.br.y+=I,h.bl.y+=I,m.br.y+=I,m.bl.y+=I,w=U(m)),g++,g++,g>1e4)throw"Arrange time out"}const x=performance.now();return console.log("p1: ",o),console.log("p2: ",x),console.log("arrange total: ",x-o),p},Gt=(t,e,i)=>{let r,o;const n={integrateTop:!1,integrateBottom:!1};if(e){r=J(t,U(e));const i=Ct(e,r);i<e.bl.y&&(e.tl.y=i,e.tr.y=i,n.integrateTop=!0)}if(i){o=J(t,U(i));const e=Et(i,o);e>i.tl.y&&(i.bl.y=e,i.br.y=e,n.integrateBottom=!0)}return n},Ct=(t,e)=>{const i=e.length,r=new gt.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.bl.y,l=!1;for(let d=0;d<i;d++){o=r.findAll({low:e[d].y+e[d].height,high:t.bl.y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(F(B(e[d]),B(o[t].d.rect))&&!Z(B(e[d]),B(o[t].d.rect))){l=!0;break}!l&&e[d].y+e[d].height<s&&(s=e[d].y+e[d].height)}return s},Et=(t,e)=>{const i=e.length,r=new gt.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.tl.y,l=!1;for(let d=0;d<i;d++){o=r.findAll({low:t.tl.y,high:e[d].y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(F(B(e[d]),B(o[t].d.rect))&&!Z(B(e[d]),B(o[t].d.rect))){l=!0;break}!l&&e[d].y>s&&(s=e[d].y)}return s},Rt=(t,e,i,r,o)=>{const n=a(t);let s=o;const l=new gt.IntervalTreesIterative;let d;l.insert({low:i.tl.y,high:i.bl.y,d:{id:s++,rect:e,a:{},o:{},ref:null}});let c,u,h={low:0,high:0,d:null},m=0,b=0;const w=r.length;for(let t=0;t<w;t++){d=B(r[t]),h={low:d.tl.y,high:d.bl.y},c=l.findAll(h),m=c.length;for(let e=0;e<m;e++)if(O(c[e].d.rect,et(n.MARGIN,r[t]))){u=P(c[e].d.rect,et(n.MARGIN,r[t]),!0),b=u.length;for(let t=0;t<b;t++)l.insert({low:u[t].tl.y,high:u[t].bl.y,d:{id:s++,rect:U(u[t]),a:{},o:{},ref:null}});l.remove(c[e].interval,c[e].d)}}return{it:l,idCount:s}},_t=t=>{const e=t.getSortedData(),i=e.length;let r,o;for(let n=0;n<i;n++){r=t.findAll(e[n].interval),o=r.length;for(let t=0;t<o;t++)j(e[n].d.rect,r[t].d.rect)&&(e[n].d.a[r[t].d.id]=r[t])}},Mt=async(t,e)=>{const i=new xt,r=new gt.IntervalTreesIterative,o=(new xt,new gt.IntervalTreesIterative);let n,s,l,d,a,c,u,h,m,b=!1,w=e;const y=t.length;for(let e=0;e<y;e++)if(null===t[e].d.ref)for(i.push(t[e]);!i.isEmpty();){l=i.pop(),d=Object.keys(l.d.a),a=d.length,b=!1;for(let t=0;t<a;t++){var I;if(l.d.a[d[t]]){for(s=l.d.a[d[t]];null===(g=s)||void 0===g||null===(p=g.d)||void 0===p?void 0:p.ref;){var g,p;s=s.d.ref}h=X(l.d.rect,s.d.rect),m=(null===(I=h)||void 0===I?void 0:I.length)||0,1===m&&(u=h[0],u&&(n={...l.d.a,...s.d.a},delete n[l.d.id],delete n[s.d.id],c={d:{id:w++,rect:u,a:n,o:{},ref:null}},$t(c),Nt(r,c)||i.push(c),Y(u,s.d.rect)&&(s.d.ref=c),Y(u,l.d.rect)&&(l.d.ref=c,b=!0)))}}b||Nt(o,l)}return{mergedRects:o.getSortedData(),idCount:w}},Nt=(t,e)=>{const i=t.findAll({low:e.d.rect.y,high:e.d.rect.y+e.d.rect.height});let r=!1;const o=(null==i?void 0:i.length)||0;for(let t=0;t<o;t++)(Z(B(e.d.rect),B(i[t].d.rect))||Y(i[t].d.rect,e.d.rect))&&(r=!0);return r||t.insert({low:e.d.rect.y,high:e.d.rect.y+e.d.rect.height,d:e.d}),r},$t=(t,e)=>{const i=t.d.rect,r=t.d.a;let o;const n=Object.keys(r),s=n.length;for(let t=0;t<s;t++)o=r[n[t]],j(i,o.d.rect)||delete r[n[t]]},Vt=t=>{const e=new gt.IntervalTreesIterative,i=t.length;for(let r=0;r<i;r++)t[r].low=t[r].d.rect.y,t[r].high=t[r].d.rect.y+t[r].d.rect.height,e.insert(t[r]);const r={},o=e.getSortedData();let n,s;for(let t=0;t<i;t++){n=e.findAll(o[t].interval),s=n.length;for(let e=0;e<s;e++)if(o[t].d.rect&&n[e].d.rect&&Y(o[t].d.rect,n[e].d.rect)&&o[t].d.id!==n[e].d.id){r[n[e].d.id]=n[e],n[e].d._rect=n[e].d.rect,n[e].d.rect=null;const t=Object.values(n[e].d.o),i=t.length;for(let r=0;r<i;r++){delete t[r].d.o[n[e].d.id]}n[e].d.o={}}else O(o[t].d.rect,n[e].d.rect)&&(o[t].d.o[n[e].d.id]=n[e],n[e].d.o[o[t].d.id]=o[t])}const l=new Array(i);let d=0;for(let t=0;t<i;t++)o[t].d.rect&&(l[d++]=o[t]);const a=new Array(d);for(let t=0;t<d;t++)a[t]=l[t];return{overlappedRects:a,completeOverlapped:Object.values(r)}},Ht=async(t,e,i,r,o,n,s)=>{const l=p(t),d=a(t);let c=s;const u={},h={};vt(i);const m=new pt.ClosestBST,b=i.length;for(let t=0;t<b;t++)m.insert({v:i[t].d.rect.width,d:i[t].d});const w=e.length,y=new xt,I=new xt,g=((t,e)=>{const i=p(t),r=e.length;let o,n,s=0,l=0,d=0;for(let t=0;t<r;t++)o=i[e[t]],o.width>l&&(l=o.width),o.height>s&&(s=o.height);d=l+s;const a=new Array(r);for(let t=0;t<r;t++)o=i[e[t]],n=nt(o,d),a[t]={score:n,d:e[t]};return a.sort((t,e)=>t.score-e.score),a})(t,e);for(let t=0;t<w;t++)y.push(g[t]);let v,f,x;for(;!y.isEmpty();){if(v=y.pop(),f=l[v.d],x=m.findUsingComparator(it(et(d.MARGIN,f)),rt(f.width),ot),!x.length){I.push(v);continue}const e=st(x,f.width+f.height);f.x=e.d.rect.x+d.MARGIN,f.y=e.d.rect.y+d.MARGIN,u[v.d]=f,o&&Y(o,e.d.rect)&&(h[v.d]=v.d);const{result:i,idCount:r}=await Lt(t,f,e,m,c);c=r;const n=i.length;for(let t=0;t<n;t++)i[t].v=i[t].d.rect.width,m.insert(i[t])}return{arranged:u,itemsInBottomWorkSpace:h,idCount:c}},Lt=async(t,e,i,r,o)=>{var n;const s=a(t);let l,d,c,u,h,m,w,y=o;const I={},g=new xt,p={x:e.x-s.MARGIN,y:e.y-s.MARGIN,width:e.width+2*s.MARGIN,height:e.height+2*s.MARGIN};r.remove(i.v,i.d),l=P(i.d.rect,p),d=(null===(n=l)||void 0===n?void 0:n.length)||0;for(let t=0;t<d;t++)c={v:l[t].width,d:{id:y++,rect:l[t],a:{},o:{},ref:null}},g.push(c);let v=!1;const f={...i.d.o},x=Object.values(i.d.o),T=x.length;for(let t=0;t<T;t++){var D;if(u=x[t],delete u.d.o[i.d.id],r.remove(u.d.rect.width,u.d),v=!1,O(u.d.rect,p)){if(v=!0,l=P(u.d.rect,p),d=(null===(D=l)||void 0===D?void 0:D.length)||0,d)for(let t=0;t<d;t++)c={v:l[t].width,d:{id:y++,rect:l[t],a:{},o:{},ref:null}},g.push(c)}else g.push(u),u.d.a={};m=Object.keys(u.d.o),w=m.length;for(let t=0;t<w;t++)h=u.d.o[m[t]],f[m[t]]||(I[m[t]]=h),v&&delete h.d.o[u.d.id]}const A=g.getData(),G=A.length,C=new gt.IntervalTreesIterative;for(let t=0;t<G;t++)C.insert({low:A[t].d.rect.y,high:A[t].d.rect.y+A[t].d.rect.height,d:A[t].d});_t(C);const{mergedRects:E,idCount:R}=await Mt(g.getData(),y),{overlappedRects:_,completeOverlapped:M}=Vt([...E,...Object.values(I)]),N=M.length;for(let t=0;t<N;t++)r.remove(M[t].d._rect.width,M[t].d);const $=_.length,V=new Array($);let H=0;for(let t=0;t<$;t++)I[_[t].d.id]||(V[H++]=_[t]);return{result:b(V),idCount:R}},Ot=function(t,e=!0){const i=_(t),r=I(t),o=a(t),n=u(t),s=T(t),l=v(t);mt.call(t);const d=r.length;let c=1;e&&(c=o.WIDTH_SCALE_FACTOR);const m=new Array(d);let b;if(h(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";b=Pt(r);for(let e=0;e<d;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c,b[e].width=o.WIDTH,b[e].height=o.WIDTH/n.MOBILE_ASPECT_RATIO;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",b[e].index),i.style.width=b[e].width+"px",i.style.height=b[e].height+"px",m[e]=i}}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable");for(let e=0;e<d;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",e),i.style.transform=`translate(${r[e].x}px, ${r[e].y}px)`,i.style.width=r[e].width+"px",i.style.height=r[e].height+"px",m[e]=i}}const w=s.$limberGridViewItems.length;for(let t=0;t<w;t++)s.$limberGridView.removeChild(s.$limberGridViewItems[t]);for(let t=0;t<d;t++)s.$limberGridView.appendChild(m[t]);for(let e=0;e<d;e++){const i=m[e];if(h(t)){const r=l.renderContent(e,b[e].width,b[e].height);Wt(t,r,i)}else{const o=l.renderContent(e,r[e].width,r[e].height);Wt(t,o,i)}}x(t,[...s.$limberGridView.getElementsByClassName("limber-grid-view-item")]),ht.call(t),l.renderComplete&&l.renderComplete()},St=async function(t,e){const i=_(t),r=T(t),o=v(t),n=a(t),s=u(t);mt.call(t);try{let l=!1;if(e.x&&e.y&&e.width&&e.height){if(l=at(t,e.x,e.y,e.width,e.height),l){const i=I(t);g(t,i);const r=p(t);r.push(e),y(t,r)}}else{if(!e.width||!e.height||e.x||e.y)return!1;{const i=I(t);g(t,i);const r=p(t),o=(t=>{const e=I(t),i=a(t);let r,o=i.MARGIN;const n=e.length;for(let t=0;t<n;t++)r=et(i.MARGIN,e[t]),r.y+r.height>o&&(o=r.y+r.height);return o})(t);r.push({x:void 0,y:void 0,width:e.width,height:e.height});await At(t,[r.length-1],o);y(t,r)}}const d=I(t),c=d.length-1;let u;const m=document.createElement("div");if(h(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";m.setAttribute("class",t),m.setAttribute("data-index",c),m.style.width=n.WIDTH+"px",m.style.height=n.WIDTH/s.MOBILE_ASPECT_RATIO+"px",u=o.renderContent(c,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO,"isAdd")}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable"),m.setAttribute("class",t),m.setAttribute("data-index",c),m.style.transform=`translate(${d[c].x}px, ${d[c].y}px)`,m.style.width=d[c].width+"px",m.style.height=d[c].height+"px",u=o.renderContent(c,d[c].width,d[c].height,"isAdd")}r.$limberGridView.appendChild(m),Wt(t,u,m),x(t,[...r.$limberGridView.getElementsByClassName("limber-grid-view-item")]),o.addComplete&&o.addComplete(c)}catch(t){console.error(t)}ht.call(t)},Pt=t=>{const e=t.length,i=new Array(e);for(let r=0;r<e;r++)i[r]={...t[r]},i[r].index=r;return i.sort((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y)},Wt=(t,e,i)=>{const r=v(t);"string"==typeof e?i.innerHTML=e:e instanceof Element?(i.innerHTML="",i.appendChild(e)):r.renderPlugin&&r.renderPlugin(e,i)},kt=function(t){const e=T(this),i=u(this),r=It(this),o=ut(this);t.target.classList.contains("limber-grid-view")&&(t.stopPropagation(),1===t.which&&(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(Bt.bind(this,t,t.offsetX,t.offsetY),i.MOUSE_DOWN_TIME),e.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu)))},zt=function(t){const e=T(this),i=u(this),r=It(this),o=ut(this);t.target.classList.contains("limber-grid-view")&&1===t.touches.length&&0===t.which&&(r.tapHoldCancel=!1,r.tapHoldTimerComplete=!1,e.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),wt.call(this),clearTimeout(r.longTouchCheck),r.longTouchCheck=setTimeout(Ut.bind(this,t),i.TOUCH_HOLD_TIME),t.stopPropagation())},Bt=function(t,e,i){const r=T(this),o=a(this),n=It(this);if(!1===n.mouseDownCancel){n.mouseDownTimerComplete=!0;var s=r.$limberGridView.scrollTop,l=e+r.$limberGridView.scrollLeft-o.PADDING_LEFT,d=i+s-o.PADDING_TOP;n.userActionData={type:"add",addPositionX:l,addPositionY:d},r.$limberGridViewAddCutGuide.style.height="1px",r.$limberGridViewAddCutGuide.style.width="1px",r.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${d}px)`,r.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),q(this)}},Ut=function(t){const e=T(this),i=It(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;var r=C(this,t),o=r.x,n=r.y;i.userActionData={type:"add",addPositionX:o,addPositionY:n};setTimeout(function(){e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")}.bind(this),500),e.$limberGridViewAddCutGuide.style.height="1px",e.$limberGridViewAddCutGuide.style.width="1px",e.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),q(this),e.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),t.preventDefault()}},jt=function(t){const e=T(this),i=a(this),r=u(this),o=It(this);ut(this);if(!0===o.mouseDownTimerComplete){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=t.offsetY+n;D(this,u),a>0&&c>0&&(e.$limberGridViewAddCutGuide.style.width=a+"px",e.$limberGridViewAddCutGuide.style.height=c+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(Qt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME)):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Jt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME))}else Kt.call(this,t);t.stopPropagation()},Xt=function(t){const e=T(this),i=a(this),r=u(this),o=It(this);ut(this);if(!0===o.tapHoldTimerComplete&&1===t.touches.length){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=C(this,t),c=a.x-l,u=a.y-d;if(!1!==a&&(o.userActionData.newWidth=c,o.userActionData.newHeight=u,c>0&&u>0&&(e.$limberGridViewAddCutGuide.style.width=c+"px",e.$limberGridViewAddCutGuide.style.height=u+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(c)}px, h: ${parseInt(u)}px`))),!1!==a){const t=e.$limberGridView.getBoundingClientRect(),s=(e.$limberGridView.offsetWidth,t.left,e.$limberGridView.offsetHeight-t.top),l=(a.x,i.PADDING_LEFT,a.y+i.PADDING_TOP-n),d=a.y;D(this,d);const h=A(this,l,s);"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),!0!==h&&(o.addItemAllowCheckTimeOutVariable=setTimeout(Qt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME))):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),!0!==h&&(o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Jt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME)))}t.preventDefault()}else Kt.call(this);t.stopPropagation()},Yt=function(t){const e=T(this),i=u(this),r=It(this);clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck);if(!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(at(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;St(this,o);!0,e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=ct(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&dt(this,t.y,t.shiftHeight)}}else r.mouseDownCancel=!0;Kt.call(this),t.stopPropagation()},Ft=function(t){const e=T(this),i=u(this),r=It(this);clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck);if(!0===r.tapHoldTimerComplete&&0===t.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(at(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;St(this,o);!0,e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=ct(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&dt(this,t.y,t.shiftHeight)}}else r.tapHoldCancel=!0;Kt.call(this),t.stopPropagation()},Zt=function(t){Kt.call(this)},qt=function(t){t.preventDefault()},Kt=function(t){const e=T(this),i=It(this),r=ut(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(t=>{const e=T(t);e.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=e.$limberGridViewItems.length;for(var r=0;r<i;r++)e.$limberGridViewItems[r].classList.remove("limber-grid-view-item-resizing-state"),e.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state");e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")})(this),e.$limberGridView.removeEventListener("mousemove",r.onDeskMouseMove),document.removeEventListener("mouseup",r.onDeskMouseUp),document.removeEventListener("contextmenu",r.onDeskContextMenu),e.$limberGridView.removeEventListener("touchmove",r.onDeskTouchMove),document.removeEventListener("touchend",r.onDeskTouchEnd),document.removeEventListener("touchcancel",r.onDeskTouchCancel),document.removeEventListener("contextmenu",r.onDeskTouchContextMenu),bt.call(this),i.userActionData={},t&&(t.preventDefault(),t.stopPropagation())},Qt=function(t,e,i,r){const o=T(this);!1===at(this,t,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Jt=function(t,e,i,r){const o=T(this);!1===ct(this,0,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},te=(t,e,i)=>{const r=I(t),o=p(t),n=a(t),s=r.length,l=new Array(s);let d=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,(O(u,c)||S(u,c))&&t!==i&&(l[d++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(d+1);for(let t=0;t<d;t++)h[t]=l[t];return h[d]=i,h},ee=(t,e,i)=>{const r=I(t),o=p(t),n=a(t),s=r.length,l=new Array(s);let d=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,(O(u,c)||S(u,c))&&t!==i&&(l[d++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(d+1);for(let t=0;t<d;t++)h[t]=l[t];return h[d]=i,h},ie=(t,e,i,r)=>{const o=I(t),n=a(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"Width or Height is not a number.";if(o[e].x+i+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";if(i<n.DEFINED_MIN_HEIGHT_AND_WIDTH||r<n.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${n.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;return!0},re=(t,e,i,r)=>{const o=I(t),n=a(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"toX or toY is not a number.";if(i<n.MARGIN||r<n.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[e].width+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";return!0},oe=t=>{const e=I(t),i=T(t),r=e.length;for(var o=0;o<r;o++)i.$limberGridViewItems[o].style.transform="translate("+e[o].x+"px, "+e[o].y+"px)",i.$limberGridViewItems[o].classList.remove("limberGridViewItemDemo")},ne=(t,e,i)=>{const r=I(t),o=a(t),n=r.length,s={x:0,y:0,height:0,width:0},l={x:e,y:i};let d;for(let t=0;t<n;t++)if(s.x=r[t].x-o.MARGIN,s.y=r[t].y-o.MARGIN,s.width=r[t].width+2*o.MARGIN,s.height=r[t].height+2*o.MARGIN,H(s,l)||L(s,l)){d=t;break}return void 0!==d&&(e=r[d].x,i=r[d].y),{toX:e,toY:i,overlappedItemIndex:d}},se=async function(t,e,i){const r=I(this),o=T(this),n=v(this);t=parseInt(t),ie(this,t,e,i),oe(this),g(this,r);const s=p(this);s[t].width=e,s[t].height=i;const l={x:r[t].x,y:r[t].y,width:e,height:i},d=te(this,l,t),a=await Dt(this,d,l.y+l.height,l.x+l.width);y(this,s),o.$limberGridViewItems[t].style.width=s[t].width+"px",o.$limberGridViewItems[t].style.height=s[t].height+"px";const c=Object.keys(a),u=c.length;for(let t=0;t<u;t++){const e=c[t],i=a[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.resizeComplete(t,e,i,c)},le=async function(t,e,i){const r=I(this),o=T(this);t=parseInt(t),ie(this,t,e,i),oe(this),g(this,r);const n=p(this);n[t].width=e,n[t].height=i;const s={x:r[t].x,y:r[t].y,width:e,height:i},l=te(this,s,t),d=await Dt(this,l,s.y+s.height,s.x+s.width,!0),a=Object.keys(d),c=a.length;for(let t=0;t<c;t++){const e=a[t],i=d[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},de=async function(t,e,i){const r=I(this),o=T(this),n=v(this),s=u(this);if(t=parseInt(t),s.LATCH_MOVED_ITEM){const t=ne(this,e,i);e=t.toX,i=t.toY}re(this,t,e,i),oe(this),g(this,r);const l=p(this);l[t].x=e,l[t].y=i;const d={x:e,y:i,width:r[t].width,height:r[t].height},a=ee(this,d,t),c=await Tt(this,a,i,i+r[t].height);y(this,l),o.$limberGridViewItems[t].classList.remove("limberGridViewItemDemo"),o.$limberGridViewItems[t].style.transform=`translate(${l[t].x}px, ${l[t].y}px)`,s.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[t].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[t].style.transition=""},s.ANIMATE_TIME));const h=Object.keys(c),m=h.length;for(let t=0;t<m;t++){const e=h[t],i=c[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.moveComplete(t,e,i,h)},ae=async function(t,e,i){const r=I(this),o=T(this),n=u(this);if(t=parseInt(t),n.LATCH_MOVED_ITEM){const t=ne(this,e,i);e=t.toX,i=t.toY,isNaN(t.overlappedItemIndex)||(o.$limberGridViewMoveGuide.style.transform="translate("+e+"px, "+i+"px)",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active"))}re(this,t,e,i),oe(this),g(this,r);const s=p(this);s[t].x=e,s[t].y=i;const l={x:e,y:i,width:r[t].width,height:r[t].height},d=ee(this,l,t),a=await Tt(this,d,i,i+r[t].height,!0);o.$limberGridViewItems[t].classList.add("limberGridViewItemDemo");const c=Object.keys(a),h=c.length;for(let t=0;t<h;t++){const e=c[t],i=a[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},ce=function(t){const e=T(this),i=u(this),r=I(this),o=yt(this),n=ut(this);if(1!==t.which)return void ge.call(this,t);const s=M(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),clearTimeout(o.longPressCheck),o.longPressCheck=setTimeout(he.bind(this,t),i.MOUSE_DOWN_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,e.$limberGridView.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,N(this,o.userActionData),t.preventDefault()),t.stopPropagation())},ue=function(t){const e=T(this),i=u(this),r=I(this),o=yt(this),n=ut(this);if(1!==t.touches.length)return void pe.call(this,t);if(0!==t.which)return void pe.call(this,t);if(!1===E(this,t))return;const s=M(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.longTouchCheck=setTimeout(me.bind(this,t),i.TOUCH_HOLD_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,e.$limberGridView.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,N(this,o.userActionData),t.preventDefault()),t.stopPropagation())},he=function(t){const e=yt(this);!1===e.mouseDownCancel&&(e.mouseDownTimerComplete=!0,$(this,e.userActionData,t))},me=function(t){const e=yt(this);!1===e.touchHoldCancel&&(e.touchHoldTimerComplete=!0,$(this,e.userActionData,t))},be=function(t){const e=T(this),i=a(this),r=u(this),o=yt(this);ut(this);if(!0===o.mouseDownTimerComplete)if("move"===o.userActionData.type){V(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const e=G(this,t);if(!1!==e){const t=e.y;D(this,t),o.showMoveDemoTimeOutVariable=setTimeout(fe.bind(this,o.userActionData.itemIndex,e),r.DEMO_WAIT_TIME)}}else{V(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.itemX,d=o.userActionData.itemY,a=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=t.offsetY+n;D(this,u),a>0&&c>0&&(e.$limberGridViewPseudoItem.style.width=a+"px",e.$limberGridViewPseudoItem.style.height=c+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),o.showResizeDemoTimeOutVariable=setTimeout(xe.bind(this,o.userActionData.itemIndex,a,c),r.DEMO_WAIT_TIME)}else o.mouseDownCancel=!0,ge.call(this,t);t.preventDefault(),t.stopPropagation()},we=function(t){const e=T(this),i=a(this),r=u(this),o=yt(this);ut(this);if(!0===o.touchHoldTimerComplete&&1===t.touches.length)if("move"===o.userActionData.type){V(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const n=C(this,t);if(!1!==n){const t=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=e.$limberGridView.getBoundingClientRect(),d=(e.$limberGridView.offsetWidth,l.left,e.$limberGridView.offsetHeight-l.top),a=(n.x,i.PADDING_LEFT,n.y+i.PADDING_TOP-t),c=n.y;D(this,c);!0!==A(this,a,d)&&(o.showMoveDemoTimeOutVariable=setTimeout(fe.bind(this,o.userActionData.itemIndex,n),r.DEMO_WAIT_TIME))}}else{V(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=o.userActionData.itemX,s=o.userActionData.itemY,l=C(this,t),d=l.x-n,a=l.y-s;if(!1!==l&&(o.userActionData.newWidth=d,o.userActionData.newHeight=a,d>0&&a>0&&(e.$limberGridViewPseudoItem.style.width=d+"px",e.$limberGridViewPseudoItem.style.height=a+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(a)}px`))),!1!==l){const t=e.$limberGridView.scrollTop,n=e.$limberGridView.scrollLeft,s=e.$limberGridView.getBoundingClientRect(),c=(e.$limberGridView.offsetWidth,s.left,e.$limberGridView.offsetHeight-s.top),u=(l.x,i.PADDING_LEFT,l.y+i.PADDING_TOP-t),h=l.y;D(this,h);!0!==A(this,u,c)&&(o.showResizeDemoTimeOutVariable=setTimeout(xe.bind(this,o.userActionData.itemIndex,d,a),r.DEMO_WAIT_TIME))}}else console.log("else"),o.touchHoldCancel=!0,pe.call(this,t);t.stopPropagation()},ye=async function(t){T(this),I(this);const e=yt(this);ut(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.mouseDownTimerComplete)if("move"===e.userActionData.type){const r=G(this,t);var i={};try{if(!1===r)throw"Mouse position outside grid area.";await de.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),Te(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await se.call(this,e.userActionData.itemIndex,r,o)}catch(t){Te(this)}else e.mouseDownCancel=!0;ge.call(this,t),e.userActionData={}},Ie=async function(t){console.log("onItemTouchEnd");T(this),I(this);const e=yt(this);ut(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.touchHoldTimerComplete&&0===t.touches.length)if("move"===e.userActionData.type){const r=C(this,t);var i={};try{if(!1===r)throw"Touch position outside grid area.";await de.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),Te(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await se.call(this,e.userActionData.itemIndex,r,o)}catch(t){Te(this)}else e.touchHoldCancel=!0;pe.call(this,t),t.stopPropagation(),e.userActionData={}},ge=function(t){const e=T(this),i=yt(this),r=ut(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((t,e)=>{const i=T(t);I(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let t=0;t<r;t++)i.$limberGridViewItems[t].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((t,e)=>{const i=T(t);I(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[e.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing")})(this,i.userActionData),T(this).$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),Te(this),document.removeEventListener("mousemove",r.onItemMouseMove),e.$limberGridView.removeEventListener("mousemove",r.onItemMouseMove),document.removeEventListener("mouseup",r.onItemMouseUp),document.removeEventListener("contextmenu",r.onItemContextMenu),document.removeEventListener("touchmove",r.onItemTouchMove),e.$limberGridView.removeEventListener("touchmove",r.onItemTouchMove),document.removeEventListener("touchend",r.onItemTouchEnd),document.removeEventListener("contextmenu",r.onItemTouchContextMenu),document.removeEventListener("touchcancel",r.onItemTouchCancel),i.userActionData={},t.preventDefault(),t.stopPropagation()},pe=function(t){ge.call(this,t)},ve=function(t){ge.call(this,t)},fe=async function(t,e){const i=T(this);try{if(!1===e)throw"Invalid mouse position.";await ae.call(this,t,e.x,e.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(t){console.error(t),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},xe=async function(t,e,i){const r=T(this);try{await le.call(this,t,e,i),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(t){console.error(t),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},Te=function(t){const e=T(t),i=I(t),r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].style.transform=`translate(${i[t].x}px, ${i[t].y}px)`},De={ADD:!0,CUTSPACE:!0},Ae={true:!0,false:!0},Ge=async function(t,e,i){const r=T(t),c=a(t),h=(u(t),I(t));if(!0===i||!(t=>{if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){if(!t[i]||isNaN(t[i].x)||t[i].x<0||isNaN(t[i].y)||t[i].y<0||isNaN(t[i].height)||t[i].height<=0||isNaN(t[i].width)||t[i].width<=0)return!1;if(!z(B(t[i])))return!1}return!0}return!1})(h)){console.warn("Auto-arranging"),g(t,h);const e=p(t),i=h.length,r=new Array(i);for(let t=0;t<i;t++)r[t]=t,e[t].x=void 0,e[t].y=void 0,h[t].x/=c.WIDTH_SCALE_FACTOR,h[t].y/=c.WIDTH_SCALE_FACTOR,h[t].width/=c.WIDTH_SCALE_FACTOR,h[t].height/=c.WIDTH_SCALE_FACTOR;o(t,c.GRID_WIDTH),n(t,c.GRID_HEIGHT),l(t,c.GRID_MARGIN),s(t,1),d(t,c.MIN_HEIGHT_AND_WIDTH),await At(t,r,c.MARGIN),y(t,e)}if(function(t,e){t.store.constants.privateConstants.PADDING_LEFT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-left"))),function(t,e){t.store.constants.privateConstants.PADDING_RIGHT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-right"))),function(t,e){t.store.constants.privateConstants.PADDING_TOP=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-top"))),function(t,e){t.store.constants.privateConstants.PADDING_BOTTOM=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-bottom"))),o(t,r.$limberGridView.clientWidth-c.PADDING_LEFT-c.PADDING_RIGHT),n(t,r.$limberGridView.clientHeight-c.PADDING_TOP-c.PADDING_BOTTOM),e){const t=h.length;for(let e=0;e<t;e++)h[e].x/=c.WIDTH_SCALE_FACTOR,h[e].y/=c.WIDTH_SCALE_FACTOR,h[e].width/=c.WIDTH_SCALE_FACTOR,h[e].height/=c.WIDTH_SCALE_FACTOR;c.MARGIN/=c.WIDTH_SCALE_FACTOR,c.DEFINED_MIN_HEIGHT_AND_WIDTH/=c.WIDTH_SCALE_FACTOR}s(t,c.WIDTH/c.GRID_WIDTH),l(t,c.MARGIN*c.WIDTH_SCALE_FACTOR),d(t,c.DEFINED_MIN_HEIGHT_AND_WIDTH*c.WIDTH_SCALE_FACTOR)},Ce=function(t){var e,i,r,o,n,s,l,d,a,u,h,m,b,w,y,I,g,p,v,f,x;(null==t||null===(e=t.gridData)||void 0===e?void 0:e.WIDTH)&&!isNaN(t.gridData.WIDTH)&&(f=this,x=t.gridData.WIDTH,f.store.constants.privateConstants.GRID_WIDTH=x),(null==t||null===(i=t.gridData)||void 0===i?void 0:i.HEIGHT)&&!isNaN(t.gridData.HEIGHT)&&function(t,e){t.store.constants.privateConstants.GRID_HEIGHT=e}(this,t.gridData.HEIGHT),(null==t||null===(r=t.gridData)||void 0===r?void 0:r.MARGIN)&&!isNaN(t.gridData.MARGIN)&&function(t,e){t.store.constants.privateConstants.GRID_MARGIN=e}(this,t.gridData.MARGIN),(null==t||null===(o=t.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&!isNaN(t.gridData.MIN_HEIGHT_AND_WIDTH)&&function(t,e){t.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=e}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),(null==t||null===(n=t.publicConstants)||void 0===n?void 0:n.mobileAspectRatio)&&!isNaN(t.publicConstants.mobileAspectRatio)&&c(this,"MOBILE_ASPECT_RATIO",t.publicConstants.mobileAspectRatio),(null==t||null===(s=t.publicConstants)||void 0===s?void 0:s.moveGuideRadius)&&!isNaN(t.publicConstants.moveGuideRadius)&&c(this,"MOVE_GUIDE_RADIUS",t.publicConstants.moveGuideRadius),(null==t||null===(l=t.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&!isNaN(t.publicConstants.resizeSquareGuideLength)&&c(this,"RESIZE_SQUARE_GUIDE_LENGTH",t.publicConstants.resizeSquareGuideLength),(null==t||null===(d=t.publicConstants)||void 0===d?void 0:d.resizeSquareBorderGuideWidth)&&!isNaN(t.publicConstants.resizeSquareBorderGuideWidth)&&c(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",t.publicConstants.resizeSquareBorderGuideWidth),(null==t||null===(a=t.publicConstants)||void 0===a?void 0:a.autoScrollDistance)&&!isNaN(t.publicConstants.autoScrollDistance)&&c(this,"AUTO_SCROLL_DISTANCE",t.publicConstants.autoScrollDistance),(null==t||null===(u=t.publicConstants)||void 0===u?void 0:u.autoScrollPoint)&&!isNaN(t.publicConstants.autoScrollPoint)&&c(this,"AUTO_SCROLL_POINT",t.publicConstants.autoScrollPoint),(null==t||null===(h=t.publicConstants)||void 0===h?void 0:h.moveOrResizeHeightIncrements)&&!isNaN(t.publicConstants.moveOrResizeHeightIncrements)&&c(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",t.publicConstants.moveOrResizeHeightIncrements),(null==t||null===(m=t.publicConstants)||void 0===m?void 0:m.mouseDownTime)&&!isNaN(t.publicConstants.mouseDownTime)&&c(this,"MOUSE_DOWN_TIME",t.publicConstants.mouseDownTime),(null==t||null===(b=t.publicConstants)||void 0===b?void 0:b.touchHoldTime)&&!isNaN(t.publicConstants.touchHoldTime)&&c(this,"TOUCH_HOLD_TIME",t.publicConstants.touchHoldTime),(null==t||null===(w=t.publicConstants)||void 0===w?void 0:w.demoWaitTime)&&!isNaN(t.publicConstants.demoWaitTime)&&c(this,"DEMO_WAIT_TIME",t.publicConstants.demoWaitTime),(null==t||null===(y=t.publicConstants)||void 0===y?void 0:y.windowResizeWaitTime)&&!isNaN(t.publicConstants.windowResizeWaitTime)&&c(this,"WINDOW_RESIZE_WAIT_TIME",t.publicConstants.windowResizeWaitTime),(null==t||null===(I=t.publicConstants)||void 0===I?void 0:I.deskInteractionMode)&&De[t.publicConstants.deskInteractionMode]&&c(this,"DESK_INTERACTION_MODE",t.publicConstants.deskInteractionMode),"boolean"==typeof(null==t||null===(g=t.publicConstants)||void 0===g?void 0:g.latchMovedItem)&&c(this,"LATCH_MOVED_ITEM",t.publicConstants.latchMovedItem),"boolean"==typeof(null==t||null===(p=t.publicConstants)||void 0===p?void 0:p.animateMovedItem)&&c(this,"ANIMATE_MOVED_ITEM",t.publicConstants.animateMovedItem),(null==t||null===(v=t.publicConstants)||void 0===v?void 0:v.animateTime)&&!isNaN(t.publicConstants.animateTime)&&c(this,"ANIMATE_TIME",t.publicConstants.animateTime)},Ee=function(){const t=T(this),e=R(this);var i,r;let o;i=this,r=document.getElementsByTagName("body")[0],i.store.variables.elements.$body=r;do{o="limber-grid-view-pseudo-container-"+w()}while(null!==document.getElementById(o));!function(t,e){t.store.variables.essentials.pseudoContainerId=e}(this,o);const n=document.createElement("div");if(n.setAttribute("class","limber-grid-view-pseudo-container"),n.setAttribute("id",o),function(t,e){t.store.variables.elements.$pseudoContainer=e}(this,n),e.pseudoElementContainer){let t;"string"==typeof e.pseudoElementContainer?t=document.getElementById(e.pseudoElementContainer):e.pseudoElementContainer instanceof Element&&(t=e.pseudoElementContainer),t.appendChild(n)}else t.$body.appendChild(n);t.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">Â©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright Â© 2018-2020, Subendra Kumar Sharma. License: GNU General Public License version 3, or (at your option) any later version.</div></div></div>',function(t,e){t.store.variables.elements.$limberGridViewContainer=e}(this,t.$el.getElementsByClassName("limber-grid-view-container")[0]),function(t,e){t.store.variables.elements.$limberGridView=e}(this,t.$el.getElementsByClassName("limber-grid-view")[0]);const s=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div");u.innerHTML="<div></div>",s.setAttribute("class","limber-grid-view-pseudo-container-item"),l.setAttribute("class","limber-grid-view-pseudo-item"),d.setAttribute("class","limber-grid-view-move-guide"),a.setAttribute("class","limber-grid-view-height-adjust-guide"),c.setAttribute("class","limber-grid-view-add-cut-guide"),u.setAttribute("class","limber-grid-view-touch-hold-guide"),t.$pseudoContainer.appendChild(s),t.$limberGridView.appendChild(l),t.$limberGridView.appendChild(d),t.$limberGridView.appendChild(a),t.$limberGridView.appendChild(c),t.$limberGridView.appendChild(u),function(t,e){t.store.variables.elements.$pseudoContainerItem=e}(this,s),function(t,e){t.store.variables.elements.$limberGridViewPseudoItem=e}(this,l),function(t,e){t.store.variables.elements.$limberGridViewMoveGuide=e}(this,d),function(t,e){t.store.variables.elements.$limberGridViewHeightAdjustGuide=e}(this,a),function(t,e){t.store.variables.elements.$limberGridViewAddCutGuide=e}(this,c),function(t,e){t.store.variables.elements.$limberGridViewTouchHoldGuide=e}(this,u)},Re=function(t){const e=u(this);setTimeout(ut(this).onWindowResizeTimerCallback,e.WINDOW_RESIZE_WAIT_TIME),window.removeEventListener("resize",ut(this).onWindowResize)},_e=async function(t){await Ge(this,!0,!1),Ot(this);!1!==_(this).reRenderOnResize&&window.addEventListener("resize",ut(this).onWindowResize)};function Me(t){var e,i;if(this.initializeStore(),function(t,e){Object.assign(t.options,e)}(this,t),y(this,t.positionData),e=this,i=t.callbacks,e.store.variables.essentials.callbacks=i,"string"==typeof t.el){const e=document.getElementById(t.el);if(!e)throw"No for element found for id "+t.el;f(this,e)}else{if(!(t.el instanceof Element))throw"Valid DOM Element or Id required";f(this,t.el)}Ce.call(this,t),Ee.call(this),!0===this.options.reRenderOnResize&&window.addEventListener("resize",ut(this).onWindowResize),setTimeout(async function(){await Ge(this,!1,t.autoArrange),Ot(this,!0)}.bind(this))}Me.prototype.constructor=Me,Me.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:ce.bind(this),onItemTouchStart:ue.bind(this),onItemMouseMove:be.bind(this),onItemTouchMove:we.bind(this),onItemMouseUp:ye.bind(this),onItemTouchEnd:Ie.bind(this),onItemContextMenu:ge.bind(this),onItemTouchContextMenu:pe.bind(this),onItemTouchCancel:ve.bind(this),onDeskMouseDown:kt.bind(this),onDeskTouchStart:zt.bind(this),onDeskMouseMove:jt.bind(this),onDeskTouchMove:Xt.bind(this),onDeskMouseUp:Yt.bind(this),onDeskTouchEnd:Ft.bind(this),onDeskTouchCancel:Zt.bind(this),onDeskTouchContextMenu:qt.bind(this),onDeskContextMenu:Kt.bind(this),onWindowResize:Re.bind(this),onWindowResizeTimerCallback:_e.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}}},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,MOUSE_DOWN_TIME:500,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,DESK_INTERACTION_MODE:"ADD",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250}}}},Me.prototype.renderItem=function(t){!function(t,e){const i=T(t),r=v(t),o=I(t),n=r.renderContent(e,o[e].width,o[e].height);Wt(t,n,i.$limberGridViewItems[e]),r.renderComplete&&r.renderComplete(e)}(this,t)},Me.prototype.getGridData=function(){const t=r(this),e=I(this),i=e.length,o=new Array(i);for(let r=0;r<i;r++)o[r]={x:m(e[r].x/t.WIDTH_SCALE_FACTOR),y:m(e[r].y/t.WIDTH_SCALE_FACTOR),width:m(e[r].width/t.WIDTH_SCALE_FACTOR),height:m(e[r].height/t.WIDTH_SCALE_FACTOR)};return{gridData:{height:t.GRID_HEIGHT,width:t.GRID_WIDTH,margin:t.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:t.MIN_HEIGHT_AND_WIDTH},positionData:o}},Me.prototype.setDeskInteractMode=function(t){De[t]&&c(this,"DESK_INTERACTION_MODE",t)},Me.prototype.setLatchMovedItem=function(t){Ae[t]&&c(this,"LATCH_MOVED_ITEM",t)},Me.prototype.addItem=function(t){if(!t){const e=r(this);t={width:e.DEFINED_MIN_HEIGHT_AND_WIDTH,height:e.DEFINED_MIN_HEIGHT_AND_WIDTH}}St(this,t)},Me.prototype.removeItem=function(t){Number.isInteger(t)&&function(t,e){const i=T(t),r=v(t),o=I(t);mt.call(t),o.splice(e,1),r.removePlugin&&r.removePlugin(i.$limberGridViewItems[e]),i.$limberGridView.removeChild(i.$limberGridViewItems[e]),x(t,[...i.$limberGridView.getElementsByClassName("limber-grid-view-item")]);const n=o.length;for(let t=0;t<n;t++)i.$limberGridViewItems[t].setAttribute("data-index",t);r.removeComplete&&r.removeComplete(e,i.$limberGridViewItems[e]),ht.call(t)}(this,t)},Me.prototype.setIsMobileCheck=function(t){this.options.isMobileCheck=t};e.default=Me}])}));
//# sourceMappingURL=index.js.map
