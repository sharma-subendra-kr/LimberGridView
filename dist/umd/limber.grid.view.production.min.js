/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.
 *
 * Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Stack"),require("IntervalTreeJS")):"function"==typeof define&&define.amd?define(["Stack","IntervalTreeJS"],t):"object"==typeof exports?exports.LimberGridView=t(require("Stack"),require("IntervalTreeJS")):e.LimberGridView=t(e.Stack,e.IntervalTreeJS)}(window,(function(e,t){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=4)}([function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var r=i(1),o=i(0);i(2),i(3);const n=function(e){return e.store.constants.privateConstants},s=function(e,t){e.store.constants.privateConstants.WIDTH=t},l=function(e,t){e.store.constants.privateConstants.HEIGHT=t},d=function(e,t){e.store.constants.privateConstants.WIDTH_SCALE_FACTOR=t},a=function(e,t){e.store.constants.privateConstants.MARGIN=t},c=function(e,t){e.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=t};var u=n;const h=function(e,t,i){e.store.constants.publicConstants.hasOwnProperty(t)&&(e.store.constants.publicConstants[t]=i)};var m=function(e){return e.store.constants.publicConstants};const b=function(e,t){e.store.variables.elements.$el=t},I=function(e,t){e.store.variables.elements.$limberGridViewItems=t};var w=function(e){return e.store.variables.elements};const y=function(e,t){const i=w(e),r=m(e);i.$limberGridView.scrollHeight-t<=r.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=t+r.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")},g=function(e,t,i){const r=w(e),o=m(e),n=u(e),s=r.$limberGridView.scrollTop;let l=!1;return t>0&&(i-t<o.AUTO_SCROLL_POINT&&(r.$limberGridView.scrollTop=s+o.AUTO_SCROLL_DISTANCE,l=!0),t<n.HEIGHT/10&&0!==s&&(r.$limberGridView.scrollTop=s-o.AUTO_SCROLL_DISTANCE,l=!0)),l},p=function(e,t){const i=t.length,r=new Array(i);for(let e=0;e<i;e++)r[e]={...t[e]};e.store.variables.essentials.positionData=r},v=function(e){return e.store.variables.essentials.positionData},x=function(e,t){const i=t.length,r=new Array(i);for(let e=0;e<i;e++)r[e]={...t[e]};e.store.variables.essentials.modifiedPositionData=r},T=function(e){return e.store.variables.essentials.modifiedPositionData},A=function(e){return e.store.variables.essentials.callbacks};const D=function(e,t){const i=w(e),r=u(e),o=i.$limberGridView.getBoundingClientRect();if(t.clientX>=o.left&&t.clientX<=o.left+o.width&&t.clientY>=o.top&&t.clientY<=o.top+o.height){const e=i.$limberGridView.scrollTop,n=i.$limberGridView.scrollLeft,s=t.clientX-o.left-r.PADDING_LEFT+n,l=t.clientY-o.top-r.PADDING_TOP+e;return!(s<0||l<0)&&{x:s,y:l}}return!1},f=function(e,t){const i=w(e),r=u(e),o=i.$limberGridView.getBoundingClientRect();let n;if(n="touchend"===t.type?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY},n.clientX>=o.left&&n.clientX<=o.left+o.width&&n.clientY>=o.top&&n.clientY<=o.top+o.height){const e=i.$limberGridView.scrollTop,t=i.$limberGridView.scrollLeft,s=n.clientX-o.left-r.PADDING_LEFT+t,l=n.clientY-o.top-r.PADDING_TOP+e;return!(s<0||l<0)&&{x:s,y:l}}return!1},G=function(e,t){const i=w(e).$limberGridViewItems[t.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(t.touches[0].clientX>=i.left&&t.touches[0].clientX<=i.left+i.width&&t.touches[0].clientY>=i.top&&t.touches[0].clientY<=i.top+i.height){return{x:t.touches[0].clientX-i.left,y:t.touches[0].clientY-i.top}}return!1},E=function(e){return e.options};var C=E;const _=(e,t)=>{const i=m(e),r=C(e),o=v(e),n=parseInt(t.currentTarget.attributes["data-index"].value);let s,l,d,a;if(1===t.which)s=Math.sqrt(Math.pow(0-t.offsetX,2)+Math.pow(0-t.offsetY,2)),d=t.offsetX,a=t.offsetY;else{if(0!==t.which)return!1;l=G(e,t),s=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),d=l.x,a=l.y}const c=t.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,u=t.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,h=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return r.itemMouseDownMoveCheck&&r.itemMouseDownMoveCheck(d,a,{...o[n]},n,t.target)||s<=i.MOVE_GUIDE_RADIUS&&!r.itemMouseDownMoveCheck?{type:"move",itemIndex:t.currentTarget.attributes["data-index"].value}:r.itemMouseDownResizeCheck&&r.itemMouseDownResizeCheck(d,a,{...o[n]},n,t.target)||d>=c&&d<=c+h&&a>=u&&a<=u+b&&!r.itemMouseDownResizeCheck?{type:"resize",itemIndex:t.currentTarget.attributes["data-index"].value}:void 0},R=(e,t)=>{const i=w(e),r=v(e)[t.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=r.width+"px",i.$limberGridViewPseudoItem.style.height=r.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${t.itemX}px,${t.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let e=0;e<o;e++)i.$limberGridViewItems[e].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},M=(e,t,i)=>{const r=w(e),o=v(e)[t.itemIndex];r.$limberGridViewHeightAdjustGuide.style.height="0px",r.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),r.$limberGridViewItems[t.itemIndex].classList.add("limber-grid-view-item-demo"),r.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),r.$pseudoContainerItem.style.width=o.width+"px",r.$pseudoContainerItem.style.height=o.height+"px",1===i.which?r.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(r.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`),r.$body.classList.add("limber-grid-view-body-tag-state-editing")},N=(e,t,i,r)=>{const o=w(e);"move"===r?(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),1===i.which?o.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(o.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`)):"resize"===r&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},H=(e,t)=>{const i=k(e);try{return t.x>i.tl.x&&t.x<i.tr.x&&t.y>i.tl.y&&t.y<i.bl.y}catch(e){return null}},$=(e,t)=>{const i=k(e);try{return t.x>=i.tl.x&&t.x<=i.tr.x&&t.y>=i.tl.y&&t.y<=i.bl.y&&!H(e,t)}catch(e){return null}},V=(e,t)=>{try{if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height)||isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return null;const i={x:e.x,y:e.y},r={x:e.x+e.width,y:e.y+e.height},o={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y+t.height};return!(i.x>=n.x||o.x>=r.x)&&!(i.y>=n.y||o.y>=r.y)}catch(e){return null}},S=(e,t)=>{try{if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height)||isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return null;const i={x:e.x,y:e.y},r={x:e.x+e.width,y:e.y+e.height},o={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y+t.height};return!(i.x>n.x||o.x>r.x)&&(!(i.y>n.y||o.y>r.y)&&!1===V(e,t))}catch(e){return null}},L=(e,t,i)=>{if(!V(e,t))return null;const r=k(e),o=k(t),n={subRectT:{tl:r.tl,tr:r.tr,br:{x:r.tr.x,y:o.tr.y},bl:{x:r.tl.x,y:o.tl.y}},subRectR:{tl:{x:o.tr.x,y:r.tr.y},tr:r.tr,br:r.br,bl:{x:o.br.x,y:r.br.y}},subRectB:{tl:{x:r.bl.x,y:o.bl.y},tr:{x:r.br.x,y:o.br.y},br:r.br,bl:r.bl},subRectL:{tl:r.tl,tr:{x:o.tl.x,y:r.tl.y},br:{x:o.bl.x,y:r.bl.y},bl:r.bl}},s=Object.keys(n);for(let e=0;e<s.length;e++)W(n[s[e]])||delete n[s[e]];let l,d,a,c,u,h,m,b,I,w,y,g,p,v,x,T,A;return n.subRectT&&n.subRectR&&(I={tl:n.subRectT.tl,tr:n.subRectR.tl,br:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},a={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectT.br,bl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y}},g={tl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},tr:n.subRectT.br,br:n.subRectR.br,bl:n.subRectR.bl}),n.subRectR&&n.subRectB&&(y={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectB.tr,bl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y}},u={tl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectR.bl},v={tl:n.subRectB.tl,tr:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},br:n.subRectR.bl,bl:n.subRectB.bl}),n.subRectB&&n.subRectL&&(T={tl:n.subRectL.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},bl:n.subRectB.tl},m={tl:n.subRectB.tl,tr:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},br:n.subRectL.br,bl:n.subRectB.bl},p={tl:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectL.br}),n.subRectL&&n.subRectT&&(x={tl:n.subRectT.bl,tr:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},br:n.subRectL.br,bl:n.subRectL.bl},l={tl:n.subRectT.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},w={tl:n.subRectL.tr,tr:n.subRectT.tr,br:n.subRectT.br,bl:{x:n.subRectL.tr.x,y:n.subRectT.bl.y}}),d=O(I,l)||O(w,a)||I||w,c=P(y,a)||P(g,u)||y||g,h=O(p,u)||O(v,m)||p||v,b=P(x,m)||P(T,l)||x||T,A=i?[l,d,a,c,u,h,m,b]:[j(l),j(d),j(a),j(c),j(u),j(h),j(m),j(b)],A=A.filter(e=>e),0===A.length&&(A=Object.keys(n).map(e=>i?n[e]:j(n[e]))),A},O=(e,t)=>{if(!e&&!t)return null;if(!V(j(e),j(t)))return null;let i=null;return e.tl.x===t.tl.x||Math.abs(e.tl.x-t.tl.x)<Math.abs(e.tr.x-t.tr.x)?i={tl:t.tr,tr:e.tr,br:e.br,bl:t.br}:(e.tr===t.tr||Math.abs(t.tl.x-e.tl.x)>Math.abs(t.tr.x-e.tr.x))&&(i={tl:e.tl,tr:t.tl,br:t.bl,bl:e.bl}),i},P=(e,t)=>{if(!e&&!t)return null;if(!V(j(e),j(t)))return null;let i=null;return e.tl.y===t.tl.y||Math.abs(e.tl.y-t.tl.y)<Math.abs(e.bl.y-t.bl.y)?i={tl:t.bl,tr:t.br,br:e.br,bl:e.bl}:(e.bl.y===t.bl.y||Math.abs(t.tl.y-e.tl.y)>Math.abs(t.bl.y-e.bl.y))&&(i={tl:e.tl,tr:e.tr,br:t.tr,bl:t.tl}),i},W=function(e){try{let t,i,r,o;return t=e.tr.x-e.tl.x,i=e.br.y-e.tr.y,r=e.br.x-e.bl.x,o=e.bl.y-e.tl.y,!(t<=0||i<=0||r<=0||o<=0)}catch(e){return null}},k=function(e){return{tl:{x:e.x,y:e.y},tr:{x:e.x+e.width,y:e.y},br:{x:e.x+e.width,y:e.y+e.height},bl:{x:e.x,y:e.y+e.height}}},j=function(e){return W(e)?{x:e.tl.x,y:e.tl.y,width:e.tr.x-e.tl.x,height:e.bl.y-e.tl.y}:null},z=(e,t)=>{let i;if(e.tl.x>=t.bl.x&&e.tl.x<t.br.x&&e.tl.y>=t.bl.y){let r=e.tr.x<t.tr.x?e.tr.x:t.tr.x;i={tl:{x:e.tl.x,y:t.tl.y},tr:{x:r,y:t.tl.y},br:{x:r,y:e.bl.y},bl:{x:e.bl.x,y:e.bl.y}}}if(e.tl.y>=t.tr.y&&e.tl.y<t.br.y&&e.tl.x>=t.tr.x){let r=e.br.y<t.br.y?e.br.y:t.br.y;i={tl:{x:t.tl.x,y:e.tl.y},tr:{x:e.tr.x,y:e.tr.y},br:{x:e.br.x,y:r},bl:{x:t.bl.x,y:r}}}if(e.tr.x<=t.br.x&&e.tr.x>t.bl.x&&e.tr.y>=t.bl.y){let r=e.tl.x>t.tl.x?e.tl.x:t.tl.x;i={tl:{x:r,y:t.tl.y},tr:{x:e.tr.x,y:t.tr.y},br:{x:e.br.x,y:e.br.y},bl:{x:r,y:e.bl.y}}}if(e.tr.y>=t.tl.y&&e.tr.y<t.bl.y&&e.tr.x<=t.tl.x){let r=e.bl.y<t.bl.y?e.bl.y:t.bl.y;i={tl:{x:e.tl.x,y:e.tl.y},tr:{x:t.tr.x,y:e.tl.y},br:{x:t.br.x,y:r},bl:{x:e.bl.x,y:r}}}if(e.br.x<=t.tr.x&&e.br.x>t.tl.x&&e.br.y<=t.tl.y){let r=e.tl.x>t.tl.x?e.tl.x:t.tl.x;i={tl:{x:r,y:e.tl.y},tr:{x:e.tr.x,y:e.tr.y},br:{x:e.tr.x,y:t.br.y},bl:{x:r,y:t.bl.y}}}if(e.br.y<=t.bl.y&&e.br.y>t.tl.y&&e.br.x<=t.tl.x){let r=e.tl.y>t.tl.y?e.tl.y:t.tl.y;i={tl:{x:e.tl.x,y:r},tr:{x:t.tr.x,y:r},br:{x:t.br.x,y:e.br.y},bl:{x:e.bl.x,y:e.bl.y}}}if(e.bl.x>=t.tl.x&&e.bl.x<t.tr.x&&e.bl.y<=t.tl.y){let r=e.tr.x<t.tr.x?e.tr.x:t.tr.x;i={tl:{x:e.tl.x,y:e.tl.y},tr:{x:r,y:e.tr.y},br:{x:r,y:t.br.y},bl:{x:e.bl.x,y:t.bl.y}}}if(e.bl.y<=t.br.y&&e.bl.y>t.tr.y&&e.bl.x>=t.tr.x){let r=e.tl.y>t.tl.y?e.tl.y:t.tl.y;i={tl:{x:t.tl.x,y:r},tr:{x:e.tr.x,y:r},br:{x:e.br.x,y:e.br.y},bl:{x:t.bl.x,y:e.bl.y}}}return i},U=(e,t,i)=>{const r=k(e),o=k(t);let n;return n=z(r,o),n||(n=z(o,r)),n&&(n=[n]),n||X(e,t)||X(t,e)||(n=((e,t,i)=>{const r=L(e,t,!0),o=new Array((null==r?void 0:r.length)||0);let n,s=0;const l=o.length;for(let t=0;t<l;t++)n=z(r[t],i),n&&!X(e,j(n))&&(o[s++]=n);return o.length=s,s?o:null})(e,t,o)),!!n&&(i?n:n.map(e=>j(e)))},X=(e,t)=>{const i=k(e),r=k(t);return i.tl.x<=r.tl.x&&i.tr.x>=r.tr.x&&i.tl.y<=r.tl.y&&i.bl.y>=r.bl.y},Y=(e,t)=>e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.tr.x===t.tr.x&&e.tr.y===t.tr.y&&e.br.x===t.br.x&&e.br.y===t.br.y&&e.bl.x===t.bl.x&&e.bl.y===t.bl.y,B=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),F=(e,t,i)=>{const r=v(e),o=T(e),n=u(e),s=r.length,l=new Array(s);let d=0;const a={...t};a.x-=n.MARGIN,a.y-=n.MARGIN,a.width+=2*n.MARGIN,a.height+=2*n.MARGIN;const c={x:0,y:0,height:0,width:0};for(let e=0;e<s;e++)c.x=r[e].x-n.MARGIN,c.y=r[e].y-n.MARGIN,c.width=r[e].width+2*n.MARGIN,c.height=r[e].height+2*n.MARGIN,V(c,a)&&e!==i&&(l[d++]=e,o[e].x=void 0,o[e].y=void 0);return l[d++]=i,l.length=d,l},Z=(e,t,i)=>{const r=v(e),o=T(e),n=u(e),s=r.length,l=new Array(s);let d=0;const a={...t};a.x-=n.MARGIN,a.y-=n.MARGIN,a.width+=2*n.MARGIN,a.height+=2*n.MARGIN;const c={x:0,y:0,height:0,width:0};for(let e=0;e<s;e++)c.x=r[e].x-n.MARGIN,c.y=r[e].y-n.MARGIN,c.width=r[e].width+2*n.MARGIN,c.height=r[e].height+2*n.MARGIN,V(c,a)&&e!==i&&(l[d++]=e,o[e].x=void 0,o[e].y=void 0);return l[d++]=i,l.length=d,l},q=(e,t,i,r)=>{const o=v(e),n=u(e);if(t<0||t>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"Width or Height is not a number.";if(o[t].x+i+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";if(i<n.DEFINED_MIN_HEIGHT_AND_WIDTH||r<n.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${n.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;if(r+2*n.MARGIN>n.HEIGHT)throw"Height cannot be greater than height of container.";return!0},K=(e,t,i,r)=>{const o=v(e),n=u(e);if(t<0||t>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"toX or toY is not a number.";if(i<n.MARGIN||r<n.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[t].width+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";return!0},Q=e=>{const t=v(e),i=w(e),r=t.length;for(var o=0;o<r;o++)i.$limberGridViewItems[o].style.transform="translate("+t[o].x+"px, "+t[o].y+"px)",i.$limberGridViewItems[o].classList.remove("limberGridViewItemDemo")},J=(e,t,i,r)=>{const o=v(e),n=u(e),s=o.length,l={x:0,y:0,height:0,width:0},d={x:t,y:i};let a,c,h,m,b,I,w,y,g,p=Number.MAX_SAFE_INTEGER,x=Number.MAX_SAFE_INTEGER,T=!1;for(let e=0;e<s;e++)l.x=o[e].x-n.MARGIN,l.y=o[e].y-n.MARGIN,l.width=o[e].width+2*n.MARGIN,l.height=o[e].height+2*n.MARGIN,(H(l,d)||$(l,d))&&(a=e,t=o[a].x,i=o[a].y),e!==r&&(c={x:l.x,y:l.y},h={x:l.x+l.width,y:l.y},m=B(c,d),b=B(h,d),m<p&&m<x&&d.x<c.x&&m<=2*n.MIN_HEIGHT_AND_WIDTH/3&&c.x-n.MARGIN-o[r].width>=n.MARGIN&&(I=c.x-n.MARGIN-o[r].width,w=c.y+n.MARGIN,p=m,T=!0,y=e,g="left"),b<x&&b<p&&d.x>h.x&&b<=2*n.MIN_HEIGHT_AND_WIDTH/3&&h.x+n.MARGIN+o[r].width<n.WIDTH&&(I=h.x+n.MARGIN,w=h.y+n.MARGIN,x=b,T=!0,y=e,g="right"));return{to:{toX:t,toY:i},toAdj:{toX:I,toY:w},overlappedItemIndex:a,isToAdjPresent:T,toAdjIndex:y,toAdjDirection:g}},ee=(e,t,i,r,o,n)=>{const s=v(e),l=u(e);let d=Number.MAX_SAFE_INTEGER,a=0,c=Number.MAX_SAFE_INTEGER,h=0;const m=t.length;for(let e=0;e<m;e++)s[t[e]].y<d&&(d=s[t[e]].y),s[t[e]].y+s[t[e]].height>a&&(a=s[t[e]].y+s[t[e]].height),s[t[e]].x<c&&(c=s[t[e]].x),s[t[e]].x+s[t[e]].width>h&&(h=s[t[e]].x+s[t[e]].width);return r>a&&(a=r),i>h&&(h=i),o<d&&(d=o),n>a&&(a=n),{minX:c-l.MARGIN,maxX:h+l.MARGIN,minY:d-l.MARGIN,maxY:a+l.MARGIN}},te=(e,t,i,r)=>{let o,n;t.tl.y>0&&(o={tl:{x:i,y:0},tr:{x:r,y:0},br:{x:r,y:t.tr.y},bl:{x:i,y:t.tl.y}});const s=((e,t,i)=>{const r=v(e),o=T(e),n=u(e);let s,l,d=0;const a=r.length;for(let e=0;e<a;e++)s=oe(n.MARGIN,r[e]),l=oe(n.MARGIN,o[e]),r[e].y+r[e].height>d&&s.x<i&&s.x+s.width>t&&(d=r[e].y+r[e].height),o[e].y+o[e].height>d&&l.x<i&&l.x+l.width>t&&(d=o[e].y+o[e].height);return d})(e,i,r);return s>t.bl.y&&(n={tl:{x:i,y:t.bl.y},tr:{x:r,y:t.bl.y},br:{x:r,y:s},bl:{x:i,y:s}}),{topWorkSpaceCo:o,bottomWorkSpaceCo:n}},ie=(e,t,i=!1)=>{const r=T(e),o=u(e),n=r.length,s=new Array(n);let l=0;for(let e=0;e<n;e++)V(t,oe(o.MARGIN,r[e]))&&(s[l++]=i?e:r[e]);return s.length=l,s},re=(e,t,i,r,o,n,s,l=!1)=>{const d=T(e),a=u(e),c={tl:{...(null==i?void 0:i.tl)?i.tl:t.tl},tr:{...(null==i?void 0:i.tr)?i.tr:t.tr},br:{...t.br},bl:{...t.bl}},h=j(c),m=j(r),b=j(o),I=s.filter(e=>!n[e]),w=d.length,y=new Array(w);let g=0;const p=new Array(w);let v=0;for(let e=0;e<w;e++){const t=oe(a.MARGIN,d[e]);V(b,t)&&(n[e]||V(h,t)||V(m,t)&&!X(m,t)?p[v++]=l?e:d[e]:V(m,t)&&X(m,t)&&!n[e]&&(y[g++]=e,d[e].x=void 0,d[e].y=void 0))}return p.length=v,y.length=g,{updatedItemsToArrange:[...I,...y],itemsInWorkSpace:p}},oe=(e,t)=>{const i={...t};return i.x-=e,i.y-=e,i.width+=2*e,i.height+=2*e,i},ne=(e,t)=>e.d.rect.x===t.d.rect.x?e.d.rect.y-t.d.rect.y:e.d.rect.x-t.d.rect.x,se=(e,t)=>e.d.rect.y===t.d.rect.y?e.d.rect.x-t.d.rect.x:e.d.rect.y-t.d.rect.y,le=function(e){return(t,i,r)=>{if(o=k(e),n=k(t.d.rect),(null==o||null===(s=o.tl)||void 0===s?void 0:s.x)&&(null==o||null===(l=o.tr)||void 0===l?void 0:l.x)&&(null==n||null===(d=n.tl)||void 0===d?void 0:d.x)&&(null==o||null===(a=o.tr)||void 0===a?void 0:a.x)&&!(o.tl.x>=n.tr.x||n.tl.x>=o.tr.x)&&!Y(k(e),k(t.d.rect)))return!0;var o,n,s,l,d,a}},de=function(e){return(t,i,r)=>{if(V(e,t.d.rect))return!0}},ae=function(e){return(t,i,r)=>{if(V(e,t.d.rect)||S(e,t.d.rect))return!0}},ce=function(e,t){return(i,r,o)=>{if(X(i.d.rect,e)&&i.d!==t)return!0}},ue=(e,t)=>(e.width+e.height)/t,he=(e,t,i)=>{const r=e.length;let o,n=Number.MAX_SAFE_INTEGER;const s={x:i.x,y:i.y},l={x:0,y:0};let d;for(let t=0;t<r;t++)l.x=e[t].d.rect.x,l.y=e[t].d.rect.y,o=B(s,l),o<n&&(d=e[t],n=o);return d},me=(e,t,i)=>{const r=T(e),o=t.length;for(let e=0;e<o;e++)r[t[e]].y+=i},be=function(e,t,i){const r=v(e),o=w(e),n=r.length;for(let e=0;e<n;e++)r[e].y>=t&&(r[e].y-=i,o.$limberGridViewItems[e].style.transform="translate("+r[e].x+"px, "+r[e].y+"px)")},Ie=function(e,t,i,r,o){const n=u(e),s=v(e);var l={x:t-n.MARGIN,y:i-n.MARGIN,width:r+2*n.MARGIN,height:o+2*n.MARGIN};if(t<0||i<0)return!1;if("number"!=typeof r||"number"!=typeof o)return!1;if(t+r>n.WIDTH)return!1;if(r<50||o<50)return!1;let d;const a=s.length;for(let e=0;e<a;e++)if(d=V(oe(n.MARGIN,s[e]),l)||S(oe(n.MARGIN,s[e]),l),d)return!1;return!0},we=function(e,t,i,r,o){const n=u(e),s=v(e),l={x:0,y:i,width:n.WIDTH,height:o};if("number"!=typeof r||"number"!=typeof o)return!1;let d,a=i+o,c=i,h=!1;const m=s.length;for(let e=0;e<m;e++){if(X(l,oe(n.MARGIN,s[e])))return!1;if(d=V(l,oe(n.MARGIN,s[e]))||S(l,oe(n.MARGIN,s[e])),d){h=!0;const t={x:s[e].x,y:s[e].y-n.MARGIN},i={x:s[e].x,y:s[e].y+s[e].height+n.MARGIN};s[e].y-n.MARGIN<a&&(H(l,t)||$(l,t))&&(a=s[e].y-n.MARGIN),s[e].y+s[e].height+n.MARGIN>c&&(H(l,i)||$(l,i))&&(c=s[e].y+s[e].height+n.MARGIN)}}return h?a-c>0&&{y:c,shiftHeight:a-c}:{y:i,shiftHeight:o}},ye=e=>{let t,i;const r=e.length;for(let o=0;o<r;o++)i=Math.floor(Math.random()*(o+1)),t=e[o],e[o]=e[i],e[i]=t;return e};var ge=function(e,t){return e.store.variables.trees[t]};var pe=function(e,t){return e.store.variables.stacks[t]};const ve=(e,t,i)=>{let r,o;const n={integrateTop:!1,integrateBottom:!1},s=ge(e,"it");if(t){r=ie(e,j(t));const i=xe(t,r,s);i<t.bl.y&&(t.tl.y=i,t.tr.y=i,n.integrateTop=!0)}if(i){o=ie(e,j(i));const t=Te(i,o,s);t>i.tl.y&&(i.bl.y=t,i.br.y=t,n.integrateBottom=!0)}return n},xe=(e,t,i)=>{i.emptyTree();const r=t.length;for(let e=0;e<r;e++)i.insert({low:t[e].y,high:t[e].y+t[e].height,d:{id:-1,rect:t[e]}});let o,n=e.bl.y;for(let s=0;s<r;s++)o=i.findAll({low:t[s].y+t[s].height,high:e.bl.y},null,null,le(t[s])),!o.length&&t[s].y+t[s].height<n&&(n=t[s].y+t[s].height);return n},Te=(e,t,i)=>{i.emptyTree();const r=t.length;for(let e=0;e<r;e++)i.insert({low:t[e].y,high:t[e].y+t[e].height,d:{id:-1,rect:t[e]}});let o,n=e.tl.y;for(let s=0;s<r;s++)o=i.findAll({low:e.tl.y,high:t[s].y},null,null,le(t[s])),!o.length&&t[s].y>n&&(n=t[s].y);return n},Ae=(e,t,i,r,o)=>{const n=u(e),s=ge(e,"it");let l,d;s.emptyTree(),s.insert({low:i.tl.x,high:i.tr.x,d:{id:o.idCount++,rect:t}});const a={low:0,high:0};let c,h,m=0,b=0;const I=r.length;for(let e=0;e<I;e++){l=k(r[e]),d=oe(n.MARGIN,r[e]),a.low=l.tl.x,a.high=l.tr.x,c=s.findAll(a,null,null,de(d)),m=c.length;for(let e=0;e<m;e++){h=L(c[e].d.rect,d,!0),s.remove(c[e].interval,c[e].d),b=h.length;for(let e=0;e<b;e++)s.insert({low:h[e].tl.x,high:h[e].tr.x,d:{id:o.idCount++,rect:j(h[e])}})}}return{it:s}},De=(e,t,i)=>{let r="x",o="width";"y"===i&&(r="y",o="height");const n=e.findAll({low:t.d.rect[r],high:t.d.rect[r]+t.d.rect[o]},null,null,(s=t.d.rect,(e,t,i)=>{if(Y(k(s),k(e.d.rect))||X(e.d.rect,s))return!0}));var s;const l=(null==n?void 0:n.length)||0;return l||e.insert({low:t.d.rect[r],high:t.d.rect[r]+t.d.rect[o],d:t.d}),!!l},fe=(e,t,i,r,o)=>{let n=!1;for(;!t.isEmpty();){const e=t.pop();n=!1;const s=i.findAll(e.interval,null,null,ae(e.d.rect)),l=(null==s?void 0:s.length)||0;if(l>0){for(let t=0;t<l;t++){const l=s[t],d=U(l.d.rect,e.d.rect);if(1===d.length){const t=d[0];X(t,l.d.rect)&&i.remove(l.interval,l.d),X(t,e.d.rect)&&(n=!0);const s={d:{id:r.idCount++,rect:t}};De(i,s,o)}}!1===n&&De(i,{d:e.d},o)}else i.insert({...e.interval,d:e.d})}},Ge=e=>{const t=e.getSortedData(),i=t.length;for(let r=0;r<i;r++){const i=t[r],o=e.findAll(i.interval,null,null,ce(i.d.rect,i.d));(null==o?void 0:o.length)&&e.remove(i.interval,i.d)}},Ee=async(e,t,i,r)=>{let o;const n=pe(e,"stack");Array.isArray(t)?(ye(t),n.setData(t.sort(ne)),o=ge(e,"it"),o.emptyTree()):(ye(r),n.setData(r.sort(ne)),o=t),fe(0,n,o,i,"x"),Ge(o);const s=o.getSortedData();ye(s);const l=s.length;for(let e=0;e<l;e++)s[e].interval.low=s[e].d.rect.y,s[e].interval.high=s[e].d.rect.y+s[e].d.rect.height;n.setData(s.sort(se)),o.emptyTree(),fe(0,n,o,i,"y"),Ge(o);const d=o.getSortedData();o.emptyTree(),ye(d);const a=d.length;for(let e=0;e<a;e++)o.insert({low:d[e].d.rect.x,high:d[e].d.rect.x+d[e].d.rect.width,d:d[e].d});return{mergedRectsIt:o}},Ce=async(e,t,i,r,o,n,s)=>{const l=T(e),d=v(e),a=u(e),c={},h={};let m=i.getSortedData();const b=t.length,I=pe(e,"itemsToArrangeStack");I.empty();const w=((e,t)=>{const i=T(e),r=t.length;let o,n,s=0,l=0,d=0;for(let e=0;e<r;e++)o=i[t[e]],o.width>l&&(l=o.width),o.height>s&&(s=o.height);d=l+s;const a=new Array(r);for(let e=0;e<r;e++)o=i[t[e]],n=ue(o,d),a[e]={score:n,d:t[e]};return a.sort((e,t)=>e.score-t.score),a})(e,t);for(let e=0;e<b;e++)I.push(w[e]);let y,g,p;const x=pe(e,"resStack"),A=pe(e,"garbageStack");for(;!I.isEmpty();){x.empty(),y=I.pop(),g=l[y.d],p=d[y.d];let t=oe(a.MARGIN,g);const r=m.length;for(let e=0;e<r;e++){const i=m[e].d.rect;i.width>=t.width&&i.height>=t.height&&x.push(m[e])}if(x.isEmpty())continue;const n=he(x.getData(),(g.width,g.height),p);g.x=n.d.rect.x+a.MARGIN,g.y=n.d.rect.y+a.MARGIN,c[y.d]=g,o&&X(o,n.d.rect)&&(h[y.d]=y.d),A.empty();const u=i.findAll(n.interval),b=u.length;t=oe(a.MARGIN,g);for(let e=0;e<b;e++){const r=u[e],o=L(r.d.rect,t),n=(null==o?void 0:o.length)||0;for(let e=0;e<n;e++)A.push({interval:{low:o[e].x,high:o[e].x+o[e].width},d:{id:s.idCount++,rect:o[e]}});n&&i.remove(r.interval,r.d)}const{mergedRectsIt:w}=await Ee(e,i,s,A.getData());m=(i=w).getSortedData()}return{arranged:c,itemsInBottomWorkSpace:h}},_e=async(e,t,i,r)=>{const o=u(e),n=T(e),s=performance.now(),l={idCount:0},{minY:d,maxY:a}=ee(e,t,void 0,void 0,i,r),c=new Array(t.length-1),h=t.length-1;for(let e=0;e<h;e++)c[e]=t[e];const m={tl:{x:0,y:d},tr:{x:o.WIDTH,y:d},br:{x:o.WIDTH,y:a},bl:{x:0,y:a}},b={tl:{...m.tl},tr:{...m.tr},br:{...m.br},bl:{...m.bl}},{topWorkSpaceCo:I,bottomWorkSpaceCo:w}=te(e,m,0,o.WIDTH),y=ve(e,I,w);y.integrateTop&&(b.tl={...I.tl},b.tr={...I.tr}),y.integrateBottom&&(b.br={...w.br},b.bl={...w.bl});let g=ie(e,j(w),!0);const p=((e,t,i=!1)=>{const r=T(e),o=u(e);if(!t)return[];const n=r.length,s=new Array(n);let l=0;for(let e=0;e<n;e++)t.bl.y<=oe(o.MARGIN,r[e]).y&&(s[l++]=i?e:r[e]);return s.length=l,s})(e,w,!0);let v=j(b),x=ie(e,v);const A=(o.DEFINED_MIN_HEIGHT_AND_WIDTH-2*o.MARGIN)/2;let D=0,f={},G=0,E=0;for(;G!==h;){const{it:t}=Ae(e,v,b,x,l),i=t.getSortedData(),{mergedRectsIt:r}=await Ee(e,i,l),{arranged:o,itemsInBottomWorkSpace:n}=await Ce(e,c.filter(e=>!f[e]),r,j(I),j(w),0,l);g=[...g,...Object.keys(n)],f={...f,...o};const s=Object.values(o);if(x=[...x,...s],G+=s.length,G!==h&&(E++,m.br.y+=A,m.bl.y+=A,w&&(w.tl.y+=A,w.tr.y+=A,w.br.y+=A,w.bl.y+=A),b.br.y+=A,b.bl.y+=A,v=j(b),me(e,g,A)),D++,D>1e3)throw"Arrange time out"}if(E>0){me(e,p,A*E);let t=g.length;for(let e=0;e<t;e++)f[g[e]]=n[g[e]];t=p.length;for(let e=0;e<t;e++)f[p[e]]=n[p[e]]}const C=performance.now();return console.log("p1: ",s),console.log("p2: ",C),console.log("workSpaceResizeCount",E),console.log("arrange total: ",C-s),f},Re=async(e,t,i,r)=>{const o=u(e),n=performance.now(),s={idCount:0},{minX:l,maxX:d,minY:a,maxY:c}=ee(e,t,r,i,void 0,void 0);let h=new Array(t.length-1),m=t.length-1;for(let e=0;e<m;e++)h[e]=t[e];const b={tl:{x:0,y:a},tr:{x:o.WIDTH,y:a},br:{x:o.WIDTH,y:c},bl:{x:0,y:c}},I={tl:{...b.tl},tr:{...b.tr},br:{...b.br},bl:{...b.bl}},{topWorkSpaceCo:w,bottomWorkSpaceCo:y}=te(e,b,0,o.WIDTH),g=ve(e,w,y);g.integrateTop&&(I.tl={...w.tl},I.tr={...w.tr}),g.integrateBottom&&(I.br={...y.br},I.bl={...y.bl});const p={tl:{x:l,y:a},tr:{x:d,y:a},br:{x:d,y:c},bl:{x:l,y:c}},v={tl:{...p.tl},tr:{...p.tr},br:{...p.br},bl:{...p.bl}},{topWorkSpaceCo:x,bottomWorkSpaceCo:T}=te(e,p,l-o.MARGIN,d+o.MARGIN);ve(e,x).integrateTop&&(v.tl={...x.tl},v.tr={...x.tr}),T&&(v.br={...T.br},v.bl={...T.bl});const A=j(I);let D=ie(e,A),f=j(v);const G=2*o.DEFINED_MIN_HEIGHT_AND_WIDTH;let E=0,C={},_=0,R=0;for(;_!==m;){let t;if(0===E){const{it:i}=Ae(e,A,I,D,s);t=i}else{if(1===E){const{itemsInWorkSpace:t,updatedItemsToArrange:i}=re(e,p,x,T,v,C,h);D=t,h=i,m=i.length+_,E++;continue}if(E>=2){const{it:i}=Ae(e,f,v,D,s);t=i}}const i=t.getSortedData(),{mergedRectsIt:r}=await Ee(e,i,s),{arranged:o}=await Ce(e,h.filter(e=>!C[e]),r,j(w),j(y),0,s);C={...C,...o};const n=Object.values(o);if(D=[...D,...n],_+=n.length,_!==m&&E>=2&&(R++,v.br.y+=G,v.bl.y+=G,f=j(v)),E++,E>1e3)throw"Arrange time out"}const M=performance.now();return console.log("p1: ",n),console.log("p2: ",M),console.log("workSpaceResizeCount",R),console.log("arrange total: ",M-n),C},Me=async(e,t,i)=>{const r=u(e),o=performance.now(),n={idCount:0},s=r.WIDTH,l=i,d=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,a=t.length,c={tl:{x:0,y:l},tr:{x:s,y:l},br:{x:s,y:d},bl:{x:0,y:d}},h={tl:{...c.tl},tr:{...c.tr},br:{...c.br},bl:{...c.bl}},{topWorkSpaceCo:m}=te(e,c,0,r.WIDTH);ve(e,m).integrateTop&&(h.tl={...m.tl},h.tr={...m.tr});let b=j(h),I=ie(e,b);const w=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let y=0,g={},p=0,v=0;for(;p!==a;){const{it:i}=Ae(e,b,h,I,n),r=i.getSortedData(),{mergedRectsIt:o}=await Ee(e,r,n),{arranged:s}=await Ce(e,t.filter(e=>!g[e]),o,j(m),void 0,0,n);g={...g,...s};const l=Object.values(s);if(I=[...I,...l],p+=l.length,p!==a&&(v++,c.br.y+=w,c.bl.y+=w,h.br.y+=w,h.bl.y+=w,b=j(h)),y++,y>1e4)throw"Arrange time out"}const x=performance.now();return console.log("p1: ",o),console.log("p2: ",x),console.log("workSpaceResizeCount",v),console.log("arrange total: ",x-o),g},Ne=function(e,t,i){e.store.variables.status[t]=i},He=function(e,t){return e.store.variables.status[t]};var $e=function(e,t){return e.store.constants.messages[t]};const Ve=async function(e,t,i){const r=v(this),o=w(this),n=A(this),s=m(this);if(e=parseInt(e),s.LATCH_MOVED_ITEM){i=He(this,"resizeDemo").height}q(this,e,t,i),Q(this),x(this,r);const l=T(this);l[e].width=t,l[e].height=i;const d={x:r[e].x,y:r[e].y,width:t,height:i},a=F(this,d,e);let c;c=s.USE_VERTICAL_ARR_ON_RESIZE?await Re(this,a,d.y+d.height,d.x+d.width):await _e(this,a),p(this,l),o.$limberGridViewItems[e].style.width=l[e].width+"px",o.$limberGridViewItems[e].style.height=l[e].height+"px";const u=Object.keys(c),h=u.length;for(let e=0;e<h;e++){const t=u[e],i=c[t];o.$limberGridViewItems[t].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.resizeComplete(e,t,i,u)},Se=async function(e,t,i){const r=v(this),o=w(this),n=m(this);let s;e=parseInt(e),n.LATCH_MOVED_ITEM&&(s=((e,t,i,r)=>{const o=v(e),n=u(e),s=o.length,l={x:0,y:0,height:0,width:0},d=(o[r].x,o[r].y),a=(o[r].x,o[r].y),c={x:o[r].x+t,y:o[r].y+i},h={x:o[r].x,y:o[r].y+i};let m,b,I,w,y,g,p,x=Number.MAX_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,A=!1;for(let e=0;e<s;e++)l.x=o[e].x,l.y=o[e].y,l.width=o[e].width,l.height=o[e].height,e!==r&&(m={x:l.x,y:l.y+l.height},b={x:l.x+l.width,y:l.y+l.height},w=B(m,c),I=B(b,h),w<T&&w<x&&c.x<m.x&&Math.abs(c.y-m.y)<=n.MIN_HEIGHT_AND_WIDTH/10&&c.x+n.MARGIN<=n.WIDTH&&(i=m.y-a,T=w,A=!0,y=e,g="right",p=m),I<x&&I<T&&h.x>b.x&&Math.abs(h.y-b.y)<=n.MIN_HEIGHT_AND_WIDTH/10&&c.x+n.MARGIN<=n.WIDTH&&(i=b.y-d,x=I,A=!0,y=e,g="left",p=b));return{height:i,isToAdjPresent:A,toAdjIndex:y,toAdjDirection:g,latchPoint:p}})(this,t,i,e),Ne(this,"resizeDemo",s),i=s.height),s.isToAdjPresent?o.$limberGridViewCrossHairGuide.style.transform=`translate(${s.latchPoint.x-n.CROSS_HAIR_WIDTH/2}px, ${s.latchPoint.y-n.CROSS_HAIR_HEIGHT/2}px)`:o.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*n.CROSS_HAIR_WIDTH}px, -${2*n.CROSS_HAIR_HEIGHT}px)`,q(this,e,t,i),Q(this),x(this,r);const l=T(this);l[e].width=t,l[e].height=i;const d={x:r[e].x,y:r[e].y,width:t,height:i},a=F(this,d,e);let c;c=n.USE_VERTICAL_ARR_ON_RESIZE?await Re(this,a,d.y+d.height,d.x+d.width):await _e(this,a);const h=Object.keys(c),b=h.length;for(let e=0;e<b;e++){const t=h[e],i=c[t];o.$limberGridViewItems[t].style.transform=`translate(${i.x}px, ${i.y}px)`}},Le=async function(e,t,i){const r=v(this),o=w(this),n=A(this),s=m(this);if(e=parseInt(e),s.LATCH_MOVED_ITEM){const r=He(this,"moveDemo");if(null==r?void 0:r.latchingAdjacent)t=r.adjustedPt.toAdj.toX,i=r.adjustedPt.toAdj.toY;else if(r)t=r.adjustedPt.to.toX,i=r.adjustedPt.to.toY;else{const r=J(this,t,i,e);t=r.to.toX,i=r.to.toY}}K(this,e,t,i),Q(this),x(this,r);const l=T(this);l[e].x=t,l[e].y=i;const d={x:t,y:i,width:r[e].width,height:r[e].height},a=Z(this,d,e),c=await _e(this,a,i,i+r[e].height);p(this,l),o.$limberGridViewItems[e].classList.remove("limberGridViewItemDemo"),o.$limberGridViewItems[e].style.transform=`translate(${l[e].x}px, ${l[e].y}px)`,s.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[e].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[e].style.transition=""},s.ANIMATE_TIME));const u=Object.keys(c),h=u.length;for(let e=0;e<h;e++){const t=u[e],i=c[t];o.$limberGridViewItems[t].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.moveComplete(e,t,i,u)},Oe=async function(e,t,i){const r=v(this),o=w(this),n=m(this);if(e=parseInt(e),n.LATCH_MOVED_ITEM){var s,l,d,a;const c=J(this,t,i,e);let u=He(this,"moveDemo");if(!isNaN(null===(s=u)||void 0===s||null===(l=s.adjustedPt)||void 0===l?void 0:l.overlappedItemIndex)&&H(r[u.adjustedPt.overlappedItemIndex],{x:t,y:i})){u={...u,adjustedPt:c};let e=!1;!u.latchingAdjacent&&u.adjustedPt.isToAdjPresent?(t=u.adjustedPt.toAdj.toX,i=u.adjustedPt.toAdj.toY,e=!0):(t=u.adjustedPt.to.toX,i=u.adjustedPt.to.toY),Ne(this,"moveDemo",{...u,latchingAdjacent:e})}else{let e=!1;isNaN(c.overlappedItemIndex)&&c.isToAdjPresent?(t=c.toAdj.toX,i=c.toAdj.toY,e=!0):(t=c.to.toX,i=c.to.toY),Ne(this,"moveDemo",{adjustedPt:c,latchingAdjacent:e})}u=He(this,"moveDemo"),isNaN(null===(d=u)||void 0===d||null===(a=d.adjustedPt)||void 0===a?void 0:a.overlappedItemIndex)||(o.$limberGridViewMoveGuide.style.transform="translate("+r[u.adjustedPt.overlappedItemIndex].x+"px, "+r[u.adjustedPt.overlappedItemIndex].y+"px)",o.$limberGridViewMoveGuide.style.width=r[u.adjustedPt.overlappedItemIndex].width+"px",o.$limberGridViewMoveGuide.style.height=r[u.adjustedPt.overlappedItemIndex].height+"px",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active"),u.latchingAdjacent?o.$limberGridViewMoveGuide.innerHTML=$e(this,"latchedMoveDemo2"):o.$limberGridViewMoveGuide.innerHTML=$e(this,"latchedMoveDemo1")),u.latchingAdjacent?o.$limberGridViewCrossHairGuide.style.transform=`translate(${t-n.CROSS_HAIR_WIDTH/2}px, ${i-n.CROSS_HAIR_HEIGHT/2}px)`:o.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*n.CROSS_HAIR_WIDTH}px, -${2*n.CROSS_HAIR_HEIGHT}px)`}K(this,e,t,i),Q(this),x(this,r);const c=T(this);c[e].x=t,c[e].y=i;const u={x:t,y:i,width:r[e].width,height:r[e].height},h=Z(this,u,e),b=await _e(this,h,i,i+r[e].height);o.$limberGridViewItems[e].classList.add("limberGridViewItemDemo");const I=Object.keys(b),y=I.length;for(let e=0;e<y;e++){const t=I[e],i=b[t];o.$limberGridViewItems[t].style.transform=`translate(${i.x}px, ${i.y}px)`}},Pe=e=>e.store.variables.bindedFunctions,We=function(e){return e.store.variables.eventSpecific.itemInteraction},ke=function(e){return e.store.variables.eventSpecific.deskInteraction},je=function(e){const t=w(this),i=m(this),r=v(this),o=We(this),n=Pe(this);if(1!==e.which)return;const s=_(this,e);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),clearTimeout(o.longPressCheck),o.longPressCheck=setTimeout(Ue.bind(this,e),i.MOUSE_DOWN_TIME),e.preventDefault()):"resize"===o.userActionData.type&&(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,t.$limberGridView.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,R(this,o.userActionData),e.preventDefault()),e.stopPropagation())},ze=function(e){const t=w(this),i=m(this),r=v(this),o=We(this),n=Pe(this);if(1!==e.touches.length)return void Ke.call(this,e);if(0!==e.which)return void Ke.call(this,e);if(!1===G(this,e))return;const s=_(this,e);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.longTouchCheck=setTimeout(Xe.bind(this,e),i.TOUCH_HOLD_TIME),e.preventDefault()):"resize"===o.userActionData.type&&(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,t.$limberGridView.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,R(this,o.userActionData),e.preventDefault()),e.stopPropagation())},Ue=function(e){const t=We(this);!1===t.mouseDownCancel&&(t.mouseDownTimerComplete=!0,M(this,t.userActionData,e))},Xe=function(e){const t=We(this);!1===t.touchHoldCancel&&(t.touchHoldTimerComplete=!0,M(this,t.userActionData,e))},Ye=function(e){const t=w(this),i=u(this),r=m(this),o=We(this);if(!0===o.mouseDownTimerComplete)if("move"===o.userActionData.type){N(this,o.userActionData,e,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const t=D(this,e);if(!1!==t){const e=t.y;y(this,e),o.showMoveDemoTimeOutVariable=setTimeout(Je.bind(this,o.userActionData.itemIndex,t),r.DEMO_WAIT_TIME)}}else{N(this,o.userActionData,e,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=t.$limberGridView.scrollTop,s=t.$limberGridView.scrollLeft,l=o.userActionData.itemX,d=o.userActionData.itemY,a=e.offsetX-l+s-i.PADDING_LEFT,c=e.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=e.offsetY+n;y(this,u),a>0&&c>0&&(t.$limberGridViewPseudoItem.style.width=a+"px",t.$limberGridViewPseudoItem.style.height=c+"px",t.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),o.showResizeDemoTimeOutVariable=setTimeout(et.bind(this,o.userActionData.itemIndex,a,c),r.DEMO_WAIT_TIME)}else o.mouseDownCancel=!0,qe.call(this,e);e.preventDefault(),e.stopPropagation()},Be=function(e){const t=w(this),i=u(this),r=m(this),o=We(this);if(!0===o.touchHoldTimerComplete&&1===e.touches.length)if("move"===o.userActionData.type){N(this,o.userActionData,e,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const n=f(this,e);if(!1!==n){const e=t.$limberGridView.scrollTop,s=t.$limberGridView.scrollLeft,l=t.$limberGridView.getBoundingClientRect(),d=(t.$limberGridView.offsetWidth,l.left,t.$limberGridView.offsetHeight-l.top),a=(n.x,i.PADDING_LEFT,n.y+i.PADDING_TOP-e),c=n.y;y(this,c);!0!==g(this,a,d)&&(o.showMoveDemoTimeOutVariable=setTimeout(Je.bind(this,o.userActionData.itemIndex,n),r.DEMO_WAIT_TIME))}}else{N(this,o.userActionData,e,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=o.userActionData.itemX,s=o.userActionData.itemY,l=f(this,e),d=l.x-n,a=l.y-s;if(!1!==l&&(o.userActionData.newWidth=d,o.userActionData.newHeight=a,d>0&&a>0&&(t.$limberGridViewPseudoItem.style.width=d+"px",t.$limberGridViewPseudoItem.style.height=a+"px",t.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(a)}px`))),!1!==l){const e=t.$limberGridView.scrollTop,n=t.$limberGridView.scrollLeft,s=t.$limberGridView.getBoundingClientRect(),c=(t.$limberGridView.offsetWidth,s.left,t.$limberGridView.offsetHeight-s.top),u=(l.x,i.PADDING_LEFT,l.y+i.PADDING_TOP-e),h=l.y;y(this,h);!0!==g(this,u,c)&&(o.showResizeDemoTimeOutVariable=setTimeout(et.bind(this,o.userActionData.itemIndex,d,a),r.DEMO_WAIT_TIME))}}else o.touchHoldCancel=!0,Ke.call(this,e);e.stopPropagation()},Fe=async function(e){const t=We(this);if(clearTimeout(t.showMoveDemoTimeOutVariable),clearTimeout(t.showResizeDemoTimeOutVariable),!0===t.mouseDownTimerComplete)if("move"===t.userActionData.type){const r=D(this,e);var i={};try{if(!1===r)throw"Mouse position outside grid area.";await Le.call(this,t.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(e){console.error(e),tt(this)}}else try{var r=t.userActionData.newWidth,o=t.userActionData.newHeight;await Ve.call(this,t.userActionData.itemIndex,r,o)}catch(e){tt(this)}else t.mouseDownCancel=!0;qe.call(this,e),t.userActionData={}},Ze=async function(e){const t=We(this);if(clearTimeout(t.showMoveDemoTimeOutVariable),clearTimeout(t.showResizeDemoTimeOutVariable),!0===t.touchHoldTimerComplete&&0===e.touches.length)if("move"===t.userActionData.type){const r=f(this,e);var i={};try{if(!1===r)throw"Touch position outside grid area.";await Le.call(this,t.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(e){console.error(e),tt(this)}}else try{var r=t.userActionData.newWidth,o=t.userActionData.newHeight;await Ve.call(this,t.userActionData.itemIndex,r,o)}catch(e){tt(this)}else t.touchHoldCancel=!0;Ke.call(this,e),e.stopPropagation(),t.userActionData={}},qe=function(e){const t=w(this),i=We(this),r=Pe(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((e,t)=>{const i=w(e);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let e=0;e<r;e++)i.$limberGridViewItems[e].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((e,t)=>{const i=w(e),r=m(e);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[t.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing"),i.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*r.CROSS_HAIR_WIDTH}px, -${2*r.CROSS_HAIR_HEIGHT}px)`})(this,i.userActionData),w(this).$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),tt(this),document.removeEventListener("mousemove",r.onItemMouseMove),t.$limberGridView.removeEventListener("mousemove",r.onItemMouseMove),document.removeEventListener("mouseup",r.onItemMouseUp),document.removeEventListener("contextmenu",r.onItemContextMenu),document.removeEventListener("touchmove",r.onItemTouchMove),t.$limberGridView.removeEventListener("touchmove",r.onItemTouchMove),document.removeEventListener("touchend",r.onItemTouchEnd),document.removeEventListener("contextmenu",r.onItemTouchContextMenu),document.removeEventListener("touchcancel",r.onItemTouchCancel),i.userActionData={},Ne(this,"moveDemo",void 0),Ne(this,"resizeDemo",void 0),e.preventDefault(),e.stopPropagation()},Ke=function(e){qe.call(this,e)},Qe=function(e){qe.call(this,e)},Je=async function(e,t){const i=w(this);try{if(!1===t)throw"Invalid mouse position.";await Oe.call(this,e,t.x,t.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(e){console.error(e),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},et=async function(e,t,i){const r=w(this);try{await Se.call(this,e,t,i),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(e){console.error(e),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},tt=function(e){const t=w(e),i=v(e),r=t.$limberGridViewItems.length;for(let e=0;e<r;e++)t.$limberGridViewItems[e].style.transform=`translate(${i[e].x}px, ${i[e].y}px)`},it=e=>{const t=w(e),i=m(e);t.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const r=t.$limberGridViewItems.length;for(let e=0;e<r;e++)t.$limberGridViewItems[e].classList.add("limber-grid-view-item-resizing-state");t.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state"),"ADD"===i.DESK_INTERACTION_MODE?t.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&t.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),t.$limberGridViewHeightAdjustGuide.style.height="0px",t.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},rt=function(e){const t=e.options.isMobileCheck;return t?t():window.matchMedia("only screen and (max-width: 980px) and (min-width : 1px) and (orientation: portrait)").matches||window.matchMedia("only screen and (max-width: 979px) and (min-width : 1px) and (orientation: landscape)").matches},ot=(e,t=6)=>Math.trunc(e*Math.pow(10,t))/Math.pow(10,t),nt=(e=22)=>{const t=new Array(e);for(let i=0;i<e;i++)t[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return t.join("")},st=function(){const e=C(this),t=w(this),i=A(this),r=Pe(this);if(!0===e.editable){rt(this)||!1!==e.enableInteractiveAddAndCut&&(t.$limberGridView.addEventListener("mousedown",r.onDeskMouseDown),!1!==e.enableTouchInteraction&&t.$limberGridView.addEventListener("touchstart",r.onDeskTouchStart));for(var o=t.$limberGridViewItems.length,n=0;n<o;n++)rt(this)||(t.$limberGridViewItems[n].addEventListener("mousedown",r.onItemMouseDown),!1!==e.enableTouchInteraction&&t.$limberGridViewItems[n].addEventListener("touchstart",r.onItemTouchStart)),i.onItemClickCallback&&t.$limberGridViewItems[n].addEventListener("click",r.onItemClick)}},lt=function(){const e=C(this),t=w(this),i=Pe(this);if(!0===e.editable&&(void 0!==t.$limberGridView&&(t.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),t.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),void 0!==t.$limberGridViewItems)){const e=t.$limberGridViewItems.length;for(let r=0;r<e;r++)t.$limberGridViewItems[r].removeEventListener("mousedown",i.onItemMouseDown),t.$limberGridViewItems[r].removeEventListener("touchstart",i.onItemTouchStart),t.$limberGridViewItems[r].removeEventListener("click",i.onItemClick)}},dt=function(){const e=w(this),t=Pe(this);if(void 0!==e.$limberGridViewItems){const i=e.$limberGridViewItems.length;for(let r=0;r<i;r++)e.$limberGridViewItems[r].addEventListener("mousedown",t.onItemMouseDown),e.$limberGridViewItems[r].addEventListener("touchstart",t.onItemTouchStart)}},at=function(){const e=w(this),t=Pe(this);if(void 0!==e.$limberGridViewItems){const i=e.$limberGridViewItems.length;for(let r=0;r<i;r++)e.$limberGridViewItems[r].removeEventListener("mousedown",t.onItemMouseDown),e.$limberGridViewItems[r].removeEventListener("touchstart",t.onItemTouchStart)}},ct=function(e,t=!0){const i=C(e),r=v(e),o=u(e),n=m(e),s=w(e),l=A(e);lt.call(e);const d=r.length;let a=1;t&&(a=o.WIDTH_SCALE_FACTOR);const c=new Array(d);let h;if(rt(e)){const e="limber-grid-view-item limber-grid-view-item-mobile-view";h=ht(r);for(let t=0;t<d;t++){r[t].x*=a,r[t].y*=a,r[t].width*=a,r[t].height*=a,h[t].width=o.WIDTH,h[t].height=o.WIDTH/n.MOBILE_ASPECT_RATIO;const i=document.createElement("div");i.setAttribute("class",e),i.setAttribute("data-index",h[t].index),i.style.width=h[t].width+"px",i.style.height=h[t].height+"px",c[t]=i}}else{let e="limber-grid-view-item";!0===i.editable&&(e="limber-grid-view-item limber-grid-view-item-editable");for(let t=0;t<d;t++){r[t].x*=a,r[t].y*=a,r[t].width*=a,r[t].height*=a;const i=document.createElement("div");i.setAttribute("class",e),i.setAttribute("data-index",t),i.style.transform=`translate(${r[t].x}px, ${r[t].y}px)`,i.style.width=r[t].width+"px",i.style.height=r[t].height+"px",c[t]=i}}const b=s.$limberGridViewItems.length;for(let e=0;e<b;e++)s.$limberGridView.removeChild(s.$limberGridViewItems[e]);for(let e=0;e<d;e++)s.$limberGridView.appendChild(c[e]);for(let t=0;t<d;t++){const i=c[t];if(rt(e)){const r=l.renderContent(t,h[t].width,h[t].height);mt(e,r,i)}else{const o=l.renderContent(t,r[t].width,r[t].height);mt(e,o,i)}}I(e,[...s.$limberGridView.getElementsByClassName("limber-grid-view-item")]),st.call(e),l.renderComplete&&l.renderComplete()},ut=async function(e,t){const i=C(e),r=w(e),o=A(e),n=u(e),s=m(e);lt.call(e);try{if(t.x&&t.y&&t.width&&t.height){let i=!1;if(i=Ie(e,t.x,t.y,t.width,t.height),!i)return!1;{const i=v(e);x(e,i);const r=T(e);r.push(t),p(e,r)}}else{if(!t.width||!t.height||t.x||t.y)return!1;{if(t.width>n.WIDTH)return!1;const i=v(e);x(e,i);const r=T(e),o=(e=>{const t=v(e),i=u(e);let r,o=i.MARGIN;const n=t.length;for(let e=0;e<n;e++)r=oe(i.MARGIN,t[e]),r.y+r.height>o&&(o=r.y+r.height);return o})(e);r.push({x:void 0,y:void 0,width:t.width,height:t.height});await Me(e,[r.length-1],o);p(e,r)}}const l=v(e),d=l.length-1;let a;const c=document.createElement("div");if(rt(e)){const e="limber-grid-view-item limber-grid-view-item-mobile-view";c.setAttribute("class",e),c.setAttribute("data-index",d),c.style.width=n.WIDTH+"px",c.style.height=n.WIDTH/s.MOBILE_ASPECT_RATIO+"px",a=o.renderContent(d,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO,"isAdd")}else{let e="limber-grid-view-item";!0===i.editable&&(e="limber-grid-view-item limber-grid-view-item-editable"),c.setAttribute("class",e),c.setAttribute("data-index",d),c.style.transform=`translate(${l[d].x}px, ${l[d].y}px)`,c.style.width=l[d].width+"px",c.style.height=l[d].height+"px",a=o.renderContent(d,l[d].width,l[d].height,"isAdd")}r.$limberGridView.appendChild(c),mt(e,a,c),I(e,[...r.$limberGridView.getElementsByClassName("limber-grid-view-item")]),o.addComplete&&o.addComplete(d)}catch(e){console.error(e)}st.call(e)},ht=e=>{const t=e.length,i=new Array(t);for(let r=0;r<t;r++)i[r]={...e[r]},i[r].index=r;return i.sort((e,t)=>e.y===t.y?e.x-t.x:e.y-t.y)},mt=(e,t,i)=>{const r=A(e);"string"==typeof t?i.innerHTML=t:t instanceof Element?(i.innerHTML="",i.appendChild(t)):r.renderPlugin&&r.renderPlugin(t,i)},bt=function(e){const t=w(this),i=m(this),r=ke(this),o=Pe(this);e.target.classList.contains("limber-grid-view")&&(e.stopPropagation(),1===e.which&&(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(wt.bind(this,e,e.offsetX,e.offsetY),i.MOUSE_DOWN_TIME),t.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu)))},It=function(e){const t=w(this),i=m(this),r=ke(this),o=Pe(this);e.target.classList.contains("limber-grid-view")&&1===e.touches.length&&0===e.which&&(r.tapHoldCancel=!1,r.tapHoldTimerComplete=!1,t.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),at.call(this),clearTimeout(r.longTouchCheck),r.longTouchCheck=setTimeout(yt.bind(this,e),i.TOUCH_HOLD_TIME),e.stopPropagation())},wt=function(e,t,i){const r=w(this),o=u(this),n=ke(this);if(!1===n.mouseDownCancel){n.mouseDownTimerComplete=!0;var s=r.$limberGridView.scrollTop,l=t+r.$limberGridView.scrollLeft-o.PADDING_LEFT,d=i+s-o.PADDING_TOP;n.userActionData={type:"add",addPositionX:l,addPositionY:d},r.$limberGridViewAddCutGuide.style.height="1px",r.$limberGridViewAddCutGuide.style.width="1px",r.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${d}px)`,r.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),it(this)}},yt=function(e){const t=w(this),i=ke(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;var r=f(this,e),o=r.x,n=r.y;i.userActionData={type:"add",addPositionX:o,addPositionY:n};setTimeout(function(){t.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")}.bind(this),500),t.$limberGridViewAddCutGuide.style.height="1px",t.$limberGridViewAddCutGuide.style.width="1px",t.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${n}px)`,t.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),it(this),t.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${n}px)`,t.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),e.preventDefault()}},gt=function(e){const t=w(this),i=u(this),r=m(this),o=ke(this);if(!0===o.mouseDownTimerComplete){t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=t.$limberGridView.scrollTop,s=t.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=e.offsetX-l+s-i.PADDING_LEFT,c=e.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=e.offsetY+n;y(this,u),a>0&&c>0&&(t.$limberGridViewAddCutGuide.style.width=a+"px",t.$limberGridViewAddCutGuide.style.height=c+"px",t.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(ft.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME)):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Gt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME))}else Dt.call(this,e);e.stopPropagation()},pt=function(e){const t=w(this),i=u(this),r=m(this),o=ke(this);if(!0===o.tapHoldTimerComplete&&1===e.touches.length){t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=t.$limberGridView.scrollTop,s=t.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=f(this,e),c=a.x-l,u=a.y-d;if(!1!==a&&(o.userActionData.newWidth=c,o.userActionData.newHeight=u,c>0&&u>0&&(t.$limberGridViewAddCutGuide.style.width=c+"px",t.$limberGridViewAddCutGuide.style.height=u+"px",t.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(c)}px, h: ${parseInt(u)}px`))),!1!==a){const e=t.$limberGridView.getBoundingClientRect(),s=(t.$limberGridView.offsetWidth,e.left,t.$limberGridView.offsetHeight-e.top),l=(a.x,i.PADDING_LEFT,a.y+i.PADDING_TOP-n),d=a.y;y(this,d);const h=g(this,l,s);"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),!0!==h&&(o.addItemAllowCheckTimeOutVariable=setTimeout(ft.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME))):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),!0!==h&&(o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Gt.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME)))}e.preventDefault()}else Dt.call(this);e.stopPropagation()},vt=function(e){const t=w(this),i=m(this),r=ke(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck),!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(Ie(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=t.$limberGridView.scrollTop;ut(this,o),t.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const e=we(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);e&&be(this,e.y,e.shiftHeight)}}else r.mouseDownCancel=!0;Dt.call(this),e.stopPropagation()},xt=function(e){const t=w(this),i=m(this),r=ke(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck),!0===r.tapHoldTimerComplete&&0===e.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(Ie(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=t.$limberGridView.scrollTop;ut(this,o),t.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const e=we(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);e&&be(this,e.y,e.shiftHeight)}}else r.tapHoldCancel=!0;Dt.call(this),e.stopPropagation()},Tt=function(e){Dt.call(this)},At=function(e){e.preventDefault()},Dt=function(e){const t=w(this),i=ke(this),r=Pe(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(e=>{const t=w(e);t.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=t.$limberGridViewItems.length;for(var r=0;r<i;r++)t.$limberGridViewItems[r].classList.remove("limber-grid-view-item-resizing-state");t.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state"),t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),t.$limberGridViewHeightAdjustGuide.style.height="0px",t.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),t.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")})(this),t.$limberGridView.removeEventListener("mousemove",r.onDeskMouseMove),document.removeEventListener("mouseup",r.onDeskMouseUp),document.removeEventListener("contextmenu",r.onDeskContextMenu),t.$limberGridView.removeEventListener("touchmove",r.onDeskTouchMove),document.removeEventListener("touchend",r.onDeskTouchEnd),document.removeEventListener("touchcancel",r.onDeskTouchCancel),document.removeEventListener("contextmenu",r.onDeskTouchContextMenu),dt.call(this),i.userActionData={},e&&(e.preventDefault(),e.stopPropagation())},ft=function(e,t,i,r){const o=w(this);!1===Ie(this,e,t,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Gt=function(e,t,i,r){const o=w(this);!1===we(this,0,t,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Et={ADD:!0,CUTSPACE:!0},Ct=async function(e,t,i){const r=w(e),o=u(e),n=v(e);if(!0===i||!(e=>{if(Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++){if(!e[i]||isNaN(e[i].x)||e[i].x<0||isNaN(e[i].y)||e[i].y<0||isNaN(e[i].height)||e[i].height<=0||isNaN(e[i].width)||e[i].width<=0)return!1;if(!W(k(e[i])))return!1}return!0}return!1})(n)){console.warn("Auto-arranging"),x(e,n);const t=T(e),i=n.length,r=new Array(i);for(let e=0;e<i;e++)r[e]=e,t[e].x=void 0,t[e].y=void 0,n[e].x/=o.WIDTH_SCALE_FACTOR,n[e].y/=o.WIDTH_SCALE_FACTOR,n[e].width/=o.WIDTH_SCALE_FACTOR,n[e].height/=o.WIDTH_SCALE_FACTOR;s(e,o.GRID_WIDTH),l(e,o.GRID_HEIGHT),a(e,o.GRID_MARGIN),d(e,1),c(e,o.MIN_HEIGHT_AND_WIDTH),await Me(e,r,o.MARGIN),p(e,t)}if(function(e,t){e.store.constants.privateConstants.PADDING_LEFT=t}(e,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-left"))),function(e,t){e.store.constants.privateConstants.PADDING_RIGHT=t}(e,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-right"))),function(e,t){e.store.constants.privateConstants.PADDING_TOP=t}(e,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-top"))),function(e,t){e.store.constants.privateConstants.PADDING_BOTTOM=t}(e,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-bottom"))),s(e,r.$limberGridView.clientWidth-o.PADDING_LEFT-o.PADDING_RIGHT),l(e,r.$limberGridView.clientHeight-o.PADDING_TOP-o.PADDING_BOTTOM),t){const e=n.length;for(let t=0;t<e;t++)n[t].x/=o.WIDTH_SCALE_FACTOR,n[t].y/=o.WIDTH_SCALE_FACTOR,n[t].width/=o.WIDTH_SCALE_FACTOR,n[t].height/=o.WIDTH_SCALE_FACTOR;o.MARGIN/=o.WIDTH_SCALE_FACTOR,o.DEFINED_MIN_HEIGHT_AND_WIDTH/=o.WIDTH_SCALE_FACTOR}d(e,o.WIDTH/o.GRID_WIDTH),a(e,o.MARGIN*o.WIDTH_SCALE_FACTOR),c(e,o.DEFINED_MIN_HEIGHT_AND_WIDTH*o.WIDTH_SCALE_FACTOR)},_t=function(e){var t,i,r,o,n,s,l,d,a,c,u,m,b,I,w,y,g,p,v,x,T,A,D,f;(null==e||null===(t=e.gridData)||void 0===t?void 0:t.WIDTH)&&!isNaN(e.gridData.WIDTH)&&(D=this,f=e.gridData.WIDTH,D.store.constants.privateConstants.GRID_WIDTH=f),(null==e||null===(i=e.gridData)||void 0===i?void 0:i.HEIGHT)&&!isNaN(e.gridData.HEIGHT)&&function(e,t){e.store.constants.privateConstants.GRID_HEIGHT=t}(this,e.gridData.HEIGHT),(null==e||null===(r=e.gridData)||void 0===r?void 0:r.MARGIN)&&!isNaN(e.gridData.MARGIN)&&function(e,t){e.store.constants.privateConstants.GRID_MARGIN=t}(this,e.gridData.MARGIN),(null==e||null===(o=e.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&!isNaN(e.gridData.MIN_HEIGHT_AND_WIDTH)&&function(e,t){e.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=t}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),(null==e||null===(n=e.publicConstants)||void 0===n?void 0:n.mobileAspectRatio)&&!isNaN(e.publicConstants.mobileAspectRatio)&&h(this,"MOBILE_ASPECT_RATIO",e.publicConstants.mobileAspectRatio),(null==e||null===(s=e.publicConstants)||void 0===s?void 0:s.moveGuideRadius)&&!isNaN(e.publicConstants.moveGuideRadius)&&h(this,"MOVE_GUIDE_RADIUS",e.publicConstants.moveGuideRadius),(null==e||null===(l=e.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&!isNaN(e.publicConstants.resizeSquareGuideLength)&&h(this,"RESIZE_SQUARE_GUIDE_LENGTH",e.publicConstants.resizeSquareGuideLength),(null==e||null===(d=e.publicConstants)||void 0===d?void 0:d.resizeSquareBorderGuideWidth)&&!isNaN(e.publicConstants.resizeSquareBorderGuideWidth)&&h(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",e.publicConstants.resizeSquareBorderGuideWidth),(null==e||null===(a=e.publicConstants)||void 0===a?void 0:a.autoScrollDistance)&&!isNaN(e.publicConstants.autoScrollDistance)&&h(this,"AUTO_SCROLL_DISTANCE",e.publicConstants.autoScrollDistance),(null==e||null===(c=e.publicConstants)||void 0===c?void 0:c.autoScrollPoint)&&!isNaN(e.publicConstants.autoScrollPoint)&&h(this,"AUTO_SCROLL_POINT",e.publicConstants.autoScrollPoint),(null==e||null===(u=e.publicConstants)||void 0===u?void 0:u.moveOrResizeHeightIncrements)&&!isNaN(e.publicConstants.moveOrResizeHeightIncrements)&&h(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",e.publicConstants.moveOrResizeHeightIncrements),(null==e||null===(m=e.publicConstants)||void 0===m?void 0:m.mouseDownTime)&&!isNaN(e.publicConstants.mouseDownTime)&&h(this,"MOUSE_DOWN_TIME",e.publicConstants.mouseDownTime),(null==e||null===(b=e.publicConstants)||void 0===b?void 0:b.touchHoldTime)&&!isNaN(e.publicConstants.touchHoldTime)&&h(this,"TOUCH_HOLD_TIME",e.publicConstants.touchHoldTime),(null==e||null===(I=e.publicConstants)||void 0===I?void 0:I.demoWaitTime)&&!isNaN(e.publicConstants.demoWaitTime)&&h(this,"DEMO_WAIT_TIME",e.publicConstants.demoWaitTime),(null==e||null===(w=e.publicConstants)||void 0===w?void 0:w.windowResizeWaitTime)&&!isNaN(e.publicConstants.windowResizeWaitTime)&&h(this,"WINDOW_RESIZE_WAIT_TIME",e.publicConstants.windowResizeWaitTime),(null==e||null===(y=e.publicConstants)||void 0===y?void 0:y.deskInteractionMode)&&Et[e.publicConstants.deskInteractionMode]&&h(this,"DESK_INTERACTION_MODE",e.publicConstants.deskInteractionMode),"boolean"==typeof(null==e||null===(g=e.publicConstants)||void 0===g?void 0:g.latchMovedItem)&&h(this,"LATCH_MOVED_ITEM",e.publicConstants.latchMovedItem),"boolean"==typeof(null==e||null===(p=e.publicConstants)||void 0===p?void 0:p.animateMovedItem)&&h(this,"ANIMATE_MOVED_ITEM",e.publicConstants.animateMovedItem),(null==e||null===(v=e.publicConstants)||void 0===v?void 0:v.animateTime)&&!isNaN(e.publicConstants.animateTime)&&h(this,"ANIMATE_TIME",e.publicConstants.animateTime),(null==e||null===(x=e.publicConstants)||void 0===x?void 0:x.crossHairWidth)&&!isNaN(e.publicConstants.crossHairWidth)&&h(this,"CROSS_HAIR_WIDTH",e.publicConstants.crossHairWidth),(null==e||null===(T=e.publicConstants)||void 0===T?void 0:T.crossHairHeight)&&!isNaN(e.publicConstants.crossHairHeight)&&h(this,"CROSS_HAIR_HEIGHT",e.publicConstants.crossHairHeight),"boolean"==typeof(null==e||null===(A=e.publicConstants)||void 0===A?void 0:A.useVerticalArrOnResize)&&h(this,"USE_VERTICAL_ARR_ON_RESIZE",e.publicConstants.useVerticalArrOnResize)},Rt=function(){const e=w(this),t=E(this),i=m(this);var r,o;let n;r=this,o=document.getElementsByTagName("body")[0],r.store.variables.elements.$body=o;do{n="limber-grid-view-pseudo-container-"+nt()}while(null!==document.getElementById(n));!function(e,t){e.store.variables.essentials.pseudoContainerId=t}(this,n);const s=document.createElement("div");if(s.setAttribute("class","limber-grid-view-pseudo-container"),s.setAttribute("id",n),function(e,t){e.store.variables.elements.$pseudoContainer=t}(this,s),t.pseudoElementContainer){let e;"string"==typeof t.pseudoElementContainer?e=document.getElementById(t.pseudoElementContainer):t.pseudoElementContainer instanceof Element&&(e=t.pseudoElementContainer),e.appendChild(s)}else e.$body.appendChild(s);e.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">Â©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright Â© 2018-2020 Subendra Kumar Sharma. License GPLv3+: GNU GPL version 3 or later &lthttps://www.gnu.org/licenses/&gt.</div></div></div>',function(e,t){e.store.variables.elements.$limberGridViewContainer=t}(this,e.$el.getElementsByClassName("limber-grid-view-container")[0]),function(e,t){e.store.variables.elements.$limberGridView=t}(this,e.$el.getElementsByClassName("limber-grid-view")[0]);const l=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div");h.innerHTML="<div></div>";const b=document.createElement("div");b.innerHTML="<hr></hr><hr></hr>",l.setAttribute("class","limber-grid-view-pseudo-container-item"),d.setAttribute("class","limber-grid-view-pseudo-item"),a.setAttribute("class","limber-grid-view-move-guide"),c.setAttribute("class","limber-grid-view-height-adjust-guide"),u.setAttribute("class","limber-grid-view-add-cut-guide"),h.setAttribute("class","limber-grid-view-touch-hold-guide"),b.setAttribute("class","limber-grid-view-cross-hair-guide"),b.style.transform=`translate(-${2*i.CROSS_HAIR_WIDTH}px, -${2*i.CROSS_HAIR_HEIGHT}px)`,e.$pseudoContainer.appendChild(l),e.$limberGridView.appendChild(d),e.$limberGridView.appendChild(a),e.$limberGridView.appendChild(c),e.$limberGridView.appendChild(u),e.$limberGridView.appendChild(h),e.$limberGridView.appendChild(b),function(e,t){e.store.variables.elements.$pseudoContainerItem=t}(this,l),function(e,t){e.store.variables.elements.$limberGridViewPseudoItem=t}(this,d),function(e,t){e.store.variables.elements.$limberGridViewMoveGuide=t}(this,a),function(e,t){e.store.variables.elements.$limberGridViewHeightAdjustGuide=t}(this,c),function(e,t){e.store.variables.elements.$limberGridViewAddCutGuide=t}(this,u),function(e,t){e.store.variables.elements.$limberGridViewTouchHoldGuide=t}(this,h),function(e,t){e.store.variables.elements.$limberGridViewCrossHairGuide=t}(this,b)},Mt=function(e){const t=m(this);setTimeout(Pe(this).onWindowResizeTimerCallback,t.WINDOW_RESIZE_WAIT_TIME),window.removeEventListener("resize",Pe(this).onWindowResize)},Nt=async function(e){await Ct(this,!0,!1),ct(this);!1!==C(this).reRenderOnResize&&window.addEventListener("resize",Pe(this).onWindowResize)};function Ht(e){var t,i;if(this.initializeStore(),function(e,t){Object.assign(e.options,t)}(this,e),p(this,e.positionData),t=this,i=e.callbacks,t.store.variables.essentials.callbacks=i,"string"==typeof e.el){const t=document.getElementById(e.el);if(!t)throw"No for element found for id "+e.el;b(this,t)}else{if(!(e.el instanceof Element))throw"Valid DOM Element or Id required";b(this,e.el)}_t.call(this,e),Rt.call(this),!0===this.options.reRenderOnResize&&window.addEventListener("resize",Pe(this).onWindowResize),setTimeout(async function(){await Ct(this,!1,e.autoArrange),ct(this,!0)}.bind(this))}
/** @license LimberGridView

LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.

Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
Ht.prototype.constructor=Ht,Ht.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:je.bind(this),onItemTouchStart:ze.bind(this),onItemMouseMove:Ye.bind(this),onItemTouchMove:Be.bind(this),onItemMouseUp:Fe.bind(this),onItemTouchEnd:Ze.bind(this),onItemContextMenu:qe.bind(this),onItemTouchContextMenu:Ke.bind(this),onItemTouchCancel:Qe.bind(this),onDeskMouseDown:bt.bind(this),onDeskTouchStart:It.bind(this),onDeskMouseMove:gt.bind(this),onDeskTouchMove:pt.bind(this),onDeskMouseUp:vt.bind(this),onDeskTouchEnd:xt.bind(this),onDeskTouchCancel:Tt.bind(this),onDeskTouchContextMenu:At.bind(this),onDeskContextMenu:Dt.bind(this),onWindowResize:Mt.bind(this),onWindowResizeTimerCallback:Nt.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}},status:{},trees:{it:new r.IntervalTreesIterative({initialStackSize:100,initialQueueSize:100})},stacks:{stack:new o.ArrayStack,garbageStack:new o.ArrayStack,resStack:new o.ArrayStack,itemsToArrangeStack:new o.ArrayStack}},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,MOUSE_DOWN_TIME:500,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,DESK_INTERACTION_MODE:"ADD",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250,CROSS_HAIR_WIDTH:500,CROSS_HAIR_HEIGHT:500,USE_VERTICAL_ARR_ON_RESIZE:!1},messages:{latchedMoveDemo1:"Move curser close to an adjacent item over this box to latch next to that item.",latchedMoveDemo2:"Move curser over this box to latch on to this item."}}}},Ht.prototype.renderItem=function(e){!function(e,t){const i=w(e),r=A(e),o=v(e),n=u(e),s=m(e);let l;l=rt(e)?r.renderContent(t,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(t,o[t].width,o[t].height),mt(e,l,i.$limberGridViewItems[t]),r.renderComplete&&r.renderComplete(t)}(this,e)},Ht.prototype.getGridData=function(){const e=n(this),t=v(this),i=t.length,r=new Array(i);for(let o=0;o<i;o++)r[o]={x:ot(t[o].x/e.WIDTH_SCALE_FACTOR),y:ot(t[o].y/e.WIDTH_SCALE_FACTOR),width:ot(t[o].width/e.WIDTH_SCALE_FACTOR),height:ot(t[o].height/e.WIDTH_SCALE_FACTOR)};return{gridData:{height:e.GRID_HEIGHT,width:e.GRID_WIDTH,margin:e.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:e.MIN_HEIGHT_AND_WIDTH},positionData:r}},Ht.prototype.setDeskInteractMode=function(e){Et[e]&&h(this,"DESK_INTERACTION_MODE",e)},Ht.prototype.setLatchMovedItem=function(e){"boolean"==typeof e&&h(this,"LATCH_MOVED_ITEM",e)},Ht.prototype.setUseVerticalArrOnResize=function(e){"boolean"==typeof e&&h(this,"USE_VERTICAL_ARR_ON_RESIZE",e)},Ht.prototype.addItem=function(e){if(!e){const t=n(this);e={width:t.DEFINED_MIN_HEIGHT_AND_WIDTH,height:t.DEFINED_MIN_HEIGHT_AND_WIDTH}}ut(this,e)},Ht.prototype.removeItem=function(e){Number.isInteger(e)&&function(e,t){const i=w(e),r=A(e),o=v(e),n=u(e),s=m(e);lt.call(e),o.splice(t,1),r.removePlugin&&r.removePlugin(i.$limberGridViewItems[t]),i.$limberGridView.removeChild(i.$limberGridViewItems[t]),r.removeComplete&&r.removeComplete(t,i.$limberGridViewItems[t]),I(e,[...i.$limberGridView.getElementsByClassName("limber-grid-view-item")]);const l=o.length;for(let e=t;e<l;e++)i.$limberGridViewItems[e].setAttribute("data-index",e);for(let d=t;d<l;d++){let t;t=rt(e)?r.renderContent(d,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(d,o[d].width,o[d].height),mt(e,t,i.$limberGridViewItems[d])}st.call(e)}(this,e)},Ht.prototype.setIsMobileCheck=function(e){this.options.isMobileCheck=e};t.default=Ht}])}));