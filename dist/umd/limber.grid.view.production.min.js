/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.
 *
 * Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("IntervalTreeJS")):"function"==typeof define&&define.amd?define(["IntervalTreeJS"],e):"object"==typeof exports?exports.LimberGridView=e(require("IntervalTreeJS")):t.LimberGridView=e(t.IntervalTreeJS)}(window,(function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=3)}([function(e,i){e.exports=t},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(1),i(2);const r=function(t){return t.store.constants.privateConstants},o=function(t,e){t.store.constants.privateConstants.WIDTH=e},n=function(t,e){t.store.constants.privateConstants.HEIGHT=e},s=function(t,e){t.store.constants.privateConstants.WIDTH_SCALE_FACTOR=e},l=function(t,e){t.store.constants.privateConstants.MARGIN=e},a=function(t,e){t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=e};var d=r;const c=function(t,e,i){t.store.constants.publicConstants.hasOwnProperty(e)&&(t.store.constants.publicConstants[e]=i)};var u=function(t){return t.store.constants.publicConstants};const h=function(t,e){t.store.variables.elements.$el=e},m=function(t,e){t.store.variables.elements.$limberGridViewItems=e};var b=function(t){return t.store.variables.elements};const w=function(t,e){const i=b(t),r=u(t);i.$limberGridView.scrollHeight-e<=r.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=e+r.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")},I=function(t,e,i){const r=b(t),o=u(t),n=d(t),s=r.$limberGridView.scrollTop;let l=!1;return e>0&&(i-e<o.AUTO_SCROLL_POINT&&(r.$limberGridView.scrollTop=s+o.AUTO_SCROLL_DISTANCE,l=!0),e<n.HEIGHT/10&&0!==s&&(r.$limberGridView.scrollTop=s-o.AUTO_SCROLL_DISTANCE,l=!0)),l},g=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.positionData=r},y=function(t){return t.store.variables.essentials.positionData},p=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.modifiedPositionData=r},v=function(t){return t.store.variables.essentials.modifiedPositionData},T=function(t){return t.store.variables.essentials.callbacks};const D=function(t,e){const i=b(t),r=d(t),o=i.$limberGridView.getBoundingClientRect();if(e.clientX>=o.left&&e.clientX<=o.left+o.width&&e.clientY>=o.top&&e.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,n=i.$limberGridView.scrollLeft,s=e.clientX-o.left-r.PADDING_LEFT+n,l=e.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},x=function(t,e){const i=b(t),r=d(t),o=i.$limberGridView.getBoundingClientRect();let n;if(n="touchend"===e.type?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},n.clientX>=o.left&&n.clientX<=o.left+o.width&&n.clientY>=o.top&&n.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,e=i.$limberGridView.scrollLeft,s=n.clientX-o.left-r.PADDING_LEFT+e,l=n.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},f=function(t,e){const i=b(t).$limberGridViewItems[e.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(e.touches[0].clientX>=i.left&&e.touches[0].clientX<=i.left+i.width&&e.touches[0].clientY>=i.top&&e.touches[0].clientY<=i.top+i.height){return{x:e.touches[0].clientX-i.left,y:e.touches[0].clientY-i.top}}return!1},A=function(t){return t.options};var G=A;const C=(t,e)=>{const i=u(t),r=G(t),o=y(t),n=parseInt(e.currentTarget.attributes["data-index"].value);let s,l,a,d;if(1===e.which)s=Math.sqrt(Math.pow(0-e.offsetX,2)+Math.pow(0-e.offsetY,2)),a=e.offsetX,d=e.offsetY;else{if(0!==e.which)return!1;l=f(t,e),s=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),a=l.x,d=l.y}const c=e.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,h=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,m=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return r.itemMouseDownMoveCheck&&r.itemMouseDownMoveCheck(a,d,{...o[n]},n,e.target)||s<=i.MOVE_GUIDE_RADIUS&&!r.itemMouseDownMoveCheck?{type:"move",itemIndex:e.currentTarget.attributes["data-index"].value}:r.itemMouseDownResizeCheck&&r.itemMouseDownResizeCheck(a,d,{...o[n]},n,e.target)||a>=c&&a<=c+m&&d>=h&&d<=h+b&&!r.itemMouseDownResizeCheck?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:void 0},E=(t,e)=>{const i=b(t),r=y(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=r.width+"px",i.$limberGridViewPseudoItem.style.height=r.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${e.itemX}px,${e.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let t=0;t<o;t++)i.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},_=(t,e,i)=>{const r=b(t),o=y(t)[e.itemIndex];r.$limberGridViewHeightAdjustGuide.style.height="0px",r.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),r.$limberGridViewItems[e.itemIndex].classList.add("limber-grid-view-item-demo"),r.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),r.$pseudoContainerItem.style.width=o.width+"px",r.$pseudoContainerItem.style.height=o.height+"px",1===i.which?r.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(r.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`),r.$body.classList.add("limber-grid-view-body-tag-state-editing")},R=(t,e,i,r)=>{const o=b(t);"move"===r?(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),1===i.which?o.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(o.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`)):"resize"===r&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},M=(t,e)=>{const i=P(t);try{return e.x>i.tl.x&&e.x<i.tr.x&&e.y>i.tl.y&&e.y<i.bl.y}catch(t){return null}},N=(t,e)=>{const i=P(t);try{return e.x>=i.tl.x&&e.x<=i.tr.x&&e.y>=i.tl.y&&e.y<=i.bl.y&&!M(t,e)}catch(t){return null}},$=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>=n.x||o.x>=r.x)&&!(i.y>=n.y||o.y>=r.y)}catch(t){return null}},V=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>n.x||o.x>r.x)&&(!(i.y>n.y||o.y>r.y)&&!1===$(t,e))}catch(t){return null}},H=(t,e,i)=>{if(!$(t,e))return null;const r=P(t),o=P(e),n={subRectT:{tl:r.tl,tr:r.tr,br:{x:r.tr.x,y:o.tr.y},bl:{x:r.tl.x,y:o.tl.y}},subRectR:{tl:{x:o.tr.x,y:r.tr.y},tr:r.tr,br:r.br,bl:{x:o.br.x,y:r.br.y}},subRectB:{tl:{x:r.bl.x,y:o.bl.y},tr:{x:r.br.x,y:o.br.y},br:r.br,bl:r.bl},subRectL:{tl:r.tl,tr:{x:o.tl.x,y:r.tl.y},br:{x:o.bl.x,y:r.bl.y},bl:r.bl}},s=Object.keys(n);for(let t=0;t<s.length;t++)S(n[s[t]])||delete n[s[t]];let l,a,d,c,u,h,m,b,w,I,g,y,p,v,T,D,x;return n.subRectT&&n.subRectR&&(w={tl:n.subRectT.tl,tr:n.subRectR.tl,br:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},d={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectT.br,bl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y}},y={tl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},tr:n.subRectT.br,br:n.subRectR.br,bl:n.subRectR.bl}),n.subRectR&&n.subRectB&&(g={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectB.tr,bl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y}},u={tl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectR.bl},v={tl:n.subRectB.tl,tr:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},br:n.subRectR.bl,bl:n.subRectB.bl}),n.subRectB&&n.subRectL&&(D={tl:n.subRectL.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},bl:n.subRectB.tl},m={tl:n.subRectB.tl,tr:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},br:n.subRectL.br,bl:n.subRectB.bl},p={tl:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectL.br}),n.subRectL&&n.subRectT&&(T={tl:n.subRectT.bl,tr:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},br:n.subRectL.br,bl:n.subRectL.bl},l={tl:n.subRectT.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},I={tl:n.subRectL.tr,tr:n.subRectT.tr,br:n.subRectT.br,bl:{x:n.subRectL.tr.x,y:n.subRectT.bl.y}}),a=L(w,l)||L(I,d)||w||I,c=O(g,d)||O(y,u)||g||y,h=L(p,u)||L(v,m)||p||v,b=O(T,m)||O(D,l)||T||D,x=i?[l,a,d,c,u,h,m,b]:[W(l),W(a),W(d),W(c),W(u),W(h),W(m),W(b)],x=x.filter(t=>t),0===x.length&&(x=Object.keys(n).map(t=>i?n[t]:W(n[t]))),x},L=(t,e)=>{if(!t&&!e)return null;if(!$(W(t),W(e)))return null;let i=null;return t.tl.x===e.tl.x||Math.abs(t.tl.x-e.tl.x)<Math.abs(t.tr.x-e.tr.x)?i={tl:e.tr,tr:t.tr,br:t.br,bl:e.br}:(t.tr===e.tr||Math.abs(e.tl.x-t.tl.x)>Math.abs(e.tr.x-t.tr.x))&&(i={tl:t.tl,tr:e.tl,br:e.bl,bl:t.bl}),i},O=(t,e)=>{if(!t&&!e)return null;if(!$(W(t),W(e)))return null;let i=null;return t.tl.y===e.tl.y||Math.abs(t.tl.y-e.tl.y)<Math.abs(t.bl.y-e.bl.y)?i={tl:e.bl,tr:e.br,br:t.br,bl:t.bl}:(t.bl.y===e.bl.y||Math.abs(e.tl.y-t.tl.y)>Math.abs(e.bl.y-t.bl.y))&&(i={tl:t.tl,tr:t.tr,br:e.tr,bl:e.tl}),i},S=function(t){try{let e,i,r,o;return e=t.tr.x-t.tl.x,i=t.br.y-t.tr.y,r=t.br.x-t.bl.x,o=t.bl.y-t.tl.y,!(e<=0||i<=0||r<=0||o<=0)}catch(t){return null}},P=function(t){return{tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},br:{x:t.x+t.width,y:t.y+t.height},bl:{x:t.x,y:t.y+t.height}}},W=function(t){return S(t)?{x:t.tl.x,y:t.tl.y,width:t.tr.x-t.tl.x,height:t.bl.y-t.tl.y}:null},k=(t,e,i)=>{const r=P(t),o=P(e);let n;const s=(t,e)=>{let i;if(t.tl.x>=e.bl.x&&t.tl.x<e.br.x&&t.tl.y>=e.bl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:e.tl.y},tr:{x:r,y:e.tl.y},br:{x:r,y:t.bl.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.tl.y>=e.tr.y&&t.tl.y<e.br.y&&t.tl.x>=e.tr.x){let r=t.br.y<e.br.y?t.br.y:e.br.y;i={tl:{x:e.tl.x,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.br.x,y:r},bl:{x:e.bl.x,y:r}}}if(t.tr.x<=e.br.x&&t.tr.x>e.bl.x&&t.tr.y>=e.bl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:e.tl.y},tr:{x:t.tr.x,y:e.tr.y},br:{x:t.br.x,y:t.br.y},bl:{x:r,y:t.bl.y}}}if(t.tr.y>=e.tl.y&&t.tr.y<e.bl.y&&t.tr.x<=e.tl.x){let r=t.bl.y<e.bl.y?t.bl.y:e.bl.y;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:e.tr.x,y:t.tl.y},br:{x:e.br.x,y:r},bl:{x:t.bl.x,y:r}}}if(t.br.x<=e.tr.x&&t.br.x>e.tl.x&&t.br.y<=e.tl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.tr.x,y:e.br.y},bl:{x:r,y:e.bl.y}}}if(t.br.y<=e.bl.y&&t.br.y>e.tl.y&&t.br.x<=e.tl.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:t.tl.x,y:r},tr:{x:e.tr.x,y:r},br:{x:e.br.x,y:t.br.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.bl.x>=e.tl.x&&t.bl.x<e.tr.x&&t.bl.y<=e.tl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:r,y:t.tr.y},br:{x:r,y:e.br.y},bl:{x:t.bl.x,y:e.bl.y}}}if(t.bl.y<=e.br.y&&t.bl.y>e.tr.y&&t.bl.x>=e.tr.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:e.tl.x,y:r},tr:{x:t.tr.x,y:r},br:{x:t.br.x,y:t.br.y},bl:{x:e.bl.x,y:t.bl.y}}}return i};return n=s(r,o),n||(n=s(o,r)),n&&(n=[n]),n||z(t,e)||z(e,t)||(n=(()=>{const i=H(t,e,!0),r=new Array((null==i?void 0:i.length)||0);let n,l=0;const a=r.length;for(let e=0;e<a;e++)n=s(i[e],o),n&&!z(t,W(n))&&(r[l++]=n);const d=new Array(l);for(let t=0;t<l;t++)d[t]=r[t];return d.length?d:null})()),!!n&&(i?n:n.map(t=>W(t)))},z=(t,e)=>{const i=P(t),r=P(e);return i.tl.x<=r.tl.x&&i.tr.x>=r.tr.x&&i.tl.y<=r.tl.y&&i.bl.y>=r.bl.y},B=(t,e)=>{var i,r,o,n;return(null==t||null===(i=t.tl)||void 0===i?void 0:i.x)&&(null==t||null===(r=t.tr)||void 0===r?void 0:r.x)&&(null==e||null===(o=e.tl)||void 0===o?void 0:o.x)&&(null==t||null===(n=t.tr)||void 0===n?void 0:n.x)?!(t.tl.x>=e.tr.x||e.tl.x>=t.tr.x):null},U=(t,e)=>t.tl.x===e.tl.x&&t.tl.y===e.tl.y&&t.tr.x===e.tr.x&&t.tr.y===e.tr.y&&t.br.x===e.br.x&&t.br.y===e.br.y&&t.bl.x===e.bl.x&&t.bl.y===e.bl.y,Y=(t,e,i)=>{const r=y(t),o=v(t),n=d(t),s=r.length,l=new Array(s);let a=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,($(u,c)||V(u,c))&&t!==i&&(l[a++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(a+1);for(let t=0;t<a;t++)h[t]=l[t];return h[a]=i,h},X=(t,e,i)=>{const r=y(t),o=v(t),n=d(t),s=r.length,l=new Array(s);let a=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,($(u,c)||V(u,c))&&t!==i&&(l[a++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(a+1);for(let t=0;t<a;t++)h[t]=l[t];return h[a]=i,h},F=(t,e,i,r)=>{const o=y(t),n=d(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"Width or Height is not a number.";if(o[e].x+i+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";if(i<n.DEFINED_MIN_HEIGHT_AND_WIDTH||r<n.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${n.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;return!0},j=(t,e,i,r)=>{const o=y(t),n=d(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"toX or toY is not a number.";if(i<n.MARGIN||r<n.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[e].width+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";return!0},Z=t=>{const e=y(t),i=b(t),r=e.length;for(var o=0;o<r;o++)i.$limberGridViewItems[o].style.transform="translate("+e[o].x+"px, "+e[o].y+"px)",i.$limberGridViewItems[o].classList.remove("limberGridViewItemDemo")},K=(t,e,i)=>{const r=y(t),o=d(t),n=r.length,s={x:0,y:0,height:0,width:0},l={x:e,y:i};let a;for(let t=0;t<n;t++)if(s.x=r[t].x-o.MARGIN,s.y=r[t].y-o.MARGIN,s.width=r[t].width+2*o.MARGIN,s.height=r[t].height+2*o.MARGIN,M(s,l)||N(s,l)){a=t;break}return void 0!==a&&(e=r[a].x,i=r[a].y),{toX:e,toY:i,overlappedItemIndex:a}};var q=i(0);const Q=function(t){const e=t.options.isMobileCheck;return e?e():window.matchMedia("only screen and (max-width: 980px) and (min-width : 1px) and (orientation: portrait)").matches||window.matchMedia("only screen and (max-width: 979px) and (min-width : 1px) and (orientation: landscape)").matches},J=(t,e=6)=>Math.trunc(t*Math.pow(10,e))/Math.pow(10,e),tt=t=>{const e=t.length,i=new Array(e);let r=0;for(let o=0;o<e;o++)null!==t[o]&&void 0!==t[o]&&(i[r++]=t[o]);const o=new Array(r);for(let t=0;t<r;t++)o[t]=i[t];return o},et=(t=22)=>{const e=new Array(t);for(let i=0;i<t;i++)e[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return e.join("")},it=(t,e,i,r,o,n)=>{const s=y(t),l=d(t);let a=Number.MAX_SAFE_INTEGER,c=0,u=Number.MAX_SAFE_INTEGER,h=0;const m=e.length;for(let t=0;t<m;t++)s[e[t]].y<a&&(a=s[e[t]].y),s[e[t]].y+s[e[t]].height>c&&(c=s[e[t]].y+s[e[t]].height),s[e[t]].x<u&&(u=s[e[t]].x),s[e[t]].x+s[e[t]].width>h&&(h=s[e[t]].x+s[e[t]].width);return r>c&&(c=r),i>h&&(h=i),o<a&&(a=o),n>c&&(c=n),{minX:u-l.MARGIN,maxX:h+l.MARGIN,minY:a-l.MARGIN,maxY:c+l.MARGIN}},rt=(t,e,i,r)=>{let o,n;e.tl.y>0&&(o={tl:{x:i,y:0},tr:{x:r,y:0},br:{x:r,y:e.tr.y},bl:{x:i,y:e.tl.y}});const s=((t,e,i)=>{const r=y(t),o=v(t),n=d(t);let s,l,a=0;const c=r.length;for(let t=0;t<c;t++)s=st(n.MARGIN,r[t]),l=st(n.MARGIN,o[t]),r[t].y+r[t].height>a&&s.x<i&&s.x+s.width>e&&(a=r[t].y+r[t].height),o[t].y+o[t].height>a&&l.x<i&&l.x+l.width>e&&(a=o[t].y+o[t].height);return a})(t,i,r);return s>e.bl.y&&(n={tl:{x:i,y:e.bl.y},tr:{x:r,y:e.bl.y},br:{x:r,y:s},bl:{x:i,y:s}}),{topWorkSpaceCo:o,bottomWorkSpaceCo:n}},ot=(t,e,i=!1)=>{const r=v(t),o=d(t),n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)$(e,st(o.MARGIN,r[t]))&&(s[l++]=i?t:r[t]);const a=new Array(l);for(let t=0;t<l;t++)a[t]=s[t];return a},nt=(t,e,i,r,o,n,s,l=!1)=>{const a=v(t),c=d(t),u={tl:{...(null==i?void 0:i.tl)?i.tl:e.tl},tr:{...(null==i?void 0:i.tr)?i.tr:e.tr},br:{...e.br},bl:{...e.bl}},h=W(u),m=W(r),b=W(o);let w=0;const I=s.length,g=new Array(I);for(let t=0;t<I;t++)n[s[t]]||(g[w++]=s[t]);const y=tt(g),p=a.length,T=new Array(p);let D=0;const x=new Array(p);let f=0;for(let t=0;t<p;t++){const e=st(c.MARGIN,a[t]);$(b,e)&&(n[t]||$(h,e)||$(m,e)&&!z(m,e)?x[f++]=l?t:a[t]:$(m,e)&&z(m,e)&&!n[t]&&(T[D++]=t,a[t].x=void 0,a[t].y=void 0))}return{updatedItemsToArrange:tt([...y,...T]),itemsInWorkSpace:tt(x)}},st=(t,e)=>{const i={...e};return i.x-=t,i.y-=t,i.width+=2*t,i.height+=2*t,i},lt=(t,e)=>t.d.rect.x===e.d.rect.x?t.d.rect.y-e.d.rect.y:t.d.rect.x-e.d.rect.x,at=(t,e)=>t.d.rect.y===e.d.rect.y?t.d.rect.x-e.d.rect.x:t.d.rect.y-e.d.rect.y,dt=function(t){return(e,i,r)=>!(!$(t,e.d.rect)&&!V(t,e.d.rect))},ct=function(t,e){return(i,r,o)=>!(!z(i.d.rect,t)||i.d===e)},ut=(t,e)=>(t.width+t.height)/e,ht=(t,e)=>{const i=t.length;for(let r=0;r<i;r++)t[r].d.score=ut(t[r].d.rect,e);return t.sort((t,e)=>t.d.score-e.d.score),t[0]},mt=(t,e,i)=>{const r=v(t),o=e.length;for(let t=0;t<o;t++)r[e[t]].y+=i},bt=function(t,e,i){const r=y(t),o=b(t),n=r.length;for(let t=0;t<n;t++)r[t].y>=e&&(r[t].y-=i,o.$limberGridViewItems[t].style.transform="translate("+r[t].x+"px, "+r[t].y+"px)")},wt=function(t,e,i,r,o){const n=d(t),s=u(t),l=y(t);var a={x:e-n.MARGIN,y:i-n.MARGIN,width:r+2*s.MARGIN,height:o+2*s.MARGIN};if(e<0||i<0)return!1;if("number"!=typeof r||"number"!=typeof o)return!1;if(e+r>n.WIDTH)return!1;if(r<50||o<50)return!1;let c;const h=l.length;for(let t=0;t<h;t++)if(c=$(st(n.MARGIN,l[t]),a)||V(st(n.MARGIN,l[t]),a),c)return!1;return!0},It=function(t,e,i,r,o){const n=d(t),s=y(t),l={x:0,y:i,width:n.WIDTH,height:o};if("number"!=typeof r||"number"!=typeof o)return!1;let a,c=i+o,u=i,h=!1;const m=s.length;for(let t=0;t<m;t++){if(z(l,st(n.MARGIN,s[t])))return!1;if(a=$(l,st(n.MARGIN,s[t]))||V(l,st(n.MARGIN,s[t])),a){h=!0;const e={x:s[t].x,y:s[t].y-n.MARGIN},i={x:s[t].x,y:s[t].y+s[t].height+n.MARGIN};s[t].y-n.MARGIN<c&&(M(l,e)||N(l,e))&&(c=s[t].y-n.MARGIN),s[t].y+s[t].height+n.MARGIN>u&&(M(l,i)||N(l,i))&&(u=s[t].y+s[t].height+n.MARGIN)}}return h?c-u>0&&{y:u,shiftHeight:c-u}:{y:i,shiftHeight:o}},gt=t=>{let e,i;const r=t.length;for(let o=0;o<r;o++)i=Math.floor(Math.random()*(o+1)),e=t[o],t[o]=t[i],t[i]=e;return t},yt=function(t){if(this.length=100,this.stack=new Array(this.length),this.ptr=-1,t&&t.data){const e=t.data;for(let t=e.length-1;t>=0;t--)this.push(e[t])}};yt.prototype.constructor=yt,yt.prototype.push=function(t){return null!=t&&(this.ptr<this.length-1||this.resize(),this.stack[++this.ptr]=t,!0)},yt.prototype.pop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.ptr--,t}},yt.prototype.wipePop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.stack[this.ptr]=void 0,this.ptr--,t}},yt.prototype.resize=function(){const t=this.length,e=this.stack;this.length+=100,this.stack=new Array(this.length);for(let i=0;i<t;i++)this.stack[i]=e[i]},yt.prototype.getTop=function(){return this.ptr>=0?this.stack[this.ptr]:null},yt.prototype.isEmpty=function(){return this.ptr<0},yt.prototype.getData=function(){const t=new Array(this.ptr+1);for(let e=0;e<=this.ptr;e++)t[e]=this.stack[e];return t},yt.prototype.getAllData=function(){const t=new Array(this.length);for(let e=0;e<this.length;e++)t[e]=this.stack[e];return t},yt.prototype.getSize=function(){return this.ptr+1},yt.prototype.empty=function(){this.ptr=-1},yt.prototype.wipe=function(){this.length=100,this.stack=new Array(this.length),this.ptr=-1};var pt=yt;const vt=(t,e,i)=>{let r,o;const n={integrateTop:!1,integrateBottom:!1};if(e){r=ot(t,W(e));const i=Tt(e,r);i<e.bl.y&&(e.tl.y=i,e.tr.y=i,n.integrateTop=!0)}if(i){o=ot(t,W(i));const e=Dt(i,o);e>i.tl.y&&(i.bl.y=e,i.br.y=e,n.integrateBottom=!0)}return n},Tt=(t,e)=>{const i=e.length,r=new q.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.bl.y,l=!1;for(let a=0;a<i;a++){o=r.findAll({low:e[a].y+e[a].height,high:t.bl.y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(B(P(e[a]),P(o[t].d.rect))&&!U(P(e[a]),P(o[t].d.rect))){l=!0;break}!l&&e[a].y+e[a].height<s&&(s=e[a].y+e[a].height)}return s},Dt=(t,e)=>{const i=e.length,r=new q.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.tl.y,l=!1;for(let a=0;a<i;a++){o=r.findAll({low:t.tl.y,high:e[a].y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(B(P(e[a]),P(o[t].d.rect))&&!U(P(e[a]),P(o[t].d.rect))){l=!0;break}!l&&e[a].y>s&&(s=e[a].y)}return s},xt=(t,e,i,r,o)=>{const n=d(t),s=new q.IntervalTreesIterative;let l;s.insert({low:i.tl.x,high:i.tr.x,d:{id:o.idCount++,rect:e,a:{},o:{},ref:null}});let a,c,u={low:0,high:0,d:null},h=0,m=0;const b=r.length;for(let t=0;t<b;t++){l=P(r[t]),u={low:l.tl.x,high:l.tr.x},a=s.findAll(u),h=a.length;for(let e=0;e<h;e++)if($(a[e].d.rect,st(n.MARGIN,r[t]))){c=H(a[e].d.rect,st(n.MARGIN,r[t]),!0),m=c.length;for(let t=0;t<m;t++)s.insert({low:c[t].tl.x,high:c[t].tr.x,d:{id:o.idCount++,rect:W(c[t]),a:{},o:{},ref:null}});s.remove(a[e].interval,a[e].d)}}return{it:s}},ft=(t,e,i,r,o)=>{let n=!1;for(;!e.isEmpty();){const t=e.pop();n=!1;const s=i.findAll(t.interval,null,null,dt(t.d.rect)),l=(null==s?void 0:s.length)||0;if(l>0){for(let e=0;e<l;e++){const l=s[e],a=k(l.d.rect,t.d.rect);if(1===a.length){const e=a[0];z(e,l.d.rect)&&i.remove(l.interval,l.d),z(e,t.d.rect)&&(n=!0);const s={d:{id:r.idCount++,rect:e,a:{},o:{},ref:null}};Ct(i,s,o)}}!1===n&&Ct(i,{d:t.d},o)}else i.insert({...t.interval,d:t.d})}},At=t=>{const e=t.getSortedData(),i=e.length;for(let r=0;r<i;r++){const i=e[r],o=t.findAll(i.interval,null,null,ct(i.d.rect,i.d));(null==o?void 0:o.length)&&t.remove(i.interval,i.d)}},Gt=async(t,e,i,r)=>{let o,n;Array.isArray(e)?(gt(e),o=new pt({data:e.sort(lt)}),n=new q.IntervalTreesIterative):(gt(r),o=new pt({data:r.sort(lt)}),n=e),ft(0,o,n,i,"x"),At(n);const s=n.getSortedData();gt(s);const l=s.length;for(let t=0;t<l;t++)s[t].interval.low=s[t].d.rect.y,s[t].interval.high=s[t].d.rect.y+s[t].d.rect.height;const a=new pt({data:s.sort(at)}),d=new q.IntervalTreesIterative;ft(0,a,d,i,"y"),At(d);const c=new q.IntervalTreesIterative,u=d.getSortedData();gt(u);const h=u.length;for(let t=0;t<h;t++)c.insert({low:u[t].d.rect.x,high:u[t].d.rect.x+u[t].d.rect.width,d:u[t].d});return{mergedRects:c.getSortedData(),mergedRectsIt:c}},Ct=(t,e,i)=>{let r="x",o="width";"y"===i&&(r="y",o="height");const n=t.findAll({low:e.d.rect[r],high:e.d.rect[r]+e.d.rect[o]});let s=!1;const l=(null==n?void 0:n.length)||0;for(let t=0;t<l;t++)(U(P(e.d.rect),P(n[t].d.rect))||z(n[t].d.rect,e.d.rect))&&(s=!0);return s||t.insert({low:e.d.rect[r],high:e.d.rect[r]+e.d.rect[o],d:e.d}),s},Et=async(t,e,i,r,o,n,s)=>{const l=v(t),a=d(t),c={},u={};let h=i.getSortedData();const m=e.length,b=new pt,w=((t,e)=>{const i=v(t),r=e.length;let o,n,s=0,l=0,a=0;for(let t=0;t<r;t++)o=i[e[t]],o.width>l&&(l=o.width),o.height>s&&(s=o.height);a=l+s;const d=new Array(r);for(let t=0;t<r;t++)o=i[e[t]],n=ut(o,a),d[t]={score:n,d:e[t]};return d.sort((t,e)=>t.score-e.score),d})(t,e);for(let t=0;t<m;t++)b.push(w[t]);let I,g;const y=new pt,p=new pt;for(;!b.isEmpty();){y.empty(),I=b.pop(),g=l[I.d];let t=st(a.MARGIN,g);const e=h.length;for(let i=0;i<e;i++){const e=h[i].d.rect;e.width>=t.width&&e.height>=t.height&&y.push(h[i])}if(y.isEmpty())continue;const r=ht(y.getData(),g.width+g.height);g.x=r.d.rect.x+a.MARGIN,g.y=r.d.rect.y+a.MARGIN,c[I.d]=g,o&&z(o,r.d.rect)&&(u[I.d]=I.d),p.empty();const n=i.findAll(r.interval),d=n.length;t=st(a.MARGIN,g);for(let e=0;e<d;e++){const r=n[e],o=H(r.d.rect,t),l=(null==o?void 0:o.length)||0;for(let t=0;t<l;t++)p.push({interval:{low:o[t].x,high:o[t].x+o[t].width},d:{id:s.idCount++,rect:o[t],a:{},o:{},ref:null}});l&&i.remove(r.interval,r.d)}const{mergedRectsIt:m}=await Gt(0,i,s,p.getData());h=(i=m).getSortedData()}return{arranged:c,itemsInBottomWorkSpace:u}},_t=async(t,e,i,r,o=!1)=>{const n=d(t),s=v(t),l=performance.now(),a={idCount:0},{minY:c,maxY:u}=it(t,e,void 0,void 0,i,r),h=new Array(e.length-1),m=e.length-1;for(let t=0;t<m;t++)h[t]=e[t];const b={tl:{x:0,y:c},tr:{x:n.WIDTH,y:c},br:{x:n.WIDTH,y:u},bl:{x:0,y:u}},w={tl:{...b.tl},tr:{...b.tr},br:{...b.br},bl:{...b.bl}},{topWorkSpaceCo:I,bottomWorkSpaceCo:g}=rt(t,b,0,n.WIDTH),y=vt(t,I,g);y.integrateTop&&(w.tl={...I.tl},w.tr={...I.tr}),y.integrateBottom&&(w.br={...g.br},w.bl={...g.bl});let p=ot(t,W(g),!0);const T=((t,e,i=!1)=>{const r=v(t),o=d(t);if(!e)return[];const n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)e.bl.y<=st(o.MARGIN,r[t]).y&&(s[l++]=i?t:r[t]);const a=new Array(l);for(let t=0;t<l;t++)a[t]=s[t];return a})(t,g,!0);let D=W(w),x=ot(t,D);const f=(n.DEFINED_MIN_HEIGHT_AND_WIDTH-2*n.MARGIN)/2;let A=0,G={},C=0,E=0;for(;C!==m;){const{it:e}=xt(t,D,w,x,a),i=e.getSortedData(),{mergedRectsIt:r}=await Gt(0,i,a),{arranged:o,itemsInBottomWorkSpace:n}=await Et(t,h.filter(t=>!G[t]),r,W(I),W(g),0,a);p=[...p,...Object.keys(n)],G={...G,...o};const s=Object.values(o);if(x=[...x,...s],C+=s.length,C!==m&&(E++,console.log("workSpaceResizeCount",E),b.br.y+=f,b.bl.y+=f,g&&(g.tl.y+=f,g.tr.y+=f,g.br.y+=f,g.bl.y+=f),w.br.y+=f,w.bl.y+=f,D=W(w),mt(t,p,f)),A++,A>1e3)throw"Arrange time out"}if(E>0){mt(t,T,f*E);let e=p.length;for(let t=0;t<e;t++)G[p[t]]=s[p[t]];e=T.length;for(let t=0;t<e;t++)G[T[t]]=s[T[t]]}const _=performance.now();return console.log("p1: ",l),console.log("p2: ",_),console.log("arrange total: ",_-l),G},Rt=async(t,e,i,r,o=!1)=>{const n=d(t),s=performance.now(),l={idCount:0},{minX:a,maxX:c,minY:u,maxY:h}=it(t,e,r,i,void 0,void 0);let m=new Array(e.length-1),b=e.length-1;for(let t=0;t<b;t++)m[t]=e[t];const w={tl:{x:0,y:u},tr:{x:n.WIDTH,y:u},br:{x:n.WIDTH,y:h},bl:{x:0,y:h}},I={tl:{...w.tl},tr:{...w.tr},br:{...w.br},bl:{...w.bl}},{topWorkSpaceCo:g,bottomWorkSpaceCo:y}=rt(t,w,0,n.WIDTH),p=vt(t,g,y);p.integrateTop&&(I.tl={...g.tl},I.tr={...g.tr}),p.integrateBottom&&(I.br={...y.br},I.bl={...y.bl});const v={tl:{x:a,y:u},tr:{x:c,y:u},br:{x:c,y:h},bl:{x:a,y:h}},T={tl:{...v.tl},tr:{...v.tr},br:{...v.br},bl:{...v.bl}},{topWorkSpaceCo:D,bottomWorkSpaceCo:x}=rt(t,v,a-n.MARGIN,c+n.MARGIN);vt(t,D).integrateTop&&(T.tl={...D.tl},T.tr={...D.tr}),x&&(T.br={...x.br},T.bl={...x.bl});const f=W(I);let A=ot(t,f),G=W(T);const C=2*n.DEFINED_MIN_HEIGHT_AND_WIDTH;let E=0,_={},R=0,M=0;for(;R!==b;){let e;if(0===E){const{it:i}=xt(t,f,I,A,l);e=i}else{if(1===E){const{itemsInWorkSpace:e,updatedItemsToArrange:i}=nt(t,v,D,x,T,_,m);A=e,m=i,b=i.length+R,E++;continue}if(E>=2){const{it:i}=xt(t,G,T,A,l);e=i}}const i=e.getSortedData(),{mergedRectsIt:r}=await Gt(0,i,l),{arranged:o}=await Et(t,m.filter(t=>!_[t]),r,W(g),W(y),0,l);_={..._,...o};const n=Object.values(o);if(A=[...A,...n],R+=n.length,R!==b&&E>=2&&(M++,console.log("workSpaceResizeCount",M),T.br.y+=C,T.bl.y+=C,G=W(T)),E++,E>1e3)throw"Arrange time out"}const N=performance.now();return console.log("p1: ",s),console.log("p2: ",N),console.log("arrange total: ",N-s),_},Mt=async(t,e,i)=>{const r=d(t),o=performance.now(),n={idCount:0},s=r.WIDTH,l=i,a=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,c=e.length,u={tl:{x:0,y:l},tr:{x:s,y:l},br:{x:s,y:a},bl:{x:0,y:a}},h={tl:{...u.tl},tr:{...u.tr},br:{...u.br},bl:{...u.bl}},{topWorkSpaceCo:m}=rt(t,u,0,r.WIDTH);vt(t,m).integrateTop&&(h.tl={...m.tl},h.tr={...m.tr});let b=W(h),w=ot(t,b);const I=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let g=0,y={},p=0,v=0;for(;p!==c;){const{it:i}=xt(t,b,h,w,n),r=i.getSortedData(),{mergedRectsIt:o}=await Gt(0,r,n),{arranged:s}=await Et(t,e.filter(t=>!y[t]),o,W(m),void 0,0,n);y={...y,...s};const l=Object.values(s);if(w=[...w,...l],p+=l.length,p!==c&&(v++,console.log("workSpaceResizeCount",v),u.br.y+=I,u.bl.y+=I,h.br.y+=I,h.bl.y+=I,b=W(h)),g++,g>1e4)throw"Arrange time out"}const T=performance.now();return console.log("p1: ",o),console.log("p2: ",T),console.log("arrange total: ",T-o),y},Nt=async function(t,e,i){const r=y(this),o=b(this),n=T(this);t=parseInt(t),F(this,t,e,i),Z(this),p(this,r);const s=v(this);s[t].width=e,s[t].height=i;const l={x:r[t].x,y:r[t].y,width:e,height:i},a=Y(this,l,t),d=await Rt(this,a,l.y+l.height,l.x+l.width);g(this,s),o.$limberGridViewItems[t].style.width=s[t].width+"px",o.$limberGridViewItems[t].style.height=s[t].height+"px";const c=Object.keys(d),u=c.length;for(let t=0;t<u;t++){const e=c[t],i=d[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.resizeComplete(t,e,i,c)},$t=async function(t,e,i){const r=y(this),o=b(this);t=parseInt(t),F(this,t,e,i),Z(this),p(this,r);const n=v(this);n[t].width=e,n[t].height=i;const s={x:r[t].x,y:r[t].y,width:e,height:i},l=Y(this,s,t),a=await Rt(this,l,s.y+s.height,s.x+s.width,!0),d=Object.keys(a),c=d.length;for(let t=0;t<c;t++){const e=d[t],i=a[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},Vt=async function(t,e,i){const r=y(this),o=b(this),n=T(this),s=u(this);if(t=parseInt(t),s.LATCH_MOVED_ITEM){const t=K(this,e,i);e=t.toX,i=t.toY}j(this,t,e,i),Z(this),p(this,r);const l=v(this);l[t].x=e,l[t].y=i;const a={x:e,y:i,width:r[t].width,height:r[t].height},d=X(this,a,t),c=await _t(this,d,i,i+r[t].height);g(this,l),o.$limberGridViewItems[t].classList.remove("limberGridViewItemDemo"),o.$limberGridViewItems[t].style.transform=`translate(${l[t].x}px, ${l[t].y}px)`,s.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[t].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[t].style.transition=""},s.ANIMATE_TIME));const h=Object.keys(c),m=h.length;for(let t=0;t<m;t++){const e=h[t],i=c[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.moveComplete(t,e,i,h)},Ht=async function(t,e,i){const r=y(this),o=b(this),n=u(this);if(t=parseInt(t),n.LATCH_MOVED_ITEM){const t=K(this,e,i);e=t.toX,i=t.toY,isNaN(t.overlappedItemIndex)||(o.$limberGridViewMoveGuide.style.transform="translate("+e+"px, "+i+"px)",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active"))}j(this,t,e,i),Z(this),p(this,r);const s=v(this);s[t].x=e,s[t].y=i;const l={x:e,y:i,width:r[t].width,height:r[t].height},a=X(this,l,t),d=await _t(this,a,i,i+r[t].height,!0);o.$limberGridViewItems[t].classList.add("limberGridViewItemDemo");const c=Object.keys(d),h=c.length;for(let t=0;t<h;t++){const e=c[t],i=d[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},Lt=t=>t.store.variables.bindedFunctions,Ot=function(t){return t.store.variables.eventSpecific.itemInteraction},St=function(t){return t.store.variables.eventSpecific.deskInteraction},Pt=function(t){const e=b(this),i=u(this),r=y(this),o=Ot(this),n=Lt(this);if(1!==t.which)return;const s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),clearTimeout(o.longPressCheck),o.longPressCheck=setTimeout(kt.bind(this,t),i.MOUSE_DOWN_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,e.$limberGridView.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,E(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Wt=function(t){const e=b(this),i=u(this),r=y(this),o=Ot(this),n=Lt(this);if(1!==t.touches.length)return void jt.call(this,t);if(0!==t.which)return void jt.call(this,t);if(!1===f(this,t))return;const s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.longTouchCheck=setTimeout(zt.bind(this,t),i.TOUCH_HOLD_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,e.$limberGridView.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,E(this,o.userActionData),t.preventDefault()),t.stopPropagation())},kt=function(t){const e=Ot(this);!1===e.mouseDownCancel&&(e.mouseDownTimerComplete=!0,_(this,e.userActionData,t))},zt=function(t){const e=Ot(this);!1===e.touchHoldCancel&&(e.touchHoldTimerComplete=!0,_(this,e.userActionData,t))},Bt=function(t){const e=b(this),i=d(this),r=u(this),o=Ot(this);if(!0===o.mouseDownTimerComplete)if("move"===o.userActionData.type){R(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const e=D(this,t);if(!1!==e){const t=e.y;w(this,t),o.showMoveDemoTimeOutVariable=setTimeout(Kt.bind(this,o.userActionData.itemIndex,e),r.DEMO_WAIT_TIME)}}else{R(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.itemX,a=o.userActionData.itemY,d=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-a+n-i.PADDING_TOP;o.userActionData.newWidth=d,o.userActionData.newHeight=c;const u=t.offsetY+n;w(this,u),d>0&&c>0&&(e.$limberGridViewPseudoItem.style.width=d+"px",e.$limberGridViewPseudoItem.style.height=c+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),o.showResizeDemoTimeOutVariable=setTimeout(qt.bind(this,o.userActionData.itemIndex,d,c),r.DEMO_WAIT_TIME)}else o.mouseDownCancel=!0,Ft.call(this,t);t.preventDefault(),t.stopPropagation()},Ut=function(t){const e=b(this),i=d(this),r=u(this),o=Ot(this);if(!0===o.touchHoldTimerComplete&&1===t.touches.length)if("move"===o.userActionData.type){R(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const n=x(this,t);if(!1!==n){const t=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=e.$limberGridView.getBoundingClientRect(),a=(e.$limberGridView.offsetWidth,l.left,e.$limberGridView.offsetHeight-l.top),d=(n.x,i.PADDING_LEFT,n.y+i.PADDING_TOP-t),c=n.y;w(this,c);!0!==I(this,d,a)&&(o.showMoveDemoTimeOutVariable=setTimeout(Kt.bind(this,o.userActionData.itemIndex,n),r.DEMO_WAIT_TIME))}}else{R(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=o.userActionData.itemX,s=o.userActionData.itemY,l=x(this,t),a=l.x-n,d=l.y-s;if(!1!==l&&(o.userActionData.newWidth=a,o.userActionData.newHeight=d,a>0&&d>0&&(e.$limberGridViewPseudoItem.style.width=a+"px",e.$limberGridViewPseudoItem.style.height=d+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(d)}px`))),!1!==l){const t=e.$limberGridView.scrollTop,n=e.$limberGridView.scrollLeft,s=e.$limberGridView.getBoundingClientRect(),c=(e.$limberGridView.offsetWidth,s.left,e.$limberGridView.offsetHeight-s.top),u=(l.x,i.PADDING_LEFT,l.y+i.PADDING_TOP-t),h=l.y;w(this,h);!0!==I(this,u,c)&&(o.showResizeDemoTimeOutVariable=setTimeout(qt.bind(this,o.userActionData.itemIndex,a,d),r.DEMO_WAIT_TIME))}}else o.touchHoldCancel=!0,jt.call(this,t);t.stopPropagation()},Yt=async function(t){const e=Ot(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.mouseDownTimerComplete)if("move"===e.userActionData.type){const r=D(this,t);var i={};try{if(!1===r)throw"Mouse position outside grid area.";await Vt.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),Qt(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Nt.call(this,e.userActionData.itemIndex,r,o)}catch(t){Qt(this)}else e.mouseDownCancel=!0;Ft.call(this,t),e.userActionData={}},Xt=async function(t){const e=Ot(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.touchHoldTimerComplete&&0===t.touches.length)if("move"===e.userActionData.type){const r=x(this,t);var i={};try{if(!1===r)throw"Touch position outside grid area.";await Vt.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),Qt(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Nt.call(this,e.userActionData.itemIndex,r,o)}catch(t){Qt(this)}else e.touchHoldCancel=!0;jt.call(this,t),t.stopPropagation(),e.userActionData={}},Ft=function(t){const e=b(this),i=Ot(this),r=Lt(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((t,e)=>{const i=b(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let t=0;t<r;t++)i.$limberGridViewItems[t].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((t,e)=>{const i=b(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[e.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing")})(this,i.userActionData),b(this).$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),Qt(this),document.removeEventListener("mousemove",r.onItemMouseMove),e.$limberGridView.removeEventListener("mousemove",r.onItemMouseMove),document.removeEventListener("mouseup",r.onItemMouseUp),document.removeEventListener("contextmenu",r.onItemContextMenu),document.removeEventListener("touchmove",r.onItemTouchMove),e.$limberGridView.removeEventListener("touchmove",r.onItemTouchMove),document.removeEventListener("touchend",r.onItemTouchEnd),document.removeEventListener("contextmenu",r.onItemTouchContextMenu),document.removeEventListener("touchcancel",r.onItemTouchCancel),i.userActionData={},t.preventDefault(),t.stopPropagation()},jt=function(t){Ft.call(this,t)},Zt=function(t){Ft.call(this,t)},Kt=async function(t,e){const i=b(this);try{if(!1===e)throw"Invalid mouse position.";await Ht.call(this,t,e.x,e.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(t){console.error(t),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},qt=async function(t,e,i){const r=b(this);try{await $t.call(this,t,e,i),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(t){console.error(t),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},Qt=function(t){const e=b(t),i=y(t),r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].style.transform=`translate(${i[t].x}px, ${i[t].y}px)`},Jt=t=>{const e=b(t),i=u(t);e.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");for(let t=0;t<r;t++)e.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state");"ADD"===i.DESK_INTERACTION_MODE?e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},te=function(){const t=G(this),e=b(this),i=T(this),r=Lt(this);if(!0===t.editable){Q(this)||!1!==t.enableInteractiveAddAndCut&&(e.$limberGridView.addEventListener("mousedown",r.onDeskMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridView.addEventListener("touchstart",r.onDeskTouchStart));for(var o=e.$limberGridViewItems.length,n=0;n<o;n++)Q(this)||(e.$limberGridViewItems[n].addEventListener("mousedown",r.onItemMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridViewItems[n].addEventListener("touchstart",r.onItemTouchStart)),i.onItemClickCallback&&e.$limberGridViewItems[n].addEventListener("click",r.onItemClick)}},ee=function(){const t=G(this),e=b(this),i=Lt(this);if(!0===t.editable&&(void 0!==e.$limberGridView&&(e.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),e.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),void 0!==e.$limberGridViewItems)){const t=e.$limberGridViewItems.length;for(let r=0;r<t;r++)e.$limberGridViewItems[r].removeEventListener("mousedown",i.onItemMouseDown),e.$limberGridViewItems[r].removeEventListener("touchstart",i.onItemTouchStart),e.$limberGridViewItems[r].removeEventListener("click",i.onItemClick)}},ie=function(){const t=b(this),e=Lt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].addEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].addEventListener("touchstart",e.onItemTouchStart)}},re=function(){const t=b(this),e=Lt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].removeEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].removeEventListener("touchstart",e.onItemTouchStart)}},oe=function(t,e=!0){const i=G(t),r=y(t),o=d(t),n=u(t),s=b(t),l=T(t);ee.call(t);const a=r.length;let c=1;e&&(c=o.WIDTH_SCALE_FACTOR);const h=new Array(a);let w;if(Q(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";w=se(r);for(let e=0;e<a;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c,w[e].width=o.WIDTH,w[e].height=o.WIDTH/n.MOBILE_ASPECT_RATIO;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",w[e].index),i.style.width=w[e].width+"px",i.style.height=w[e].height+"px",h[e]=i}}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable");for(let e=0;e<a;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",e),i.style.transform=`translate(${r[e].x}px, ${r[e].y}px)`,i.style.width=r[e].width+"px",i.style.height=r[e].height+"px",h[e]=i}}const I=s.$limberGridViewItems.length;for(let t=0;t<I;t++)s.$limberGridView.removeChild(s.$limberGridViewItems[t]);for(let t=0;t<a;t++)s.$limberGridView.appendChild(h[t]);for(let e=0;e<a;e++){const i=h[e];if(Q(t)){const r=l.renderContent(e,w[e].width,w[e].height);le(t,r,i)}else{const o=l.renderContent(e,r[e].width,r[e].height);le(t,o,i)}}m(t,[...s.$limberGridView.getElementsByClassName("limber-grid-view-item")]),te.call(t),l.renderComplete&&l.renderComplete()},ne=async function(t,e){const i=G(t),r=b(t),o=T(t),n=d(t),s=u(t);ee.call(t);try{if(e.x&&e.y&&e.width&&e.height){let i=!1;if(i=wt(t,e.x,e.y,e.width,e.height),!i)return!1;{const i=y(t);p(t,i);const r=v(t);r.push(e),g(t,r)}}else{if(!e.width||!e.height||e.x||e.y)return!1;{if(e.width>n.WIDTH)return!1;const i=y(t);p(t,i);const r=v(t),o=(t=>{const e=y(t),i=d(t);let r,o=i.MARGIN;const n=e.length;for(let t=0;t<n;t++)r=st(i.MARGIN,e[t]),r.y+r.height>o&&(o=r.y+r.height);return o})(t);r.push({x:void 0,y:void 0,width:e.width,height:e.height});await Mt(t,[r.length-1],o);g(t,r)}}const l=y(t),a=l.length-1;let c;const u=document.createElement("div");if(Q(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";u.setAttribute("class",t),u.setAttribute("data-index",a),u.style.width=n.WIDTH+"px",u.style.height=n.WIDTH/s.MOBILE_ASPECT_RATIO+"px",c=o.renderContent(a,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO,"isAdd")}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable"),u.setAttribute("class",t),u.setAttribute("data-index",a),u.style.transform=`translate(${l[a].x}px, ${l[a].y}px)`,u.style.width=l[a].width+"px",u.style.height=l[a].height+"px",c=o.renderContent(a,l[a].width,l[a].height,"isAdd")}r.$limberGridView.appendChild(u),le(t,c,u),m(t,[...r.$limberGridView.getElementsByClassName("limber-grid-view-item")]),o.addComplete&&o.addComplete(a)}catch(t){console.error(t)}te.call(t)},se=t=>{const e=t.length,i=new Array(e);for(let r=0;r<e;r++)i[r]={...t[r]},i[r].index=r;return i.sort((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y)},le=(t,e,i)=>{const r=T(t);"string"==typeof e?i.innerHTML=e:e instanceof Element?(i.innerHTML="",i.appendChild(e)):r.renderPlugin&&r.renderPlugin(e,i)},ae=function(t){const e=b(this),i=u(this),r=St(this),o=Lt(this);t.target.classList.contains("limber-grid-view")&&(t.stopPropagation(),1===t.which&&(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(ce.bind(this,t,t.offsetX,t.offsetY),i.MOUSE_DOWN_TIME),e.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu)))},de=function(t){const e=b(this),i=u(this),r=St(this),o=Lt(this);t.target.classList.contains("limber-grid-view")&&1===t.touches.length&&0===t.which&&(r.tapHoldCancel=!1,r.tapHoldTimerComplete=!1,e.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),re.call(this),clearTimeout(r.longTouchCheck),r.longTouchCheck=setTimeout(ue.bind(this,t),i.TOUCH_HOLD_TIME),t.stopPropagation())},ce=function(t,e,i){const r=b(this),o=d(this),n=St(this);if(!1===n.mouseDownCancel){n.mouseDownTimerComplete=!0;var s=r.$limberGridView.scrollTop,l=e+r.$limberGridView.scrollLeft-o.PADDING_LEFT,a=i+s-o.PADDING_TOP;n.userActionData={type:"add",addPositionX:l,addPositionY:a},r.$limberGridViewAddCutGuide.style.height="1px",r.$limberGridViewAddCutGuide.style.width="1px",r.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${a}px)`,r.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Jt(this)}},ue=function(t){const e=b(this),i=St(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;var r=x(this,t),o=r.x,n=r.y;i.userActionData={type:"add",addPositionX:o,addPositionY:n};setTimeout(function(){e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")}.bind(this),500),e.$limberGridViewAddCutGuide.style.height="1px",e.$limberGridViewAddCutGuide.style.width="1px",e.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Jt(this),e.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),t.preventDefault()}},he=function(t){const e=b(this),i=d(this),r=u(this),o=St(this);if(!0===o.mouseDownTimerComplete){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,a=o.userActionData.addPositionY,d=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-a+n-i.PADDING_TOP;o.userActionData.newWidth=d,o.userActionData.newHeight=c;const u=t.offsetY+n;w(this,u),d>0&&c>0&&(e.$limberGridViewAddCutGuide.style.width=d+"px",e.$limberGridViewAddCutGuide.style.height=c+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(pe.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),r.DEMO_WAIT_TIME)):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(ve.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),r.DEMO_WAIT_TIME))}else ye.call(this,t);t.stopPropagation()},me=function(t){const e=b(this),i=d(this),r=u(this),o=St(this);if(!0===o.tapHoldTimerComplete&&1===t.touches.length){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,a=o.userActionData.addPositionY,d=x(this,t),c=d.x-l,u=d.y-a;if(!1!==d&&(o.userActionData.newWidth=c,o.userActionData.newHeight=u,c>0&&u>0&&(e.$limberGridViewAddCutGuide.style.width=c+"px",e.$limberGridViewAddCutGuide.style.height=u+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(c)}px, h: ${parseInt(u)}px`))),!1!==d){const t=e.$limberGridView.getBoundingClientRect(),s=(e.$limberGridView.offsetWidth,t.left,e.$limberGridView.offsetHeight-t.top),l=(d.x,i.PADDING_LEFT,d.y+i.PADDING_TOP-n),a=d.y;w(this,a);const h=I(this,l,s);"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),!0!==h&&(o.addItemAllowCheckTimeOutVariable=setTimeout(pe.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME))):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),!0!==h&&(o.cutSpaceAllowCheckTimeOutVariable=setTimeout(ve.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME)))}t.preventDefault()}else ye.call(this);t.stopPropagation()},be=function(t){const e=b(this),i=u(this),r=St(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck),!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(wt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;ne(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&bt(this,t.y,t.shiftHeight)}}else r.mouseDownCancel=!0;ye.call(this),t.stopPropagation()},we=function(t){const e=b(this),i=u(this),r=St(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck),!0===r.tapHoldTimerComplete&&0===t.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(wt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;ne(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&bt(this,t.y,t.shiftHeight)}}else r.tapHoldCancel=!0;ye.call(this),t.stopPropagation()},Ie=function(t){ye.call(this)},ge=function(t){t.preventDefault()},ye=function(t){const e=b(this),i=St(this),r=Lt(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(t=>{const e=b(t);e.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=e.$limberGridViewItems.length;for(var r=0;r<i;r++)e.$limberGridViewItems[r].classList.remove("limber-grid-view-item-resizing-state"),e.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state");e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")})(this),e.$limberGridView.removeEventListener("mousemove",r.onDeskMouseMove),document.removeEventListener("mouseup",r.onDeskMouseUp),document.removeEventListener("contextmenu",r.onDeskContextMenu),e.$limberGridView.removeEventListener("touchmove",r.onDeskTouchMove),document.removeEventListener("touchend",r.onDeskTouchEnd),document.removeEventListener("touchcancel",r.onDeskTouchCancel),document.removeEventListener("contextmenu",r.onDeskTouchContextMenu),ie.call(this),i.userActionData={},t&&(t.preventDefault(),t.stopPropagation())},pe=function(t,e,i,r){const o=b(this);!1===wt(this,t,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},ve=function(t,e,i,r){const o=b(this);!1===It(this,0,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Te={ADD:!0,CUTSPACE:!0},De={true:!0,false:!0},xe=async function(t,e,i){const r=b(t),c=d(t),u=y(t);if(!0===i||!(t=>{if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){if(!t[i]||isNaN(t[i].x)||t[i].x<0||isNaN(t[i].y)||t[i].y<0||isNaN(t[i].height)||t[i].height<=0||isNaN(t[i].width)||t[i].width<=0)return!1;if(!S(P(t[i])))return!1}return!0}return!1})(u)){console.warn("Auto-arranging"),p(t,u);const e=v(t),i=u.length,r=new Array(i);for(let t=0;t<i;t++)r[t]=t,e[t].x=void 0,e[t].y=void 0,u[t].x/=c.WIDTH_SCALE_FACTOR,u[t].y/=c.WIDTH_SCALE_FACTOR,u[t].width/=c.WIDTH_SCALE_FACTOR,u[t].height/=c.WIDTH_SCALE_FACTOR;o(t,c.GRID_WIDTH),n(t,c.GRID_HEIGHT),l(t,c.GRID_MARGIN),s(t,1),a(t,c.MIN_HEIGHT_AND_WIDTH),await Mt(t,r,c.MARGIN),g(t,e)}if(function(t,e){t.store.constants.privateConstants.PADDING_LEFT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-left"))),function(t,e){t.store.constants.privateConstants.PADDING_RIGHT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-right"))),function(t,e){t.store.constants.privateConstants.PADDING_TOP=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-top"))),function(t,e){t.store.constants.privateConstants.PADDING_BOTTOM=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-bottom"))),o(t,r.$limberGridView.clientWidth-c.PADDING_LEFT-c.PADDING_RIGHT),n(t,r.$limberGridView.clientHeight-c.PADDING_TOP-c.PADDING_BOTTOM),e){const t=u.length;for(let e=0;e<t;e++)u[e].x/=c.WIDTH_SCALE_FACTOR,u[e].y/=c.WIDTH_SCALE_FACTOR,u[e].width/=c.WIDTH_SCALE_FACTOR,u[e].height/=c.WIDTH_SCALE_FACTOR;c.MARGIN/=c.WIDTH_SCALE_FACTOR,c.DEFINED_MIN_HEIGHT_AND_WIDTH/=c.WIDTH_SCALE_FACTOR}s(t,c.WIDTH/c.GRID_WIDTH),l(t,c.MARGIN*c.WIDTH_SCALE_FACTOR),a(t,c.DEFINED_MIN_HEIGHT_AND_WIDTH*c.WIDTH_SCALE_FACTOR)},fe=function(t){var e,i,r,o,n,s,l,a,d,u,h,m,b,w,I,g,y,p,v,T,D;(null==t||null===(e=t.gridData)||void 0===e?void 0:e.WIDTH)&&!isNaN(t.gridData.WIDTH)&&(T=this,D=t.gridData.WIDTH,T.store.constants.privateConstants.GRID_WIDTH=D),(null==t||null===(i=t.gridData)||void 0===i?void 0:i.HEIGHT)&&!isNaN(t.gridData.HEIGHT)&&function(t,e){t.store.constants.privateConstants.GRID_HEIGHT=e}(this,t.gridData.HEIGHT),(null==t||null===(r=t.gridData)||void 0===r?void 0:r.MARGIN)&&!isNaN(t.gridData.MARGIN)&&function(t,e){t.store.constants.privateConstants.GRID_MARGIN=e}(this,t.gridData.MARGIN),(null==t||null===(o=t.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&!isNaN(t.gridData.MIN_HEIGHT_AND_WIDTH)&&function(t,e){t.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=e}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),(null==t||null===(n=t.publicConstants)||void 0===n?void 0:n.mobileAspectRatio)&&!isNaN(t.publicConstants.mobileAspectRatio)&&c(this,"MOBILE_ASPECT_RATIO",t.publicConstants.mobileAspectRatio),(null==t||null===(s=t.publicConstants)||void 0===s?void 0:s.moveGuideRadius)&&!isNaN(t.publicConstants.moveGuideRadius)&&c(this,"MOVE_GUIDE_RADIUS",t.publicConstants.moveGuideRadius),(null==t||null===(l=t.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&!isNaN(t.publicConstants.resizeSquareGuideLength)&&c(this,"RESIZE_SQUARE_GUIDE_LENGTH",t.publicConstants.resizeSquareGuideLength),(null==t||null===(a=t.publicConstants)||void 0===a?void 0:a.resizeSquareBorderGuideWidth)&&!isNaN(t.publicConstants.resizeSquareBorderGuideWidth)&&c(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",t.publicConstants.resizeSquareBorderGuideWidth),(null==t||null===(d=t.publicConstants)||void 0===d?void 0:d.autoScrollDistance)&&!isNaN(t.publicConstants.autoScrollDistance)&&c(this,"AUTO_SCROLL_DISTANCE",t.publicConstants.autoScrollDistance),(null==t||null===(u=t.publicConstants)||void 0===u?void 0:u.autoScrollPoint)&&!isNaN(t.publicConstants.autoScrollPoint)&&c(this,"AUTO_SCROLL_POINT",t.publicConstants.autoScrollPoint),(null==t||null===(h=t.publicConstants)||void 0===h?void 0:h.moveOrResizeHeightIncrements)&&!isNaN(t.publicConstants.moveOrResizeHeightIncrements)&&c(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",t.publicConstants.moveOrResizeHeightIncrements),(null==t||null===(m=t.publicConstants)||void 0===m?void 0:m.mouseDownTime)&&!isNaN(t.publicConstants.mouseDownTime)&&c(this,"MOUSE_DOWN_TIME",t.publicConstants.mouseDownTime),(null==t||null===(b=t.publicConstants)||void 0===b?void 0:b.touchHoldTime)&&!isNaN(t.publicConstants.touchHoldTime)&&c(this,"TOUCH_HOLD_TIME",t.publicConstants.touchHoldTime),(null==t||null===(w=t.publicConstants)||void 0===w?void 0:w.demoWaitTime)&&!isNaN(t.publicConstants.demoWaitTime)&&c(this,"DEMO_WAIT_TIME",t.publicConstants.demoWaitTime),(null==t||null===(I=t.publicConstants)||void 0===I?void 0:I.windowResizeWaitTime)&&!isNaN(t.publicConstants.windowResizeWaitTime)&&c(this,"WINDOW_RESIZE_WAIT_TIME",t.publicConstants.windowResizeWaitTime),(null==t||null===(g=t.publicConstants)||void 0===g?void 0:g.deskInteractionMode)&&Te[t.publicConstants.deskInteractionMode]&&c(this,"DESK_INTERACTION_MODE",t.publicConstants.deskInteractionMode),"boolean"==typeof(null==t||null===(y=t.publicConstants)||void 0===y?void 0:y.latchMovedItem)&&c(this,"LATCH_MOVED_ITEM",t.publicConstants.latchMovedItem),"boolean"==typeof(null==t||null===(p=t.publicConstants)||void 0===p?void 0:p.animateMovedItem)&&c(this,"ANIMATE_MOVED_ITEM",t.publicConstants.animateMovedItem),(null==t||null===(v=t.publicConstants)||void 0===v?void 0:v.animateTime)&&!isNaN(t.publicConstants.animateTime)&&c(this,"ANIMATE_TIME",t.publicConstants.animateTime)},Ae=function(){const t=b(this),e=A(this);var i,r;let o;i=this,r=document.getElementsByTagName("body")[0],i.store.variables.elements.$body=r;do{o="limber-grid-view-pseudo-container-"+et()}while(null!==document.getElementById(o));!function(t,e){t.store.variables.essentials.pseudoContainerId=e}(this,o);const n=document.createElement("div");if(n.setAttribute("class","limber-grid-view-pseudo-container"),n.setAttribute("id",o),function(t,e){t.store.variables.elements.$pseudoContainer=e}(this,n),e.pseudoElementContainer){let t;"string"==typeof e.pseudoElementContainer?t=document.getElementById(e.pseudoElementContainer):e.pseudoElementContainer instanceof Element&&(t=e.pseudoElementContainer),t.appendChild(n)}else t.$body.appendChild(n);t.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">Â©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright Â© 2018-2020 Subendra Kumar Sharma. License GPLv3+: GNU GPL version 3 or later &lthttps://www.gnu.org/licenses/&gt.</div></div></div>',function(t,e){t.store.variables.elements.$limberGridViewContainer=e}(this,t.$el.getElementsByClassName("limber-grid-view-container")[0]),function(t,e){t.store.variables.elements.$limberGridView=e}(this,t.$el.getElementsByClassName("limber-grid-view")[0]);const s=document.createElement("div"),l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div");u.innerHTML="<div></div>",s.setAttribute("class","limber-grid-view-pseudo-container-item"),l.setAttribute("class","limber-grid-view-pseudo-item"),a.setAttribute("class","limber-grid-view-move-guide"),d.setAttribute("class","limber-grid-view-height-adjust-guide"),c.setAttribute("class","limber-grid-view-add-cut-guide"),u.setAttribute("class","limber-grid-view-touch-hold-guide"),t.$pseudoContainer.appendChild(s),t.$limberGridView.appendChild(l),t.$limberGridView.appendChild(a),t.$limberGridView.appendChild(d),t.$limberGridView.appendChild(c),t.$limberGridView.appendChild(u),function(t,e){t.store.variables.elements.$pseudoContainerItem=e}(this,s),function(t,e){t.store.variables.elements.$limberGridViewPseudoItem=e}(this,l),function(t,e){t.store.variables.elements.$limberGridViewMoveGuide=e}(this,a),function(t,e){t.store.variables.elements.$limberGridViewHeightAdjustGuide=e}(this,d),function(t,e){t.store.variables.elements.$limberGridViewAddCutGuide=e}(this,c),function(t,e){t.store.variables.elements.$limberGridViewTouchHoldGuide=e}(this,u)},Ge=function(t){const e=u(this);setTimeout(Lt(this).onWindowResizeTimerCallback,e.WINDOW_RESIZE_WAIT_TIME),window.removeEventListener("resize",Lt(this).onWindowResize)},Ce=async function(t){await xe(this,!0,!1),oe(this);!1!==G(this).reRenderOnResize&&window.addEventListener("resize",Lt(this).onWindowResize)};function Ee(t){var e,i;if(this.initializeStore(),function(t,e){Object.assign(t.options,e)}(this,t),g(this,t.positionData),e=this,i=t.callbacks,e.store.variables.essentials.callbacks=i,"string"==typeof t.el){const e=document.getElementById(t.el);if(!e)throw"No for element found for id "+t.el;h(this,e)}else{if(!(t.el instanceof Element))throw"Valid DOM Element or Id required";h(this,t.el)}fe.call(this,t),Ae.call(this),!0===this.options.reRenderOnResize&&window.addEventListener("resize",Lt(this).onWindowResize),setTimeout(async function(){await xe(this,!1,t.autoArrange),oe(this,!0)}.bind(this))}
/** @license LimberGridView

LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.

Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
Ee.prototype.constructor=Ee,Ee.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:Pt.bind(this),onItemTouchStart:Wt.bind(this),onItemMouseMove:Bt.bind(this),onItemTouchMove:Ut.bind(this),onItemMouseUp:Yt.bind(this),onItemTouchEnd:Xt.bind(this),onItemContextMenu:Ft.bind(this),onItemTouchContextMenu:jt.bind(this),onItemTouchCancel:Zt.bind(this),onDeskMouseDown:ae.bind(this),onDeskTouchStart:de.bind(this),onDeskMouseMove:he.bind(this),onDeskTouchMove:me.bind(this),onDeskMouseUp:be.bind(this),onDeskTouchEnd:we.bind(this),onDeskTouchCancel:Ie.bind(this),onDeskTouchContextMenu:ge.bind(this),onDeskContextMenu:ye.bind(this),onWindowResize:Ge.bind(this),onWindowResizeTimerCallback:Ce.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}}},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,MOUSE_DOWN_TIME:500,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,DESK_INTERACTION_MODE:"ADD",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250}}}},Ee.prototype.renderItem=function(t){!function(t,e){const i=b(t),r=T(t),o=y(t),n=d(t),s=u(t);let l;l=Q(t)?r.renderContent(e,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(e,o[e].width,o[e].height),le(t,l,i.$limberGridViewItems[e]),r.renderComplete&&r.renderComplete(e)}(this,t)},Ee.prototype.getGridData=function(){const t=r(this),e=y(this),i=e.length,o=new Array(i);for(let r=0;r<i;r++)o[r]={x:J(e[r].x/t.WIDTH_SCALE_FACTOR),y:J(e[r].y/t.WIDTH_SCALE_FACTOR),width:J(e[r].width/t.WIDTH_SCALE_FACTOR),height:J(e[r].height/t.WIDTH_SCALE_FACTOR)};return{gridData:{height:t.GRID_HEIGHT,width:t.GRID_WIDTH,margin:t.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:t.MIN_HEIGHT_AND_WIDTH},positionData:o}},Ee.prototype.setDeskInteractMode=function(t){Te[t]&&c(this,"DESK_INTERACTION_MODE",t)},Ee.prototype.setLatchMovedItem=function(t){De[t]&&c(this,"LATCH_MOVED_ITEM",t)},Ee.prototype.addItem=function(t){if(!t){const e=r(this);t={width:e.DEFINED_MIN_HEIGHT_AND_WIDTH,height:e.DEFINED_MIN_HEIGHT_AND_WIDTH}}ne(this,t)},Ee.prototype.removeItem=function(t){Number.isInteger(t)&&function(t,e){const i=b(t),r=T(t),o=y(t),n=d(t),s=u(t);ee.call(t),o.splice(e,1),r.removePlugin&&r.removePlugin(i.$limberGridViewItems[e]),i.$limberGridView.removeChild(i.$limberGridViewItems[e]),m(t,[...i.$limberGridView.getElementsByClassName("limber-grid-view-item")]);const l=o.length;for(let t=e;t<l;t++)i.$limberGridViewItems[t].setAttribute("data-index",t);r.removeComplete&&r.removeComplete(e,i.$limberGridViewItems[e]);for(let a=e;a<l;a++){let e;e=Q(t)?r.renderContent(a,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(a,o[a].width,o[a].height),le(t,e,i.$limberGridViewItems[a])}te.call(t)}(this,t)},Ee.prototype.setIsMobileCheck=function(t){this.options.isMobileCheck=t};e.default=Ee}])}));