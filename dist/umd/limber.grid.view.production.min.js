/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Library using Computational Geometry to render movable, dynamically resizable, and auto-arranging grids.
 *
 * Copyright © 2018-2022 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["resize-observer-polyfill"],e):"object"==typeof exports?exports.LimberGridView=e(require("resize-observer-polyfill")):t.LimberGridView=e(t["resize-observer-polyfill"])}(window,(function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=9)}([function(t,e,i){"use strict";
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/t.exports=i(5)},function(t,e,i){"use strict";
/** @license RTreeJS

RTreeJS, a JavaScript Tree library that helps to query, insert and delete Rectangles.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of RTreeJS.

RTreeJS is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

RTreeJS is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with RTreeJS.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/t.exports=i(4)},function(t,e,i){"use strict";
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/t.exports=i(6)},function(e,i){e.exports=t},function(t,e,i){
/** @license RTreeJS

RTreeJS, a JavaScript Tree library that helps to query, insert and delete Rectangles.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of RTreeJS.

RTreeJS is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

RTreeJS is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with RTreeJS.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=3)}([function(t,e,i){"use strict";
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/t.exports=i(1)},function(t,e,i){
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"ArrayStack",(function(){return o})),i.d(e,"ListStack",(function(){return n}));var s=function(t){var e;this.options=t,this.initialSize=(null==t?void 0:t.initialSize)||100,this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1,Array.isArray(null==t?void 0:t.data)&&this.constructStack(t.data,t.constructReverse),null===(e=this.options)||void 0===e||delete e.data};s.prototype.constructStack=function(t,e){var i=t.length;if(e)for(var s=i-1;s>=0;s--)this.push(t[s]);else for(var o=0;o<i;o++)this.push(t[o])},s.prototype.push=function(t){return null!=t&&(this.ptr===this.length-1&&this.resize(),this.stack[++this.ptr]=t,this.ptr+1)},s.prototype.pop=function(){if(this.ptr>=0){var t=this.stack[this.ptr];return this.ptr--,t}},s.prototype.resize=function(){var t=this.length,e=this.stack;this.length=2*this.length,this.stack=new Array(this.length);for(var i=0;i<t;i++)this.stack[i]=e[i]},s.prototype.isEmpty=function(){return this.ptr<0},s.prototype.peek=function(){if(this.ptr>=0)return this.stack[this.ptr]},s.prototype.getData=function(){for(var t=new Array(this.ptr+1),e=0;e<=this.ptr;e++)t[e]=this.stack[e];return t},s.prototype.setData=function(t){var e;this.empty(),this.constructStack(t,null===(e=this.options)||void 0===e?void 0:e.constructReverse)},s.prototype.getSize=function(){return this.ptr+1},s.prototype.empty=function(){this.ptr=-1},s.prototype.wipe=function(){this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1};var o=s;function r(t){this.length=0,this.HEAD=null,Array.isArray(null==t?void 0:t.data)&&this.constructStack(t.data,t.constructReverse)}r.prototype.constructNode=function(t){return{next:null,d:t}},r.prototype.constructStack=function(t,e){var i,s=t.length;if(e)for(i=s-1;i>=0;i--)this.push(t[i]);else for(i=0;i<s;i++)this.push(t[i])},r.prototype.push=function(t){var e=this.constructNode(t);return this.HEAD?(e.next=this.HEAD,this.HEAD=e):this.HEAD=e,++this.length},r.prototype.pop=function(){if(this.HEAD){var t=this.HEAD;return this.HEAD=this.HEAD.next,t.next=null,this.length--,t.d}},r.prototype.isEmpty=function(){return!this.HEAD},r.prototype.peek=function(){var t;return null===(t=this.HEAD)||void 0===t?void 0:t.d},r.prototype.getData=function(){for(var t=this.HEAD,e=new Array(this.length),i=0;null!=t;)e[i++]=t.d,t=t.next;return e},r.prototype.getSize=function(){return this.length},r.prototype.empty=function(){this.HEAD=null,this.length=0};var n=r;
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/}])},function(t,e,i){},function(t,e,i){"use strict";i.r(e),i.d(e,"RTreeIterative",(function(){return E}));var s=i(0);Math.sqrt(Number.MAX_SAFE_INTEGER);const o=t=>(t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1),r=(t,e)=>{const i=(t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1),s=(e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1);return i>s?i-s:s-i},n=(t,e)=>({x1:t.x1<e.x1?t.x1:e.x1,x2:t.x2>e.x2?t.x2:e.x2,y1:t.y1<e.y1?t.y1:e.y1,y2:t.y2>e.y2?t.y2:e.y2}),l=(t,e,i=0)=>{let s=Number.MAX_SAFE_INTEGER,o=0,r=Number.MAX_SAFE_INTEGER,n=0;for(let l=i;l<e;l++){const e=t[l];s=e.x1<s?e.x1:s,o=e.x2>o?e.x2:o,r=e.y1<r?e.y1:r,n=e.y2>n?e.y2:n}return{x1:s,x2:o,y1:r,y2:n}},a=(t,e)=>t.x1===e.x1&&t.x2===e.x2&&t.y1===e.y1&&t.y2===e.y2,d=(t,e)=>t.x1<=e.x1&&t.x2>=e.x2&&t.y1<=e.y1&&t.y2>=e.y2,c=(t,e)=>!(t.x1>=e.x2||e.x1>=t.x2||t.y1>=e.y2||e.y1>=t.y2),u=(t,e)=>!(t.x1>e.x2||e.x1>t.x2||t.y1>e.y2||e.y1>t.y2),h=(t,e,i)=>{let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<i;l++){const i=t[l],a=r(n(i,e),i);a<s&&(s=a,o=l)}return o},m=(t,e,i)=>{for(let s=0;s<e;s++)if(a(t[s],i))return!0;return!1},p=(t,e,i)=>{for(let s=0;s<e;s++)if(a(t[s],i))return s;return-1},y=(t={size:0,keys:[],pointers:[]},e)=>{for(let i=e;i<t.size-1;i++)t.keys[i]=t.keys[i+1],t.pointers[i]=t.pointers[i+1];t.size--},I=(t={size:0,keys:[],pointers:[]},e,i)=>{let s=Number.MAX_SAFE_INTEGER,r=-1,l=-1;const a=t.keys[e];for(let d=0;d<t.size;d++){if(d===e||t.pointers[d].size===i)continue;const c=t.pointers[d].keys,u=t.pointers[d].size;for(let t=0;t<u;t++){const e=c[t],i=o(n(a,e));i<s&&(s=i,r=d,l=t)}}if(-1!==r)return{ptr:r,ptrPtr:l}},f=(t={size:0,keys:[],pointers:[]},e,i)=>{var s;const o=t.pointers[i.ptr]||{size:0,keys:[],pointers:[]},r=o.keys[i.ptrPtr],n=o.pointers[i.ptrPtr];for(let t=i.ptrPtr;t<o.size-1;t++)o.keys[t]=o.keys[t+1],o.pointers[t]=o.pointers[t+1];o.size--,t.keys[i.ptr]=l(o.keys,o.size);const a=(null===(s=t.pointers[e])||void 0===s?void 0:s.size)||0,d=t.pointers[e]||{size:0,keys:[],pointers:[]};d.keys[a]=r,d.pointers[a]=n,d.size++,t.keys[e]=l(d.keys,d.size)},b=(t={size:0,keys:[],pointers:[]},e,i)=>{let s=-1,r=Number.MAX_SAFE_INTEGER,l={x1:-1,x2:-1,y1:-1,y2:-1};for(let i=0;i<t.size;i++){if(i===e)continue;const a=n(t.keys[i],t.keys[e]),d=o(a);d<r&&(r=d,l=a,s=i)}if(-1===s)return void(t.size=0);t.keys[s]=l;const a=t.pointers[e]||{size:0,keys:[],pointers:[]},d=t.pointers[s]||{size:0,keys:[],pointers:[]};let c=0;for(;c<a.size;)d.keys[d.size]=a.keys[c],d.pointers[d.size]=a.pointers[c],c++,d.size++;for(let i=e;i<t.size-1;i++)t.keys[i]=t.keys[i+1],t.pointers[i]=t.pointers[i+1];t.size--},v=(t,e,i,s)=>{const o=t[i],r=e[i];t[i]=t[s],e[i]=e[s],t[s]=o,e[s]=r},A=(t={size:0,keys:[],pointers:[]},e,i,s)=>{const{keys:o=[],pointers:r=[]}=t||{};let n=0,l=0,a=Number.MAX_SAFE_INTEGER,d=0;o[s]=e,r[s]=i;for(const[t,e]of o.entries())e.x2<a&&(a=e.x2,n=t),e.x1>d&&(d=e.x1,l=t);v(o,r,0,n),v(o,r,s,l)},x=(t,e,i,s)=>{const o=new Array(s+1),r=new Array(s+1);let n=i,l=0;for(;n<s+1;)o[l]=t[n],r[l]=e[n],l++,n++;return{rightRect:o,rptrs:r,rightSize:l}},g=(t={size:0,keys:[],pointers:[]},e,i,s,r)=>{const{keys:a=[],pointers:d=[]}=t||{},c=[...a],u=[...d];A(t,e,i,s);const{rectArrY:h,nodeArrY:m}=((t,e,i,s,o)=>{let r=0,n=0,l=Number.MAX_SAFE_INTEGER,a=0;t[o]=i,e[o]=s;for(const[e,i]of t.entries())i.y2<l&&(l=i.y2,r=e),i.y1>a&&(a=i.y1,n=e);return v(t,e,0,r),v(t,e,o,n),{rectArrY:t,nodeArrY:e}})(c,u,e,i,s),p=a[0];let y,I=Number.MAX_SAFE_INTEGER;const f=h[0];let b,g,w,T=Number.MAX_SAFE_INTEGER,E=1;for(;E<s+1;){I=Number.MAX_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,y=E,b=E;for(let t=E;t<=s;t++)g=n(p,a[t]),w=o(g),w<I&&(y=t,I=w),g=n(f,h[t]),w=o(g),w<T&&(b=t,T=w);v(a,d,E,y),v(h,m,E,b),E++}let D=r,G=r;if(s%2==0){let t=a[0],e=o(t),i=a[r+1],l=o(i),d=a[0],c=o(t),u=a[r+1],m=o(i);for(let i=1;i<r;i++)t=n(t,a[i]),e=o(t),d=n(d,h[i]),c=o(d);for(let t=r+2;t<=s;t++)i=n(i,a[t]),l=o(i),u=n(u,h[t]),m=o(u);o(n(t,a[r]))-e<o(n(i,a[r]))-l&&D++,o(n(d,h[r]))-c<o(n(u,h[r]))-m&&G++}return o(l(a,D-1))+o(l(a,s+1,D))<o(l(h,G-1))+o(l(h,s+1,G))?(t.size=D,x(a,d,D,s)):(t.size=G,t.keys=h,t.pointers=m,x(h,m,G,s))},w=(t={size:0,keys:[],pointers:[]},e,i,s,r)=>{const{keys:l=[],pointers:a=[]}=t||{};A(t,e,i,s);let d,c,u,h,m,p,y,I,f,b,g,w,T=l[0],E=l[s],D=1,G=s-1,_=o(T),R=o(E);for(;D<=G;)u=l[D],h=l[G],m=n(u,T),f=o(m),p=n(u,E),b=o(p),d=f-_>b-R,y=n(h,T),g=o(y),I=n(h,E),w=o(I),c=w-R>g-_,d&&c?(v(l,a,D,G),T=y,_=g,E=p,R=b,D++,G--):d||c?d?c?(D++,G--):(w>b?(v(l,a,D,G),E=p,R=b):(E=I,R=w),G--):(f>g?(v(l,a,D,G),T=y,_=g):(T=m,_=f),D++):(T=m,_=f,E=I,R=w,D++,G--);return((t={size:0,keys:[],pointers:[]},e,i,s,r)=>{let l=r;if(s%2==0){let t=e[0],i=o(t),a=e[r+1],d=o(a);for(let s=1;s<r;s++)t=n(t,e[s]),i=o(t);for(let t=r+2;t<=s;t++)a=n(a,e[t]),d=o(a);o(n(t,e[r]))-i<o(n(a,e[r]))-d&&l++}return t.size=l,x(e,i,l,s)})(t,l,a,s,r)},T=["green","purple","blue","orange","aqua","blueviolet","brown","cadetblue","yellow","violet","thistle","teal","steelblue","silver","sienna","sandybrown","salmon","saddlebrown","olive"];var E=class{constructor(t){var e,i,o;if(this.options=t,this.M=t.M||4,this.M%2==0?this.m=this.M/2:this.m=Math.ceil(this.M/2),this.M<2)throw"Value of M cannot be less than 2";if((null==t?void 0:t.m)&&Number.isInteger(t.m)&&t.m<=Math.ceil(this.M/2)&&t.m>=1)this.m=t.m;else if(null==t?void 0:t.m)throw"Can't hard set value of m for M, invalid value of m provided";this.splitNode=g,"linear"===(null==t?void 0:t.splitNode)&&(this.splitNode=w),this.root=void 0,this.length=0,this.height=0,this.initialStackSize=2*(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.length)||(null==t?void 0:t.initialStackSize)||100,this.initialQueueSize=2*(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.length)||(null==t?void 0:t.initialQueueSize)||100,this.insertStack=new s.ArrayStack({initialSize:this.initialStackSize}),this.ptrStack=new s.ArrayStack({initialSize:this.initialStackSize}),this.resultStack=new s.ArrayStack({initialSize:this.initialStackSize}),Array.isArray(null==t?void 0:t.data)&&this.constructTree(t.data),null===(o=this.options)||void 0===o||delete o.data}getRoot(){return this.root}constructNode(t,e,i,s){const o={size:0,pointers:new Array(this.M+1),keys:new Array(this.M+1)};return t?(o.keys[0]=t,o.pointers[0]=void 0,o.size=1):e&&i&&(o.keys=e,o.pointers=i,o.size=s||0),o}constructTree(t){const e=t.length;for(let i=0;i<e;i++)this.insert(t[i])}insert(t){return this._insert(t)}_insert(t){var e,i,s,o,r,n,a,d;let c,u=!1;if(this.insertStack.empty(),void 0===this.root)return this.root=this.constructNode(t),this.length++,this.height++,this.root;for(this.insertStack.push({node:this.root,pos:-1});!this.insertStack.isEmpty();){const r=this.insertStack.peek(),n=r.node;if(u)if(c){const t=l((null===(e=null==c?void 0:c.left)||void 0===e?void 0:e.keys)||[],(null===(i=null==c?void 0:c.left)||void 0===i?void 0:i.size)||0);n.keys[r.pos]=t,n.pointers[r.pos]=null==c?void 0:c.left;const a=l((null===(s=null==c?void 0:c.right)||void 0===s?void 0:s.keys)||[],(null===(o=null==c?void 0:c.right)||void 0===o?void 0:o.size)||0);if(n.size<this.M)n.keys[n.size]=a,n.pointers[n.size]=null==c?void 0:c.right,n.size++,c=void 0;else{const t=this.splitNode(n,a,c.right,this.M,this.m);c={left:n,right:this.constructNode(void 0,t.rightRect,t.rptrs,t.rightSize)}}this.insertStack.pop()}else n.keys[r.pos]=l(n.pointers[r.pos].keys,n.pointers[r.pos].size),this.insertStack.pop();else{if(null==n?void 0:n.pointers[0]){const e=h(n.keys,t,n.size);r.pos=e,this.insertStack.push({node:n.pointers[e],pos:e});continue}if(m(n.keys,n.size,t))return;if(this.length++,n.size<this.M){n.keys[n.size]=t,n.size++,u=!0,this.insertStack.pop();continue}const e=this.splitNode(n,t,void 0,this.M,this.m);c={left:n,right:this.constructNode(void 0,e.rightRect,e.rptrs,e.rightSize)},u=!0,this.insertStack.pop()}}if(c){const t=l((null===(r=null==c?void 0:c.left)||void 0===r?void 0:r.keys)||[],(null===(n=null==c?void 0:c.left)||void 0===n?void 0:n.size)||0),e=l((null===(a=null==c?void 0:c.right)||void 0===a?void 0:a.keys)||[],(null===(d=null==c?void 0:c.right)||void 0===d?void 0:d.size)||0),i=this.constructNode();i&&(i.size=2,i.keys=[t,e],i.pointers=[null==c?void 0:c.left,null==c?void 0:c.right],this.root=i),this.height++}}remove(t){return this._remove(t)}_remove(t){let e=!1;if(this.ptrStack.empty(),this.root)for(this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const i=this.ptrStack.peek(),{node:s}=i;if(e)if(s.pointers[i.ptr].size<this.m){s.keys[i.ptr]=l(s.pointers[i.ptr].keys,s.pointers[i.ptr].size);const t=I(s,i.ptr,this.m);if(t)f(s,i.ptr,t);else if(b(s,i.ptr,this.m),s===this.root&&s.size<2){const t=this.root;this.root=t.pointers[0],t.keys=[];for(let e=0;e<this.M+1;e++)t.pointers[e]=void 0;this.height--,0===this.root.size&&(this.root=void 0,this.height=0,this.length=0)}this.ptrStack.pop()}else{const t=l(s.pointers[i.ptr].keys,s.pointers[i.ptr].size);s.keys[i.ptr]=t,this.ptrStack.pop()}else if(s.pointers[0]){const e=i.ptr+1;for(let o=e;o<s.size;o++)if(d(s.keys[o],t)){i.ptr=o,this.ptrStack.push({node:s.pointers[o],ptr:-1});break}i.ptr===e-1&&this.ptrStack.pop()}else{const i=p(s.keys,s.size,t);i>=0&&(y(s,i),e=!0,this.length--,s===this.root&&0===s.size&&(this.root=void 0,this.height=0,this.length=0)),this.ptrStack.pop()}}}find(t,e=!1,i=!1,s,o=!0){let r=c;return o&&(r=u),this._find(t,e,i,s,r)}_find(t,e=!1,i=!1,s,o){if(this.ptrStack.empty(),this.resultStack.empty(),!this.root&&i)return[];if(this.root){for(this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const r=this.ptrStack.peek(),{node:n}=r;if(n.pointers[0]){const s=r.ptr+1;for(let l=s;l<n.size;l++)if(e&&!i?d(n.keys[l],t):o(n.keys[l],t)){r.ptr=l,this.ptrStack.push({node:n.pointers[l],ptr:-1});break}r.ptr===s-1&&this.ptrStack.pop()}else{for(let r=0;r<n.size;r++)if(e&&!i){if(a(n.keys[r],t))return n.keys[r]}else if(i)!o(n.keys[r],t)||s&&!s(n.keys[r],t)||this.resultStack.push(n.keys[r]);else if(o(n.keys[r],t)&&(!s||s(n.keys[r],t)))return n.keys[r];this.ptrStack.pop()}}return i?this.resultStack.getData():void 0}}getData(t=!1){if(!this.root)return[];for(this.ptrStack.empty(),this.resultStack.empty(),this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const e=this.ptrStack.peek(),{node:i}=e;if(i.pointers[0])e.ptr+1<i.size?(this.ptrStack.push({node:i.pointers[++e.ptr],ptr:-1}),t&&this.resultStack.push(i.keys[e.ptr])):this.ptrStack.pop();else{for(let t=0;t<i.size;t++)this.resultStack.push(i.keys[t]);this.ptrStack.pop()}}return this.resultStack.getData()}reset(){this.root=void 0,this.length=0,this.height=0}emptyTree(){this.root=void 0,this.length=0,this.height=0;const t=Math.max(this.insertStack.stack.length,this.ptrStack.length,this.resultStack.length);for(let e=0;e<t;e++)this.insertStack.stack[e]&&(this.insertStack.stack[e].node=void 0),this.ptrStack.stack[e]&&(this.ptrStack.stack[e].node=void 0),this.resultStack.stack[e]&&(this.resultStack.stack[e]=void 0)}printTree(){return((t,e,i)=>{const o=((t,e,i)=>{if(!t)return[];const o=new s.ArrayStack,r=new s.ArrayStack;let n=0;for(r.push({node:l(t.keys,t.size),HEIGHT:n}),o.push({node:t,ptr:-1,HEIGHT:n++});!o.isEmpty();){const t=o.peek(),{node:e}=t;if(e.pointers[0])t.ptr+1<e.size?(r.push({node:e.keys[t.ptr+1],HEIGHT:n}),o.push({node:e.pointers[++t.ptr],ptr:-1,HEIGHT:n++})):(o.pop(),n--);else{for(let t=0;t<e.size;t++)r.push({node:e.keys[t],HEIGHT:n});o.pop(),n--}}return r.getData()})(t);console.log("data",o);const r=T.length,n={},a=o.length;for(let t=0;t<a-1;t++)o[t].HEIGHT<r?n[o[t].HEIGHT]=T[o[t].HEIGHT]:n[o[t].HEIGHT]="black";n[i]="red";let d=0;o.forEach(t=>{d=t.node.x2>d?t.node.x2:d});let c=0;o.forEach(t=>{c=t.node.y2>c?t.node.y2:c});const u=o.map(t=>{const e=1e3*t.node.x1/d+4*t.HEIGHT;let i=1e3*t.node.x2/d;i=i>4*t.HEIGHT?i-4*t.HEIGHT:i;const s=1e3*t.node.y1/c+4*t.HEIGHT;let o=1e3*t.node.y2/c;return o=o>4*t.HEIGHT?o-4*t.HEIGHT:o,`<g transform="translate(${e}, ${s})">\n\t\t\t<rect width="${i-e>0?i-e:1}" height="${o-s>0?o-s:1}" stroke="${n[t.HEIGHT]}" stroke-width="2" fill-opacity="0"/>\n\t\t</g>`}).reduce((t,e)=>t+e,""),h=Object.keys(n).map((t,e)=>`<g transform="translate(${70*e+10}, 10)"><circle r="5" fill="${n[t]}"/><text dx="10" dy="5">height: ${e}</text></g>`);return o.sort((t,e)=>t.HEIGHT-e.HEIGHT),`<svg width="1020" height="1070"><g width="1000" height="1000" transform="translate(0, 0)">${h}</g>\n\t<rect transform="translate(2, 48)" width="1000" height="1000" stroke="black" stroke-width="2" fill-opacity="0"/>\n\t<g transform="translate(0, 50)">${u}</g></svg>\n\t<div style="margin: 16px;">\n\t<p>height 0 is not an actual node, its just a rect surrounding all the rects in root node.</p>\n\t<p>Non-leaf node have colours other then red.</p>\n\t<p>Leaf node is always Red.</p>\n\t</div>\n\t<div style="display: flex; flex-direction: column; margin: 16px;">${o.reduce((t,e)=>t+`<div style="display:flex;"><span style="flex: 1;">height: ${e.HEIGHT},</span><span style="flex: 1;">rect: x1: ${e.node.x1},</span><span style="flex: 1;">x2: ${e.node.x2},</span><span style="flex: 1;">y1: ${e.node.y1},</span><span style="flex: 1;">y2: ${e.node.y2}</span></div>`,"")}</div>\n\t`})(this.root,this.length,this.height)}};i(2),e.default=E}])},function(t,e,i){
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"ArrayStack",(function(){return o})),i.d(e,"ListStack",(function(){return n}));var s=function(t){var e;this.options=t,this.initialSize=(null==t?void 0:t.initialSize)||100,this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1,Array.isArray(null==t?void 0:t.data)&&this.constructStack(t.data,t.constructReverse),null===(e=this.options)||void 0===e||delete e.data};s.prototype.constructStack=function(t,e){var i=t.length;if(e)for(var s=i-1;s>=0;s--)this.push(t[s]);else for(var o=0;o<i;o++)this.push(t[o])},s.prototype.push=function(t){return null!=t&&(this.ptr===this.length-1&&this.resize(),this.stack[++this.ptr]=t,this.ptr+1)},s.prototype.pop=function(){if(this.ptr>=0){var t=this.stack[this.ptr];return this.ptr--,t}},s.prototype.resize=function(){var t=this.length,e=this.stack;this.length=2*this.length,this.stack=new Array(this.length);for(var i=0;i<t;i++)this.stack[i]=e[i]},s.prototype.isEmpty=function(){return this.ptr<0},s.prototype.peek=function(){if(this.ptr>=0)return this.stack[this.ptr]},s.prototype.getData=function(){for(var t=new Array(this.ptr+1),e=0;e<=this.ptr;e++)t[e]=this.stack[e];return t},s.prototype.setData=function(t){var e;this.empty(),this.constructStack(t,null===(e=this.options)||void 0===e?void 0:e.constructReverse)},s.prototype.getSize=function(){return this.ptr+1},s.prototype.empty=function(){this.ptr=-1},s.prototype.wipe=function(){this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1};var o=s;function r(t){this.length=0,this.HEAD=null,Array.isArray(null==t?void 0:t.data)&&this.constructStack(t.data,t.constructReverse)}r.prototype.constructNode=function(t){return{next:null,d:t}},r.prototype.constructStack=function(t,e){var i,s=t.length;if(e)for(i=s-1;i>=0;i--)this.push(t[i]);else for(i=0;i<s;i++)this.push(t[i])},r.prototype.push=function(t){var e=this.constructNode(t);return this.HEAD?(e.next=this.HEAD,this.HEAD=e):this.HEAD=e,++this.length},r.prototype.pop=function(){if(this.HEAD){var t=this.HEAD;return this.HEAD=this.HEAD.next,t.next=null,this.length--,t.d}},r.prototype.isEmpty=function(){return!this.HEAD},r.prototype.peek=function(){var t;return null===(t=this.HEAD)||void 0===t?void 0:t.d},r.prototype.getData=function(){for(var t=this.HEAD,e=new Array(this.length),i=0;null!=t;)e[i++]=t.d,t=t.next;return e},r.prototype.getSize=function(){return this.length},r.prototype.empty=function(){this.HEAD=null,this.length=0};var n=r;
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/}])},function(t,e,i){
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),e.default=
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
class{constructor(t){this.HEAD=void 0,this.TAIL=void 0,this.CURR=void 0,this.size=(null==t?void 0:t.size)||50,this.length=0}constructNode(t){return{next:void 0,prev:void 0,data:t}}undo(){if(this.CURR!==this.TAIL)return this.CURR=this.CURR.prev,this.CURR.data}isUndoAvailable(){return!(this.CURR===this.TAIL)}redo(){if(this.CURR!==this.HEAD)return this.CURR=this.CURR.next,this.CURR.data}isRedoAvailable(){return!(this.CURR===this.HEAD)}push(t){const e=this.constructNode(t);if(void 0===this.CURR)this.CURR=e,this.HEAD=e,this.TAIL=e,this.length++,this.checkLength();else if(this.CURR===this.HEAD)this.HEAD=e,this.HEAD.prev=this.CURR,this.CURR.next=this.HEAD,this.CURR=this.HEAD,this.length++,this.checkLength();else{let t=this.CURR.next;e.prev=this.CURR,this.CURR.next=e,this.CURR=this.CURR.next,this.HEAD=this.CURR;let i=0;for(;void 0!==t;){const e=t;t=t.next,e.next=void 0,e.prev=void 0,i++}this.length-=i,this.length++}return t}checkLength(){this.length>this.size&&(this.TAIL=this.TAIL.next,this.length--)}getCurrent(){var t;return null===(t=this.CURR)||void 0===t?void 0:t.data}setCurrent(t){if(this.CURR)return this.CURR.data=t,this.CURR.data}getData(){let t=this.TAIL;const e=new Array(this.length);let i=0;for(;void 0!==t;)e[i++]=t.data,t=t.next;return e}reset(){this.HEAD=void 0,this.TAIL=void 0,this.CURR=void 0,this.length=0}}}])},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),o=i(0),r=i(2),n=i.n(r);i(7),i(8);const l=function(t){return t.store.constants.privateConstants},a=function(t,e,i){t.store.constants.privateConstants.hasOwnProperty(e)&&(t.store.constants.privateConstants[e]=i)},d=function(t,e){t.store.constants.privateConstants.WIDTH=e},c=function(t){return t.store.constants.privateConstants.WIDTH},u=function(t,e){t.store.constants.privateConstants.HEIGHT=e},h=function(t,e){t.store.constants.privateConstants.WIDTH_SCALE_FACTOR=e},m=function(t,e){t.store.constants.privateConstants.MARGIN=e},p=function(t,e){t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=e},y=function(t){return t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH};var I=l;const f=function(t){return t.store.constants.publicConstants},b=function(t,e,i){t.store.constants.publicConstants.hasOwnProperty(e)&&(t.store.constants.publicConstants[e]=i)};var v=f;const A=function(t,e){t.store.variables.elements.$el=e},x=function(t){return t.store.variables.elements.$limberGridView},g=function(t){return t.store.variables.elements.$limberGridViewIOTopHelper},w=function(t){return t.store.variables.elements.$limberGridViewIOBottomHelper};var T=function(t){return t.store.variables.elements};const E=function(t,e,i,s){if(function(t,e){const i=T(t),s=v(t),o=i.$limberGridView.scrollHeight;o-e<s.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=o+s.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")}(t,e),s)return function(t,e){const i=T(t),s=v(t),o=I(t),r=i.$limberGridView.scrollTop;let n=!1;return o.HEIGHT-e<s.AUTO_SCROLL_POINT?(i.$limberGridView.scrollTop=r+s.AUTO_SCROLL_DISTANCE,n=!0):e<s.AUTO_SCROLL_POINT&&(i.$limberGridView.scrollTop=r-s.AUTO_SCROLL_DISTANCE,n=!0),n}(t,i)},D=function(t,e){const i=e.length,s=new Array(i);for(let t=0;t<i;t++)s[t]={...e[t]};t.store.variables.essentials.positionData=s},G=function(t){return t.store.variables.essentials.positionData},_=function(t,e){const i=e.length,s=new Array(i);for(let t=0;t<i;t++)s[t]={...e[t]};t.store.variables.essentials.modifiedPositionData=s},R=function(t){return t.store.variables.essentials.modifiedPositionData},M=function(t,e){const i=e.length,s=new Array(i);for(let t=0;t<i;t++)s[t]={...e[t]},s[t].index=t;s.sort((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y),t.store.variables.essentials.serializedPositionData=s},N=function(t){return t.store.variables.essentials.serializedPositionData},H=function(t){return t.store.variables.essentials.callbacks},C=function(t,e){t.store.variables.essentials.limberGridViewBoundingClientRect=e},S=function(t){return t.store.variables.essentials.limberGridViewBoundingClientRect},O=function(t,e){t.store.variables.essentials.renderedItems=[...e]},L=function(t){return t.store.variables.essentials.renderedItems},$=function(t,e){t.store.variables.essentials.ioTopHelperPos=e},k=function(t){return t.store.variables.essentials.ioTopHelperPos},V=function(t,e){t.store.variables.essentials.ioBottomHelperPos=e},P=function(t){return t.store.variables.essentials.ioBottomHelperPos};const W=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),z=(t,e)=>(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),X=(t,e,i,s)=>(i-t)*(i-t)+(s-e)*(s-e),Y=function(t,e){const i=T(t),s=I(t),o=S(t);if(e.clientX>=o.left&&e.clientX<=o.left+o.width&&e.clientY>=o.top&&e.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,r=i.$limberGridView.scrollLeft,n=e.clientX-o.left-s.PADDING_LEFT+r,l=e.clientY-o.top-s.PADDING_TOP+t;if(n<0||l<0)return;return{x:n,y:l,offsetX:n-r,offsetY:l-t}}},U=function(t,e){const i=T(t),s=I(t),o=S(t);let r;if(r="touchend"===e.type?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},r.clientX>=o.left&&r.clientX<=o.left+o.width&&r.clientY>=o.top&&r.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,e=i.$limberGridView.scrollLeft,n=r.clientX-o.left-s.PADDING_LEFT+e,l=r.clientY-o.top-s.PADDING_TOP+t;if(n<0||l<0)return;return{x:n,y:l,offsetX:n-e,offsetY:l-t}}},F=function(t,e){const i=T(t).$limberGridViewItems[e.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(e.touches[0].clientX>=i.left&&e.touches[0].clientX<=i.left+i.width&&e.touches[0].clientY>=i.top&&e.touches[0].clientY<=i.top+i.height){return{x:e.touches[0].clientX-i.left,y:e.touches[0].clientY-i.top}}},j=(t,e,i)=>{const s=v(t),o=function(t,e,i){const s=T(t).$limberGridViewItems[i.itemIndex].getBoundingClientRect();return{x:e.touches[0].clientX-s.left,y:e.touches[0].clientY-s.top}}(t,e,i);return!(z(o,i.touchPosOnLimberGridItem)>s.TOUCH_HOLD_TOLERANCE*s.TOUCH_HOLD_TOLERANCE)},B=(t,e,i,s)=>{const o=v(t);return!(z(s,i.touchPositionOnLimberGrid)>o.TOUCH_HOLD_TOLERANCE*o.TOUCH_HOLD_TOLERANCE)},Z=function(t){return t.options};var K=Z;const Q=(t,e)=>{const i=v(t),s=K(t),o=G(t),r=parseInt(e.currentTarget.attributes["data-index"].value);let n,l,a,d;if(e.touches){if(!e.touches)return!1;if(l=F(t,e),!l)return!1;n=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),a=l.x,d=l.y}else n=Math.sqrt(Math.pow(0-e.offsetX,2)+Math.pow(0-e.offsetY,2)),a=e.offsetX,d=e.offsetY;const c=e.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,u=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,h=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,m=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,p=-i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,y=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,I=i.RESIZE_SQUARE_GUIDE_LENGTH,f=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return s.itemMouseDownMoveCheck&&s.itemMouseDownMoveCheck(a,d,{...o[r]},r,e.target)||n<=i.MOVE_GUIDE_RADIUS&&!s.itemMouseDownMoveCheck?{type:"move",itemIndex:e.currentTarget.attributes["data-index"].value}:s.itemMouseDownResizeCheck&&s.itemMouseDownResizeCheck(a,d,{...o[r]},r,e.target,"bottomRight")?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:s.itemMouseDownResizeCheck&&s.itemMouseDownResizeCheck(a,d,{...o[r]},r,e.target,"bottomLeft")?{type:"resizeBottomLeft",itemIndex:e.currentTarget.attributes["data-index"].value}:a>=c&&a<=c+h&&d>=u&&d<=u+m&&!s.itemMouseDownResizeCheck?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:a>=p&&a<=I&&d>=y&&d<=y+f&&!s.itemMouseDownResizeCheck?{type:"resizeBottomLeft",itemIndex:e.currentTarget.attributes["data-index"].value}:void 0},q=(t,e)=>{const i=T(t),s=G(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=s.width+"px",i.$limberGridViewPseudoItem.style.height=s.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${e.itemX}px,${e.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let t=0;t<o;t++)i.$limberGridViewItems[t]&&i.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},J=(t,e,i)=>{const s=T(t),o=G(t),r=H(t),n=o[e.itemIndex];let l,a;if(s.$limberGridViewHeightAdjustGuide.style.height="0px",s.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),s.$limberGridViewItems[e.itemIndex]&&s.$limberGridViewItems[e.itemIndex].classList.add("limber-grid-view-item-demo"),s.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),s.$pseudoContainerItem.style.width=n.width+"px",s.$pseudoContainerItem.style.height=n.height+"px",i.touches?i.touches&&(l=i.touches[0].pageX,a=i.touches[0].pageY):(l=i.pageX,a=i.pageY),r.offsetMovePseudoElement){const t=r.offsetMovePseudoElement(l,a,et(n));l=t.x,a=t.y}s.$pseudoContainerItem.style.transform=`translate(${l}px, ${a}px)`,s.$body.classList.add("limber-grid-view-body-tag-state-editing")},tt=(t,e,i,s)=>{const o=T(t),r=G(t),n=H(t),l=r[e.itemIndex];if("move"===s){let t,e;if(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$limberGridViewMoveGuide.style.transform="translate(-1000px, -1000px)",o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),i.touches?i.touches&&(t=i.touches[0].pageX,e=i.touches[0].pageY):(t=i.pageX,e=i.pageY),n.offsetMovePseudoElement){const i=n.offsetMovePseudoElement(t,e,et(l));t=i.x,e=i.y}o.$pseudoContainerItem.style.transform=`translate(${t}px, ${e}px)`}else"resize"===s&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},et=t=>({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),it=function(t,e){const i=t.options.isMobileCheck;return i?i(e||S(t)):(e=e||S(t)).width<980||window.innerHeight>window.innerWidth&&e.width<981},st=(t,e=6)=>Math.trunc(t*Math.pow(10,e))/Math.pow(10,e),ot=(t=22)=>{const e=new Array(t);for(let i=0;i<t;i++)e[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return e.join("")},rt=t=>{t.x1=t.x,t.x2=t.x+t.width,t.y1=t.y,t.y2=t.y+t.height},nt=t=>{const e=t%1,i=Math.trunc(t);return e<=.25?i:e<=.5?i+.25:e<=.75?i+.5:e<=.9999999999999999?i+.75:i-.25},lt=t=>{const e=t%1,i=Math.trunc(t);return e<=.25?i+.25:e<=.5?i+.5:e<=.75?i+.75:e<=.9999999999999999?i+1:i+.25},at=t=>{t.x1=lt(t.x1),t.y1=lt(t.y1),t.x2=nt(t.x2),t.y2=nt(t.y2),t.x=lt(t.x),t.y=lt(t.y),t.width=nt(t.width),t.height=nt(t.height)},dt=(t,e)=>!(t.mX1>=e.mX2||e.mX1>=t.mX2||t.mY1>=e.mY2||e.mY1>=t.mY2),ct=(t,e)=>!(isNaN(t.x1)||isNaN(t.x2)||isNaN(e.mX1)||isNaN(e.mX2))&&!(t.x1>=e.mX2||e.mX1>=t.x2||t.y1>=e.mY2||e.mY1>=t.y2),ut=(t,e)=>!(isNaN(t.x1)||isNaN(t.x2)||isNaN(e.mX1)||isNaN(e.mX2))&&!(t.x1>e.mX2||e.mX1>t.x2||t.y1>e.mY2||e.mY1>t.y2),ht=(t,e)=>{if(t.x1<=e.mX1&&t.x2>=e.mX2&&t.y1<=e.mY1&&t.y2>=e.mY2)return!0},mt=t=>{const e=t.x1,i=t.x2,s=t.y1,o=t.y2;t.x1=t.mX1,t.x2=t.mX2,t.y1=t.mY1,t.y2=t.mY2,t.mX1=e,t.mX2=i,t.mY1=s,t.mY2=o},pt=function(t){return!(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))&&!(t.x>=t.x+t.width||t.y>=t.y+t.height)},yt=function(t,e){const i={};for(const[s]of t.entries())t[s].x1===e[s].x1&&t[s].x2===e[s].x2&&t[s].y1===e[s].y1&&t[s].y2===e[s].y2||(i[s]=!0);return i},It=(t,e,i=!1,s)=>{const o=G(t),r=o.length,n=new Array(r);let l,a=0;for(let t=0;t<r;t++)l=o[t],s&&s[t]||ct(e,l)&&(n[a++]=i?t:o[t]);return n.length=a,n},ft=(t,e)=>{if(e.x>t.x1&&e.x<t.x2&&e.y>t.y1&&e.y<t.y2)return!0},bt=(t,e)=>{if(e.x>=t.x1&&e.x<=t.x2&&e.y>=t.y1&&e.y<=t.y2)return!0},vt=(t,e)=>!(isNaN(t.x1)||isNaN(t.y1)||isNaN(t.x2)||isNaN(t.y2)||isNaN(e.x1)||isNaN(e.y1)||isNaN(e.x2)||isNaN(e.y2))&&!(t.x1>=e.x2||e.x1>=t.x2||t.y1>=e.y2||e.y1>=t.y2),At=(t,e)=>{if(!vt(t,e))return[];const i={subRectT:{x1:t.x1,x2:t.x2,y1:t.y1,y2:e.y1},subRectR:{x1:e.x2,x2:t.x2,y1:t.y1,y2:t.y2},subRectB:{x1:t.x1,x2:t.x2,y1:e.y2,y2:t.y2},subRectL:{x1:t.x1,x2:e.x1,y1:t.y1,y2:t.y2}};for(const t in i)wt(i[t])||(i[t]=void 0);let s,o,r,n,l,a,d,c,u,h,m,p,y,I,f,b;i.subRectT&&i.subRectR&&(u={x1:i.subRectT.x1,x2:i.subRectR.x1,y1:i.subRectT.y1,y2:i.subRectT.y2},r={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectR.y1,y2:i.subRectT.y2},p={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectT.y2,y2:i.subRectR.y2}),i.subRectR&&i.subRectB&&(m={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectR.y1,y2:i.subRectB.y1},l={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectB.y1,y2:i.subRectR.y2},I={x1:i.subRectB.x1,x2:i.subRectR.x1,y1:i.subRectB.y1,y2:i.subRectR.y2}),i.subRectB&&i.subRectL&&(b={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectL.y1,y2:i.subRectB.y1},d={x1:i.subRectB.x1,x2:i.subRectL.x2,y1:i.subRectB.y1,y2:i.subRectL.y2},y={x1:i.subRectL.x2,x2:i.subRectB.x2,y1:i.subRectB.y1,y2:i.subRectB.y2}),i.subRectL&&i.subRectT&&(f={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectT.y2,y2:i.subRectL.y2},s={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectL.y1,y2:i.subRectT.y2},h={x1:i.subRectL.x2,x2:i.subRectT.x2,y1:i.subRectT.y1,y2:i.subRectT.y2}),o=xt(u,s)||xt(h,r)||u||h,n=gt(m,r)||gt(p,l)||m||p,a=xt(y,l)||xt(I,d)||y||I,c=gt(f,d)||gt(b,s)||f||b;let v=[s,o,r,n,l,a,d,c];if(v=v.filter(t=>t),0===v.length)for(const t in i)i[t]&&v.push(i[t]);return v},xt=(t,e)=>{if(!t||!e)return;let i;return t.x1===e.x1?i={x1:e.x2,x2:t.x2,y1:t.y1,y2:t.y2}:t.x2===e.x2&&(i={x1:t.x1,x2:e.x1,y1:t.y1,y2:t.y2}),i},gt=(t,e)=>{if(!t||!e)return;let i;return t.y1===e.y1?i={x1:t.x1,x2:t.x2,y1:e.y2,y2:t.y2}:t.y2===e.y2&&(i={x1:t.x1,x2:t.x2,y1:t.y1,y2:e.y1}),i},wt=function(t){return!(t.x1>=t.x2||t.y1>=t.y2)},Tt=(t,e)=>{const i=new Array(2);let s=0;const o=t.x1<e.x1?t:e,r=t.x2>e.x2?t:e,n=t.y1>e.y1?t:e,l=t.y2<e.y2?t:e,a={x1:o.x1,x2:r.x2,y1:n.y1,y2:l.y2},d=t.x1>e.x1?t:e,c=t.x2<e.x2?t:e,u=t.y1<e.y1?t:e,h=t.y2>e.y2?t:e,m={x1:d.x1,x2:c.x2,y1:u.y1,y2:h.y2};return!wt(a)||Et(t,a)||Et(e,a)||(i[s++]=a),!wt(m)||Et(t,m)||Et(e,m)||(i[s++]=m),i.length=s,i},Et=(t,e)=>{if(t.x1<=e.x1&&t.x2>=e.x2&&t.y1<=e.y1&&t.y2>=e.y2)return!0},Dt=(t,e,i,s,o,r)=>{const n=G(t),l=I(t),a=r||1.5*l.DEFINED_MIN_HEIGHT_AND_WIDTH,d=o||l.DEFINED_MIN_HEIGHT_AND_WIDTH/5,c={...n[s]},u=n.length,h={x:e,y:i};let m,p,y,f,b,v,A,x,g,w,T,E,D,_,R,M,N,H,C=Number.MAX_SAFE_INTEGER,S=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER;for(let t=0;t<u;t++)ft(n[t],h)&&(m=t),t!==s&&(p={x:n[t].x2,y:n[t].y1},y={x:n[t].x1,y:n[t].y2},f={x:n[t].x2,y:n[t].y2},b=W(p,h),v=W(y,h),A=h.x-p.x,x=h.y-y.y,b<C&&b<S&&h.x>=p.x&&b<=a&&p.x+2*l.MARGIN+c.width<=l.WIDTH-l.MARGIN&&(g=p.x+2*l.MARGIN,w=p.y,R=g,M=w,C=b,D=t),A<O&&A<L&&h.x>=p.x&&h.y>=p.y&&h.y<=f.y&&A<=d&&p.x+2*l.MARGIN+c.width<=l.WIDTH-l.MARGIN&&(T=p.x+2*l.MARGIN,E=h.y,N=T,H=E,O=A,_=t),v<S&&v<C&&h.y>=y.y&&v<=a&&y.x+c.width<l.WIDTH-l.MARGIN&&(g=y.x,w=y.y+2*l.MARGIN,R=g,M=w,S=v,D=t),x<L&&x<O&&h.y>=y.y&&h.x>=y.x&&h.x<=f.x&&x<=d&&h.x+c.width<l.WIDTH-l.MARGIN&&(T=h.x,E=y.y+2*l.MARGIN,N=T,H=E,L=x,_=t));return{overlappedItemIndex:m,cornerLatch:{to:{toX:e,toY:i},toAdj:{toX:g,toY:w},ch:{x:R,y:M},distance:Math.min(C,S),latchCornerIndex:D},edgeLatch:{to:{toX:e,toY:i},toAdj:{toX:T,toY:E},ch:{x:N,y:H},distance:Math.min(O,L),latchEdgeIndex:_}}},Gt=(t,e,i,s,o,r)=>{const n=G(t),l=I(t),a=r||1.5*l.DEFINED_MIN_HEIGHT_AND_WIDTH,d=o||l.DEFINED_MIN_HEIGHT_AND_WIDTH/5,c={...n[s]},u=n.length,h={x:e+c.width,y:i};let m,p,y,f,b,v,A,x,g,w,T,E,D,_,R,M,N,H=Number.MAX_SAFE_INTEGER,C=Number.MAX_SAFE_INTEGER,S=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER;for(let t=0;t<u;t++)t!==s&&(m={x:n[t].x1,y:n[t].y1},p={x:n[t].x2,y:n[t].y2},y={x:n[t].x1,y:n[t].y2},f=W(m,h),b=W(p,h),v=m.x-h.x,A=h.y-p.y,f<H&&f<C&&h.x<=m.x&&f<=a&&m.x-2*l.MARGIN-c.width>=l.MARGIN&&(x=m.x-2*l.MARGIN-c.width,g=m.y,_=m.x-2*l.MARGIN,R=m.y,H=f,E=t),v<S&&v<O&&h.x<=m.x&&h.y>=m.y&&h.y<=y.y&&v<=d&&m.x-2*l.MARGIN-c.width>=l.MARGIN&&(w=m.x-2*l.MARGIN-c.width,T=h.y,M=m.x-2*l.MARGIN,N=T,S=v,D=t),b<H&&b<C&&h.y>=p.y&&b<=a&&p.x-c.width>=l.MARGIN&&(x=p.x-c.width,g=p.y+2*l.MARGIN,_=p.x,R=g,C=b,E=t),A<S&&A<O&&h.y>=p.y&&h.x<=p.x&&h.x>=y.x&&A<=d&&h.x-c.width>=l.MARGIN&&(w=h.x-c.width,T=p.y+2*l.MARGIN,M=h.x,N=T,O=A,D=t));return{cornerLatch:{to:{toX:e,toY:i},toAdj:{toX:x,toY:g},ch:{x:_,y:R},distance:Math.min(H,C),latchCornerIndex:E},edgeLatch:{to:{toX:e,toY:i},toAdj:{toX:w,toY:T},ch:{x:M,y:N},distance:Math.min(S,O),latchEdgeIndex:D}}},_t=(t,e,i,s,o,r,n,l)=>{const a=G(t),d=I(t),c=l||1.5*d.DEFINED_MIN_HEIGHT_AND_WIDTH,u=n||d.DEFINED_MIN_HEIGHT_AND_WIDTH/5,h={...a[s]};h.width=o||h.width,h.height=r||h.height;const m=a.length,p={x:e,y:i+h.height};let y,f,b,v,A,x,g,w,T,E,D,_,R,M,N,H,C,S=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER,$=Number.MAX_SAFE_INTEGER;for(let t=0;t<m;t++)t!==s&&(y={x:a[t].x1,y:a[t].y1},f={x:a[t].x2,y:a[t].y2},b={x:a[t].x2,y:a[t].y1},v=W(y,p),A=W(f,p),x=y.y-p.y,g=p.x-f.x,v<S&&v<O&&p.y<=y.y&&v<=c&&y.x+h.width<=d.WIDTH-d.MARGIN&&y.y-2*d.MARGIN-h.height>=d.MARGIN&&(w=y.x,T=y.y-2*d.MARGIN-h.height,M=w,N=y.y-2*d.MARGIN,S=v,_=t),x<L&&x<$&&p.y<=y.y&&p.x>=y.x&&p.x<=b.x&&x<=u&&p.x+h.width<=d.WIDTH-d.MARGIN&&y.y-2*d.MARGIN-h.height>=d.MARGIN&&(E=p.x,D=y.y-2*d.MARGIN-h.height,H=E,C=y.y-2*d.MARGIN,L=x,R=t),A<S&&A<O&&p.x>=f.x&&A<=c&&f.x+2*d.MARGIN+h.width<=d.WIDTH-d.MARGIN&&f.y-h.height>=d.MARGIN&&(w=f.x+2*d.MARGIN,T=f.y-h.height,M=w,N=f.y,O=A,_=t),g<L&&g<$&&p.x>=f.x&&p.y>=b.y&&p.y<=f.y&&g<=u&&f.x+2*d.MARGIN+h.width<=d.WIDTH-d.MARGIN&&p.y-h.height>=d.MARGIN&&(E=f.x+2*d.MARGIN,D=p.y-h.height,H=E,C=p.y,$=g,R=t));return{cornerLatch:{to:{toX:e,toY:i},toAdj:{toX:w,toY:T},ch:{x:M,y:N},distance:Math.min(S,O),latchCornerIndex:_},edgeLatch:{to:{toX:e,toY:i},toAdj:{toX:E,toY:D},ch:{x:H,y:C},distance:Math.min(L,$),latchEdgeIndex:R}}},Rt=(t,e,i,s,o,r,n,l)=>{const a=G(t),d=I(t),c=l||1.5*d.DEFINED_MIN_HEIGHT_AND_WIDTH,u=n||d.DEFINED_MIN_HEIGHT_AND_WIDTH/5,h={...a[s]};h.width=o||h.width,h.height=r||h.height;const m=a.length,p={x:e+h.width,y:i+h.height};let y,f,b,v,A,x,g,w,T,E,D,_,R,M,N,H,C,S=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER,$=Number.MAX_SAFE_INTEGER;for(let t=0;t<m;t++)t!==s&&(y={x:a[t].x2,y:a[t].y1},f={x:a[t].x1,y:a[t].y2},b={x:a[t].x1,y:a[t].y1},v=W(y,p),A=W(f,p),x=y.y-p.y,g=f.x-p.x,v<S&&v<O&&p.y<=y.y&&v<=c&&y.y-2*d.MARGIN-h.height>=d.MARGIN&&y.x-h.width>=d.MARGIN&&(w=y.x-h.width,T=y.y-2*d.MARGIN-h.height,M=y.x,N=y.y-2*d.MARGIN,S=v,_=t),x<L&&x<$&&p.y<=y.y&&p.x>=b.x&&p.x<=y.x&&x<=u&&y.y-2*d.MARGIN-h.height>=d.MARGIN&&p.x-h.width>=d.MARGIN&&(E=p.x-h.width,D=y.y-2*d.MARGIN-h.height,H=p.x,C=y.y-2*d.MARGIN,L=x,R=t),A<S&&A<O&&p.x<=f.x&&A<=c&&f.x-2*d.MARGIN-h.width>=d.MARGIN&&f.y-h.height>=d.MARGIN&&(w=f.x-2*d.MARGIN-h.width,T=f.y-h.height,M=f.x-2*d.MARGIN,N=f.y,O=A,_=t),g<L&&g<$&&p.x<=f.x&&p.y>=b.y&&p.y<=f.y&&g<=u&&f.x-2*d.MARGIN-h.width>=d.MARGIN&&p.y-h.height>=d.MARGIN&&(E=f.x-2*d.MARGIN-h.width,D=p.y-h.height,H=f.x-2*d.MARGIN,C=p.y,$=g,R=t));return{cornerLatch:{to:{toX:e,toY:i},toAdj:{toX:w,toY:T},ch:{x:M,y:N},distance:Math.min(S,O),latchCornerIndex:_},edgeLatch:{to:{toX:e,toY:i},toAdj:{toX:E,toY:D},ch:{x:H,y:C},distance:Math.min(L,$),latchEdgeIndex:R}}},Mt=(t,e,i)=>{const s=G(t),o=R(t),r=s.length,n=new Array(r);let l=0;for(let t=0;t<r;t++)dt(e,s[t])&&t!==i&&(n[l++]=t,o[t].x1=void 0,o[t].y1=void 0,o[t].x2=void 0,o[t].y2=void 0,o[t].mX1=void 0,o[t].mY1=void 0,o[t].mX2=void 0,o[t].mY2=void 0,o[t].x=void 0,o[t].y=void 0,o[t].mX=void 0,o[t].mY=void 0);return n[l++]=i,n.length=l,n},Nt=(t,e,i)=>{const s=G(t),o=R(t),r=s.length,n=new Array(r);let l=0;for(let t=0;t<r;t++)dt(e,s[t])&&t!==i&&(n[l++]=t,o[t].x1=void 0,o[t].y1=void 0,o[t].x2=void 0,o[t].y2=void 0,o[t].mX1=void 0,o[t].mY1=void 0,o[t].mX2=void 0,o[t].mY2=void 0,o[t].x=void 0,o[t].y=void 0,o[t].mX=void 0,o[t].mY=void 0);return n[l++]=i,n.length=l,n},Ht=(t,e,i,s,o,r)=>{const n=G(t),l=I(t);if(e<0||e>=n.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof s)throw"x or y is not a number.";if(i<l.MARGIN||s<l.MARGIN)throw"Left edges falls outside the grid area.";if("number"!=typeof o||"number"!=typeof r)throw"Width or Height is not a number.";if(i+o+l.MARGIN>l.WIDTH)throw"Right edges falls outside the grid area.";if(o<l.DEFINED_MIN_HEIGHT_AND_WIDTH||r<l.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${l.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;if(r+2*l.MARGIN>l.HEIGHT)throw"Height cannot be greater than height of container.";return!0},Ct=(t,e,i,s)=>{const o=G(t),r=I(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof s)throw"toX or toY is not a number.";if(i<r.MARGIN||s<r.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[e].width+r.MARGIN>r.WIDTH)throw"Right edges falls outside the grid area.";return!0},St=(t,e,i,s,o)=>({x:t,y:e,width:i,height:s,mX:t-o,mY:e-o,mWidth:i+2*o,mHeight:s+2*o,x1:t,y1:e,x2:t+i,y2:e+s,mX1:t-o,mY1:e-o,mX2:t+i+o,mY2:e+s+o}),Ot=(t,e,i,s)=>({x:t,y:e,width:i.width,height:i.height,mX:t-s,mY:e-s,mWidth:i.width+2*s,mHeight:i.height+2*s,x1:t,y1:e,x2:t+i.width,y2:e+i.height,mX1:t-s,mY1:e-s,mX2:t+i.width+s,mY2:e+i.height+s}),Lt=t=>{const e=G(t),i=T(t),s=e.length;for(let t=0;t<s;t++)i.$limberGridViewItems[t]&&(i.$limberGridViewItems[t].style.transform=`translate(${e[t].x1}px, ${e[t].y1}px)`,i.$limberGridViewItems[t].style.width=e[t].width+"px",i.$limberGridViewItems[t].style.height=e[t].height+"px")},$t=(t,e,i,s,o,r,n)=>{const l=((t,e,i,s,o,r,n)=>{const l=G(t),a=I(t),d=a.DEFINED_MIN_HEIGHT_AND_WIDTH/2,c=a.DEFINED_MIN_HEIGHT_AND_WIDTH/10,u=l.length,h={x:e,y:i},m={x:e+s,y:i},p={x:e+s,y:i+o},y={x:e,y:i+o};let f,b,v,A,x,g,w,T,E,D,_,R,M,N,H,C,S=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER,$=Number.MAX_SAFE_INTEGER,k=!1;for(let t=0;t<u;t++)t!==r&&(f={x:l[t].x1,y:l[t].y1},b={x:l[t].x1,y:l[t].y2},v={x:l[t].x2,y:l[t].y2},A={x:l[t].x2,y:l[t].y1},g=W(b,p),x=W(v,y),w=W(v,m),T=W(A,p),E=W(f,y),D=W(b,h),g<O&&g<S&&p.x<b.x&&Math.abs(p.y-b.y)<=c&&p.x+a.MARGIN<=a.WIDTH&&(o=b.y-m.y,n&&b.x-p.x<=c&&(s=b.x-2*a.MARGIN-y.x),O=g,k=!0,_=t,R="right",N=b),x<S&&x<O&&y.x>v.x&&Math.abs(y.y-v.y)<=c&&p.x+a.MARGIN<=a.WIDTH&&(o=v.y-h.y,!n&&y.x-v.x<=c&&(e=v.x+2*a.MARGIN,s=p.x-e),S=x,k=!0,_=t,R="left",N=v),w<L&&w<$&&w<=d&&Math.abs(m.x-v.x)<=c&&n&&(s=v.x-h.x,L=w,k=!0,_=t,M="top",H=v),D<L&&D<$&&D<=d&&Math.abs(h.x-b.x)<=c&&!n&&(s=m.x-b.x,e=b.x,L=D,k=!0,_=t,M="top",H=b),T<$&&T<L&&T<=d&&Math.abs(p.x-A.x)<=c&&n&&(s=A.x-y.x,n&&A.y>p.y&&A.y-p.y<=c&&(o=A.y-2*a.MARGIN-m.y),$=T,k=!0,_=t,M="bottom",H=A),E<$&&E<L&&E<=d&&Math.abs(y.x-f.x)<=c&&!n&&(s=p.x-f.x,e=f.x,!n&&f.y>y.y&&f.y-y.y<=c&&(o=f.y-2*a.MARGIN-h.y),$=E,k=!0,_=t,M="bottom",H=f));return N&&H?C={x:H.x,y:N.y}:N?C=N:H&&(C=H),{x:e,y:i,height:o,width:s,isToAdjPresent:k,toAdjIndex:_,hToAdjDirection:R,wToAdjDirection:M,latchPoint:C}})(t,e,i,s,o,r,n);if(!l.isToAdjPresent){const a=_t(t,e,i,r,s,o),d=Rt(t,e,i,r,s,o);let c;n?(c=d.edgeLatch,c.distance!==Number.MAX_SAFE_INTEGER&&(l.isToAdjPresent=!0,l.width=c.ch.x-e,l.height=c.ch.y-i,l.latchPoint=c.ch)):(c=a.edgeLatch,c.distance!==Number.MAX_SAFE_INTEGER&&(l.isToAdjPresent=!0,l.x=c.ch.x,l.width=e+s-c.ch.x,l.height=c.ch.y-i,l.latchPoint=c.ch))}return l},kt=(t,e)=>{const i=T(t);for(const t in e)if(i.$limberGridViewItems[t]){const s=e[t];i.$limberGridViewItems[t].style.transform=`translate(${s.x}px, ${s.y}px)`,i.$limberGridViewItems[t].style.width=s.width+"px",i.$limberGridViewItems[t].style.height=s.height+"px"}},Vt=(t,e,i,s)=>{const o={x1:i,x2:s,y1:0,y2:e.y1<0?0:e.y1},r=((t,e,i)=>{const s=G(t);let o,r=0;const n=s.length;for(let t=0;t<n;t++)o=s[t],s[t].y2>r&&o.mX<i&&o.mX2>e&&(r=s[t].y2);return r})(t,i,s);return{topWorkSpace:o,bottomWorkSpace:{x1:i,x2:s,y1:e.y2,y2:r>e.y2?r:e.y2}}},Pt=(t,e,i=!1,s)=>{const o=R(t),r=o.length,n=new Array(r);let l,a=0;for(let t=0;t<r;t++)l=o[t],s&&s[t]||ct(e,l)&&(n[a++]=i?t:o[t]);return n.length=a,n},Wt=(t,e)=>t.x1===e.x1?t.y1-e.y1:t.x1-e.x1,zt=(t,e)=>t.y1===e.y1?t.x1-e.x1:t.y1-e.y1,Xt=function(t,e){if(Et(t,e)&&t!==e)return!0},Yt=(t,e,i,s,o)=>{if(e.mWidth*e.mWidth+e.mHeight*e.mHeight<X(t.x1,t.y1,t.x2,t.y2)&&t.x2-t.x1>=e.mWidth&&t.y2-t.y1>=e.mHeight)return!0;if(!o)return;const r=o;let n={width:0,height:0},l={width:0,height:0};const a=e.mWidth;if((100*a-100*(t.x2-t.x1))/a<=r){const s=(t.x2-t.x1)/e.mWidth,o=e.mHeight*s;o<=t.y2-t.y1&&(n={width:t.x2-t.x1-2*i,height:o-2*i})}const d=e.mHeight;if((100*d-100*(t.y2-t.y1))/d<=r){const s=(t.y2-t.y1)/e.mHeight*e.mWidth;s<=t.x2-t.x1&&(l={width:s-2*i,height:t.y2-t.y1-2*i})}(n.width<s||n.height<s)&&(n.width=0,n.height=0),(l.width<s||l.height<s)&&(l.width=0,l.height=0);const c=n.width*n.width+n.height*n.height,u=l.width*l.width+l.height*l.height;return(c<u||0===u)&&n.width>0?n:l.width>0?l:void 0},Ut=(t,e,i)=>{const s=R(t),o=e.length;for(let t=0;t<o;t++)s[e[t]].y+=i,s[e[t]].mY+=i,s[e[t]].y1+=i,s[e[t]].y2+=i,s[e[t]].mY1+=i,s[e[t]].mY2+=i},Ft=function(t,e,i){const s=G(t),o=T(t),r=s.length;for(let t=0;t<r;t++)s[t].y>=e&&(s[t].y-=i,s[t].mY-=i,s[t].y1-=i,s[t].y2-=i,s[t].mY1-=i,s[t].mY2-=i,o.$limberGridViewItems[t]&&(o.$limberGridViewItems[t].style.transform="translate("+s[t].x1+"px, "+s[t].y1+"px)"))},jt=function(t,e,i,s,o){const r=I(t),n=G(t);var l={x1:e-r.MARGIN,y1:i-r.MARGIN,x2:e+s+r.MARGIN,y2:i+o+r.MARGIN};if(e<0||i<0)return!1;if("number"!=typeof s||"number"!=typeof o)return!1;if(e+s>r.WIDTH)return!1;if(s<50||o<50)return!1;let a;const d=n.length;for(let t=0;t<d;t++)if(a=ut(l,n[t]),a)return!1;return!0},Bt=function(t,e,i,s,o){const r=I(t),n=G(t),l={x1:0,y1:i,x2:r.WIDTH,y2:i+o};if("number"!=typeof s||"number"!=typeof o)return!1;let a=l.y2,d=l.y1;const c=n.length;for(let t=0;t<c;t++){if(ht(l,n[t])||n[t].mY1<l.y1&&n[t].mY2>l.y2)return!1;if(!ut(l,n[t]))continue;const e={x:n[t].mX1,y:n[t].mY1},i={x:n[t].mX2,y:n[t].mY2};n[t].mY1<a&&bt(l,e)&&(a=n[t].mY1),n[t].mY2>d&&bt(l,i)&&(d=n[t].mY2)}return a-d>0&&{y:d,shiftHeight:a-d}};var Zt=function(t,e){return t.store.variables.trees[e]};var Kt=function(t,e){return t.store.variables.stacks[e]};const Qt=(t,e,i)=>{let s,o;const r=Zt(t,"rt");if(e){s=Pt(t,e);const i=qt(t,e,s,r);e.y1=i}if(i){o=Pt(t,i);const e=Jt(t,i,o,r);i.y2=e}},qt=(t,e,i,s)=>{s.reset();const o=i.length;for(let t=0;t<o;t++)s.insert(i[t]);let r=e.y2;const n=c(t),l=y(t);let a=0;const d={x1:0,x2:0,y1:e.y1,y2:e.y2};let u;for(;a<n;){d.x1=a,d.x2=a+l,u=s.find(d,!1,!0,void 0,!1);const t=u.length;let e=-1;for(let i=0;i<t;i++)u[i].mY2>e&&(e=u[i].mY2);-1!==e&&e<r&&(r=e),a=d.x2}return r},Jt=(t,e,i,s)=>{s.reset();const o=i.length;for(let t=0;t<o;t++)s.insert(i[t]);let r=e.y1;const n=c(t),l=y(t);let a=0;const d={x1:0,x2:0,y1:e.y1,y2:e.y2};let u;for(;a<n;){d.x1=a,d.x2=a+l,u=s.find(d,!1,!0,void 0,!1);const t=u.length;let e=Number.MAX_SAFE_INTEGER;for(let i=0;i<t;i++)u[i].mY1<e&&(e=u[i].mY1);e!==Number.MAX_SAFE_INTEGER&&e>r&&(r=e),a=d.x2}return r},te=(t,e,i,s)=>{const o=Zt(t,"rt");let r,n;o.reset(),e.id=s.idCount++,o.insert(e);let l,a=0,d=0;const c=i.length;for(let t=0;t<c;t++){r=i[t],n=o.find(r,!1,!0,void 0,!1),a=n.length;for(let t=0;t<a;t++){mt(r),l=At(n[t],r),mt(r),o.remove(n[t]),d=l.length;for(let t=0;t<d;t++)l[t].x2-l[t].x1<=.5||l[t].y2-l[t].y1<=.5||(l[t].id=s.idCount++,o.insert(l[t]))}}return{rt:o}},ee=(t,e,i,s)=>{let o=!1;for(;!e.isEmpty();){const t=e.pop();o=!1;const r={x1:t.x1-.5>=0?t.x1-.5:0,x2:t.x2+.5,y1:t.y1-.5>=0?t.y1-.5:0,y2:t.y2+.5},n=i.find(r,!1,!0,void 0,!0),l=(null==n?void 0:n.length)||0;if(l>0){for(let e=0;e<l;e++){const r=n[e],l=Tt(r,t);if(1===l.length){const e=l[0];e.id=s.idCount++,Et(e,r)&&i.remove(r),Et(e,t)&&(o=!0),i.insert(e)}}!1===o&&(t.id=s.idCount++,i.insert(t))}else t.id=s.idCount++,i.insert(t)}},ie=t=>{const e=t.getData(),i=e.length;for(let s=0;s<i;s++){const i=e[s];t.find(i,void 0,void 0,Xt,!1)&&t.remove(i)}},se=async(t,e,i,s)=>{let o;const r=Kt(t,"stack");Array.isArray(e)?(r.setData(e.sort(Wt)),o=Zt(t,"rt"),o.reset()):(r.setData(s.sort(Wt)),o=e),ee(0,r,o,i),ie(o);const n=o.getData();return r.setData(n.sort(zt)),o.reset(),ee(0,r,o,i),ie(o),{mergedRectsRt:o}},oe=async(t,e,i,s,o,r,n)=>{const l=R(t),a=G(t),d=I(t),c=v(t),u={},h={},m={};let p,y,f,b=i.getData();e.sort((t=>(e,i)=>X(t[e].x,t[e].y,t[e].x+t[e].width,t[e].y+t[e].height)-X(t[i].x,t[i].y,t[i].x+t[i].width,t[i].y+t[i].height))(a));const A=Kt(t,"garbageStack");let x=e.length;for(;x>0;){let s;p=e[--x],y=l[p],f=a[p];let r,I=Number.MAX_SAFE_INTEGER,v=y;const T=f||{mX1:0,mY1:0,mX2:0,mY2:0},E=b.length;for(let t=0;t<E;t++){const e=b[t],i=(w=T,X((g=e).x1,g.y1,w.mX1,w.mY1)),o=Yt(e,v,d.MARGIN,d.DEFINED_MIN_HEIGHT_AND_WIDTH,c.SHRINK_TO_FIT);o&&i<I&&(I=i,s=b[t],r="object"==typeof o?o:void 0)}if(!s)continue;r&&(y.width=r.width,y.height=r.height,m[p]=!0),y.x=s.x1+d.MARGIN,y.y=s.y1+d.MARGIN,y.x1=y.x,y.y1=y.y,y.x2=y.x+y.width,y.y2=y.y+y.height,at(y),y.mX=y.x-d.MARGIN,y.mY=y.y-d.MARGIN,y.mWidth=y.width+2*d.MARGIN,y.mHeight=y.height+2*d.MARGIN,y.mX1=y.x1-d.MARGIN,y.mY1=y.y1-d.MARGIN,y.mX2=y.x2+d.MARGIN,y.mY2=y.y2+d.MARGIN,u[p]=y,o&&Et(o,s)&&(h[p]=p),A.empty();const D=i.find(s,!1,!0,void 0,!1),G=D.length;v={...y},v.x1-=d.MARGIN,v.x2+=d.MARGIN,v.y1-=d.MARGIN,v.y2+=d.MARGIN;for(let t=0;t<G;t++){const e=D[t],s=At(e,v),o=(null==s?void 0:s.length)||0;for(let t=0;t<o;t++)s[t].idCount=n.idCount++,A.push(s[t]);i.remove(e)}const{mergedRectsRt:_}=await se(t,i,n,A.getData());b=(i=_).getData()}var g,w;return{arranged:u,itemsInBottomWorkSpace:h,resized:m}},re=async(t,e,i,s)=>{var o;const r=I(t),n=R(t),l=performance.now(),a={idCount:0},{minY:d,maxY:c}=((t,e,i,s,o,r,n)=>{const l=G(t),a=R(t),d=I(t);let c=Number.MAX_SAFE_INTEGER,u=0,h=Number.MAX_SAFE_INTEGER,m=0;const p=e.length;for(let t=0;t<p;t++)l[e[t]].y<c&&(c=l[e[t]].y),l[e[t]].y2>u&&(u=l[e[t]].y2),l[e[t]].x<h&&(h=l[e[t]].x),l[e[t]].x2>m&&(m=l[e[t]].x2);return o>u&&(u=o),s>m&&(m=s),i<h&&(h=i),r<c&&(c=r),n>u&&(u=n),u-c>1.5*d.HEIGHT&&(c=a[e[p-1]].y,u=a[e[p-1]].y2),{minX:h-d.MARGIN,maxX:m+d.MARGIN,minY:c-d.MARGIN,maxY:u+d.MARGIN}})(t,e,void 0,void 0,void 0,i,s),u=new Array(e.length-1),h=e.length-1;for(let t=0;t<h;t++)u[t]=e[t];const m={x1:0,x2:r.WIDTH,y1:d,y2:c},p={...m},{topWorkSpace:y,bottomWorkSpace:f}=Vt(t,m,0,r.WIDTH);Qt(t,y,f),p.y1=y.y1,p.y2=f.y2;let b=Pt(t,p),v=Pt(t,p,!0);v=(t=>{const e={};for(const i of t)e[i]=!0;return e})(v);let A=Pt(t,f,!0,v);const x=((t,e,i=!1,s)=>{const o=R(t);if(!e)return[];const r=o.length,n=new Array(r);let l=0;for(let t=0;t<r;t++)s&&s[t]||e.y2<=o[t].mY1&&(n[l++]=i?t:o[t]);return n.length=l,n})(t,f,!0,v),g=(r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN)/2;let w=0,T={},E=0,D={},_=0;for(;E!==h;){const{rt:e}=te(t,p,b,a);let i=e.getData();i=i.filter(t=>t.x2-t.x1>.5&&t.y2-t.y1>.5);const{mergedRectsRt:s}=await se(t,i,a),{arranged:o,itemsInBottomWorkSpace:r,resized:n}=await oe(t,u.filter(t=>!T[t]),s,0,f,0,a);A=[...A,...Object.keys(r)],T={...T,...o},D={...D,...n};const l=Object.values(o);if(b=[...b,...l],E+=l.length,E!==h&&(_++,m.y2+=g,f&&(f.y1+=g,f.y2+=g),p.y2+=g,Ut(t,A,g)),w++,w>1e3)throw"Arrange time out"}if(_>0){Ut(t,x,g*_);let e=A.length;for(let t=0;t<e;t++)T[A[t]]=n[A[t]];e=x.length;for(let t=0;t<e;t++)T[x[t]]=n[x[t]]}const M=performance.now();return console.log("p1: ",l),console.log("p2: ",M),console.log("workSpaceResizeCount",_),console.log("itemsToArrange",h),console.log("arrange total: ",M-l),null!==(o=t.options.callbacks)&&void 0!==o&&o.getArrangeTime&&t.options.callbacks.getArrangeTime(M-l,_,a.idCount),{arranged:T,resized:D}},ne=function(t,e,i){t.store.variables.status[e]=i},le=function(t,e){return t.store.variables.status[e]};const ae=t=>t.store.variables.bindedFunctions,de=function(){const t=K(this),e=T(this),i=H(this),s=ae(this);if(t.editable){it(this)||t.enableInteractiveAddAndCut&&(e.$limberGridView.addEventListener("mousedown",s.onDeskMouseDown),t.enableTouchInteraction&&e.$limberGridView.addEventListener("touchstart",s.onDeskTouchStart));for(var o=e.$limberGridViewItems.length,r=0;r<o;r++)!it(this)&&e.$limberGridViewItems[r]&&(e.$limberGridViewItems[r].addEventListener("mousedown",s.onItemMouseDown),t.enableTouchInteraction&&e.$limberGridViewItems[r].addEventListener("touchstart",s.onItemTouchStart)),i.onItemClickCallback&&e.$limberGridViewItems[r]&&e.$limberGridViewItems[r].addEventListener("click",s.onItemClick)}},ce=function(){const t=K(this),e=T(this),i=ae(this);if(t.editable&&(e.$limberGridView&&(e.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),e.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),e.$limberGridViewItems)){const t=e.$limberGridViewItems.length;for(let s=0;s<t;s++)e.$limberGridViewItems[s]&&(e.$limberGridViewItems[s].removeEventListener("mousedown",i.onItemMouseDown),e.$limberGridViewItems[s].removeEventListener("touchstart",i.onItemTouchStart),e.$limberGridViewItems[s].removeEventListener("click",i.onItemClick))}},ue=function(){const t=T(this),e=ae(this);if(t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let s=0;s<i;s++)t.$limberGridViewItems[s]&&(t.$limberGridViewItems[s].addEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[s].addEventListener("touchstart",e.onItemTouchStart))}},he=function(){const t=T(this),e=ae(this);if(t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let s=0;s<i;s++)t.$limberGridViewItems[s]&&(t.$limberGridViewItems[s].removeEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[s].removeEventListener("touchstart",e.onItemTouchStart))}};var me=function(t){return t.store.variables.undoRedo};const pe=function(t,e=!0){const i=K(t),s=G(t),o=I(t),r=v(t),n=T(t),l=H(t);ce.call(t);const a=s.length;let d=1;e&&(d=o.WIDTH_SCALE_FACTOR);for(let t=0;t<a;t++)s[t].x1*=d,s[t].x2*=d,s[t].y1*=d,s[t].y2*=d,s[t].x=s[t].x1,s[t].y=s[t].y1,s[t].width*=d,s[t].height*=d,at(s[t]),s[t].mX1=s[t].x1-o.MARGIN,s[t].mX2=s[t].x2+o.MARGIN,s[t].mY1=s[t].y1-o.MARGIN,s[t].mY2=s[t].y2+o.MARGIN,s[t].mX=s[t].x-o.MARGIN,s[t].mY=s[t].y-o.MARGIN,s[t].mWidth=s[t].width+2*o.MARGIN,s[t].mHeight=s[t].height+2*o.MARGIN;me(t).setCurrent(s);const c=L(t),u=c.length,h=new Array(u),m=new Array(a);let p;if(it(t)){const e="limber-grid-view-item limber-grid-view-item-mobile-view";p=N(t);for(let t=0;t<u;t++){const i=c[t];p[i].width=o.WIDTH,p[i].height=o.WIDTH/r.MOBILE_ASPECT_RATIO;const s=document.createElement("div");s.setAttribute("class",e),s.setAttribute("data-index",p[i].index),s.style.width=p[i].width+"px",s.style.height=p[i].height+"px",h[t]=s,m[i]=s}w(t).style.transform=`translate(0px, ${o.WIDTH/r.MOBILE_ASPECT_RATIO*15+14*o.MARGIN-50}px)`}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable "+(r.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":""));for(let e=0;e<u;e++){const i=c[e],o=document.createElement("div");o.setAttribute("class",t),o.setAttribute("data-index",i),o.style.transform=`translate(${s[i].x}px, ${s[i].y}px)`,o.style.width=s[i].width+"px",o.style.height=s[i].height+"px",h[e]=o,m[i]=o}}const y=n.$limberGridViewItems.length;for(let t=0;t<y;t++)n.$limberGridViewItems[t]&&(n.$limberGridView.removeChild(n.$limberGridViewItems[t]),n.$limberGridViewItems[t]=void 0);for(let t=0;t<u;t++)n.$limberGridView.appendChild(h[t]);for(let e=0;e<u;e++){const i=c[e],o=h[e];if(it(t)){const e=l.renderContent(p[i].index,p[i].width,p[i].height);ve(t,e,o)}else{const e=l.renderContent(i,s[i].width,s[i].height);ve(t,e,o)}}!function(t,e){t.store.variables.elements.$limberGridViewItems=e}(t,m),de.call(t),l.renderComplete&&l.renderComplete()},ye=function(t,e){const i=T(t),s=H(t),o=G(t),r=I(t),n=v(t);let l;l=it(t)?s.renderContent(e,r.WIDTH,r.WIDTH/n.MOBILE_ASPECT_RATIO):s.renderContent(e,o[e].width,o[e].height),ve(t,l,i.$limberGridViewItems[e]),s.renderComplete&&s.renderComplete(e)},Ie=function(t,e){ce.call(t);const i=H(t),s=T(t);for(const t in e){const e=s.$limberGridViewItems[t];i.removePlugin&&i.removePlugin(s.$limberGridViewItems[t]),e&&e.remove(),s.$limberGridViewItems[t]=void 0}},fe=function(t,e,i=!1){const s=K(t),o=v(t),r=I(t),n=G(t),l=H(t),a=T(t),d=L(t);let c,u="limber-grid-view-item";!0===s.editable&&(u="limber-grid-view-item limber-grid-view-item-editable "+(o.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":""));const h=e.length,m=new Array(h);if(it(t)){const i="limber-grid-view-item limber-grid-view-item-mobile-view";c=N(t);for(let t=0;t<h;t++){const s=e[t];c[s].width=r.WIDTH,c[s].height=r.WIDTH/o.MOBILE_ASPECT_RATIO;const n=document.createElement("div");n.setAttribute("class",i),n.setAttribute("data-index",c[s].index),n.style.width=c[s].width+"px",n.style.height=c[s].height+"px",m[t]=n,a.$limberGridViewItems[s]=n}w(t).style.transform=`translate(0px, ${r.WIDTH/o.MOBILE_ASPECT_RATIO*d.length+r.MARGIN*(d.length-1)-50}px)`}else for(let t=0;t<h;t++){const i=e[t],s=document.createElement("div");s.setAttribute("class",u),s.setAttribute("data-index",i),s.style.transform=`translate(${n[i].x}px, ${n[i].y}px)`,s.style.width=n[i].width+"px",s.style.height=n[i].height+"px",m[t]=s,a.$limberGridViewItems[i]=s}for(let i=0;i<h;i++){const s=e[i],o=m[i];if(it(t)){const e=l.renderContent(c[s].index,c[s].width,c[s].height);ve(t,e,o)}else{const e=l.renderContent(s,n[s].width,n[s].height);ve(t,e,o)}}let p;void 0!==e[0]&&(p=a.$limberGridViewItems[e[0]+1]);for(let t=0;t<h;t++)i?(a.$limberGridView.insertBefore(m[t],p),p=m[t]):a.$limberGridView.appendChild(m[t]);de.call(t)},be=async function(t,e){const i=K(t),s=T(t),o=H(t),r=I(t),n=v(t);ce.call(t);try{if(e.x&&e.y&&e.width&&e.height){rt(e),Object.assign(e,{mX:e.x-r.MARGIN,mY:e.y-r.MARGIN,mWidth:e.width+2*r.MARGIN,mHeight:e.height+2*r.MARGIN,mX1:e.x1-r.MARGIN,mY1:e.y1-r.MARGIN,mX2:e.x2+r.MARGIN,mY2:e.y2+r.MARGIN});let i=!1;if(i=jt(t,e.x,e.y,e.width,e.height),!i)return!1;{const i=G(t);_(t,i);const s=R(t);s.push(e),D(t,s),M(t,s),me(t).reset(),me(t).push(s)}}else{if(!e.width||!e.height||e.x||e.y)return!1;{if(e.width>r.WIDTH)return!1;const i=G(t);_(t,i);const s=R(t),o=(t=>{const e=G(t);let i=I(t).MARGIN;const s=e.length;for(let t=0;t<s;t++)e[t].mY2>i&&(i=e[t].mY2);return i})(t);s.push({x:void 0,y:void 0,width:e.width,height:e.height,mX:void 0,mY:void 0,mWidth:e.width+2*r.MARGIN,mHeight:e.height+2*r.MARGIN,x1:void 0,y1:void 0,x2:void 0,y2:void 0,mX1:void 0,mY1:void 0,mX2:void 0,mY2:void 0}),await(async(t,e,i)=>{var s;const o=I(t),r=performance.now(),n={idCount:0},l=o.WIDTH,a=i,d=i+o.DEFINED_MIN_HEIGHT_AND_WIDTH,c=e.length,u={x1:0,x2:l,y1:a,y2:d},h={...u},{topWorkSpace:m}=Vt(t,u,0,o.WIDTH);Qt(t,m),h.y1=m.y1;let p=Pt(t,h);const y=o.DEFINED_MIN_HEIGHT_AND_WIDTH-2*o.MARGIN-10;let f=0,b={},v=0,A=0;for(;v!==c;){const{rt:i}=te(t,h,p,n),s=i.getData(),{mergedRectsRt:o}=await se(t,s,n),{arranged:r}=await oe(t,e.filter(t=>!b[t]),o,0,void 0,0,n);b={...b,...r};const l=Object.values(r);if(p=[...p,...l],v+=l.length,v!==c&&(A++,u.y2+=y,h.y2+=y),f++,f>1e4)throw"Arrange time out"}const x=performance.now();return console.log("p1: ",r),console.log("p2: ",x),console.log("workSpaceResizeCount",A),console.log("arrange total: ",x-r),null!==(s=t.options.callbacks)&&void 0!==s&&s.getArrangeTime&&t.options.callbacks.getArrangeTime(x-r,A,n.idCount),b})(t,[s.length-1],o),at(s[s.length-1]),D(t,s),M(t,s),me(t).reset(),me(t).push(s)}}const l=G(t),a=l.length-1;let d;const c=document.createElement("div");if(it(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";c.setAttribute("class",t),c.setAttribute("data-index",a),c.style.width=r.WIDTH+"px",c.style.height=r.WIDTH/n.MOBILE_ASPECT_RATIO+"px",d=o.renderContent(a,r.WIDTH,r.WIDTH/n.MOBILE_ASPECT_RATIO,"isAdd")}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable "+(n.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":"")),c.setAttribute("class",t),c.setAttribute("data-index",a),c.style.transform=`translate(${l[a].x}px, ${l[a].y}px)`,c.style.width=l[a].width+"px",c.style.height=l[a].height+"px",d=o.renderContent(a,l[a].width,l[a].height,"isAdd")}it(t)||(s.$limberGridView.appendChild(c),ve(t,d,c),s.$limberGridViewItems.push(c),L(t).push(a)),it(t)||s.$limberGridView.scrollTo({left:0,top:l[a].y1,behavior:"smooth"}),o.addComplete&&o.addComplete(a)}catch(t){H(this).getLogMessage({type:"error",message:t}),console.error(t)}de.call(t)},ve=(t,e,i)=>{const s=H(t);"string"==typeof e?i.innerHTML=e:e instanceof Element?(i.innerHTML="",i.appendChild(e)):s.renderPlugin&&s.renderPlugin(e,i)},Ae=async function(t,e,i,s,o){const r=G(this),n=T(this),l=H(this),a=v(this),d=I(this);if(t=parseInt(t),a.LATCH_MOVED_ITEM){const t=le(this,"resizeDemo");e=(null==t?void 0:t.x)||e,i=(null==t?void 0:t.y)||i,o=(null==t?void 0:t.height)||o,s=(null==t?void 0:t.width)||s}Ht(this,t,e,i,s,o),_(this,r);const c=R(this),u=St(e,i,s,o,d.MARGIN);c[t]={...u};const h=Mt(this,u,t);let m,p;({arranged:m,resized:p}=await re(this,h,i,i+o)),D(this,c),me(this).push(c),n.$limberGridViewItems[t]&&(n.$limberGridViewItems[t].style.transform=`translate(${e}px, ${e}px)`,n.$limberGridViewItems[t].style.width=c[t].width+"px",n.$limberGridViewItems[t].style.height=c[t].height+"px"),kt(this,m),l.resizeComplete&&l.resizeComplete(t,s,o,Object.keys(m)),ye(this,t);for(const t in p)ye(this,t)},xe=async function(t,e,i,s,o,r){var n;const l=G(this),a=T(this),d=v(this),c=I(this);let u;t=parseInt(t),d.LATCH_MOVED_ITEM&&(u=$t(this,e,i,s,o,t,r),ne(this,"resizeDemo",u),e=u.x,i=u.y,o=u.height,s=u.width),null!==(n=u)&&void 0!==n&&n.isToAdjPresent?a.$limberGridViewCrossHairGuide.style.transform=`translate(${u.latchPoint.x-d.CROSS_HAIR_WIDTH/2}px, ${u.latchPoint.y-d.CROSS_HAIR_HEIGHT/2}px)`:a.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*d.CROSS_HAIR_WIDTH}px, -${2*d.CROSS_HAIR_HEIGHT}px)`,Ht(this,t,e,i,s,o),Lt(this),_(this,l);const h=R(this),m=St(e,i,s,o,c.MARGIN);h[t]={...m};const p=Mt(this,m,t);let y;({arranged:y}=await re(this,p,i,i+o)),kt(this,y)},ge=async function(t,e,i){const s=G(this),o=T(this),r=H(this),n=v(this),l=I(this);t=parseInt(t);const a=le(this,"moveDemo");n.LATCH_MOVED_ITEM&&a&&a.toAdj.toX!==Number.MAX_SAFE_INTEGER&&(e=a.toAdj.toX,i=a.toAdj.toY),Ct(this,t,e,i),_(this,s);const d=R(this),c=Ot(e,i,s[t],l.MARGIN);d[t]={...c};const u=Nt(this,c,t),{arranged:h,resized:m}=await re(this,u,i,i+s[t].height);D(this,d),me(this).push(d),o.$limberGridViewItems[t]?(o.$limberGridViewItems[t].style.transform=`translate(${d[t].x}px, ${d[t].y}px)`,n.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[t].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[t].style.transition=""},n.ANIMATE_TIME))):fe(this,[t]),kt(this,h),r.moveComplete&&r.moveComplete(t,e,i,Object.keys(h));for(const t in m)ye(this,t)},we=async function(t,e,i){const s=G(this),o=T(this),r=v(this),n=I(this);if(t=parseInt(t),Ct(this,t,e,i),r.LATCH_MOVED_ITEM){const n=((t,e,i,s)=>{const o=I(t),r=o.DEFINED_MIN_HEIGHT_AND_WIDTH/4.5+o.MARGIN;let n,l,a,d=Dt(t,e,i,s,void 0,r),c=Gt(t,e,i,s,void 0,r),u=_t(t,e,i,s,void 0,void 0,void 0,r),h=Rt(t,e,i,s,void 0,void 0,void 0,r),m=[d,c,u,h];for(const t of m)(!n||t.cornerLatch.distance<n.distance)&&(n=t.cornerLatch);if(!isNaN(n.toAdj.toX)&&n.toAdj.toX!==Number.MAX_SAFE_INTEGER)return n.overlappedItemIndex=d.overlappedItemIndex,n;d=Dt(t,e,i,s),c=Gt(t,e,i,s),u=_t(t,e,i,s),h=Rt(t,e,i,s),m=[d,c,u,h];for(const t of m)(!n||t.cornerLatch.distance<n.distance)&&(n=t.cornerLatch),(!l||t.edgeLatch.distance<l.distance)&&(l=t.edgeLatch);return a=l.distance!==Number.MAX_SAFE_INTEGER?l:n,a.overlappedItemIndex=d.overlappedItemIndex,a})(this,e,i,t);let l,a,d=le(this,"moveDemo");d={...d,...n},ne(this,"moveDemo",d),isNaN(d.overlappedItemIndex)?d.sameIndexOverlap=0:d.overlappedItemIndex===n.overlappedItemIndex?(d.sameIndexOverlap||(d.sameIndexOverlap=0),d.sameIndexOverlap++):d.sameIndexOverlap=1,isNaN(d.overlappedItemIndex)||1!==d.sameIndexOverlap||(d.toAdj={toX:s[d.overlappedItemIndex].x1,toY:s[d.overlappedItemIndex].y1}),d.toAdj.toX!==Number.MAX_SAFE_INTEGER&&(e=d.toAdj.toX,i=d.toAdj.toY,l=d.ch.x,a=d.ch.y),1===d.sameIndexOverlap&&(o.$limberGridViewMoveGuide.style.transform="translate("+s[d.overlappedItemIndex].x+"px, "+s[d.overlappedItemIndex].y+"px)",o.$limberGridViewMoveGuide.style.width=s[d.overlappedItemIndex].width+"px",o.$limberGridViewMoveGuide.style.height=s[d.overlappedItemIndex].height+"px",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active")),d.toAdj.toX!==Number.MAX_SAFE_INTEGER&&1!==d.sameIndexOverlap?o.$limberGridViewCrossHairGuide.style.transform=`translate(${l-r.CROSS_HAIR_WIDTH/2}px, ${a-r.CROSS_HAIR_HEIGHT/2}px)`:o.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*r.CROSS_HAIR_WIDTH}px, -${2*r.CROSS_HAIR_HEIGHT}px)`}Ct(this,t,e,i),Lt(this),_(this,s);const l=R(this),a=Ot(e,i,s[t],n.MARGIN);l[t]={...a};const d=Nt(this,a,t),{arranged:c}=await re(this,d,i,i+s[t].height);kt(this,c)},Te=function(t){return t.store.variables.eventSpecific.itemInteraction},Ee=function(t){return t.store.variables.eventSpecific.deskInteraction},De=function(t){const e=T(this),i=v(this),s=G(this),o=Te(this),r=ae(this),n=Q(this,t);n&&(Object.assign(o.userActionData,n),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",r.onItemMouseMove),document.addEventListener("mouseup",r.onItemMouseUp),document.addEventListener("contextmenu",r.onItemContextMenu),clearTimeout(o.longPressCheck),0===i.MOUSE_DOWN_TIME?(o.mouseDownTimerComplete=!0,J(this,o.userActionData,t)):o.longPressCheck=setTimeout(_e.bind(this,t),i.MOUSE_DOWN_TIME),t.preventDefault()):"resize"!==o.userActionData.type&&"resizeBottomLeft"!==o.userActionData.type||(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,e.$limberGridView.addEventListener("mousemove",r.onItemMouseMove),document.addEventListener("mouseup",r.onItemMouseUp),document.addEventListener("contextmenu",r.onItemContextMenu),o.userActionData.itemX=s[o.userActionData.itemIndex].x,o.userActionData.itemY=s[o.userActionData.itemIndex].y,o.userActionData.itemX2=s[o.userActionData.itemIndex].x2,o.userActionData.itemY2=s[o.userActionData.itemIndex].y2,q(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Ge=function(t){const e=T(this),i=v(this),s=G(this),o=Te(this),r=ae(this);if(1!==t.touches.length)return void Oe.call(this,t);const n=F(this,t);if(!n)return;const l=Q(this,t);l&&(Object.assign(o.userActionData,l),o.userActionData.touchPosOnLimberGridItem=n,"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",r.onItemTouchMove),document.addEventListener("touchend",r.onItemTouchEnd),document.addEventListener("touchcancel",r.onItemTouchCancel),document.addEventListener("contextmenu",r.onItemTouchContextMenu),clearTimeout(o.longTouchCheck),0===i.TOUCH_HOLD_TIME?(o.touchHoldTimerComplete=!0,J(this,o.userActionData,t)):o.longTouchCheck=setTimeout(Re.bind(this,t),i.TOUCH_HOLD_TIME),t.preventDefault()):"resize"!==o.userActionData.type&&"resizeBottomLeft"!==o.userActionData.type||(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,e.$limberGridView.addEventListener("touchmove",r.onItemTouchMove),document.addEventListener("touchend",r.onItemTouchEnd),document.addEventListener("touchcancel",r.onItemTouchCancel),document.addEventListener("contextmenu",r.onItemTouchContextMenu),o.userActionData.itemX=s[o.userActionData.itemIndex].x,o.userActionData.itemY=s[o.userActionData.itemIndex].y,o.userActionData.itemX2=s[o.userActionData.itemIndex].x2,o.userActionData.itemY2=s[o.userActionData.itemIndex].y2,q(this,o.userActionData),t.preventDefault()),t.stopPropagation())},_e=function(t){const e=Te(this);!1===e.mouseDownCancel&&(e.mouseDownTimerComplete=!0,J(this,e.userActionData,t))},Re=function(t){const e=Te(this);!1===e.touchHoldCancel&&(e.touchHoldTimerComplete=!0,J(this,e.userActionData,t))},Me=function(t){const e=T(this),i=I(this),s=v(this),o=H(this),r=G(this),n=Te(this);if(!0===n.mouseDownTimerComplete)if("move"===n.userActionData.type){tt(this,n.userActionData,t,"move"),clearTimeout(n.showMoveDemoTimeOutVariable);const e=Y(this,t);let i;if(o.offsetMovePseudoElement&&e){const t=o.offsetMovePseudoElement(e.x,e.y,et(r[n.userActionData.itemIndex]));i=e.y,e.x=t.x,e.y=t.y}e&&(n.isScrolling||(n.isScrolling=!0,setTimeout(()=>{E(this,i,e.offsetY,s.AUTO_SCROLL_FOR_MOUSE),n.isScrolling=!1},s.AUTO_SCROLL_DELAY)),n.showMoveDemoTimeOutVariable=setTimeout($e.bind(this,n.userActionData.itemIndex,e),s.DEMO_WAIT_TIME))}else{tt(this,n.userActionData,t,"resize"),clearTimeout(n.showResizeDemoTimeOutVariable);const o=e.$limberGridView.scrollTop,r=e.$limberGridView.scrollLeft,l=n.userActionData.itemX,a=n.userActionData.itemY;let d,c,u,h;"resize"===n.userActionData.type?(d=l,c=a,u=t.offsetX-l+r-i.PADDING_LEFT,h=t.offsetY-a+o-i.PADDING_TOP):(d=t.offsetX+r-i.PADDING_LEFT,c=a,u=n.userActionData.itemX2-d,h=t.offsetY+o-i.PADDING_TOP-c),n.userActionData.newX1=d,n.userActionData.newY1=c,n.userActionData.newWidth=u,n.userActionData.newHeight=h;const m=t.offsetY,p=t.offsetY+o;n.isScrolling||(n.isScrolling=!0,setTimeout(()=>{E(this,p,m,s.AUTO_SCROLL_FOR_MOUSE),n.isScrolling=!1},s.AUTO_SCROLL_DELAY)),u>0&&h>0&&(e.$limberGridViewPseudoItem.style.transform=`translate(${d}px, ${c}px)`,e.$limberGridViewPseudoItem.style.width=u+"px",e.$limberGridViewPseudoItem.style.height=h+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(u)}px, h: ${parseInt(h)}px`)),n.showResizeDemoTimeOutVariable=setTimeout(ke.bind(this,n.userActionData.itemIndex,d,c,u,h,"resize"===n.userActionData.type),s.DEMO_WAIT_TIME)}else n.mouseDownCancel=!0,Se.call(this,t);t.preventDefault(),t.stopPropagation()},Ne=function(t){const e=T(this),i=v(this),s=H(this),o=G(this),r=Te(this);if(!0===r.touchHoldTimerComplete&&1===t.touches.length)if("move"===r.userActionData.type){tt(this,r.userActionData,t,"move");const e=U(this,t);let n;if(s.offsetMovePseudoElement&&e){const t=s.offsetMovePseudoElement(e.x,e.y,et(o[r.userActionData.itemIndex]));n=e.y,e.x=t.x,e.y=t.y}if(e){let t;r.isScrolling||(r.isScrolling=!0,setTimeout(()=>{t=E(this,n,e.offsetY,!0),r.isScrolling=!1},i.AUTO_SCROLL_DELAY)),!0!==t&&(r.userActionData.touchPositionOnLimberGrid&&B(this,0,r.userActionData,e)||(clearTimeout(r.showMoveDemoTimeOutVariable),r.userActionData.touchPositionOnLimberGrid=e,r.showMoveDemoTimeOutVariable=setTimeout($e.bind(this,r.userActionData.itemIndex,e),i.DEMO_WAIT_TIME)))}}else{tt(this,r.userActionData,t,"resize");const s=r.userActionData.itemX,o=r.userActionData.itemY,n=U(this,t);let l,a,d,c;if("resize"===r.userActionData.type&&n?(l=s,a=o,d=n.x-s,c=n.y-o):n&&(l=n.x,a=o,d=r.userActionData.itemX2-n.x,c=n.y-o),n&&(r.userActionData.newX1=l,r.userActionData.newY1=a,r.userActionData.newWidth=d,r.userActionData.newHeight=c,d>0&&c>0&&(e.$limberGridViewPseudoItem.style.transform=`translate(${l}px, ${a}px)`,e.$limberGridViewPseudoItem.style.width=d+"px",e.$limberGridViewPseudoItem.style.height=c+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`))),n){const t=n.y;let e;r.isScrolling||(r.isScrolling=!0,setTimeout(()=>{e=E(this,t,n.offsetY,!0),r.isScrolling=!1},i.AUTO_SCROLL_DELAY)),!0!==e&&(r.userActionData.touchPositionOnLimberGrid&&B(this,0,r.userActionData,n)||(clearTimeout(r.showResizeDemoTimeOutVariable),r.userActionData.touchPositionOnLimberGrid=n,r.showResizeDemoTimeOutVariable=setTimeout(ke.bind(this,r.userActionData.itemIndex,l,a,d,c,"resize"===r.userActionData.type),i.DEMO_WAIT_TIME)))}}else"move"===r.userActionData.type&&(j(this,t,r.userActionData)||(r.touchHoldCancel=!0,Oe.call(this,t)));t.stopPropagation()},He=async function(t){if(0!==t.button)return;const e=Te(this),i=H(this),s=G(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.mouseDownTimerComplete)if("move"===e.userActionData.type){const r=Y(this,t);if(i.offsetMovePseudoElement&&r){const t=i.offsetMovePseudoElement(r.x,r.y,et(s[e.userActionData.itemIndex]));r.x=t.x,r.y=t.y}var o={};try{if(!r)throw"Mouse position outside grid area.";await ge.call(this,e.userActionData.itemIndex,r.x,r.y),o.x=r.x,o.y=r.y}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),Ve(this)}}else try{const t=e.userActionData.newX1,i=e.userActionData.newY1,s=e.userActionData.newWidth,o=e.userActionData.newHeight;await Ae.call(this,e.userActionData.itemIndex,t,i,s,o,"resize"===e.userActionData.type)}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),Ve(this)}else e.mouseDownCancel=!0;Se.call(this,t),e.userActionData={}},Ce=async function(t){const e=Te(this),i=H(this),s=G(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.touchHoldTimerComplete&&0===t.touches.length)if("move"===e.userActionData.type){const r=U(this,t);if(i.offsetMovePseudoElement&&r){const t=i.offsetMovePseudoElement(r.x,r.y,et(s[e.userActionData.itemIndex]));r.x=t.x,r.y=t.y}var o={};try{if(!r)throw"Touch position outside grid area.";await ge.call(this,e.userActionData.itemIndex,r.x,r.y),o.x=r.x,o.y=r.y}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),Ve(this)}}else try{const t=e.userActionData.newX1,i=e.userActionData.newY1,s=e.userActionData.newWidth,o=e.userActionData.newHeight;await Ae.call(this,e.userActionData.itemIndex,t,i,s,o,"resize"===e.userActionData.type)}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),Ve(this)}else e.touchHoldCancel=!0;Oe.call(this,t),t.stopPropagation(),e.userActionData={}},Se=function(t){const e=T(this),i=Te(this),s=ae(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((t,e)=>{const i=T(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(-1000px, -1000px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const s=i.$limberGridViewItems.length;for(let t=0;t<s;t++)i.$limberGridViewItems[t]&&i.$limberGridViewItems[t].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((t,e)=>{const i=T(t),s=v(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[e.itemIndex]&&i.$limberGridViewItems[e.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(-1000px, -1000px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing"),i.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*s.CROSS_HAIR_WIDTH}px, -${2*s.CROSS_HAIR_HEIGHT}px)`})(this,i.userActionData),(t=>{const e=T(t);e.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),e.$limberGridViewMoveGuide.style.transform="translate(-1000px, -1000px)"})(this),Ve(this),document.removeEventListener("mousemove",s.onItemMouseMove),e.$limberGridView.removeEventListener("mousemove",s.onItemMouseMove),document.removeEventListener("mouseup",s.onItemMouseUp),document.removeEventListener("contextmenu",s.onItemContextMenu),document.removeEventListener("touchmove",s.onItemTouchMove),e.$limberGridView.removeEventListener("touchmove",s.onItemTouchMove),document.removeEventListener("touchend",s.onItemTouchEnd),document.removeEventListener("contextmenu",s.onItemTouchContextMenu),document.removeEventListener("touchcancel",s.onItemTouchCancel),i.userActionData={},ne(this,"moveDemo",void 0),ne(this,"resizeDemo",void 0);Zt(this,"rt").emptyTree(),t.preventDefault(),t.stopPropagation()},Oe=function(t){Se.call(this,t)},Le=function(t){Se.call(this,t)},$e=async function(t,e){const i=T(this);try{if(!1===e)throw"Invalid mouse position.";await we.call(this,t,e.x,e.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},ke=async function(t,e,i,s,o,r){const n=T(this);try{await xe.call(this,t,e,i,s,o,r),n.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(t){console.error(t),H(this).getLogMessage({type:"error",message:t}),n.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},Ve=Lt,Pe=t=>{const e=T(t),i=v(t);e.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const s=e.$limberGridViewItems.length;for(let t=0;t<s;t++)e.$limberGridViewItems[t]&&e.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");e.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state"),"ADD"===i.DESK_INTERACTION_MODE?e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},We=function(t){const e=T(this),i=v(this),s=Ee(this),o=ae(this);t.target.classList.contains("limber-grid-view")&&(t.stopPropagation(),s.mouseDownCancel=!1,s.mouseDownTimerComplete=!1,clearTimeout(s.longPressCheck),s.longPressCheck=setTimeout(Xe.bind(this,t,t.offsetX,t.offsetY),i.MOUSE_DOWN_TIME),e.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu))},ze=function(t){const e=T(this),i=v(this),s=Ee(this),o=ae(this);if(!t.target.classList.contains("limber-grid-view"))return;if(1!==t.touches.length)return;const r=U(this,t);s.userActionData={touchPositionOnLimberGrid:r},s.tapHoldCancel=!1,s.tapHoldTimerComplete=!1,e.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),he.call(this),clearTimeout(s.longTouchCheck),s.longTouchCheck=setTimeout(Ye.bind(this,t),i.TOUCH_HOLD_TIME),t.stopPropagation()},Xe=function(t,e,i){const s=T(this),o=I(this),r=Ee(this);if(!1===r.mouseDownCancel){r.mouseDownTimerComplete=!0;var n=s.$limberGridView.scrollTop,l=e+s.$limberGridView.scrollLeft-o.PADDING_LEFT,a=i+n-o.PADDING_TOP;r.userActionData={type:"add",addPositionX:l,addPositionY:a},s.$limberGridViewAddCutGuide.style.height="1px",s.$limberGridViewAddCutGuide.style.width="1px",s.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${a}px)`,s.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Pe(this)}},Ye=function(t){const e=T(this),i=Ee(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;const s=U(this,t),o=s.x,r=s.y;i.userActionData={...i.userActionData,type:"add",addPositionX:o,addPositionY:r};setTimeout(function(){e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active"),e.$limberGridViewTouchHoldGuide.style.transform="translate(-1000px, -1000px)"}.bind(this),500),e.$limberGridViewAddCutGuide.style.height="1px",e.$limberGridViewAddCutGuide.style.width="1px",e.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${r}px)`,e.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Pe(this),e.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${r}px)`,e.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),t.preventDefault()}},Ue=function(t){const e=T(this),i=I(this),s=v(this),o=Ee(this);if(!0===o.mouseDownTimerComplete){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const r=e.$limberGridView.scrollTop,n=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,a=o.userActionData.addPositionY,d=t.offsetX-l+n-i.PADDING_LEFT,c=t.offsetY-a+r-i.PADDING_TOP;o.userActionData.newWidth=d,o.userActionData.newHeight=c;const u=t.offsetY,h=t.offsetY+r;o.isScrolling||(o.isScrolling=!0,setTimeout(()=>{E(this,h,u,s.AUTO_SCROLL_FOR_MOUSE),o.isScrolling=!1},s.AUTO_SCROLL_DELAY)),d>0&&c>0&&(e.$limberGridViewAddCutGuide.style.width=d+"px",e.$limberGridViewAddCutGuide.style.height=c+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),"ADD"===s.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(qe.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),s.DEMO_WAIT_TIME)):"CUTSPACE"===s.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Je.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),s.DEMO_WAIT_TIME))}else Qe.call(this,t);t.stopPropagation()},Fe=function(t){const e=T(this),i=v(this),s=Ee(this);if(!0===s.tapHoldTimerComplete&&1===t.touches.length){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const o=s.userActionData.addPositionX,r=s.userActionData.addPositionY,n=U(this,t),l=(null==n?void 0:n.x)-o,a=(null==n?void 0:n.y)-r;if(n&&(s.userActionData.newWidth=l,s.userActionData.newHeight=a,l>0&&a>0&&(e.$limberGridViewAddCutGuide.style.width=l+"px",e.$limberGridViewAddCutGuide.style.height=a+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(l)}px, h: ${parseInt(a)}px`))),n){const t=n.y;let e;s.isScrolling||(s.isScrolling=!0,setTimeout(()=>{e=E(this,t,n.offsetY,!0),s.isScrolling=!1},i.AUTO_SCROLL_DELAY)),"ADD"===i.DESK_INTERACTION_MODE?!0!==e&&(s.userActionData.touchPositionOnLimberGrid&&B(this,0,s.userActionData,n)||(clearTimeout(s.addItemAllowCheckTimeOutVariable),s.userActionData.touchPositionOnLimberGrid=n,s.addItemAllowCheckTimeOutVariable=setTimeout(qe.bind(this,s.userActionData.addPositionX,s.userActionData.addPositionY,l,a),i.DEMO_WAIT_TIME))):"CUTSPACE"===i.DESK_INTERACTION_MODE&&!0!==e&&(s.userActionData.touchPositionOnLimberGrid&&B(this,0,s.userActionData,n)||(clearTimeout(s.cutSpaceAllowCheckTimeOutVariable),s.userActionData.touchPositionOnLimberGrid=n,s.cutSpaceAllowCheckTimeOutVariable=setTimeout(Je.bind(this,s.userActionData.addPositionX,s.userActionData.addPositionY,l,a),i.DEMO_WAIT_TIME)))}t.preventDefault()}else((t,e,i)=>{const s=v(t),o=U(t,e);return!(z(o,i.touchPositionOnLimberGrid)>s.TOUCH_HOLD_TOLERANCE*s.TOUCH_HOLD_TOLERANCE)})(this,t,s.userActionData)||Qe.call(this);t.stopPropagation()},je=function(t){if(0!==t.button)return;const e=T(this),i=v(this),s=H(this),o=G(this),r=Ee(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck),!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(jt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var n={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},l=e.$limberGridView.scrollTop;be(this,n),e.$limberGridView.scrollTop=l}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=Bt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&(Ft(this,t.y,t.shiftHeight),me(this).push(o),s.cutSpaceComplete&&s.cutSpaceComplete())}}else r.mouseDownCancel=!0;Qe.call(this),t.stopPropagation()},Be=function(t){const e=T(this),i=v(this),s=H(this),o=G(this),r=Ee(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck),!0===r.tapHoldTimerComplete&&0===t.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(jt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){const t={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},i=e.$limberGridView.scrollTop;be(this,t),e.$limberGridView.scrollTop=i}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=Bt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&(Ft(this,t.y,t.shiftHeight),me(this).push(o),s.cutSpaceComplete&&s.cutSpaceComplete())}}else r.tapHoldCancel=!0;Qe.call(this),t.stopPropagation()},Ze=function(t){Qe.call(this)},Ke=function(t){t.preventDefault()},Qe=function(t){const e=T(this),i=Ee(this),s=ae(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(t=>{const e=T(t);e.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=e.$limberGridViewItems.length;for(var s=0;s<i;s++)e.$limberGridViewItems[s]&&e.$limberGridViewItems[s].classList.remove("limber-grid-view-item-resizing-state");e.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state"),e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),e.$limberGridViewAddCutGuide.style.transform="translate(-1000px, -1000px)",e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active"),e.$limberGridViewTouchHoldGuide.style.transform="translate(-1000px, -1000px)"})(this),e.$limberGridView.removeEventListener("mousemove",s.onDeskMouseMove),document.removeEventListener("mouseup",s.onDeskMouseUp),document.removeEventListener("contextmenu",s.onDeskContextMenu),e.$limberGridView.removeEventListener("touchmove",s.onDeskTouchMove),document.removeEventListener("touchend",s.onDeskTouchEnd),document.removeEventListener("touchcancel",s.onDeskTouchCancel),document.removeEventListener("contextmenu",s.onDeskTouchContextMenu),ue.call(this),i.userActionData={},t&&(t.preventDefault(),t.stopPropagation())},qe=function(t,e,i,s){const o=T(this);!1===jt(this,t,e,i,s)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Je=function(t,e,i,s){const o=T(this);!1===Bt(this,0,e,i,s)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))};var ti=i(3),ei=i.n(ti);const ii={ADD:!0,CUTSPACE:!0},si=async function(t,e,i,s){const o=T(t),r=I(t),n=G(t);if(!0===i||!(t=>{if(Array.isArray(t)){const s=t.length;for(let o=0;o<s;o++)if(i=t[o],isNaN(i.x1)||isNaN(i.x2)||isNaN(i.y1)||isNaN(i.y2)||i.x1>=i.x2||i.y1>=i.y2){if(!pt(t[o]))return!1;rt(t[o])}else(e=t[o]).x=e.x1,e.y=e.y1,e.width=e.x2-e.x1,e.height=e.y2-e.y1;return!0}var e,i;return!1})(n)){console.warn("Auto-arranging"),_(t,n);const e=R(t),i=n.length,s=new Array(i);for(let t=0;t<i;t++)s[t]=t,e[t].x1=0,e[t].x2=0,e[t].y1=0,e[t].y2=0,e[t].x=0,e[t].y=0,e[t].width=e[t].width/r.WIDTH_SCALE_FACTOR||2*r.MIN_HEIGHT_AND_WIDTH,e[t].height=e[t].height/r.WIDTH_SCALE_FACTOR||2*r.MIN_HEIGHT_AND_WIDTH,e[t].mX1=0,e[t].mX2=0,e[t].mY1=0,e[t].mY2=0,e[t].mX=0,e[t].mY=0,e[t].mWidth=e[t].width+2*r.MARGIN,e[t].mHeight=e[t].height+2*r.MARGIN,Object.assign(n[t],e[t]);d(t,r.GRID_WIDTH),u(t,r.GRID_HEIGHT),m(t,r.GRID_MARGIN),h(t,1),p(t,r.MIN_HEIGHT_AND_WIDTH),await(async t=>{const e=R(t),i=I(t),s=2*i.MIN_HEIGHT_AND_WIDTH,o=s,r=Math.floor(i.WIDTH/s),n=e.length;let l=0;for(let t=0;t<n;t+=r){const a=t/r;for(let t=0;t<r&&l<n;t++)e[l].x1=t*i.MARGIN*2+t*s+i.MARGIN,e[l].x2=e[l].x1+s,e[l].y1=a*i.MARGIN*2+a*o+i.MARGIN,e[l].y2=e[l].y1+o,e[l].x=e[l].x1,e[l].y=e[l].y1,at(e[l]),e[l].mX1=e[l].x1-i.MARGIN,e[l].mX2=e[l].x2+i.MARGIN,e[l].mY1=e[l].y1-i.MARGIN,e[l].mY2=e[l].y1+i.MARGIN,e[l].mX=e[l].mX1,e[l].mY=e[l].mY2,l++}})(t),D(t,e)}if(function(t,e){t.store.constants.privateConstants.PADDING_LEFT=e}(t,parseInt(window.getComputedStyle(o.$limberGridView,null).getPropertyValue("padding-left"))),function(t,e){t.store.constants.privateConstants.PADDING_RIGHT=e}(t,parseInt(window.getComputedStyle(o.$limberGridView,null).getPropertyValue("padding-right"))),function(t,e){t.store.constants.privateConstants.PADDING_TOP=e}(t,parseInt(window.getComputedStyle(o.$limberGridView,null).getPropertyValue("padding-top"))),function(t,e){t.store.constants.privateConstants.PADDING_BOTTOM=e}(t,parseInt(window.getComputedStyle(o.$limberGridView,null).getPropertyValue("padding-bottom"))),d(t,o.$limberGridView.clientWidth-r.PADDING_LEFT-r.PADDING_RIGHT),u(t,o.$limberGridView.clientHeight-r.PADDING_TOP-r.PADDING_BOTTOM),s){const t=n.length;for(let e=0;e<t;e++)n[e].x1/=r.WIDTH_SCALE_FACTOR,n[e].x2/=r.WIDTH_SCALE_FACTOR,n[e].y1/=r.WIDTH_SCALE_FACTOR,n[e].y2/=r.WIDTH_SCALE_FACTOR,n[e].x/=r.WIDTH_SCALE_FACTOR,n[e].y/=r.WIDTH_SCALE_FACTOR,n[e].width/=r.WIDTH_SCALE_FACTOR,n[e].height/=r.WIDTH_SCALE_FACTOR;r.MARGIN/=r.WIDTH_SCALE_FACTOR,r.DEFINED_MIN_HEIGHT_AND_WIDTH/=r.WIDTH_SCALE_FACTOR}if(h(t,r.WIDTH/r.GRID_WIDTH),m(t,r.MARGIN*r.WIDTH_SCALE_FACTOR),p(t,r.DEFINED_MIN_HEIGHT_AND_WIDTH*r.WIDTH_SCALE_FACTOR),it(t)){g(t).style.transform="translate(1px, 1px)",M(t,n);const e=N(t),i=n.length<15?n.length:15,s=new Array(i).fill(0).map((t,e)=>e);O(t,s);for(let t=0;t<i;t++)e[s[t]].renderIndex=t}else{g(t).style.transform=`translate(0px, ${k(t)*r.HEIGHT}px)`,w(t).style.transform=`translate(0px, ${P(t)*r.HEIGHT}px)`;const e={x1:0,x2:r.WIDTH,y1:k(t)*r.HEIGHT-r.HEIGHT/2,y2:P(t)*r.HEIGHT+r.HEIGHT/2};O(t,It(t,e,!0))}},oi=function(t){var e,i,s,o,r,n,l,a,d,c,u,h,p,y,I,f,v,A,x,g,w,T,E,D,G,_,R,M,N,H,C,S;"number"==typeof(null==t||null===(e=t.gridData)||void 0===e?void 0:e.WIDTH)&&(C=this,S=t.gridData.WIDTH,C.store.constants.privateConstants.GRID_WIDTH=S),"number"==typeof(null==t||null===(i=t.gridData)||void 0===i?void 0:i.HEIGHT)&&function(t,e){t.store.constants.privateConstants.GRID_HEIGHT=e}(this,t.gridData.HEIGHT),"number"==typeof(null==t||null===(s=t.gridData)||void 0===s?void 0:s.MARGIN)&&function(t,e){t.store.constants.privateConstants.GRID_MARGIN=e}(this,t.gridData.MARGIN),"number"==typeof(null==t||null===(o=t.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&function(t,e){t.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=e}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),"number"==typeof(null==t?void 0:t.margin)&&m(this,t.margin),"number"==typeof(null==t||null===(r=t.publicConstants)||void 0===r?void 0:r.mobileAspectRatio)&&b(this,"MOBILE_ASPECT_RATIO",t.publicConstants.mobileAspectRatio),"number"==typeof(null==t||null===(n=t.publicConstants)||void 0===n?void 0:n.moveGuideRadius)&&b(this,"MOVE_GUIDE_RADIUS",t.publicConstants.moveGuideRadius),"number"==typeof(null==t||null===(l=t.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&b(this,"RESIZE_SQUARE_GUIDE_LENGTH",t.publicConstants.resizeSquareGuideLength),"number"==typeof(null==t||null===(a=t.publicConstants)||void 0===a?void 0:a.resizeSquareBorderGuideWidth)&&b(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",t.publicConstants.resizeSquareBorderGuideWidth),"boolean"==typeof(null==t||null===(d=t.publicConstants)||void 0===d?void 0:d.showBottomLeftResizeGuide)&&b(this,"SHOW_BOTTOM_LEFT_RESIZE_GUIDE",t.publicConstants.showBottomLeftResizeGuide),"number"==typeof(null==t||null===(c=t.publicConstants)||void 0===c?void 0:c.autoScrollDistance)&&b(this,"AUTO_SCROLL_DISTANCE",t.publicConstants.autoScrollDistance),"number"==typeof(null==t||null===(u=t.publicConstants)||void 0===u?void 0:u.autoScrollPoint)&&b(this,"AUTO_SCROLL_POINT",t.publicConstants.autoScrollPoint),"number"==typeof(null==t||null===(h=t.publicConstants)||void 0===h?void 0:h.moveOrResizeHeightIncrements)&&b(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",t.publicConstants.moveOrResizeHeightIncrements),"boolean"==typeof(null==t||null===(p=t.publicConstants)||void 0===p?void 0:p.autoScrollForMouse)&&b(this,"AUTO_SCROLL_FOR_MOUSE",t.publicConstants.autoScrollForMouse),"number"==typeof(null==t||null===(y=t.publicConstants)||void 0===y?void 0:y.mouseDownTime)&&b(this,"MOUSE_DOWN_TIME",t.publicConstants.mouseDownTime),"number"==typeof(null==t||null===(I=t.publicConstants)||void 0===I?void 0:I.touchHoldTime)&&b(this,"TOUCH_HOLD_TIME",t.publicConstants.touchHoldTime),"number"==typeof(null==t||null===(f=t.publicConstants)||void 0===f?void 0:f.touchHoldTolerance)&&b(this,"TOUCH_HOLD_TOLERANCE",t.publicConstants.touchHoldTolerance),"number"==typeof(null==t||null===(v=t.publicConstants)||void 0===v?void 0:v.demoWaitTime)&&b(this,"DEMO_WAIT_TIME",t.publicConstants.demoWaitTime),"number"==typeof(null==t||null===(A=t.publicConstants)||void 0===A?void 0:A.windowResizeWaitTime)&&b(this,"WINDOW_RESIZE_WAIT_TIME",t.publicConstants.windowResizeWaitTime),"number"==typeof(null==t||null===(x=t.publicConstants)||void 0===x?void 0:x.autoScrollDelay)&&b(this,"AUTO_SCROLL_DELAY",t.publicConstants.autoScrollDelay),null!=t&&null!==(g=t.publicConstants)&&void 0!==g&&g.deskInteractionMode&&ii[t.publicConstants.deskInteractionMode]&&b(this,"DESK_INTERACTION_MODE",t.publicConstants.deskInteractionMode),"boolean"==typeof(null==t||null===(w=t.publicConstants)||void 0===w?void 0:w.latchMovedItem)&&b(this,"LATCH_MOVED_ITEM",t.publicConstants.latchMovedItem),"boolean"==typeof(null==t||null===(T=t.publicConstants)||void 0===T?void 0:T.animateMovedItem)&&b(this,"ANIMATE_MOVED_ITEM",t.publicConstants.animateMovedItem),"number"==typeof(null==t||null===(E=t.publicConstants)||void 0===E?void 0:E.animateTime)&&b(this,"ANIMATE_TIME",t.publicConstants.animateTime),"number"==typeof(null==t||null===(D=t.publicConstants)||void 0===D?void 0:D.marginChangeValue)&&(null==t||null===(G=t.publicConstants)||void 0===G?void 0:G.marginChangeValue)>=0&&b(this,"MARGIN_CHANGE_VALUE",t.publicConstants.marginChangeValue),"number"==typeof(null==t||null===(_=t.publicConstants)||void 0===_?void 0:_.crossHairWidth)&&b(this,"CROSS_HAIR_WIDTH",t.publicConstants.crossHairWidth),"number"==typeof(null==t||null===(R=t.publicConstants)||void 0===R?void 0:R.crossHairHeight)&&b(this,"CROSS_HAIR_HEIGHT",t.publicConstants.crossHairHeight),"number"==typeof(null==t||null===(M=t.publicConstants)||void 0===M?void 0:M.shrinkToFit)&&(null==t||null===(N=t.publicConstants)||void 0===N?void 0:N.shrinkToFit)<=10&&b(this,"SHRINK_TO_FIT",t.publicConstants.shrinkToFit),"boolean"==typeof(null==t||null===(H=t.publicConstants)||void 0===H?void 0:H.emitDebugLogs)&&b(this,"EMIT_DEBUG_LOGS",t.publicConstants.emitDebugLogs)},ri=function(){const t=T(this),e=Z(this),i=v(this);var s,o;let r;s=this,o=document.getElementsByTagName("body")[0],s.store.variables.elements.$body=o;do{r="limber-grid-view-pseudo-container-"+ot()}while(null!==document.getElementById(r));!function(t,e){t.store.variables.essentials.pseudoContainerId=e}(this,r);const n=document.createElement("div");if(n.setAttribute("class","limber-grid-view-pseudo-container"),n.setAttribute("id",r),function(t,e){t.store.variables.elements.$pseudoContainer=e}(this,n),e.pseudoElementContainer){let t;"string"==typeof e.pseudoElementContainer?t=document.getElementById(e.pseudoElementContainer):e.pseudoElementContainer instanceof Element&&(t=e.pseudoElementContainer),t.appendChild(n)}else t.$body.appendChild(n);t.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright © 2018-2022 Subendra Kumar Sharma. License GPLv3+: GNU GPL version 3 or later &lthttps://www.gnu.org/licenses/&gt.</div></div></div>',function(t,e){t.store.variables.elements.$limberGridViewContainer=e}(this,t.$el.getElementsByClassName("limber-grid-view-container")[0]),function(t,e){t.store.variables.elements.$limberGridView=e}(this,t.$el.getElementsByClassName("limber-grid-view")[0]);const l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div");h.innerHTML="<div></div>";const m=document.createElement("div");m.innerHTML="<hr></hr><hr></hr>";const p=document.createElement("div"),y=document.createElement("div");l.setAttribute("class","limber-grid-view-pseudo-container-item"),a.setAttribute("class","limber-grid-view-pseudo-item"),d.setAttribute("class","limber-grid-view-move-guide"),c.setAttribute("class","limber-grid-view-height-adjust-guide"),u.setAttribute("class","limber-grid-view-add-cut-guide"),h.setAttribute("class","limber-grid-view-touch-hold-guide"),m.setAttribute("class","limber-grid-view-cross-hair-guide"),m.style.transform=`translate(-${2*i.CROSS_HAIR_WIDTH}px, -${2*i.CROSS_HAIR_HEIGHT}px)`,p.setAttribute("class","limber-grid-view-io-top-helper"),y.setAttribute("class","limber-grid-view-io-bottom-helper"),t.$pseudoContainer.appendChild(l),t.$limberGridView.appendChild(a),t.$limberGridView.appendChild(d),t.$limberGridView.appendChild(c),t.$limberGridView.appendChild(u),t.$limberGridView.appendChild(h),t.$limberGridView.appendChild(m),t.$limberGridView.appendChild(p),t.$limberGridView.appendChild(y),function(t,e){t.store.variables.elements.$pseudoContainerItem=e}(this,l),function(t,e){t.store.variables.elements.$limberGridViewPseudoItem=e}(this,a),function(t,e){t.store.variables.elements.$limberGridViewMoveGuide=e}(this,d),function(t,e){t.store.variables.elements.$limberGridViewHeightAdjustGuide=e}(this,c),function(t,e){t.store.variables.elements.$limberGridViewAddCutGuide=e}(this,u),function(t,e){t.store.variables.elements.$limberGridViewTouchHoldGuide=e}(this,h),function(t,e){t.store.variables.elements.$limberGridViewCrossHairGuide=e}(this,m),function(t,e){t.store.variables.elements.$limberGridViewIOTopHelper=e}(this,p),function(t,e){t.store.variables.elements.$limberGridViewIOBottomHelper=e}(this,y)},ni=function(t,e){t.store.observer.resizeObserver.isResizeObserving=e},li=function(t){H(this).onItemClickCallback(t)},ai=function(){C(this,ci(x(this).getBoundingClientRect()));const t=window.ResizeObserver?window.ResizeObserver:ei.a;this.store.observer.resizeObserver.resizeObserver=new t(ae(this).resizeObserverCallback),this.store.observer.resizeObserver.resizeObserver.observe(x(this))},di=function(){const t=v(this);this.store.observer.resizeObserver.isResizeObserving||(ni(this,!0),setTimeout(async()=>{const t=S(this);C(this,ci(x(this).getBoundingClientRect())),!it(this)&&it(this,t)&&($(this,-1),V(this,1.5),O(this,[])),await si(this,0,!1,!0),pe(this),ni(this,!1)},t.WINDOW_RESIZE_WAIT_TIME))},ci=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left}},ui=function(){this.store.observer.intersectionObserver.intersectionObserver=new IntersectionObserver(ae(this).intersectionObserverCallback,{root:x(this),threshold:1}),this.store.observer.intersectionObserver.intersectionObserver.observe(g(this)),this.store.observer.intersectionObserver.intersectionObserver.observe(w(this))},hi=function(t,e){if(1!==t.length||!t[0].isIntersecting)return;const i=t[0];if(it(this)){const t=L(this),e=G(this).length,s=N(this);let o,r=!1;if(i.target.classList.contains("limber-grid-view-io-top-helper")){const e=t[0];o=e-9>0?e-9:0,r=!0}else{const e=t[t.length-1];o=e-4>0?e-4:0}const n=o+14<e?o+14:e-1;if(n<0){const e={};for(const i of t)e[i]=!0;return Ie(this,e),fe(this,[]),void O(this,[])}const a=[],d={},c={},u={},h=[];let m=0;for(let t=o;t<=n;t++)a.push(t),d[t]=!0,s[t].renderIndex=m++;for(const e of t)c[e]=!0,d[e]||(u[e]=!0);for(const t of a)c[t]||h.push(t);O(this,a),r&&h.reverse(),Ie(this,u),fe(this,h,r);const p=T(this),y=l(this),I=f(this);r&&h.length&&p.$limberGridView.scrollTo({left:0,top:y.WIDTH/I.MOBILE_ASPECT_RATIO*h.length,behavior:"auto"})}else i.target.classList.contains("limber-grid-view-io-top-helper")?(V(this,k(this)+1.5),$(this,k(this)-1)):($(this,P(this)-1.5),V(this,P(this)+1)),mi(this)},mi=function(t){const e=l(t),i={x1:0,x2:e.WIDTH,y1:k(t)*e.HEIGHT-e.HEIGHT/2,y2:P(t)*e.HEIGHT+e.HEIGHT/2},s=It(t,i,!0),o={};for(const t of s)o[t]=!0;const r=L(t),n={};for(const t of r)n[t]=!0;const a={};for(const t of s)n[t]||(a[t]=!0);const d={};for(const t of r)o[t]||(d[t]=!0);O(t,s),Ie(t,d),fe(t,Object.keys(a)),g(t).style.transform=`translate(0px, ${k(t)*e.HEIGHT}px)`,w(t).style.transform=`translate(0px, ${P(t)*e.HEIGHT}px)`},pi=function(t){clearTimeout(this.store.variables.essentials.onScrollTimeout),function(t,e){t.store.variables.essentials.onScrollTimeout=e}(this,setTimeout(ae(this).onScrollCallback,1e3))},yi=function(t){const e=l(this),i=x(this);if(!it(this)){const t=i.scrollTop,r={x1:0,x2:e.WIDTH,y1:t,y2:t+e.HEIGHT},n={x1:0,x2:e.WIDTH,y1:k(this)*e.HEIGHT,y2:P(this)*e.HEIGHT};if(s=r,o=n,isNaN(s.x1)||isNaN(s.y1)||isNaN(s.x2)||isNaN(s.y2)||isNaN(o.x1)||isNaN(o.y1)||isNaN(o.x2)||isNaN(o.y2)||s.x1>o.x2||o.x1>s.x2||s.y1>o.y2||o.y1>s.y2){const t={...r};t.y1=r.y1-.75*e.HEIGHT;let i=st(t.y1/e.HEIGHT,1);i=i%1>.66?Math.ceil(i):i%1<.33?Math.trunc(i):Math.trunc(i)+.5;const s=i+2.5;$(this,i),V(this,s),mi(this)}}var s,o},Ii=(t,e)=>{t.x1-=e,t.y1-=e,t.x2+=e,t.y2+=e,t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t.mX1-=e,t.mY1-=e,t.mX2+=e,t.mY2+=e,t.mX-=e,t.mY-=e,t.mWidth+=2*e,t.mHeight+=2*e},fi=(t,e)=>{t.x1+=e,t.y1+=e,t.x2-=e,t.y2-=e,t.x+=e,t.y+=e,t.width-=2*e,t.height-=2*e,t.mX1+=e,t.mY1+=e,t.mX2-=e,t.mY2-=e,t.mX+=e,t.mY+=e,t.mWidth-=2*e,t.mHeight-=2*e},bi=(t,e)=>{const i=l(t);return!(e.x+e.width+i.MARGIN>i.WIDTH||e.height+2*i.MARGIN>i.HEIGHT||e.x<0||e.y<0)},vi=(t,e)=>{const i=l(t);return!(e.height<i.DEFINED_MIN_HEIGHT_AND_WIDTH||e.width<i.DEFINED_MIN_HEIGHT_AND_WIDTH)},Ai=t=>{if(!(t=>{const e=f(t),i=l(t);let s=e.MARGIN_CHANGE_VALUE;if(i.MARGIN<=0)throw"Margin is already 0!";i.MARGIN>0&&i.MARGIN<e.MARGIN_CHANGE_VALUE&&(s=i.MARGIN);const o=G(t);_(t,o);const r=R(t);let n=!0;const d=r.length;for(let e=0;e<d;e++){const i=r[e];if(Ii(i,s),!bi(t,i)){n=!1;break}}return!!n&&(a(t,"MARGIN",i.MARGIN-s),!0)})(t))throw"Margin decrease limit reached!";const e=R(t);D(t,e),pe(t,!1)},xi=t=>{if(!(t=>{const e=f(t),i=l(t),s=G(t);_(t,s);const o=R(t),r=o.length;let n=e.MARGIN_CHANGE_VALUE,d=Number.MAX_SAFE_INTEGER;for(let t=0;t<r;t++)o[t].width<d?d=o[t].width:o[t].height<d&&(d=o[t].height);if(d-e.DEFINED_MIN_HEIGHT_AND_WIDTH<2*i.MARGIN)n=(d-e.DEFINED_MIN_HEIGHT_AND_WIDTH)/2;else if(d-e.DEFINED_MIN_HEIGHT_AND_WIDTH<=0)throw"One or more items have reached their smallest possible height or width!";let c=!0;for(let e=0;e<r;e++){const i=o[e];if(fi(i,n),!vi(t,i)){c=!1;break}}return!!c&&(a(t,"MARGIN",i.MARGIN+n),!0)})(t))throw"Margin increase limit reached!";const e=R(t);D(t,e),pe(t,!1)};
/** @license LimberGridView

LimberGridView, a powerful JavaScript Library using Computational Geometry to render movable, dynamically resizable, and auto-arranging grids.

Copyright © 2018-2022 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
function gi(t){var e,i;if(this.initializeStore(),function(t,e){Object.assign(t.options,e)}(this,t),D(this,t.positionData),e=this,i=t.callbacks,e.store.variables.essentials.callbacks=i,me(this).push(G(this)),"string"==typeof t.el){const e=document.getElementById(t.el);if(!e)throw"No for element found for id "+t.el;A(this,e)}else{if(!(t.el instanceof Element))throw"Valid DOM Element or Id required";A(this,t.el)}oi.call(this,t),ri.call(this),ai.call(this),ui.call(this);T(this).$limberGridView.addEventListener("scroll",ae(this).onScroll),setTimeout(async function(){var e;await si(this,0,t.autoArrange,!1),pe(this,!0),null!=t&&null!==(e=t.callbacks)&&void 0!==e&&e.mountComplete&&t.callbacks.mountComplete()}.bind(this))}gi.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],renderedItems:[],ioTopHelperPos:-1,ioBottomHelperPos:1.5,gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:De.bind(this),onItemTouchStart:Ge.bind(this),onItemMouseMove:Me.bind(this),onItemTouchMove:Ne.bind(this),onItemMouseUp:He.bind(this),onItemTouchEnd:Ce.bind(this),onItemContextMenu:Se.bind(this),onItemTouchContextMenu:Oe.bind(this),onItemTouchCancel:Le.bind(this),onItemClick:li.bind(this),onDeskMouseDown:We.bind(this),onDeskTouchStart:ze.bind(this),onDeskMouseMove:Ue.bind(this),onDeskTouchMove:Fe.bind(this),onDeskMouseUp:je.bind(this),onDeskTouchEnd:Be.bind(this),onDeskTouchCancel:Ze.bind(this),onDeskTouchContextMenu:Ke.bind(this),onDeskContextMenu:Qe.bind(this),resizeObserverCallback:di.bind(this),intersectionObserverCallback:hi.bind(this),onScroll:pi.bind(this),onScrollCallback:yi.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}},status:{},trees:{rt:new s.RTreeIterative({M:4})},stacks:{stack:new o.ArrayStack({constructReverse:!0}),garbageStack:new o.ArrayStack({constructReverse:!0})},undoRedo:new n.a},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,SHOW_BOTTOM_LEFT_RESIZE_GUIDE:!1,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,AUTO_SCROLL_FOR_MOUSE:!1,MOUSE_DOWN_TIME:0,TOUCH_HOLD_TIME:300,TOUCH_HOLD_TOLERANCE:15,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,AUTO_SCROLL_DELAY:100,DESK_INTERACTION_MODE:"CUTSPACE",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250,MARGIN_CHANGE_VALUE:.5,CROSS_HAIR_WIDTH:500,CROSS_HAIR_HEIGHT:500,SHRINK_TO_FIT:10,EMIT_DEBUG_LOGS:!1},messages:{latchedMoveDemo1:"Move curser close to an adjacent item over this box to latch next to that item.",latchedMoveDemo2:"Move curser over this box to latch on to this item."}},observer:{resizeObserver:{resizeObserver:void 0,isResizeObserving:!1},intersectionObserver:{intersectionObserver:void 0}}}},gi.prototype.renderItem=function(t){ye(this,t)},gi.prototype.getGridData=function(){const t=l(this),e=G(this),i=e.length,s=new Array(i);for(let o=0;o<i;o++)s[o]={x:st(e[o].x/t.WIDTH_SCALE_FACTOR),y:st(e[o].y/t.WIDTH_SCALE_FACTOR),width:st(e[o].width/t.WIDTH_SCALE_FACTOR),height:st(e[o].height/t.WIDTH_SCALE_FACTOR)};return{gridData:{height:t.GRID_HEIGHT,width:t.GRID_WIDTH,margin:t.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:t.MIN_HEIGHT_AND_WIDTH},positionData:s,margin:st(t.MARGIN/t.WIDTH_SCALE_FACTOR)}},gi.prototype.setDeskInteractMode=function(t){ii[t]&&b(this,"DESK_INTERACTION_MODE",t)},gi.prototype.setLatchMovedItem=function(t){"boolean"==typeof t&&b(this,"LATCH_MOVED_ITEM",t)},gi.prototype.setShrinkToFit=function(t){"number"==typeof t&&t<=10&&b(this,"SHRINK_TO_FIT",t)},gi.prototype.addItem=function(t){if(!t){const e=l(this);t={width:e.DEFINED_MIN_HEIGHT_AND_WIDTH,height:e.DEFINED_MIN_HEIGHT_AND_WIDTH}}be(this,t)},gi.prototype.removeItem=function(t){Number.isInteger(parseInt(t))&&function(t,e){e=parseInt(e);const i=T(t),s=H(t),o=G(t),r=N(t),n=I(t),l=v(t),a=L(t);let d;d=it(t)?r.findIndex(t=>t.index===e):e;const c=a.findIndex(t=>t===d);if(c<0)return;ce.call(t);const u=o.length;if(it(t)){if(it(t)){const t={};for(let e=0;e<u;e++)t[r[e].index]=e;for(let s=e+1;s<u;s++){const e=t[s];i.$limberGridViewItems[e]&&i.$limberGridViewItems[e].setAttribute("data-index",s-1)}}}else for(let t=e+1;t<u;t++)i.$limberGridViewItems[t]&&i.$limberGridViewItems[t].setAttribute("data-index",t-1);const h=a.length;for(let t=0;t<h;t++)a[t]>d&&a[t]--;if(it(t))for(let t=0;t<u;t++)r[t].index>e&&r[t].index--;const m=i.$limberGridViewItems[d];i.$limberGridViewItems.splice(d,1),a.splice(c,1),it(t)&&r.splice(d,1),o.splice(e,1),me(t).reset(),me(t).push(o),s.removePlugin&&s.removePlugin(m),i.$limberGridView.removeChild(m),s.removeComplete&&s.removeComplete(e,m);for(let n=0;n<a.length;n++){let l,d=a[n],c=o[d].width,u=o[d].height;(it(t)&&(c=r[d].width,u=r[d].height,d=r[d].index),d<e)||(l=(it(t),s.renderContent(d,c,u)),ve(t,l,i.$limberGridViewItems[a[n]]))}it(t)&&(w(t).style.transform=`translate(0px, ${n.WIDTH/l.MOBILE_ASPECT_RATIO*a.length+n.MARGIN*(a.length-1)-50}px)`),de.call(t)}(this,t)},gi.prototype.setIsMobileCheck=function(t){this.options.isMobileCheck=t},gi.prototype.undo=function(){const t=me(this).undo();if(t){const e=yt(G(this),t);D(this,t),Lt(this);for(const t in e)this.renderItem(t)}},gi.prototype.redo=function(){const t=me(this).redo();if(t){const e=yt(G(this),t);D(this,t),Lt(this);for(const t in e)this.renderItem(t)}},gi.prototype.isUndoAvailable=function(){return me(this).isUndoAvailable()},gi.prototype.isRedoAvailable=function(){return me(this).isRedoAvailable()},gi.prototype.setAutoScrollDelay=function(t){"number"==typeof t&&b(this,"AUTO_SCROLL_DELAY",t)},gi.prototype.setAutoScrollForMouse=function(t){"boolean"==typeof t&&b(this,"AUTO_SCROLL_FOR_MOUSE",t)},gi.prototype.decreaseMargin=function(){Ai(this)},gi.prototype.increaseMargin=function(){xi(this)},gi.prototype.setMarginChangeValue=function(t){"number"==typeof t&&t>=0&&b(this,"MARGIN_CHANGE_VALUE",t)},gi.prototype.getMarginChangeValue=function(t){return e="MARGIN_CHANGE_VALUE",this.store.constants.publicConstants[e];var e},gi.prototype.getCurrentMargin=function(){return l(this).MARGIN},gi.prototype.destroy=function(t){ce.call(this);const e=this.store.variables.elements.$pseudoContainer;const i=function(t){return t.store.variables.elements.$limberGridViewContainer}(this);e.remove(),i.remove()};e.default=gi}])}));