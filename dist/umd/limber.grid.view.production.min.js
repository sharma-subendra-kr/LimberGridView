/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.
 *
 * Copyright Â© 2018-2020, Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("IntervalTreeJS"),require("ClosestBST")):"function"==typeof define&&define.amd?define(["IntervalTreeJS","ClosestBST"],e):"object"==typeof exports?exports.LimberGridView=e(require("IntervalTreeJS"),require("ClosestBST")):t.LimberGridView=e(t.IntervalTreeJS,t.ClosestBST)}(window,(function(t,e){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=4)}([function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(2),i(3);const r=function(t){return t.store.constants.privateConstants},o=function(t,e){t.store.constants.privateConstants.WIDTH=e},n=function(t,e){t.store.constants.privateConstants.HEIGHT=e},s=function(t,e){t.store.constants.privateConstants.WIDTH_SCALE_FACTOR=e},l=function(t,e){t.store.constants.privateConstants.MARGIN=e},d=function(t,e){t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=e};var a=r;const c=function(t,e,i){t.store.constants.publicConstants.hasOwnProperty(e)&&(t.store.constants.publicConstants[e]=i)};var u=function(t){return t.store.constants.publicConstants};const h=function(t,e){t.store.variables.elements.$el=e},m=function(t,e){t.store.variables.elements.$limberGridViewItems=e};var b=function(t){return t.store.variables.elements};const w=function(t,e){const i=b(t),r=u(t);i.$limberGridView.scrollHeight-e<=r.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=e+r.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")},y=function(t,e,i){const r=b(t),o=u(t),n=a(t),s=r.$limberGridView.scrollTop;let l=!1;return e>0&&(i-e<o.AUTO_SCROLL_POINT&&(r.$limberGridView.scrollTop=s+o.AUTO_SCROLL_DISTANCE,l=!0),e<n.HEIGHT/10&&0!==s&&(r.$limberGridView.scrollTop=s-o.AUTO_SCROLL_DISTANCE,l=!0)),l},I=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.positionData=r},g=function(t){return t.store.variables.essentials.positionData},p=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.modifiedPositionData=r},v=function(t){return t.store.variables.essentials.modifiedPositionData},f=function(t){return t.store.variables.essentials.callbacks};const T=function(t,e){const i=b(t),r=a(t),o=i.$limberGridView.getBoundingClientRect();if(e.clientX>=o.left&&e.clientX<=o.left+o.width&&e.clientY>=o.top&&e.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,n=i.$limberGridView.scrollLeft,s=e.clientX-o.left-r.PADDING_LEFT+n,l=e.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},x=function(t,e){const i=b(t),r=a(t),o=i.$limberGridView.getBoundingClientRect();let n;if(n="touchend"===e.type?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},n.clientX>=o.left&&n.clientX<=o.left+o.width&&n.clientY>=o.top&&n.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,e=i.$limberGridView.scrollLeft,s=n.clientX-o.left-r.PADDING_LEFT+e,l=n.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},D=function(t,e){const i=b(t).$limberGridViewItems[e.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(e.touches[0].clientX>=i.left&&e.touches[0].clientX<=i.left+i.width&&e.touches[0].clientY>=i.top&&e.touches[0].clientY<=i.top+i.height){return{x:e.touches[0].clientX-i.left,y:e.touches[0].clientY-i.top}}return!1},A=function(t){return t.options};var G=A;const C=(t,e)=>{const i=u(t),r=G(t),o=g(t),n=parseInt(e.currentTarget.attributes["data-index"].value);let s,l,d,a;if(1===e.which)s=Math.sqrt(Math.pow(0-e.offsetX,2)+Math.pow(0-e.offsetY,2)),d=e.offsetX,a=e.offsetY;else{if(0!==e.which)return!1;l=D(t,e),s=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),d=l.x,a=l.y}const c=e.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,h=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,m=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return r.itemMouseDownMoveCheck&&r.itemMouseDownMoveCheck(d,a,{...o[n]},n,e.target)||s<=i.MOVE_GUIDE_RADIUS&&!r.itemMouseDownMoveCheck?{type:"move",itemIndex:e.currentTarget.attributes["data-index"].value}:r.itemMouseDownResizeCheck&&r.itemMouseDownResizeCheck(d,a,{...o[n]},n,e.target)||d>=c&&d<=c+m&&a>=h&&a<=h+b&&!r.itemMouseDownResizeCheck?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:void 0},E=(t,e)=>{const i=b(t),r=g(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=r.width+"px",i.$limberGridViewPseudoItem.style.height=r.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${e.itemX}px,${e.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let t=0;t<o;t++)i.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},R=(t,e,i)=>{const r=b(t),o=g(t)[e.itemIndex];r.$limberGridViewHeightAdjustGuide.style.height="0px",r.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),r.$limberGridViewItems[e.itemIndex].classList.add("limber-grid-view-item-demo"),r.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),r.$pseudoContainerItem.style.width=o.width+"px",r.$pseudoContainerItem.style.height=o.height+"px",1===i.which?r.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(r.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`),r.$body.classList.add("limber-grid-view-body-tag-state-editing")},_=(t,e,i,r)=>{const o=b(t);"move"===r?(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),1===i.which?o.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`:0===i.which&&(o.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`)):"resize"===r&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},M=(t,e)=>{const i=P(t);try{return e.x>i.tl.x&&e.x<i.tr.x&&e.y>i.tl.y&&e.y<i.bl.y}catch(t){return null}},N=(t,e)=>{const i=P(t);try{return e.x>=i.tl.x&&e.x<=i.tr.x&&e.y>=i.tl.y&&e.y<=i.bl.y&&!M(t,e)}catch(t){return null}},$=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>=n.x||o.x>=r.x)&&!(i.y>=n.y||o.y>=r.y)}catch(t){return null}},V=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>n.x||o.x>r.x)&&(!(i.y>n.y||o.y>r.y)&&!1===$(t,e))}catch(t){return null}},H=(t,e,i)=>{if(!$(t,e))return null;const r=P(t),o=P(e),n={subRectT:{tl:r.tl,tr:r.tr,br:{x:r.tr.x,y:o.tr.y},bl:{x:r.tl.x,y:o.tl.y}},subRectR:{tl:{x:o.tr.x,y:r.tr.y},tr:r.tr,br:r.br,bl:{x:o.br.x,y:r.br.y}},subRectB:{tl:{x:r.bl.x,y:o.bl.y},tr:{x:r.br.x,y:o.br.y},br:r.br,bl:r.bl},subRectL:{tl:r.tl,tr:{x:o.tl.x,y:r.tl.y},br:{x:o.bl.x,y:r.bl.y},bl:r.bl}},s=Object.keys(n);for(let t=0;t<s.length;t++)S(n[s[t]])||delete n[s[t]];let l,d,a,c,u,h,m,b,w,y,I,g,p,v,f,T,x;return n.subRectT&&n.subRectR&&(w={tl:n.subRectT.tl,tr:n.subRectR.tl,br:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},a={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectT.br,bl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y}},g={tl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},tr:n.subRectT.br,br:n.subRectR.br,bl:n.subRectR.bl}),n.subRectR&&n.subRectB&&(I={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectB.tr,bl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y}},u={tl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectR.bl},v={tl:n.subRectB.tl,tr:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},br:n.subRectR.bl,bl:n.subRectB.bl}),n.subRectB&&n.subRectL&&(T={tl:n.subRectL.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},bl:n.subRectB.tl},m={tl:n.subRectB.tl,tr:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},br:n.subRectL.br,bl:n.subRectB.bl},p={tl:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectL.br}),n.subRectL&&n.subRectT&&(f={tl:n.subRectT.bl,tr:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},br:n.subRectL.br,bl:n.subRectL.bl},l={tl:n.subRectT.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},y={tl:n.subRectL.tr,tr:n.subRectT.tr,br:n.subRectT.br,bl:{x:n.subRectL.tr.x,y:n.subRectT.bl.y}}),d=L(w,l)||L(y,a)||w||y,c=O(I,a)||O(g,u)||I||g,h=L(p,u)||L(v,m)||p||v,b=O(f,m)||O(T,l)||f||T,x=i?[l,d,a,c,u,h,m,b]:[W(l),W(d),W(a),W(c),W(u),W(h),W(m),W(b)],x=x.filter(t=>t),0===x.length&&(x=Object.keys(n).map(t=>i?n[t]:W(n[t]))),x},L=(t,e)=>{if(!t&&!e)return null;if(!$(W(t),W(e)))return null;let i=null;return t.tl.x===e.tl.x||Math.abs(t.tl.x-e.tl.x)<Math.abs(t.tr.x-e.tr.x)?i={tl:e.tr,tr:t.tr,br:t.br,bl:e.br}:(t.tr===e.tr||Math.abs(e.tl.x-t.tl.x)>Math.abs(e.tr.x-t.tr.x))&&(i={tl:t.tl,tr:e.tl,br:e.bl,bl:t.bl}),i},O=(t,e)=>{if(!t&&!e)return null;if(!$(W(t),W(e)))return null;let i=null;return t.tl.y===e.tl.y||Math.abs(t.tl.y-e.tl.y)<Math.abs(t.bl.y-e.bl.y)?i={tl:e.bl,tr:e.br,br:t.br,bl:t.bl}:(t.bl.y===e.bl.y||Math.abs(e.tl.y-t.tl.y)>Math.abs(e.bl.y-t.bl.y))&&(i={tl:t.tl,tr:t.tr,br:e.tr,bl:e.tl}),i},S=function(t){try{let e,i,r,o;return e=t.tr.x-t.tl.x,i=t.br.y-t.tr.y,r=t.br.x-t.bl.x,o=t.bl.y-t.tl.y,!(e<=0||i<=0||r<=0||o<=0)}catch(t){return null}},P=function(t){return{tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},br:{x:t.x+t.width,y:t.y+t.height},bl:{x:t.x,y:t.y+t.height}}},W=function(t){return S(t)?{x:t.tl.x,y:t.tl.y,width:t.tr.x-t.tl.x,height:t.bl.y-t.tl.y}:null},k=(t,e)=>{const i=P(t),r=P(e);return(Math.abs(i.tl.x-r.tr.x)<1||Math.abs(r.tl.x-i.tr.x)<1||Math.abs(i.tl.y-r.bl.y)<1||Math.abs(r.tl.y-i.bl.y)<1)&&(i.tl.y>=r.tl.y&&i.tl.y<r.bl.y||r.tl.y>=i.tl.y&&r.tl.y<i.bl.y||i.tl.x>=r.tl.x&&i.tl.x<r.tr.x||r.tl.x>=i.tl.x&&r.tl.x<i.tr.x||i.bl.y<=r.bl.y&&i.bl.y>r.tl.y||r.bl.y<=i.bl.y&&r.bl.y>i.tl.y||i.tr.x<=r.tr.x&&i.tr.x>r.tl.x||r.tr.x<=i.tr.x&&r.tr.x>i.tl.x)},z=(t,e,i)=>{const r=P(t),o=P(e);let n;const s=(t,e)=>{let i;if(t.tl.x>=e.bl.x&&t.tl.x<e.br.x&&t.tl.y>=e.bl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:e.tl.y},tr:{x:r,y:e.tl.y},br:{x:r,y:t.bl.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.tl.y>=e.tr.y&&t.tl.y<e.br.y&&t.tl.x>=e.tr.x){let r=t.br.y<e.br.y?t.br.y:e.br.y;i={tl:{x:e.tl.x,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.br.x,y:r},bl:{x:e.bl.x,y:r}}}if(t.tr.x<=e.br.x&&t.tr.x>e.bl.x&&t.tr.y>=e.bl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:e.tl.y},tr:{x:t.tr.x,y:e.tr.y},br:{x:t.br.x,y:t.br.y},bl:{x:r,y:t.bl.y}}}if(t.tr.y>=e.tl.y&&t.tr.y<e.bl.y&&t.tr.x<=e.tl.x){let r=t.bl.y<e.bl.y?t.bl.y:e.bl.y;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:e.tr.x,y:t.tl.y},br:{x:e.br.x,y:r},bl:{x:t.bl.x,y:r}}}if(t.br.x<=e.tr.x&&t.br.x>e.tl.x&&t.br.y<=e.tl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.tr.x,y:e.br.y},bl:{x:r,y:e.bl.y}}}if(t.br.y<=e.bl.y&&t.br.y>e.tl.y&&t.br.x<=e.tl.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:t.tl.x,y:r},tr:{x:e.tr.x,y:r},br:{x:e.br.x,y:t.br.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.bl.x>=e.tl.x&&t.bl.x<e.tr.x&&t.bl.y<=e.tl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:r,y:t.tr.y},br:{x:r,y:e.br.y},bl:{x:t.bl.x,y:e.bl.y}}}if(t.bl.y<=e.br.y&&t.bl.y>e.tr.y&&t.bl.x>=e.tr.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:e.tl.x,y:r},tr:{x:t.tr.x,y:r},br:{x:t.br.x,y:t.br.y},bl:{x:e.bl.x,y:t.bl.y}}}return i};return n=s(r,o),n||(n=s(o,r)),n&&(n=[n]),n||B(t,e)||B(e,t)||(n=(()=>{const i=H(t,e,!0),r=new Array((null==i?void 0:i.length)||0);let n,l=0;const d=r.length;for(let e=0;e<d;e++)n=s(i[e],o),n&&!B(t,W(n))&&(r[l++]=n);const a=new Array(l);for(let t=0;t<l;t++)a[t]=r[t];return a.length?a:null})()),!!n&&(i?n:n.map(t=>W(t)))},B=(t,e)=>{const i=P(t),r=P(e);return i.tl.x<=r.tl.x&&i.tr.x>=r.tr.x&&i.tl.y<=r.tl.y&&i.bl.y>=r.bl.y},U=(t,e)=>{var i,r,o,n;return(null==t||null===(i=t.tl)||void 0===i?void 0:i.x)&&(null==t||null===(r=t.tr)||void 0===r?void 0:r.x)&&(null==e||null===(o=e.tl)||void 0===o?void 0:o.x)&&(null==t||null===(n=t.tr)||void 0===n?void 0:n.x)?!(t.tl.x>=e.tr.x||e.tl.x>=t.tr.x):null},j=(t,e)=>t.tl.x===e.tl.x&&t.tl.y===e.tl.y&&t.tr.x===e.tr.x&&t.tr.y===e.tr.y&&t.br.x===e.br.x&&t.br.y===e.br.y&&t.bl.x===e.bl.x&&t.bl.y===e.bl.y,Y=(t,e,i)=>{const r=g(t),o=v(t),n=a(t),s=r.length,l=new Array(s);let d=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,($(u,c)||V(u,c))&&t!==i&&(l[d++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(d+1);for(let t=0;t<d;t++)h[t]=l[t];return h[d]=i,h},X=(t,e,i)=>{const r=g(t),o=v(t),n=a(t),s=r.length,l=new Array(s);let d=0;const c={...e};c.x-=n.MARGIN,c.y-=n.MARGIN,c.width+=n.MARGIN,c.height+=n.MARGIN;const u={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)u.x=r[t].x-n.MARGIN,u.y=r[t].y-n.MARGIN,u.width=r[t].width+n.MARGIN,u.height=r[t].height+n.MARGIN,($(u,c)||V(u,c))&&t!==i&&(l[d++]=t,o[t].x=void 0,o[t].y=void 0);const h=new Array(d+1);for(let t=0;t<d;t++)h[t]=l[t];return h[d]=i,h},F=(t,e,i,r)=>{const o=g(t),n=a(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"Width or Height is not a number.";if(o[e].x+i+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";if(i<n.DEFINED_MIN_HEIGHT_AND_WIDTH||r<n.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${n.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;return!0},Z=(t,e,i,r)=>{const o=g(t),n=a(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"toX or toY is not a number.";if(i<n.MARGIN||r<n.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[e].width+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";return!0},q=t=>{const e=g(t),i=b(t),r=e.length;for(var o=0;o<r;o++)i.$limberGridViewItems[o].style.transform="translate("+e[o].x+"px, "+e[o].y+"px)",i.$limberGridViewItems[o].classList.remove("limberGridViewItemDemo")},K=(t,e,i)=>{const r=g(t),o=a(t),n=r.length,s={x:0,y:0,height:0,width:0},l={x:e,y:i};let d;for(let t=0;t<n;t++)if(s.x=r[t].x-o.MARGIN,s.y=r[t].y-o.MARGIN,s.width=r[t].width+2*o.MARGIN,s.height=r[t].height+2*o.MARGIN,M(s,l)||N(s,l)){d=t;break}return void 0!==d&&(e=r[d].x,i=r[d].y),{toX:e,toY:i,overlappedItemIndex:d}};var Q=i(0),J=i(1);const tt=function(t){const e=t.options.isMobileCheck;return e?e():window.matchMedia("only screen and (max-width: 980px) and (min-width : 1px) and (orientation: portrait)").matches||window.matchMedia("only screen and (max-width: 979px) and (min-width : 1px) and (orientation: landscape)").matches},et=(t,e=6)=>Math.trunc(t*Math.pow(10,e))/Math.pow(10,e),it=t=>{const e=t.length,i=new Array(e);let r=0;for(let o=0;o<e;o++)null!==t[o]&&void 0!==t[o]&&(i[r++]=t[o]);const o=new Array(r);for(let t=0;t<r;t++)o[t]=i[t];return o},rt=(t=22)=>{const e=new Array(t);for(let i=0;i<t;i++)e[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return e.join("")},ot=(t,e,i,r,o,n)=>{const s=g(t),l=a(t);let d=Number.MAX_SAFE_INTEGER,c=0,u=Number.MAX_SAFE_INTEGER,h=0;const m=e.length;for(let t=0;t<m;t++)s[e[t]].y<d&&(d=s[e[t]].y),s[e[t]].y+s[e[t]].height>c&&(c=s[e[t]].y+s[e[t]].height),s[e[t]].x<u&&(u=s[e[t]].x),s[e[t]].x+s[e[t]].width>h&&(h=s[e[t]].x+s[e[t]].width);return r>c&&(c=r),i>h&&(h=i),o<d&&(d=o),n>c&&(c=n),{minX:u-l.MARGIN,maxX:h+l.MARGIN,minY:d-l.MARGIN,maxY:c+l.MARGIN}},nt=(t,e,i,r)=>{let o,n;e.tl.y>0&&(o={tl:{x:i,y:0},tr:{x:r,y:0},br:{x:r,y:e.tr.y},bl:{x:i,y:e.tl.y}});const s=((t,e,i)=>{const r=g(t),o=v(t),n=a(t);let s,l,d=0;const c=r.length;for(let t=0;t<c;t++)s=dt(n.MARGIN,r[t]),l=dt(n.MARGIN,o[t]),r[t].y+r[t].height>d&&s.x<i&&s.x+s.width>e&&(d=r[t].y+r[t].height),o[t].y+o[t].height>d&&l.x<i&&l.x+l.width>e&&(d=o[t].y+o[t].height);return d})(t,i,r);return s>e.bl.y&&(n={tl:{x:i,y:e.bl.y},tr:{x:r,y:e.bl.y},br:{x:r,y:s},bl:{x:i,y:s}}),{topWorkSpaceCo:o,bottomWorkSpaceCo:n}},st=(t,e,i=!1)=>{const r=v(t),o=a(t),n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)$(e,dt(o.MARGIN,r[t]))&&(s[l++]=i?t:r[t]);const d=new Array(l);for(let t=0;t<l;t++)d[t]=s[t];return d},lt=(t,e,i,r,o,n,s,l=!1)=>{const d=v(t),c=a(t),u={tl:{...(null==i?void 0:i.tl)?i.tl:e.tl},tr:{...(null==i?void 0:i.tr)?i.tr:e.tr},br:{...e.br},bl:{...e.bl}},h=W(u),m=W(r),b=W(o);let w=0;const y=s.length,I=new Array(y);for(let t=0;t<y;t++)n[s[t]]||(I[w++]=s[t]);const g=it(I),p=d.length,f=new Array(p);let T=0;const x=new Array(p);let D=0;for(let t=0;t<p;t++){const e=dt(c.MARGIN,d[t]);$(b,e)&&(n[t]||$(h,e)||$(m,e)&&!B(m,e)?x[D++]=l?t:d[t]:$(m,e)&&B(m,e)&&!n[t]&&(f[T++]=t,d[t].x=void 0,d[t].y=void 0))}return{updatedItemsToArrange:it([...g,...f]),itemsInWorkSpace:it(x)}},dt=(t,e)=>{const i={...e};return i.x-=t,i.y-=t,i.width+=2*t,i.height+=2*t,i},at=function(t){return(e,i,r)=>e.d.rect.width>=t.width&&e.d.rect.height>=t.height},ct=function(t){return e=>e.v>t},ut=function(){return!0},ht=(t,e)=>(t.width+t.height)/e,mt=(t,e)=>{const i=t.length;for(let r=0;r<i;r++)t[r].d.score=ht(t[r].d.rect,e);return t.sort((t,e)=>t.d.score-e.d.score),t[0]},bt=(t,e,i)=>{const r=v(t),o=e.length;for(let t=0;t<o;t++)r[e[t]].y+=i},wt=function(t,e,i){const r=g(t),o=b(t),n=r.length;for(let t=0;t<n;t++)r[t].y>=e&&(r[t].y-=i,o.$limberGridViewItems[t].style.transform="translate("+r[t].x+"px, "+r[t].y+"px)")},yt=function(t,e,i,r,o){const n=a(t),s=u(t),l=g(t);var d={x:e-n.MARGIN,y:i-n.MARGIN,width:r+2*s.MARGIN,height:o+2*s.MARGIN};if(e<0||i<0)return!1;if("number"!=typeof r||"number"!=typeof o)return!1;if(e+r>n.WIDTH)return!1;if(r<50||o<50)return!1;let c;const h=l.length;for(let t=0;t<h;t++)if(c=$(dt(n.MARGIN,l[t]),d)||V(dt(n.MARGIN,l[t]),d),c)return!1;return!0},It=function(t,e,i,r,o){const n=a(t),s=g(t),l={x:0,y:i,width:n.WIDTH,height:o};if("number"!=typeof r||"number"!=typeof o)return!1;let d,c=i+o,u=i,h=!1;const m=s.length;for(let t=0;t<m;t++){if(B(l,dt(n.MARGIN,s[t])))return!1;if(d=$(l,dt(n.MARGIN,s[t]))||V(l,dt(n.MARGIN,s[t])),d){h=!0;const e={x:s[t].x,y:s[t].y-n.MARGIN},i={x:s[t].x,y:s[t].y+s[t].height+n.MARGIN};s[t].y-n.MARGIN<c&&(M(l,e)||N(l,e))&&(c=s[t].y-n.MARGIN),s[t].y+s[t].height+n.MARGIN>u&&(M(l,i)||N(l,i))&&(u=s[t].y+s[t].height+n.MARGIN)}}return h?c-u>0&&{y:u,shiftHeight:c-u}:{y:i,shiftHeight:o}},gt=t=>{let e,i;const r=t.length;for(let o=0;o<r;o++)i=Math.floor(Math.random()*(o+1)),e=t[o],t[o]=t[i],t[i]=e;return t},pt=function(){this.length=100,this.stack=new Array(this.length),this.ptr=-1};pt.prototype.constructor=pt,pt.prototype.push=function(t){return null!=t&&(this.ptr<this.length-1||this.resize(),this.stack[++this.ptr]=t,!0)},pt.prototype.pop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.ptr--,t}},pt.prototype.wipePop=function(){if(this.ptr>=0){const t=this.stack[this.ptr];return this.stack[this.ptr]=void 0,this.ptr--,t}},pt.prototype.resize=function(){const t=this.length,e=this.stack;this.length+=100,this.stack=new Array(this.length);for(let i=0;i<t;i++)this.stack[i]=e[i]},pt.prototype.getTop=function(){return this.ptr>=0?this.stack[this.ptr]:null},pt.prototype.isEmpty=function(){return this.ptr<0},pt.prototype.getData=function(){const t=new Array(this.ptr+1);for(let e=0;e<=this.ptr;e++)t[e]=this.stack[e];return t},pt.prototype.getAllData=function(){const t=new Array(this.length);for(let e=0;e<this.length;e++)t[e]=this.stack[e];return t},pt.prototype.getSize=function(){return this.ptr+1},pt.prototype.empty=function(){this.ptr=-1},pt.prototype.wipe=function(){this.length=100,this.stack=new Array(this.length),this.ptr=-1};var vt=pt;const ft=async(t,e,i,r,o=!1)=>{const n=a(t),s=v(t),l=performance.now(),d={idCount:0},{minY:c,maxY:u}=ot(t,e,void 0,void 0,i,r),h=new Array(e.length-1),m=e.length-1;for(let t=0;t<m;t++)h[t]=e[t];const b={tl:{x:0,y:c},tr:{x:n.WIDTH,y:c},br:{x:n.WIDTH,y:u},bl:{x:0,y:u}},w={tl:{...b.tl},tr:{...b.tr},br:{...b.br},bl:{...b.bl}},{topWorkSpaceCo:y,bottomWorkSpaceCo:I}=nt(t,b,0,n.WIDTH),g=Dt(t,y,I);g.integrateTop&&(w.tl={...y.tl},w.tr={...y.tr}),g.integrateBottom&&(w.br={...I.br},w.bl={...I.bl});let p=st(t,W(I),!0);const f=((t,e,i=!1)=>{const r=v(t),o=a(t);if(!e)return[];const n=r.length,s=new Array(n);let l=0;for(let t=0;t<n;t++)e.bl.y<=dt(o.MARGIN,r[t]).y&&(s[l++]=i?t:r[t]);const d=new Array(l);for(let t=0;t<l;t++)d[t]=s[t];return d})(t,I,!0);let T=W(w),x=st(t,T);const D=(n.DEFINED_MIN_HEIGHT_AND_WIDTH-2*n.MARGIN)/2;let A={},G=0,C=0,E=0;for(;G!==m;){x.sort((t,e)=>t.x-e.x);const{it:e,idCount:i}=Ct(t,T,w,x,d.idCount);d.idCount=i;const r=e.getSortedData();gt(r),Et(e);const{mergedRects:o,idCount:n}=await Rt(r,d.idCount);d.idCount=n;const{overlappedRects:s}=Nt(o),{arranged:l,itemsInBottomWorkSpace:a,idCount:c}=await $t(t,h.filter(t=>!A[t]),s,W(y),W(I),w,d.idCount);d.idCount=c,p=[...p,...Object.keys(a)],A={...A,...l};const u=Object.values(l);if(x=[...x,...u],G+=u.length,G!==m&&(C++,console.log("workSpaceResizeCount",C),b.br.y+=D,b.bl.y+=D,I&&(I.tl.y+=D,I.tr.y+=D,I.br.y+=D,I.bl.y+=D),w.br.y+=D,w.bl.y+=D,T=W(w),bt(t,p,D)),E++,E>50)throw"Arrange time out"}if(C>0){bt(t,f,D*C);let e=p.length;for(let t=0;t<e;t++)A[p[t]]=s[p[t]];e=f.length;for(let t=0;t<e;t++)A[f[t]]=s[f[t]]}const R=performance.now();return console.log("p1: ",l),console.log("p2: ",R),console.log("arrange total: ",R-l),A},Tt=async(t,e,i,r,o=!1)=>{const n=a(t),s=performance.now(),l={idCount:0},{minX:d,maxX:c,minY:u,maxY:h}=ot(t,e,r,i,void 0,void 0);let m=new Array(e.length-1),b=e.length-1;for(let t=0;t<b;t++)m[t]=e[t];const w={tl:{x:0,y:u},tr:{x:n.WIDTH,y:u},br:{x:n.WIDTH,y:h},bl:{x:0,y:h}},y={tl:{...w.tl},tr:{...w.tr},br:{...w.br},bl:{...w.bl}},{topWorkSpaceCo:I,bottomWorkSpaceCo:g}=nt(t,w,0,n.WIDTH),p=Dt(t,I,g);p.integrateTop&&(y.tl={...I.tl},y.tr={...I.tr}),p.integrateBottom&&(y.br={...g.br},y.bl={...g.bl});const v={tl:{x:d,y:u},tr:{x:c,y:u},br:{x:c,y:h},bl:{x:d,y:h}},f={tl:{...v.tl},tr:{...v.tr},br:{...v.br},bl:{...v.bl}},{topWorkSpaceCo:T,bottomWorkSpaceCo:x}=nt(t,v,d-n.MARGIN,c+n.MARGIN);Dt(t,T).integrateTop&&(f.tl={...T.tl},f.tr={...T.tr}),x&&(f.br={...x.br},f.bl={...x.bl});const D=W(y);let A=st(t,D),G=W(f);const C=2*n.DEFINED_MIN_HEIGHT_AND_WIDTH;let E=0,R={},_=0,M=0;for(;_!==b;){let e;if(0===E){A.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Ct(t,D,y,A,l.idCount);e=i,l.idCount=r}else{if(1===E){const{itemsInWorkSpace:e,updatedItemsToArrange:i}=lt(t,v,T,x,f,R,m);A=e,m=i,b=i.length+_,E++;continue}if(E>=2){A.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Ct(t,G,f,A,l.idCount);e=i,l.idCount=r}}const i=e.getSortedData();gt(i),Et(e);const{mergedRects:r,idCount:o}=await Rt(i,l.idCount);l.idCount=o;const{overlappedRects:n}=Nt(r),{arranged:s,idCount:d}=await $t(t,m.filter(t=>!R[t]),n,W(I),W(g),0===E?y:f,l.idCount);l.idCount=d,R={...R,...s};const a=Object.values(s);if(A=[...A,...a],_+=a.length,_!==b&&E>=2&&(M++,console.log("workSpaceResizeCount",M),f.br.y+=C,f.bl.y+=C,G=W(f)),E++,E>50)throw"Arrange time out"}const N=performance.now();return console.log("p1: ",s),console.log("p2: ",N),console.log("arrange total: ",N-s),R},xt=async(t,e,i)=>{const r=a(t),o=performance.now(),n={idCount:0},s=r.WIDTH,l=i,d=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,c=e.length,u={tl:{x:0,y:l},tr:{x:s,y:l},br:{x:s,y:d},bl:{x:0,y:d}},h={tl:{...u.tl},tr:{...u.tr},br:{...u.br},bl:{...u.bl}},{topWorkSpaceCo:m}=nt(t,u,0,r.WIDTH);Dt(t,m).integrateTop&&(h.tl={...m.tl},h.tr={...m.tr});let b=W(h),w=st(t,b);const y=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let I=0,g={},p=0,v=0;for(;p!==c;){w.sort((t,e)=>t.x-e.x);const{it:i,idCount:r}=Ct(t,b,h,w,n.idCount);n.idCount=r;const o=i.getSortedData();gt(o),Et(i);const{mergedRects:s,idCount:l}=await Rt(o,n.idCount);n.idCount=l;const{overlappedRects:d}=Nt(s),{arranged:a,idCount:f}=await $t(t,e.filter(t=>!g[t]),d,W(m),void 0,h,n.idCount);n.idCount=f,g={...g,...a};const T=Object.values(a);if(w=[...w,...T],p+=T.length,p!==c&&(v++,console.log("workSpaceResizeCount",v),u.br.y+=y,u.bl.y+=y,h.br.y+=y,h.bl.y+=y,b=W(h)),I++,I++,I>1e4)throw"Arrange time out"}const f=performance.now();return console.log("p1: ",o),console.log("p2: ",f),console.log("arrange total: ",f-o),g},Dt=(t,e,i)=>{let r,o;const n={integrateTop:!1,integrateBottom:!1};if(e){r=st(t,W(e));const i=At(e,r);i<e.bl.y&&(e.tl.y=i,e.tr.y=i,n.integrateTop=!0)}if(i){o=st(t,W(i));const e=Gt(i,o);e>i.tl.y&&(i.bl.y=e,i.br.y=e,n.integrateBottom=!0)}return n},At=(t,e)=>{const i=e.length,r=new Q.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.bl.y,l=!1;for(let d=0;d<i;d++){o=r.findAll({low:e[d].y+e[d].height,high:t.bl.y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(U(P(e[d]),P(o[t].d.rect))&&!j(P(e[d]),P(o[t].d.rect))){l=!0;break}!l&&e[d].y+e[d].height<s&&(s=e[d].y+e[d].height)}return s},Gt=(t,e)=>{const i=e.length,r=new Q.IntervalTreesIterative;for(let t=0;t<i;t++)r.insert({low:e[t].y,high:e[t].y+e[t].height,d:{rect:e[t]}});let o,n,s=t.tl.y,l=!1;for(let d=0;d<i;d++){o=r.findAll({low:t.tl.y,high:e[d].y}),n=o.length,l=!1;for(let t=0;t<n;t++)if(U(P(e[d]),P(o[t].d.rect))&&!j(P(e[d]),P(o[t].d.rect))){l=!0;break}!l&&e[d].y>s&&(s=e[d].y)}return s},Ct=(t,e,i,r,o)=>{const n=a(t);let s=o;const l=new Q.IntervalTreesIterative;let d;l.insert({low:i.tl.y,high:i.bl.y,d:{id:s++,rect:e,a:{},o:{},ref:null}});let c,u,h={low:0,high:0,d:null},m=0,b=0;const w=r.length;for(let t=0;t<w;t++){d=P(r[t]),h={low:d.tl.y,high:d.bl.y},c=l.findAll(h),m=c.length;for(let e=0;e<m;e++)if($(c[e].d.rect,dt(n.MARGIN,r[t]))){u=H(c[e].d.rect,dt(n.MARGIN,r[t]),!0),b=u.length;for(let t=0;t<b;t++)l.insert({low:u[t].tl.y,high:u[t].bl.y,d:{id:s++,rect:W(u[t]),a:{},o:{},ref:null}});l.remove(c[e].interval,c[e].d)}}return{it:l,idCount:s}},Et=t=>{const e=t.getSortedData(),i=e.length;let r,o;for(let n=0;n<i;n++){r=t.findAll(e[n].interval),o=r.length;for(let t=0;t<o;t++)k(e[n].d.rect,r[t].d.rect)&&(e[n].d.a[r[t].d.id]=r[t])}},Rt=async(t,e)=>{const i=new vt,r=new Q.IntervalTreesIterative,o=(new vt,new Q.IntervalTreesIterative);let n,s,l,d,a,c,u,h,m,b=!1,w=e;const y=t.length;for(let e=0;e<y;e++)if(null===t[e].d.ref)for(i.push(t[e]);!i.isEmpty();){l=i.pop(),d=Object.keys(l.d.a),a=d.length,b=!1;for(let t=0;t<a;t++){var I;if(l.d.a[d[t]]){for(s=l.d.a[d[t]];null===(g=s)||void 0===g||null===(p=g.d)||void 0===p?void 0:p.ref;){var g,p;s=s.d.ref}h=z(l.d.rect,s.d.rect),m=(null===(I=h)||void 0===I?void 0:I.length)||0,1===m&&(u=h[0],u&&(n={...l.d.a,...s.d.a},delete n[l.d.id],delete n[s.d.id],c={d:{id:w++,rect:u,a:n,o:{},ref:null}},Mt(c),_t(r,c)||i.push(c),B(u,s.d.rect)&&(s.d.ref=c),B(u,l.d.rect)&&(l.d.ref=c,b=!0)))}}b||_t(o,l)}return{mergedRects:o.getSortedData(),idCount:w}},_t=(t,e)=>{const i=t.findAll({low:e.d.rect.y,high:e.d.rect.y+e.d.rect.height});let r=!1;const o=(null==i?void 0:i.length)||0;for(let t=0;t<o;t++)(j(P(e.d.rect),P(i[t].d.rect))||B(i[t].d.rect,e.d.rect))&&(r=!0);return r||t.insert({low:e.d.rect.y,high:e.d.rect.y+e.d.rect.height,d:e.d}),r},Mt=(t,e)=>{const i=t.d.rect,r=t.d.a;let o;const n=Object.keys(r),s=n.length;for(let t=0;t<s;t++)o=r[n[t]],k(i,o.d.rect)||delete r[n[t]]},Nt=t=>{const e=new Q.IntervalTreesIterative,i=t.length;for(let r=0;r<i;r++)t[r].low=t[r].d.rect.y,t[r].high=t[r].d.rect.y+t[r].d.rect.height,e.insert(t[r]);const r={},o=e.getSortedData();let n,s;for(let t=0;t<i;t++){n=e.findAll(o[t].interval),s=n.length;for(let e=0;e<s;e++)if(o[t].d.rect&&n[e].d.rect&&B(o[t].d.rect,n[e].d.rect)&&o[t].d.id!==n[e].d.id){r[n[e].d.id]=n[e],n[e].d._rect=n[e].d.rect,n[e].d.rect=null;const t=Object.values(n[e].d.o),i=t.length;for(let r=0;r<i;r++){delete t[r].d.o[n[e].d.id]}n[e].d.o={}}else $(o[t].d.rect,n[e].d.rect)&&(o[t].d.o[n[e].d.id]=n[e],n[e].d.o[o[t].d.id]=o[t])}const l=new Array(i);let d=0;for(let t=0;t<i;t++)o[t].d.rect&&(l[d++]=o[t]);const a=new Array(d);for(let t=0;t<d;t++)a[t]=l[t];return{overlappedRects:a,completeOverlapped:Object.values(r)}},$t=async(t,e,i,r,o,n,s)=>{const l=v(t),d=a(t);let c=s;const u={},h={};gt(i);const m=new J.ClosestBST,b=i.length;for(let t=0;t<b;t++)m.insert({v:i[t].d.rect.width,d:i[t].d});const w=e.length,y=new vt,I=new vt,g=((t,e)=>{const i=v(t),r=e.length;let o,n,s=0,l=0,d=0;for(let t=0;t<r;t++)o=i[e[t]],o.width>l&&(l=o.width),o.height>s&&(s=o.height);d=l+s;const a=new Array(r);for(let t=0;t<r;t++)o=i[e[t]],n=ht(o,d),a[t]={score:n,d:e[t]};return a.sort((t,e)=>t.score-e.score),a})(t,e);for(let t=0;t<w;t++)y.push(g[t]);let p,f,T;for(;!y.isEmpty();){if(p=y.pop(),f=l[p.d],T=m.findUsingComparator(at(dt(d.MARGIN,f)),ct(f.width),ut),!T.length){I.push(p);continue}const e=mt(T,f.width+f.height);f.x=e.d.rect.x+d.MARGIN,f.y=e.d.rect.y+d.MARGIN,u[p.d]=f,o&&B(o,e.d.rect)&&(h[p.d]=p.d);const{result:i,idCount:r}=await Vt(t,f,e,m,c);c=r;const n=i.length;for(let t=0;t<n;t++)i[t].v=i[t].d.rect.width,m.insert(i[t])}return{arranged:u,itemsInBottomWorkSpace:h,idCount:c}},Vt=async(t,e,i,r,o)=>{var n;const s=a(t);let l,d,c,u,h,m,b,w=o;const y={},I=new vt,g={x:e.x-s.MARGIN,y:e.y-s.MARGIN,width:e.width+2*s.MARGIN,height:e.height+2*s.MARGIN};r.remove(i.v,i.d),l=H(i.d.rect,g),d=(null===(n=l)||void 0===n?void 0:n.length)||0;for(let t=0;t<d;t++)c={v:l[t].width,d:{id:w++,rect:l[t],a:{},o:{},ref:null}},I.push(c);let p=!1;const v={...i.d.o},f=Object.values(i.d.o),T=f.length;for(let t=0;t<T;t++){var x;if(u=f[t],delete u.d.o[i.d.id],r.remove(u.d.rect.width,u.d),p=!1,$(u.d.rect,g)){if(p=!0,l=H(u.d.rect,g),d=(null===(x=l)||void 0===x?void 0:x.length)||0,d)for(let t=0;t<d;t++)c={v:l[t].width,d:{id:w++,rect:l[t],a:{},o:{},ref:null}},I.push(c)}else I.push(u),u.d.a={};m=Object.keys(u.d.o),b=m.length;for(let t=0;t<b;t++)h=u.d.o[m[t]],v[m[t]]||(y[m[t]]=h),p&&delete h.d.o[u.d.id]}const D=I.getData(),A=D.length,G=new Q.IntervalTreesIterative;for(let t=0;t<A;t++)G.insert({low:D[t].d.rect.y,high:D[t].d.rect.y+D[t].d.rect.height,d:D[t].d});Et(G);const{mergedRects:C,idCount:E}=await Rt(I.getData(),w),{overlappedRects:R,completeOverlapped:_}=Nt([...C,...Object.values(y)]),M=_.length;for(let t=0;t<M;t++)r.remove(_[t].d._rect.width,_[t].d);const N=R.length,V=new Array(N);let L=0;for(let t=0;t<N;t++)y[R[t].d.id]||(V[L++]=R[t]);return{result:it(V),idCount:E}},Ht=async function(t,e,i){const r=g(this),o=b(this),n=f(this);t=parseInt(t),F(this,t,e,i),q(this),p(this,r);const s=v(this);s[t].width=e,s[t].height=i;const l={x:r[t].x,y:r[t].y,width:e,height:i},d=Y(this,l,t),a=await Tt(this,d,l.y+l.height,l.x+l.width);I(this,s),o.$limberGridViewItems[t].style.width=s[t].width+"px",o.$limberGridViewItems[t].style.height=s[t].height+"px";const c=Object.keys(a),u=c.length;for(let t=0;t<u;t++){const e=c[t],i=a[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.resizeComplete(t,e,i,c)},Lt=async function(t,e,i){const r=g(this),o=b(this);t=parseInt(t),F(this,t,e,i),q(this),p(this,r);const n=v(this);n[t].width=e,n[t].height=i;const s={x:r[t].x,y:r[t].y,width:e,height:i},l=Y(this,s,t),d=await Tt(this,l,s.y+s.height,s.x+s.width,!0),a=Object.keys(d),c=a.length;for(let t=0;t<c;t++){const e=a[t],i=d[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},Ot=async function(t,e,i){const r=g(this),o=b(this),n=f(this),s=u(this);if(t=parseInt(t),s.LATCH_MOVED_ITEM){const t=K(this,e,i);e=t.toX,i=t.toY}Z(this,t,e,i),q(this),p(this,r);const l=v(this);l[t].x=e,l[t].y=i;const d={x:e,y:i,width:r[t].width,height:r[t].height},a=X(this,d,t),c=await ft(this,a,i,i+r[t].height);I(this,l),o.$limberGridViewItems[t].classList.remove("limberGridViewItemDemo"),o.$limberGridViewItems[t].style.transform=`translate(${l[t].x}px, ${l[t].y}px)`,s.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[t].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[t].style.transition=""},s.ANIMATE_TIME));const h=Object.keys(c),m=h.length;for(let t=0;t<m;t++){const e=h[t],i=c[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.moveComplete(t,e,i,h)},St=async function(t,e,i){const r=g(this),o=b(this),n=u(this);if(t=parseInt(t),n.LATCH_MOVED_ITEM){const t=K(this,e,i);e=t.toX,i=t.toY,isNaN(t.overlappedItemIndex)||(o.$limberGridViewMoveGuide.style.transform="translate("+e+"px, "+i+"px)",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active"))}Z(this,t,e,i),q(this),p(this,r);const s=v(this);s[t].x=e,s[t].y=i;const l={x:e,y:i,width:r[t].width,height:r[t].height},d=X(this,l,t),a=await ft(this,d,i,i+r[t].height,!0);o.$limberGridViewItems[t].classList.add("limberGridViewItemDemo");const c=Object.keys(a),h=c.length;for(let t=0;t<h;t++){const e=c[t],i=a[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},Pt=t=>t.store.variables.bindedFunctions,Wt=function(t){return t.store.variables.eventSpecific.itemInteraction},kt=function(t){return t.store.variables.eventSpecific.deskInteraction},zt=function(t){const e=b(this),i=u(this),r=g(this),o=Wt(this),n=Pt(this);if(1!==t.which)return;const s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),clearTimeout(o.longPressCheck),o.longPressCheck=setTimeout(Ut.bind(this,t),i.MOUSE_DOWN_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,e.$limberGridView.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,E(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Bt=function(t){const e=b(this),i=u(this),r=g(this),o=Wt(this),n=Pt(this);if(1!==t.touches.length)return void Kt.call(this,t);if(0!==t.which)return void Kt.call(this,t);if(!1===D(this,t))return;const s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.longTouchCheck=setTimeout(jt.bind(this,t),i.TOUCH_HOLD_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,e.$limberGridView.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,E(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Ut=function(t){const e=Wt(this);!1===e.mouseDownCancel&&(e.mouseDownTimerComplete=!0,R(this,e.userActionData,t))},jt=function(t){const e=Wt(this);!1===e.touchHoldCancel&&(e.touchHoldTimerComplete=!0,R(this,e.userActionData,t))},Yt=function(t){const e=b(this),i=a(this),r=u(this),o=Wt(this);if(!0===o.mouseDownTimerComplete)if("move"===o.userActionData.type){_(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const e=T(this,t);if(!1!==e){const t=e.y;w(this,t),o.showMoveDemoTimeOutVariable=setTimeout(Jt.bind(this,o.userActionData.itemIndex,e),r.DEMO_WAIT_TIME)}}else{_(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.itemX,d=o.userActionData.itemY,a=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=t.offsetY+n;w(this,u),a>0&&c>0&&(e.$limberGridViewPseudoItem.style.width=a+"px",e.$limberGridViewPseudoItem.style.height=c+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),o.showResizeDemoTimeOutVariable=setTimeout(te.bind(this,o.userActionData.itemIndex,a,c),r.DEMO_WAIT_TIME)}else o.mouseDownCancel=!0,qt.call(this,t);t.preventDefault(),t.stopPropagation()},Xt=function(t){const e=b(this),i=a(this),r=u(this),o=Wt(this);if(!0===o.touchHoldTimerComplete&&1===t.touches.length)if("move"===o.userActionData.type){_(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const n=x(this,t);if(!1!==n){const t=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=e.$limberGridView.getBoundingClientRect(),d=(e.$limberGridView.offsetWidth,l.left,e.$limberGridView.offsetHeight-l.top),a=(n.x,i.PADDING_LEFT,n.y+i.PADDING_TOP-t),c=n.y;w(this,c);!0!==y(this,a,d)&&(o.showMoveDemoTimeOutVariable=setTimeout(Jt.bind(this,o.userActionData.itemIndex,n),r.DEMO_WAIT_TIME))}}else{_(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=o.userActionData.itemX,s=o.userActionData.itemY,l=x(this,t),d=l.x-n,a=l.y-s;if(!1!==l&&(o.userActionData.newWidth=d,o.userActionData.newHeight=a,d>0&&a>0&&(e.$limberGridViewPseudoItem.style.width=d+"px",e.$limberGridViewPseudoItem.style.height=a+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(a)}px`))),!1!==l){const t=e.$limberGridView.scrollTop,n=e.$limberGridView.scrollLeft,s=e.$limberGridView.getBoundingClientRect(),c=(e.$limberGridView.offsetWidth,s.left,e.$limberGridView.offsetHeight-s.top),u=(l.x,i.PADDING_LEFT,l.y+i.PADDING_TOP-t),h=l.y;w(this,h);!0!==y(this,u,c)&&(o.showResizeDemoTimeOutVariable=setTimeout(te.bind(this,o.userActionData.itemIndex,d,a),r.DEMO_WAIT_TIME))}}else o.touchHoldCancel=!0,Kt.call(this,t);t.stopPropagation()},Ft=async function(t){const e=Wt(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.mouseDownTimerComplete)if("move"===e.userActionData.type){const r=T(this,t);var i={};try{if(!1===r)throw"Mouse position outside grid area.";await Ot.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),ee(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Ht.call(this,e.userActionData.itemIndex,r,o)}catch(t){ee(this)}else e.mouseDownCancel=!0;qt.call(this,t),e.userActionData={}},Zt=async function(t){const e=Wt(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.touchHoldTimerComplete&&0===t.touches.length)if("move"===e.userActionData.type){const r=x(this,t);var i={};try{if(!1===r)throw"Touch position outside grid area.";await Ot.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),ee(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Ht.call(this,e.userActionData.itemIndex,r,o)}catch(t){ee(this)}else e.touchHoldCancel=!0;Kt.call(this,t),t.stopPropagation(),e.userActionData={}},qt=function(t){const e=b(this),i=Wt(this),r=Pt(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((t,e)=>{const i=b(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let t=0;t<r;t++)i.$limberGridViewItems[t].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((t,e)=>{const i=b(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[e.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing")})(this,i.userActionData),b(this).$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),ee(this),document.removeEventListener("mousemove",r.onItemMouseMove),e.$limberGridView.removeEventListener("mousemove",r.onItemMouseMove),document.removeEventListener("mouseup",r.onItemMouseUp),document.removeEventListener("contextmenu",r.onItemContextMenu),document.removeEventListener("touchmove",r.onItemTouchMove),e.$limberGridView.removeEventListener("touchmove",r.onItemTouchMove),document.removeEventListener("touchend",r.onItemTouchEnd),document.removeEventListener("contextmenu",r.onItemTouchContextMenu),document.removeEventListener("touchcancel",r.onItemTouchCancel),i.userActionData={},t.preventDefault(),t.stopPropagation()},Kt=function(t){qt.call(this,t)},Qt=function(t){qt.call(this,t)},Jt=async function(t,e){const i=b(this);try{if(!1===e)throw"Invalid mouse position.";await St.call(this,t,e.x,e.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(t){console.error(t),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},te=async function(t,e,i){const r=b(this);try{await Lt.call(this,t,e,i),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(t){console.error(t),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},ee=function(t){const e=b(t),i=g(t),r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].style.transform=`translate(${i[t].x}px, ${i[t].y}px)`},ie=t=>{const e=b(t),i=u(t);e.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");for(let t=0;t<r;t++)e.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state");"ADD"===i.DESK_INTERACTION_MODE?e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},re=function(){const t=G(this),e=b(this),i=f(this),r=Pt(this);if(!0===t.editable){tt(this)||!1!==t.enableInteractiveAddAndCut&&(e.$limberGridView.addEventListener("mousedown",r.onDeskMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridView.addEventListener("touchstart",r.onDeskTouchStart));for(var o=e.$limberGridViewItems.length,n=0;n<o;n++)tt(this)||(e.$limberGridViewItems[n].addEventListener("mousedown",r.onItemMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridViewItems[n].addEventListener("touchstart",r.onItemTouchStart)),i.onItemClickCallback&&e.$limberGridViewItems[n].addEventListener("click",r.onItemClick)}},oe=function(){const t=G(this),e=b(this),i=Pt(this);if(!0===t.editable&&(void 0!==e.$limberGridView&&(e.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),e.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),void 0!==e.$limberGridViewItems)){const t=e.$limberGridViewItems.length;for(let r=0;r<t;r++)e.$limberGridViewItems[r].removeEventListener("mousedown",i.onItemMouseDown),e.$limberGridViewItems[r].removeEventListener("touchstart",i.onItemTouchStart),e.$limberGridViewItems[r].removeEventListener("click",i.onItemClick)}},ne=function(){const t=b(this),e=Pt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].addEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].addEventListener("touchstart",e.onItemTouchStart)}},se=function(){const t=b(this),e=Pt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].removeEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].removeEventListener("touchstart",e.onItemTouchStart)}},le=function(t,e=!0){const i=G(t),r=g(t),o=a(t),n=u(t),s=b(t),l=f(t);oe.call(t);const d=r.length;let c=1;e&&(c=o.WIDTH_SCALE_FACTOR);const h=new Array(d);let w;if(tt(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";w=ae(r);for(let e=0;e<d;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c,w[e].width=o.WIDTH,w[e].height=o.WIDTH/n.MOBILE_ASPECT_RATIO;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",w[e].index),i.style.width=w[e].width+"px",i.style.height=w[e].height+"px",h[e]=i}}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable");for(let e=0;e<d;e++){r[e].x*=c,r[e].y*=c,r[e].width*=c,r[e].height*=c;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",e),i.style.transform=`translate(${r[e].x}px, ${r[e].y}px)`,i.style.width=r[e].width+"px",i.style.height=r[e].height+"px",h[e]=i}}const y=s.$limberGridViewItems.length;for(let t=0;t<y;t++)s.$limberGridView.removeChild(s.$limberGridViewItems[t]);for(let t=0;t<d;t++)s.$limberGridView.appendChild(h[t]);for(let e=0;e<d;e++){const i=h[e];if(tt(t)){const r=l.renderContent(e,w[e].width,w[e].height);ce(t,r,i)}else{const o=l.renderContent(e,r[e].width,r[e].height);ce(t,o,i)}}m(t,[...s.$limberGridView.getElementsByClassName("limber-grid-view-item")]),re.call(t),l.renderComplete&&l.renderComplete()},de=async function(t,e){const i=G(t),r=b(t),o=f(t),n=a(t),s=u(t);oe.call(t);try{if(e.x&&e.y&&e.width&&e.height){let i=!1;if(i=yt(t,e.x,e.y,e.width,e.height),!i)return!1;{const i=g(t);p(t,i);const r=v(t);r.push(e),I(t,r)}}else{if(!e.width||!e.height||e.x||e.y)return!1;{if(e.width>n.WIDTH)return!1;const i=g(t);p(t,i);const r=v(t),o=(t=>{const e=g(t),i=a(t);let r,o=i.MARGIN;const n=e.length;for(let t=0;t<n;t++)r=dt(i.MARGIN,e[t]),r.y+r.height>o&&(o=r.y+r.height);return o})(t);r.push({x:void 0,y:void 0,width:e.width,height:e.height});await xt(t,[r.length-1],o);I(t,r)}}const l=g(t),d=l.length-1;let c;const u=document.createElement("div");if(tt(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";u.setAttribute("class",t),u.setAttribute("data-index",d),u.style.width=n.WIDTH+"px",u.style.height=n.WIDTH/s.MOBILE_ASPECT_RATIO+"px",c=o.renderContent(d,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO,"isAdd")}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable"),u.setAttribute("class",t),u.setAttribute("data-index",d),u.style.transform=`translate(${l[d].x}px, ${l[d].y}px)`,u.style.width=l[d].width+"px",u.style.height=l[d].height+"px",c=o.renderContent(d,l[d].width,l[d].height,"isAdd")}r.$limberGridView.appendChild(u),ce(t,c,u),m(t,[...r.$limberGridView.getElementsByClassName("limber-grid-view-item")]),o.addComplete&&o.addComplete(d)}catch(t){console.error(t)}re.call(t)},ae=t=>{const e=t.length,i=new Array(e);for(let r=0;r<e;r++)i[r]={...t[r]},i[r].index=r;return i.sort((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y)},ce=(t,e,i)=>{const r=f(t);"string"==typeof e?i.innerHTML=e:e instanceof Element?(i.innerHTML="",i.appendChild(e)):r.renderPlugin&&r.renderPlugin(e,i)},ue=function(t){const e=b(this),i=u(this),r=kt(this),o=Pt(this);t.target.classList.contains("limber-grid-view")&&(t.stopPropagation(),1===t.which&&(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(me.bind(this,t,t.offsetX,t.offsetY),i.MOUSE_DOWN_TIME),e.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu)))},he=function(t){const e=b(this),i=u(this),r=kt(this),o=Pt(this);t.target.classList.contains("limber-grid-view")&&1===t.touches.length&&0===t.which&&(r.tapHoldCancel=!1,r.tapHoldTimerComplete=!1,e.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),se.call(this),clearTimeout(r.longTouchCheck),r.longTouchCheck=setTimeout(be.bind(this,t),i.TOUCH_HOLD_TIME),t.stopPropagation())},me=function(t,e,i){const r=b(this),o=a(this),n=kt(this);if(!1===n.mouseDownCancel){n.mouseDownTimerComplete=!0;var s=r.$limberGridView.scrollTop,l=e+r.$limberGridView.scrollLeft-o.PADDING_LEFT,d=i+s-o.PADDING_TOP;n.userActionData={type:"add",addPositionX:l,addPositionY:d},r.$limberGridViewAddCutGuide.style.height="1px",r.$limberGridViewAddCutGuide.style.width="1px",r.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${d}px)`,r.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),ie(this)}},be=function(t){const e=b(this),i=kt(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;var r=x(this,t),o=r.x,n=r.y;i.userActionData={type:"add",addPositionX:o,addPositionY:n};setTimeout(function(){e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")}.bind(this),500),e.$limberGridViewAddCutGuide.style.height="1px",e.$limberGridViewAddCutGuide.style.width="1px",e.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),ie(this),e.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),t.preventDefault()}},we=function(t){const e=b(this),i=a(this),r=u(this),o=kt(this);if(!0===o.mouseDownTimerComplete){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-d+n-i.PADDING_TOP;o.userActionData.newWidth=a,o.userActionData.newHeight=c;const u=t.offsetY+n;w(this,u),a>0&&c>0&&(e.$limberGridViewAddCutGuide.style.width=a+"px",e.$limberGridViewAddCutGuide.style.height=c+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(c)}px`)),"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(Te.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME)):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(xe.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,a,c),r.DEMO_WAIT_TIME))}else fe.call(this,t);t.stopPropagation()},ye=function(t){const e=b(this),i=a(this),r=u(this),o=kt(this);if(!0===o.tapHoldTimerComplete&&1===t.touches.length){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,d=o.userActionData.addPositionY,a=x(this,t),c=a.x-l,u=a.y-d;if(!1!==a&&(o.userActionData.newWidth=c,o.userActionData.newHeight=u,c>0&&u>0&&(e.$limberGridViewAddCutGuide.style.width=c+"px",e.$limberGridViewAddCutGuide.style.height=u+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(c)}px, h: ${parseInt(u)}px`))),!1!==a){const t=e.$limberGridView.getBoundingClientRect(),s=(e.$limberGridView.offsetWidth,t.left,e.$limberGridView.offsetHeight-t.top),l=(a.x,i.PADDING_LEFT,a.y+i.PADDING_TOP-n),d=a.y;w(this,d);const h=y(this,l,s);"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),!0!==h&&(o.addItemAllowCheckTimeOutVariable=setTimeout(Te.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME))):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),!0!==h&&(o.cutSpaceAllowCheckTimeOutVariable=setTimeout(xe.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME)))}t.preventDefault()}else fe.call(this);t.stopPropagation()},Ie=function(t){const e=b(this),i=u(this),r=kt(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck),!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(yt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;de(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&wt(this,t.y,t.shiftHeight)}}else r.mouseDownCancel=!0;fe.call(this),t.stopPropagation()},ge=function(t){const e=b(this),i=u(this),r=kt(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck),!0===r.tapHoldTimerComplete&&0===t.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(yt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;de(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&wt(this,t.y,t.shiftHeight)}}else r.tapHoldCancel=!0;fe.call(this),t.stopPropagation()},pe=function(t){fe.call(this)},ve=function(t){t.preventDefault()},fe=function(t){const e=b(this),i=kt(this),r=Pt(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(t=>{const e=b(t);e.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=e.$limberGridViewItems.length;for(var r=0;r<i;r++)e.$limberGridViewItems[r].classList.remove("limber-grid-view-item-resizing-state"),e.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state");e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")})(this),e.$limberGridView.removeEventListener("mousemove",r.onDeskMouseMove),document.removeEventListener("mouseup",r.onDeskMouseUp),document.removeEventListener("contextmenu",r.onDeskContextMenu),e.$limberGridView.removeEventListener("touchmove",r.onDeskTouchMove),document.removeEventListener("touchend",r.onDeskTouchEnd),document.removeEventListener("touchcancel",r.onDeskTouchCancel),document.removeEventListener("contextmenu",r.onDeskTouchContextMenu),ne.call(this),i.userActionData={},t&&(t.preventDefault(),t.stopPropagation())},Te=function(t,e,i,r){const o=b(this);!1===yt(this,t,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},xe=function(t,e,i,r){const o=b(this);!1===It(this,0,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},De={ADD:!0,CUTSPACE:!0},Ae={true:!0,false:!0},Ge=async function(t,e,i){const r=b(t),c=a(t),u=g(t);if(!0===i||!(t=>{if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){if(!t[i]||isNaN(t[i].x)||t[i].x<0||isNaN(t[i].y)||t[i].y<0||isNaN(t[i].height)||t[i].height<=0||isNaN(t[i].width)||t[i].width<=0)return!1;if(!S(P(t[i])))return!1}return!0}return!1})(u)){console.warn("Auto-arranging"),p(t,u);const e=v(t),i=u.length,r=new Array(i);for(let t=0;t<i;t++)r[t]=t,e[t].x=void 0,e[t].y=void 0,u[t].x/=c.WIDTH_SCALE_FACTOR,u[t].y/=c.WIDTH_SCALE_FACTOR,u[t].width/=c.WIDTH_SCALE_FACTOR,u[t].height/=c.WIDTH_SCALE_FACTOR;o(t,c.GRID_WIDTH),n(t,c.GRID_HEIGHT),l(t,c.GRID_MARGIN),s(t,1),d(t,c.MIN_HEIGHT_AND_WIDTH),await xt(t,r,c.MARGIN),I(t,e)}if(function(t,e){t.store.constants.privateConstants.PADDING_LEFT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-left"))),function(t,e){t.store.constants.privateConstants.PADDING_RIGHT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-right"))),function(t,e){t.store.constants.privateConstants.PADDING_TOP=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-top"))),function(t,e){t.store.constants.privateConstants.PADDING_BOTTOM=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-bottom"))),o(t,r.$limberGridView.clientWidth-c.PADDING_LEFT-c.PADDING_RIGHT),n(t,r.$limberGridView.clientHeight-c.PADDING_TOP-c.PADDING_BOTTOM),e){const t=u.length;for(let e=0;e<t;e++)u[e].x/=c.WIDTH_SCALE_FACTOR,u[e].y/=c.WIDTH_SCALE_FACTOR,u[e].width/=c.WIDTH_SCALE_FACTOR,u[e].height/=c.WIDTH_SCALE_FACTOR;c.MARGIN/=c.WIDTH_SCALE_FACTOR,c.DEFINED_MIN_HEIGHT_AND_WIDTH/=c.WIDTH_SCALE_FACTOR}s(t,c.WIDTH/c.GRID_WIDTH),l(t,c.MARGIN*c.WIDTH_SCALE_FACTOR),d(t,c.DEFINED_MIN_HEIGHT_AND_WIDTH*c.WIDTH_SCALE_FACTOR)},Ce=function(t){var e,i,r,o,n,s,l,d,a,u,h,m,b,w,y,I,g,p,v,f,T;(null==t||null===(e=t.gridData)||void 0===e?void 0:e.WIDTH)&&!isNaN(t.gridData.WIDTH)&&(f=this,T=t.gridData.WIDTH,f.store.constants.privateConstants.GRID_WIDTH=T),(null==t||null===(i=t.gridData)||void 0===i?void 0:i.HEIGHT)&&!isNaN(t.gridData.HEIGHT)&&function(t,e){t.store.constants.privateConstants.GRID_HEIGHT=e}(this,t.gridData.HEIGHT),(null==t||null===(r=t.gridData)||void 0===r?void 0:r.MARGIN)&&!isNaN(t.gridData.MARGIN)&&function(t,e){t.store.constants.privateConstants.GRID_MARGIN=e}(this,t.gridData.MARGIN),(null==t||null===(o=t.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&!isNaN(t.gridData.MIN_HEIGHT_AND_WIDTH)&&function(t,e){t.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=e}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),(null==t||null===(n=t.publicConstants)||void 0===n?void 0:n.mobileAspectRatio)&&!isNaN(t.publicConstants.mobileAspectRatio)&&c(this,"MOBILE_ASPECT_RATIO",t.publicConstants.mobileAspectRatio),(null==t||null===(s=t.publicConstants)||void 0===s?void 0:s.moveGuideRadius)&&!isNaN(t.publicConstants.moveGuideRadius)&&c(this,"MOVE_GUIDE_RADIUS",t.publicConstants.moveGuideRadius),(null==t||null===(l=t.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&!isNaN(t.publicConstants.resizeSquareGuideLength)&&c(this,"RESIZE_SQUARE_GUIDE_LENGTH",t.publicConstants.resizeSquareGuideLength),(null==t||null===(d=t.publicConstants)||void 0===d?void 0:d.resizeSquareBorderGuideWidth)&&!isNaN(t.publicConstants.resizeSquareBorderGuideWidth)&&c(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",t.publicConstants.resizeSquareBorderGuideWidth),(null==t||null===(a=t.publicConstants)||void 0===a?void 0:a.autoScrollDistance)&&!isNaN(t.publicConstants.autoScrollDistance)&&c(this,"AUTO_SCROLL_DISTANCE",t.publicConstants.autoScrollDistance),(null==t||null===(u=t.publicConstants)||void 0===u?void 0:u.autoScrollPoint)&&!isNaN(t.publicConstants.autoScrollPoint)&&c(this,"AUTO_SCROLL_POINT",t.publicConstants.autoScrollPoint),(null==t||null===(h=t.publicConstants)||void 0===h?void 0:h.moveOrResizeHeightIncrements)&&!isNaN(t.publicConstants.moveOrResizeHeightIncrements)&&c(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",t.publicConstants.moveOrResizeHeightIncrements),(null==t||null===(m=t.publicConstants)||void 0===m?void 0:m.mouseDownTime)&&!isNaN(t.publicConstants.mouseDownTime)&&c(this,"MOUSE_DOWN_TIME",t.publicConstants.mouseDownTime),(null==t||null===(b=t.publicConstants)||void 0===b?void 0:b.touchHoldTime)&&!isNaN(t.publicConstants.touchHoldTime)&&c(this,"TOUCH_HOLD_TIME",t.publicConstants.touchHoldTime),(null==t||null===(w=t.publicConstants)||void 0===w?void 0:w.demoWaitTime)&&!isNaN(t.publicConstants.demoWaitTime)&&c(this,"DEMO_WAIT_TIME",t.publicConstants.demoWaitTime),(null==t||null===(y=t.publicConstants)||void 0===y?void 0:y.windowResizeWaitTime)&&!isNaN(t.publicConstants.windowResizeWaitTime)&&c(this,"WINDOW_RESIZE_WAIT_TIME",t.publicConstants.windowResizeWaitTime),(null==t||null===(I=t.publicConstants)||void 0===I?void 0:I.deskInteractionMode)&&De[t.publicConstants.deskInteractionMode]&&c(this,"DESK_INTERACTION_MODE",t.publicConstants.deskInteractionMode),"boolean"==typeof(null==t||null===(g=t.publicConstants)||void 0===g?void 0:g.latchMovedItem)&&c(this,"LATCH_MOVED_ITEM",t.publicConstants.latchMovedItem),"boolean"==typeof(null==t||null===(p=t.publicConstants)||void 0===p?void 0:p.animateMovedItem)&&c(this,"ANIMATE_MOVED_ITEM",t.publicConstants.animateMovedItem),(null==t||null===(v=t.publicConstants)||void 0===v?void 0:v.animateTime)&&!isNaN(t.publicConstants.animateTime)&&c(this,"ANIMATE_TIME",t.publicConstants.animateTime)},Ee=function(){const t=b(this),e=A(this);var i,r;let o;i=this,r=document.getElementsByTagName("body")[0],i.store.variables.elements.$body=r;do{o="limber-grid-view-pseudo-container-"+rt()}while(null!==document.getElementById(o));!function(t,e){t.store.variables.essentials.pseudoContainerId=e}(this,o);const n=document.createElement("div");if(n.setAttribute("class","limber-grid-view-pseudo-container"),n.setAttribute("id",o),function(t,e){t.store.variables.elements.$pseudoContainer=e}(this,n),e.pseudoElementContainer){let t;"string"==typeof e.pseudoElementContainer?t=document.getElementById(e.pseudoElementContainer):e.pseudoElementContainer instanceof Element&&(t=e.pseudoElementContainer),t.appendChild(n)}else t.$body.appendChild(n);t.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">Â©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright Â© 2018-2020, Subendra Kumar Sharma. License: GNU General Public License version 3, or (at your option) any later version.</div></div></div>',function(t,e){t.store.variables.elements.$limberGridViewContainer=e}(this,t.$el.getElementsByClassName("limber-grid-view-container")[0]),function(t,e){t.store.variables.elements.$limberGridView=e}(this,t.$el.getElementsByClassName("limber-grid-view")[0]);const s=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div");u.innerHTML="<div></div>",s.setAttribute("class","limber-grid-view-pseudo-container-item"),l.setAttribute("class","limber-grid-view-pseudo-item"),d.setAttribute("class","limber-grid-view-move-guide"),a.setAttribute("class","limber-grid-view-height-adjust-guide"),c.setAttribute("class","limber-grid-view-add-cut-guide"),u.setAttribute("class","limber-grid-view-touch-hold-guide"),t.$pseudoContainer.appendChild(s),t.$limberGridView.appendChild(l),t.$limberGridView.appendChild(d),t.$limberGridView.appendChild(a),t.$limberGridView.appendChild(c),t.$limberGridView.appendChild(u),function(t,e){t.store.variables.elements.$pseudoContainerItem=e}(this,s),function(t,e){t.store.variables.elements.$limberGridViewPseudoItem=e}(this,l),function(t,e){t.store.variables.elements.$limberGridViewMoveGuide=e}(this,d),function(t,e){t.store.variables.elements.$limberGridViewHeightAdjustGuide=e}(this,a),function(t,e){t.store.variables.elements.$limberGridViewAddCutGuide=e}(this,c),function(t,e){t.store.variables.elements.$limberGridViewTouchHoldGuide=e}(this,u)},Re=function(t){const e=u(this);setTimeout(Pt(this).onWindowResizeTimerCallback,e.WINDOW_RESIZE_WAIT_TIME),window.removeEventListener("resize",Pt(this).onWindowResize)},_e=async function(t){await Ge(this,!0,!1),le(this);!1!==G(this).reRenderOnResize&&window.addEventListener("resize",Pt(this).onWindowResize)};function Me(t){var e,i;if(this.initializeStore(),function(t,e){Object.assign(t.options,e)}(this,t),I(this,t.positionData),e=this,i=t.callbacks,e.store.variables.essentials.callbacks=i,"string"==typeof t.el){const e=document.getElementById(t.el);if(!e)throw"No for element found for id "+t.el;h(this,e)}else{if(!(t.el instanceof Element))throw"Valid DOM Element or Id required";h(this,t.el)}Ce.call(this,t),Ee.call(this),!0===this.options.reRenderOnResize&&window.addEventListener("resize",Pt(this).onWindowResize),setTimeout(async function(){await Ge(this,!1,t.autoArrange),le(this,!0)}.bind(this))}
/** @license LimberGridView

LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.

Copyright Â© 2018-2020, Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
Me.prototype.constructor=Me,Me.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:zt.bind(this),onItemTouchStart:Bt.bind(this),onItemMouseMove:Yt.bind(this),onItemTouchMove:Xt.bind(this),onItemMouseUp:Ft.bind(this),onItemTouchEnd:Zt.bind(this),onItemContextMenu:qt.bind(this),onItemTouchContextMenu:Kt.bind(this),onItemTouchCancel:Qt.bind(this),onDeskMouseDown:ue.bind(this),onDeskTouchStart:he.bind(this),onDeskMouseMove:we.bind(this),onDeskTouchMove:ye.bind(this),onDeskMouseUp:Ie.bind(this),onDeskTouchEnd:ge.bind(this),onDeskTouchCancel:pe.bind(this),onDeskTouchContextMenu:ve.bind(this),onDeskContextMenu:fe.bind(this),onWindowResize:Re.bind(this),onWindowResizeTimerCallback:_e.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}}},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,MOUSE_DOWN_TIME:500,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,DESK_INTERACTION_MODE:"ADD",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250}}}},Me.prototype.renderItem=function(t){!function(t,e){const i=b(t),r=f(t),o=g(t),n=a(t),s=u(t);let l;l=tt(t)?r.renderContent(e,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(e,o[e].width,o[e].height),ce(t,l,i.$limberGridViewItems[e]),r.renderComplete&&r.renderComplete(e)}(this,t)},Me.prototype.getGridData=function(){const t=r(this),e=g(this),i=e.length,o=new Array(i);for(let r=0;r<i;r++)o[r]={x:et(e[r].x/t.WIDTH_SCALE_FACTOR),y:et(e[r].y/t.WIDTH_SCALE_FACTOR),width:et(e[r].width/t.WIDTH_SCALE_FACTOR),height:et(e[r].height/t.WIDTH_SCALE_FACTOR)};return{gridData:{height:t.GRID_HEIGHT,width:t.GRID_WIDTH,margin:t.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:t.MIN_HEIGHT_AND_WIDTH},positionData:o}},Me.prototype.setDeskInteractMode=function(t){De[t]&&c(this,"DESK_INTERACTION_MODE",t)},Me.prototype.setLatchMovedItem=function(t){Ae[t]&&c(this,"LATCH_MOVED_ITEM",t)},Me.prototype.addItem=function(t){if(!t){const e=r(this);t={width:e.DEFINED_MIN_HEIGHT_AND_WIDTH,height:e.DEFINED_MIN_HEIGHT_AND_WIDTH}}de(this,t)},Me.prototype.removeItem=function(t){Number.isInteger(t)&&function(t,e){const i=b(t),r=f(t),o=g(t),n=a(t),s=u(t);oe.call(t),o.splice(e,1),r.removePlugin&&r.removePlugin(i.$limberGridViewItems[e]),i.$limberGridView.removeChild(i.$limberGridViewItems[e]),m(t,[...i.$limberGridView.getElementsByClassName("limber-grid-view-item")]);const l=o.length;for(let t=e;t<l;t++)i.$limberGridViewItems[t].setAttribute("data-index",t);r.removeComplete&&r.removeComplete(e,i.$limberGridViewItems[e]);for(let d=e;d<l;d++){let e;e=tt(t)?r.renderContent(d,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(d,o[d].width,o[d].height),ce(t,e,i.$limberGridViewItems[d])}re.call(t)}(this,t)},Me.prototype.setIsMobileCheck=function(t){this.options.isMobileCheck=t};e.default=Me}])}));