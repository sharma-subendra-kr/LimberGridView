/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.
 *
 * Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Stack"),require("IntervalTreeJS")):"function"==typeof define&&define.amd?define(["Stack","IntervalTreeJS"],e):"object"==typeof exports?exports.LimberGridView=e(require("Stack"),require("IntervalTreeJS")):t.LimberGridView=e(t.Stack,t.IntervalTreeJS)}(window,(function(t,e){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="assets",i(i.s=4)}([function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var r=i(1),o=i(0);i(2),i(3);const n=function(t){return t.store.constants.privateConstants},s=function(t,e){t.store.constants.privateConstants.WIDTH=e},l=function(t,e){t.store.constants.privateConstants.HEIGHT=e},a=function(t,e){t.store.constants.privateConstants.WIDTH_SCALE_FACTOR=e},d=function(t,e){t.store.constants.privateConstants.MARGIN=e},c=function(t,e){t.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=e};var u=n;const h=function(t,e,i){t.store.constants.publicConstants.hasOwnProperty(e)&&(t.store.constants.publicConstants[e]=i)};var m=function(t){return t.store.constants.publicConstants};const b=function(t,e){t.store.variables.elements.$el=e},I=function(t,e){t.store.variables.elements.$limberGridViewItems=e};var w=function(t){return t.store.variables.elements};const y=function(t,e){const i=w(t),r=m(t);i.$limberGridView.scrollHeight-e<=r.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=e+r.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")},g=function(t,e,i){const r=w(t),o=m(t),n=u(t),s=r.$limberGridView.scrollTop;let l=!1;return e>0&&(i-e<o.AUTO_SCROLL_POINT&&(r.$limberGridView.scrollTop=s+o.AUTO_SCROLL_DISTANCE,l=!0),e<n.HEIGHT/10&&0!==s&&(r.$limberGridView.scrollTop=s-o.AUTO_SCROLL_DISTANCE,l=!0)),l},x=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.positionData=r},p=function(t){return t.store.variables.essentials.positionData},v=function(t,e){const i=e.length,r=new Array(i);for(let t=0;t<i;t++)r[t]={...e[t]};t.store.variables.essentials.modifiedPositionData=r},T=function(t){return t.store.variables.essentials.modifiedPositionData},A=function(t){return t.store.variables.essentials.callbacks};const D=function(t,e){const i=w(t),r=u(t),o=i.$limberGridView.getBoundingClientRect();if(e.clientX>=o.left&&e.clientX<=o.left+o.width&&e.clientY>=o.top&&e.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,n=i.$limberGridView.scrollLeft,s=e.clientX-o.left-r.PADDING_LEFT+n,l=e.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},f=function(t,e){const i=w(t),r=u(t),o=i.$limberGridView.getBoundingClientRect();let n;if(n="touchend"===e.type?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},n.clientX>=o.left&&n.clientX<=o.left+o.width&&n.clientY>=o.top&&n.clientY<=o.top+o.height){const t=i.$limberGridView.scrollTop,e=i.$limberGridView.scrollLeft,s=n.clientX-o.left-r.PADDING_LEFT+e,l=n.clientY-o.top-r.PADDING_TOP+t;return!(s<0||l<0)&&{x:s,y:l}}return!1},G=function(t,e){const i=w(t).$limberGridViewItems[e.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(e.touches[0].clientX>=i.left&&e.touches[0].clientX<=i.left+i.width&&e.touches[0].clientY>=i.top&&e.touches[0].clientY<=i.top+i.height){return{x:e.touches[0].clientX-i.left,y:e.touches[0].clientY-i.top}}return!1},E=function(t){return t.options};var _=E;const C=(t,e)=>{const i=m(t),r=_(t),o=p(t),n=parseInt(e.currentTarget.attributes["data-index"].value);let s,l,a,d;if(e.touches){if(!e.touches)return!1;l=G(t,e),s=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),a=l.x,d=l.y}else s=Math.sqrt(Math.pow(0-e.offsetX,2)+Math.pow(0-e.offsetY,2)),a=e.offsetX,d=e.offsetY;const c=e.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,u=e.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,h=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return r.itemMouseDownMoveCheck&&r.itemMouseDownMoveCheck(a,d,{...o[n]},n,e.target)||s<=i.MOVE_GUIDE_RADIUS&&!r.itemMouseDownMoveCheck?{type:"move",itemIndex:e.currentTarget.attributes["data-index"].value}:r.itemMouseDownResizeCheck&&r.itemMouseDownResizeCheck(a,d,{...o[n]},n,e.target)||a>=c&&a<=c+h&&d>=u&&d<=u+b&&!r.itemMouseDownResizeCheck?{type:"resize",itemIndex:e.currentTarget.attributes["data-index"].value}:void 0},R=(t,e)=>{const i=w(t),r=p(t)[e.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=r.width+"px",i.$limberGridViewPseudoItem.style.height=r.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${e.itemX}px,${e.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const o=i.$limberGridViewItems.length;for(let t=0;t<o;t++)i.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},N=(t,e,i)=>{const r=w(t),o=p(t)[e.itemIndex];r.$limberGridViewHeightAdjustGuide.style.height="0px",r.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),r.$limberGridViewItems[e.itemIndex].classList.add("limber-grid-view-item-demo"),r.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),r.$pseudoContainerItem.style.width=o.width+"px",r.$pseudoContainerItem.style.height=o.height+"px",i.touches?i.touches&&(r.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`):r.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`,r.$body.classList.add("limber-grid-view-body-tag-state-editing")},M=(t,e,i,r)=>{const o=w(t);"move"===r?(o.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),o.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),i.touches?i.touches&&(o.$pseudoContainerItem.style.transform=`translate(${i.touches[0].pageX}px, ${i.touches[0].pageY}px)`):o.$pseudoContainerItem.style.transform=`translate(${i.pageX}px, ${i.pageY}px)`):"resize"===r&&o.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},H=(t,e)=>{const i=k(t);try{return e.x>i.tl.x&&e.x<i.tr.x&&e.y>i.tl.y&&e.y<i.bl.y}catch(t){return null}},$=(t,e)=>{const i=k(t);try{return e.x>=i.tl.x&&e.x<=i.tr.x&&e.y>=i.tl.y&&e.y<=i.bl.y&&!H(t,e)}catch(t){return null}},V=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>=n.x||o.x>=r.x)&&!(i.y>=n.y||o.y>=r.y)}catch(t){return null}},S=(t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y},o={x:t.x+t.width,y:t.y+t.height},n={x:t.x,y:t.y+t.height},s={x:e.x,y:e.y},l={x:e.x+e.width,y:e.y},a={x:e.x+e.width,y:e.y+e.height},d={x:e.x,y:e.y+e.height},c=1;return Math.abs(i.x-a.x)<c&&(Math.abs(i.y-a.y)<c||i.y<a.y&&n.y>l.y)||(Math.abs(i.y-a.y)<c&&(Math.abs(i.x-a.x)<c||i.x<a.x&&r.x>d.x)||(Math.abs(s.x-o.x)<c&&(Math.abs(s.y-o.y)<c||s.y<o.y&&d.y>r.y)||Math.abs(s.y-o.y)<c&&(Math.abs(s.x-o.x)<c||s.x<o.x&&l.x>n.x)))}catch(t){return null}},O=(t,e,i)=>{if(!V(t,e))return null;const r=k(t),o=k(e),n={subRectT:{tl:r.tl,tr:r.tr,br:{x:r.tr.x,y:o.tr.y},bl:{x:r.tl.x,y:o.tl.y}},subRectR:{tl:{x:o.tr.x,y:r.tr.y},tr:r.tr,br:r.br,bl:{x:o.br.x,y:r.br.y}},subRectB:{tl:{x:r.bl.x,y:o.bl.y},tr:{x:r.br.x,y:o.br.y},br:r.br,bl:r.bl},subRectL:{tl:r.tl,tr:{x:o.tl.x,y:r.tl.y},br:{x:o.bl.x,y:r.bl.y},bl:r.bl}},s=Object.keys(n);for(let t=0;t<s.length;t++)W(n[s[t]])||delete n[s[t]];let l,a,d,c,u,h,m,b,I,w,y,g,x,p,v,T,A;return n.subRectT&&n.subRectR&&(I={tl:n.subRectT.tl,tr:n.subRectR.tl,br:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},d={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectT.br,bl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y}},g={tl:{x:n.subRectR.tl.x,y:n.subRectT.bl.y},tr:n.subRectT.br,br:n.subRectR.br,bl:n.subRectR.bl}),n.subRectR&&n.subRectB&&(y={tl:n.subRectR.tl,tr:n.subRectR.tr,br:n.subRectB.tr,bl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y}},u={tl:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectR.bl},p={tl:n.subRectB.tl,tr:{x:n.subRectR.bl.x,y:n.subRectB.tl.y},br:n.subRectR.bl,bl:n.subRectB.bl}),n.subRectB&&n.subRectL&&(T={tl:n.subRectL.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},bl:n.subRectB.tl},m={tl:n.subRectB.tl,tr:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},br:n.subRectL.br,bl:n.subRectB.bl},x={tl:{x:n.subRectL.tr.x,y:n.subRectB.tr.y},tr:n.subRectB.tr,br:n.subRectB.br,bl:n.subRectL.br}),n.subRectL&&n.subRectT&&(v={tl:n.subRectT.bl,tr:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},br:n.subRectL.br,bl:n.subRectL.bl},l={tl:n.subRectT.tl,tr:n.subRectL.tr,br:{x:n.subRectL.tr.x,y:n.subRectT.bl.y},bl:n.subRectT.bl},w={tl:n.subRectL.tr,tr:n.subRectT.tr,br:n.subRectT.br,bl:{x:n.subRectL.tr.x,y:n.subRectT.bl.y}}),a=L(I,l)||L(w,d)||I||w,c=P(y,d)||P(g,u)||y||g,h=L(x,u)||L(p,m)||x||p,b=P(v,m)||P(T,l)||v||T,A=i?[l,a,d,c,u,h,m,b]:[j(l),j(a),j(d),j(c),j(u),j(h),j(m),j(b)],A=A.filter(t=>t),0===A.length&&(A=Object.keys(n).map(t=>i?n[t]:j(n[t]))),A},L=(t,e)=>{if(!t&&!e)return null;if(!V(j(t),j(e)))return null;let i=null;return t.tl.x===e.tl.x||Math.abs(t.tl.x-e.tl.x)<Math.abs(t.tr.x-e.tr.x)?i={tl:e.tr,tr:t.tr,br:t.br,bl:e.br}:(t.tr===e.tr||Math.abs(e.tl.x-t.tl.x)>Math.abs(e.tr.x-t.tr.x))&&(i={tl:t.tl,tr:e.tl,br:e.bl,bl:t.bl}),i},P=(t,e)=>{if(!t&&!e)return null;if(!V(j(t),j(e)))return null;let i=null;return t.tl.y===e.tl.y||Math.abs(t.tl.y-e.tl.y)<Math.abs(t.bl.y-e.bl.y)?i={tl:e.bl,tr:e.br,br:t.br,bl:t.bl}:(t.bl.y===e.bl.y||Math.abs(e.tl.y-t.tl.y)>Math.abs(e.bl.y-t.bl.y))&&(i={tl:t.tl,tr:t.tr,br:e.tr,bl:e.tl}),i},W=function(t){try{let e,i,r,o;return e=t.tr.x-t.tl.x,i=t.br.y-t.tr.y,r=t.br.x-t.bl.x,o=t.bl.y-t.tl.y,!(e<=0||i<=0||r<=0||o<=0)}catch(t){return null}},k=function(t){return{tl:{x:t.x,y:t.y},tr:{x:t.x+t.width,y:t.y},br:{x:t.x+t.width,y:t.y+t.height},bl:{x:t.x,y:t.y+t.height}}},j=function(t){return W(t)?{x:t.tl.x,y:t.tl.y,width:t.tr.x-t.tl.x,height:t.bl.y-t.tl.y}:null},z=(t,e)=>{let i;if(t.tl.x>=e.bl.x&&t.tl.x<e.br.x&&t.tl.y>=e.bl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:e.tl.y},tr:{x:r,y:e.tl.y},br:{x:r,y:t.bl.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.tl.y>=e.tr.y&&t.tl.y<e.br.y&&t.tl.x>=e.tr.x){let r=t.br.y<e.br.y?t.br.y:e.br.y;i={tl:{x:e.tl.x,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.br.x,y:r},bl:{x:e.bl.x,y:r}}}if(t.tr.x<=e.br.x&&t.tr.x>e.bl.x&&t.tr.y>=e.bl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:e.tl.y},tr:{x:t.tr.x,y:e.tr.y},br:{x:t.br.x,y:t.br.y},bl:{x:r,y:t.bl.y}}}if(t.tr.y>=e.tl.y&&t.tr.y<e.bl.y&&t.tr.x<=e.tl.x){let r=t.bl.y<e.bl.y?t.bl.y:e.bl.y;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:e.tr.x,y:t.tl.y},br:{x:e.br.x,y:r},bl:{x:t.bl.x,y:r}}}if(t.br.x<=e.tr.x&&t.br.x>e.tl.x&&t.br.y<=e.tl.y){let r=t.tl.x>e.tl.x?t.tl.x:e.tl.x;i={tl:{x:r,y:t.tl.y},tr:{x:t.tr.x,y:t.tr.y},br:{x:t.tr.x,y:e.br.y},bl:{x:r,y:e.bl.y}}}if(t.br.y<=e.bl.y&&t.br.y>e.tl.y&&t.br.x<=e.tl.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:t.tl.x,y:r},tr:{x:e.tr.x,y:r},br:{x:e.br.x,y:t.br.y},bl:{x:t.bl.x,y:t.bl.y}}}if(t.bl.x>=e.tl.x&&t.bl.x<e.tr.x&&t.bl.y<=e.tl.y){let r=t.tr.x<e.tr.x?t.tr.x:e.tr.x;i={tl:{x:t.tl.x,y:t.tl.y},tr:{x:r,y:t.tr.y},br:{x:r,y:e.br.y},bl:{x:t.bl.x,y:e.bl.y}}}if(t.bl.y<=e.br.y&&t.bl.y>e.tr.y&&t.bl.x>=e.tr.x){let r=t.tl.y>e.tl.y?t.tl.y:e.tl.y;i={tl:{x:e.tl.x,y:r},tr:{x:t.tr.x,y:r},br:{x:t.br.x,y:t.br.y},bl:{x:e.bl.x,y:t.bl.y}}}return i},X=(t,e,i)=>{const r=k(t),o=k(e);let n;return n=z(r,o),n||(n=z(o,r)),n&&(n=[n]),n||U(t,e)||U(e,t)||(n=((t,e,i)=>{const r=O(t,e,!0),o=new Array((null==r?void 0:r.length)||0);let n,s=0;const l=o.length;for(let e=0;e<l;e++)n=z(r[e],i),n&&!U(t,j(n))&&(o[s++]=n);return o.length=s,s?o:null})(t,e,o)),!!n&&(i?n:n.map(t=>j(t)))},U=(t,e)=>{const i=k(t),r=k(e);return i.tl.x<=r.tl.x&&i.tr.x>=r.tr.x&&i.tl.y<=r.tl.y&&i.bl.y>=r.bl.y},Y=(t,e)=>t.tl.x===e.tl.x&&t.tl.y===e.tl.y&&t.tr.x===e.tr.x&&t.tr.y===e.tr.y&&t.br.x===e.br.x&&t.br.y===e.br.y&&t.bl.x===e.bl.x&&t.bl.y===e.bl.y,B=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),F=(t,e,i)=>{const r=p(t),o=T(t),n=u(t),s=r.length,l=new Array(s);let a=0;const d={...e};d.x-=n.MARGIN,d.y-=n.MARGIN,d.width+=2*n.MARGIN,d.height+=2*n.MARGIN;const c={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)c.x=r[t].x-n.MARGIN,c.y=r[t].y-n.MARGIN,c.width=r[t].width+2*n.MARGIN,c.height=r[t].height+2*n.MARGIN,V(c,d)&&t!==i&&(l[a++]=t,o[t].x=void 0,o[t].y=void 0);return l[a++]=i,l.length=a,l},Z=(t,e,i)=>{const r=p(t),o=T(t),n=u(t),s=r.length,l=new Array(s);let a=0;const d={...e};d.x-=n.MARGIN,d.y-=n.MARGIN,d.width+=2*n.MARGIN,d.height+=2*n.MARGIN;const c={x:0,y:0,height:0,width:0};for(let t=0;t<s;t++)c.x=r[t].x-n.MARGIN,c.y=r[t].y-n.MARGIN,c.width=r[t].width+2*n.MARGIN,c.height=r[t].height+2*n.MARGIN,V(c,d)&&t!==i&&(l[a++]=t,o[t].x=void 0,o[t].y=void 0);return l[a++]=i,l.length=a,l},q=(t,e,i,r)=>{const o=p(t),n=u(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"Width or Height is not a number.";if(o[e].x+i+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";if(i<n.DEFINED_MIN_HEIGHT_AND_WIDTH||r<n.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${n.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;if(r+2*n.MARGIN>n.HEIGHT)throw"Height cannot be greater than height of container.";return!0},K=(t,e,i,r)=>{const o=p(t),n=u(t);if(e<0||e>=o.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof r)throw"toX or toY is not a number.";if(i<n.MARGIN||r<n.MARGIN)throw"Left edges falls outside the grid area.";if(i+o[e].width+n.MARGIN>n.WIDTH)throw"Right edges falls outside the grid area.";return!0},Q=t=>{const e=p(t),i=w(t),r=e.length;for(var o=0;o<r;o++)i.$limberGridViewItems[o].style.transform="translate("+e[o].x+"px, "+e[o].y+"px)"},J=(t,e,i,r)=>{const o=p(t),n=u(t),s=o.length,l={x:0,y:0,height:0,width:0},a={x:e,y:i};let d,c,h,m,b,I,w,y,g,x,v,T=Number.MAX_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,D=Number.MAX_SAFE_INTEGER,f=!1;for(let t=0;t<s;t++)l.x=o[t].x-n.MARGIN,l.y=o[t].y-n.MARGIN,l.width=o[t].width+2*n.MARGIN,l.height=o[t].height+2*n.MARGIN,(H(l,a)||$(l,a))&&(d=t,e=o[d].x,i=o[d].y),t!==r&&(c={x:l.x,y:l.y},h={x:l.x+l.width,y:l.y},m={x:l.x,y:l.y+l.height},b=B(c,a),I=B(h,a),w=B(m,a),b<T&&b<A&&b<D&&a.x<c.x&&b<=n.WIDTH/4&&c.x-n.MARGIN-o[r].width>=n.MARGIN&&(y=c.x-n.MARGIN-o[r].width,g=c.y+n.MARGIN,T=b,f=!0,x=t,v="left"),I<A&&I<T&&I<D&&a.x>h.x&&I<=n.WIDTH/4&&h.x+n.MARGIN+o[r].width<n.WIDTH&&(y=h.x+n.MARGIN,g=h.y+n.MARGIN,A=I,f=!0,x=t,v="right"),w<D&&w<T&&w<A&&a.y>=m.y&&a.x>=m.x&&w<=n.WIDTH/4&&c.x+n.MARGIN+o[r].width<n.WIDTH&&(y=c.x+n.MARGIN,g=m.y+n.MARGIN,D=w,f=!0,x=t,v="bottom"));return{to:{toX:e,toY:i},toAdj:{toX:y,toY:g},overlappedItemIndex:d,isToAdjPresent:f,toAdjIndex:x,toAdjDirection:v}},tt=(t,e,i,r,o,n)=>{const s=p(t),l=T(t),a=u(t);let d=Number.MAX_SAFE_INTEGER,c=0,h=Number.MAX_SAFE_INTEGER,m=0;const b=e.length;for(let t=0;t<b;t++)s[e[t]].y<d&&(d=s[e[t]].y),s[e[t]].y+s[e[t]].height>c&&(c=s[e[t]].y+s[e[t]].height),s[e[t]].x<h&&(h=s[e[t]].x),s[e[t]].x+s[e[t]].width>m&&(m=s[e[t]].x+s[e[t]].width);return r>c&&(c=r),i>m&&(m=i),o<d&&(d=o),n>c&&(c=n),c-d>1.5*a.HEIGHT&&(d=l[e[b-1]].y,c=l[e[b-1]].y+l[e[b-1]].height),{minX:h-a.MARGIN,maxX:m+a.MARGIN,minY:d-a.MARGIN,maxY:c+a.MARGIN}},et=(t,e,i,r)=>{let o,n;e.tl.y>0&&(o={tl:{x:i,y:0},tr:{x:r,y:0},br:{x:r,y:e.tr.y},bl:{x:i,y:e.tl.y}});const s=((t,e,i)=>{const r=p(t),o=T(t),n=u(t);let s,l,a=0;const d=r.length;for(let t=0;t<d;t++)s=ot(n.MARGIN,r[t]),l=ot(n.MARGIN,o[t]),r[t].y+r[t].height>a&&s.x<i&&s.x+s.width>e&&(a=r[t].y+r[t].height),o[t].y+o[t].height>a&&l.x<i&&l.x+l.width>e&&(a=o[t].y+o[t].height);return a})(t,i,r);return s>e.bl.y&&(n={tl:{x:i,y:e.bl.y},tr:{x:r,y:e.bl.y},br:{x:r,y:s},bl:{x:i,y:s}}),{topWorkSpaceCo:o,bottomWorkSpaceCo:n}},it=(t,e,i=!1)=>{const r=T(t),o=u(t),n=r.length,s=new Array(n);let l,a=0;for(let t=0;t<n;t++)l=ot(o.MARGIN,r[t]),V(e,l)&&!S(e,l)&&(s[a++]=i?t:r[t]);return s.length=a,s},rt=(t,e,i,r,o,n,s,l=!1)=>{const a=T(t),d=u(t),c={tl:{...(null==i?void 0:i.tl)?i.tl:e.tl},tr:{...(null==i?void 0:i.tr)?i.tr:e.tr},br:{...e.br},bl:{...e.bl}},h=j(c),m=j(r),b=j(o),I=s.filter(t=>!n[t]),w=a.length,y=new Array(w);let g=0;const x=new Array(w);let p=0;for(let t=0;t<w;t++){const e=ot(d.MARGIN,a[t]);V(b,e)&&(n[t]||V(h,e)||V(m,e)&&!U(m,e)?x[p++]=l?t:a[t]:V(m,e)&&U(m,e)&&!n[t]&&(y[g++]=t,a[t].x=void 0,a[t].y=void 0))}return x.length=p,y.length=g,{updatedItemsToArrange:[...I,...y],itemsInWorkSpace:x}},ot=(t,e)=>{const i={...e};return i.x-=t,i.y-=t,i.width+=2*t,i.height+=2*t,i},nt=(t,e)=>t.d.rect.x===e.d.rect.x?t.d.rect.y-e.d.rect.y:t.d.rect.x-e.d.rect.x,st=(t,e)=>t.d.rect.y===e.d.rect.y?t.d.rect.x-e.d.rect.x:t.d.rect.y-e.d.rect.y,lt=function(t){return(e,i,r)=>{if(o=k(t),n=k(e.d.rect),(null==o||null===(s=o.tl)||void 0===s?void 0:s.x)&&(null==o||null===(l=o.tr)||void 0===l?void 0:l.x)&&(null==n||null===(a=n.tl)||void 0===a?void 0:a.x)&&(null==o||null===(d=o.tr)||void 0===d?void 0:d.x)&&!(o.tl.x>=n.tr.x||n.tl.x>=o.tr.x)&&!Y(k(t),k(e.d.rect)))return!0;var o,n,s,l,a,d}},at=function(t){return(e,i,r)=>{if(V(t,e.d.rect))return!0}},dt=function(t){return(e,i,r)=>{if(V(t,e.d.rect)||((t,e)=>{try{if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height)||isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return null;const i={x:t.x,y:t.y},r={x:t.x+t.width,y:t.y+t.height},o={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y+e.height};return!(i.x>n.x||o.x>r.x)&&(!(i.y>n.y||o.y>r.y)&&!1===V(t,e))}catch(t){return null}})(t,e.d.rect))return!0}},ct=function(t,e){return(i,r,o)=>{if(U(i.d.rect,t)&&i.d!==e)return!0}},ut=(t,e)=>(t.width+t.height)/e,ht=(t,e,i)=>{if(void 0===i)return t[0];const r=t.length;let o,n=Number.MAX_SAFE_INTEGER;const s={x:i.x,y:i.y},l={x:0,y:0};let a;for(let e=0;e<r;e++)l.x=t[e].d.rect.x,l.y=t[e].d.rect.y,o=B(s,l),o<n&&(a=t[e],n=o);return a||t[0]},mt=(t,e,i)=>{const r=T(t),o=e.length;for(let t=0;t<o;t++)r[e[t]].y+=i},bt=function(t,e,i){const r=p(t),o=w(t),n=r.length;for(let t=0;t<n;t++)r[t].y>=e&&(r[t].y-=i,o.$limberGridViewItems[t].style.transform="translate("+r[t].x+"px, "+r[t].y+"px)")},It=function(t,e,i,r,o){const n=u(t),s=p(t);var l={x:e-n.MARGIN,y:i-n.MARGIN,width:r+2*n.MARGIN,height:o+2*n.MARGIN};if(e<0||i<0)return!1;if("number"!=typeof r||"number"!=typeof o)return!1;if(e+r>n.WIDTH)return!1;if(r<50||o<50)return!1;let a;const d=s.length;for(let t=0;t<d;t++)if(a=V(ot(n.MARGIN,s[t]),l)||S(ot(n.MARGIN,s[t]),l),a)return!1;return!0},wt=function(t,e,i,r,o){const n=u(t),s=p(t),l={x:0,y:i,width:n.WIDTH,height:o};if("number"!=typeof r||"number"!=typeof o)return!1;let a,d=i+o,c=i,h=!1;const m=s.length;for(let t=0;t<m;t++){if(U(l,ot(n.MARGIN,s[t])))return!1;if(a=V(l,ot(n.MARGIN,s[t]))||S(l,ot(n.MARGIN,s[t])),a){h=!0;const e={x:s[t].x,y:s[t].y-n.MARGIN},i={x:s[t].x,y:s[t].y+s[t].height+n.MARGIN};s[t].y-n.MARGIN<d&&(H(l,e)||$(l,e))&&(d=s[t].y-n.MARGIN),s[t].y+s[t].height+n.MARGIN>c&&(H(l,i)||$(l,i))&&(c=s[t].y+s[t].height+n.MARGIN)}}return h?d-c>0&&{y:c,shiftHeight:d-c}:{y:i,shiftHeight:o}},yt=t=>{let e,i;const r=t.length;for(let o=0;o<r;o++)i=Math.floor(Math.random()*(o+1)),e=t[o],t[o]=t[i],t[i]=e;return t};var gt=function(t,e){return t.store.variables.trees[e]};var xt=function(t,e){return t.store.variables.stacks[e]};const pt=(t,e,i)=>{let r,o;const n={integrateTop:!1,integrateBottom:!1},s=gt(t,"it");if(e){r=it(t,j(e));const i=vt(e,r,s);i<e.bl.y&&(e.tl.y=i,e.tr.y=i,n.integrateTop=!0)}if(i){o=it(t,j(i));const e=Tt(i,o,s);e>i.tl.y&&(i.bl.y=e,i.br.y=e,n.integrateBottom=!0)}return n},vt=(t,e,i)=>{i.reset();const r=e.length;for(let t=0;t<r;t++)i.insert({low:e[t].y,high:e[t].y+e[t].height,d:{id:-1,rect:e[t]}});let o,n=t.bl.y;for(let s=0;s<r;s++)o=i.findAll({low:e[s].y+e[s].height,high:t.bl.y},null,null,lt(e[s]),!0),!o.length&&e[s].y+e[s].height<n&&(n=e[s].y+e[s].height);return n},Tt=(t,e,i)=>{i.reset();const r=e.length;for(let t=0;t<r;t++)i.insert({low:e[t].y,high:e[t].y+e[t].height,d:{id:-1,rect:e[t]}});let o,n=t.tl.y;for(let s=0;s<r;s++)o=i.findAll({low:t.tl.y,high:e[s].y},null,null,lt(e[s]),!0),!o.length&&e[s].y>n&&(n=e[s].y);return n},At=(t,e,i,r,o)=>{const n=u(t),s=gt(t,"it");let l,a;s.reset(),s.insert({low:i.tl.x,high:i.tr.x,d:{id:o.idCount++,rect:e}});const d={low:0,high:0};let c,h,m=0,b=0;const I=r.length;for(let t=0;t<I;t++){l=k(r[t]),a=ot(n.MARGIN,r[t]),d.low=l.tl.x,d.high=l.tr.x,c=s.findAll(d,null,null,at(a)),m=c.length;for(let t=0;t<m;t++){h=O(c[t].d.rect,a,!0),s.remove(c[t].interval,c[t].d),b=h.length;for(let t=0;t<b;t++)s.insert({low:h[t].tl.x,high:h[t].tr.x,d:{id:o.idCount++,rect:j(h[t])}})}}return{it:s}},Dt=(t,e,i)=>{let r="x",o="width";"y"===i&&(r="y",o="height");const n=t.findAll({low:e.d.rect[r],high:e.d.rect[r]+e.d.rect[o]},null,null,(s=e.d.rect,(t,e,i)=>{if(Y(k(s),k(t.d.rect))||U(t.d.rect,s))return!0}),!0);var s;const l=(null==n?void 0:n.length)||0;return l||t.insert({low:e.d.rect[r],high:e.d.rect[r]+e.d.rect[o],d:e.d}),!!l},ft=(t,e,i,r,o)=>{let n=!1;for(;!e.isEmpty();){const t=e.pop();n=!1;const s=i.findAll(t.interval,null,null,dt(t.d.rect)),l=(null==s?void 0:s.length)||0;if(l>0){for(let e=0;e<l;e++){const l=s[e],a=X(l.d.rect,t.d.rect);if(1===a.length){const e=a[0];U(e,l.d.rect)&&i.remove(l.interval,l.d),U(e,t.d.rect)&&(n=!0);const s={d:{id:r.idCount++,rect:e}};Dt(i,s,o)}}!1===n&&Dt(i,{d:t.d},o)}else i.insert({...t.interval,d:t.d})}},Gt=t=>{const e=t.getSortedData(),i=e.length;for(let r=0;r<i;r++){const i=e[r],o=t.findAll(i.interval,null,null,ct(i.d.rect,i.d),!0);(null==o?void 0:o.length)&&t.remove(i.interval,i.d)}},Et=async(t,e,i,r)=>{let o;const n=xt(t,"stack");Array.isArray(e)?(yt(e),n.setData(e.sort(nt)),o=gt(t,"it"),o.reset()):(yt(r),n.setData(r.sort(nt)),o=e),ft(0,n,o,i,"x"),Gt(o);const s=o.getSortedData();yt(s);const l=s.length;for(let t=0;t<l;t++)s[t].interval.low=s[t].d.rect.y,s[t].interval.high=s[t].d.rect.y+s[t].d.rect.height;n.setData(s.sort(st)),o.reset(),ft(0,n,o,i,"y"),Gt(o);const a=o.getSortedData();o.reset(),yt(a);const d=a.length;for(let t=0;t<d;t++)o.insert({low:a[t].d.rect.x,high:a[t].d.rect.x+a[t].d.rect.width,d:a[t].d});return{mergedRectsIt:o}},_t=async(t,e,i,r,o,n,s)=>{const l=T(t),a=p(t),d=u(t),c={},h={};let m=i.getSortedData();const b=e.length,I=xt(t,"itemsToArrangeStack");I.empty();const w=((t,e)=>{const i=T(t),r=e.length;let o,n,s=0,l=0,a=0;for(let t=0;t<r;t++)o=i[e[t]],o.width>l&&(l=o.width),o.height>s&&(s=o.height);a=l+s;const d=new Array(r);for(let t=0;t<r;t++)o=i[e[t]],n=ut(o,a),d[t]={score:n,d:e[t]};return d.sort((t,e)=>t.score-e.score),d})(t,e);for(let t=0;t<b;t++)I.push(w[t]);let y,g,x;const v=xt(t,"resStack"),A=xt(t,"garbageStack");for(;!I.isEmpty();){v.empty(),y=I.pop(),g=l[y.d],x=a[y.d];let e=ot(d.MARGIN,g);const r=m.length;for(let t=0;t<r;t++){const i=m[t].d.rect;i.width>=e.width&&i.height>=e.height&&v.push(m[t])}if(v.isEmpty())continue;const n=ht(v.getData(),(g.width,g.height),x);g.x=n.d.rect.x+d.MARGIN,g.y=n.d.rect.y+d.MARGIN,c[y.d]=g,o&&U(o,n.d.rect)&&(h[y.d]=y.d),A.empty();const u=i.findAll(n.interval),b=u.length;e=ot(d.MARGIN,g);for(let t=0;t<b;t++){const r=u[t],o=O(r.d.rect,e),n=(null==o?void 0:o.length)||0;for(let t=0;t<n;t++)A.push({interval:{low:o[t].x,high:o[t].x+o[t].width},d:{id:s.idCount++,rect:o[t]}});n&&i.remove(r.interval,r.d)}const{mergedRectsIt:w}=await Et(t,i,s,A.getData());m=(i=w).getSortedData()}return{arranged:c,itemsInBottomWorkSpace:h}},Ct=function(t){const e=t.options.isMobileCheck;return e?e():window.matchMedia("only screen and (max-width: 980px) and (min-width : 1px) and (orientation: portrait)").matches||window.matchMedia("only screen and (max-width: 979px) and (min-width : 1px) and (orientation: landscape)").matches},Rt=(t,e=6)=>Math.trunc(t*Math.pow(10,e))/Math.pow(10,e),Nt=(t=22)=>{const e=new Array(t);for(let i=0;i<t;i++)e[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return e.join("")},Mt=t=>new Promise((e,i)=>{setTimeout(e,t)}),Ht=async(t,e,i,r)=>{const o=u(t),n=T(t),s=performance.now(),l={idCount:0},{minY:a,maxY:d}=tt(t,e,void 0,void 0,i,r),c=new Array(e.length-1),h=e.length-1;for(let t=0;t<h;t++)c[t]=e[t];const m={tl:{x:0,y:a},tr:{x:o.WIDTH,y:a},br:{x:o.WIDTH,y:d},bl:{x:0,y:d}},b={tl:{...m.tl},tr:{...m.tr},br:{...m.br},bl:{...m.bl}},{topWorkSpaceCo:I,bottomWorkSpaceCo:w}=et(t,m,0,o.WIDTH),y=pt(t,I,w);y.integrateTop&&(b.tl={...I.tl},b.tr={...I.tr}),y.integrateBottom&&(b.br={...w.br},b.bl={...w.bl});let g=it(t,j(w),!0);const x=((t,e,i=!1)=>{const r=T(t),o=u(t);if(!e)return[];const n=r.length,s=new Array(n);let l,a=0;for(let t=0;t<n;t++)l=ot(o.MARGIN,r[t]),(e.bl.y<=l.y||Math.abs(e.bl.y-l.y)<.1)&&(s[a++]=i?t:r[t]);return s.length=a,s})(t,w,!0);let p=j(b),v=it(t,p);const A=(o.DEFINED_MIN_HEIGHT_AND_WIDTH-2*o.MARGIN)/2;let D=0,f={},G=0,E=0;for(;G!==h;){await Mt(0);const{it:e}=At(t,p,b,v,l),i=e.getSortedData();await Mt(0);const{mergedRectsIt:r}=await Et(t,i,l);await Mt(0);const{arranged:o,itemsInBottomWorkSpace:n}=await _t(t,c.filter(t=>!f[t]),r,j(I),j(w),0,l);g=[...g,...Object.keys(n)],f={...f,...o};const s=Object.values(o);if(v=[...v,...s],G+=s.length,G!==h&&(E++,m.br.y+=A,m.bl.y+=A,w&&(w.tl.y+=A,w.tr.y+=A,w.br.y+=A,w.bl.y+=A),b.br.y+=A,b.bl.y+=A,p=j(b),mt(t,g,A)),D++,D>1e3)throw"Arrange time out"}if(E>0){mt(t,x,A*E);let e=g.length;for(let t=0;t<e;t++)f[g[t]]=n[g[t]];e=x.length;for(let t=0;t<e;t++)f[x[t]]=n[x[t]]}const _=performance.now();return console.log("p1: ",s),console.log("p2: ",_),console.log("workSpaceResizeCount",E),console.log("arrange total: ",_-s),f},$t=async(t,e,i,r)=>{const o=u(t),n=performance.now(),s={idCount:0},{minX:l,maxX:a,minY:d,maxY:c}=tt(t,e,r,i,void 0,void 0);let h=new Array(e.length-1),m=e.length-1;for(let t=0;t<m;t++)h[t]=e[t];const b={tl:{x:0,y:d},tr:{x:o.WIDTH,y:d},br:{x:o.WIDTH,y:c},bl:{x:0,y:c}},I={tl:{...b.tl},tr:{...b.tr},br:{...b.br},bl:{...b.bl}},{topWorkSpaceCo:w,bottomWorkSpaceCo:y}=et(t,b,0,o.WIDTH),g=pt(t,w,y);g.integrateTop&&(I.tl={...w.tl},I.tr={...w.tr}),g.integrateBottom&&(I.br={...y.br},I.bl={...y.bl});const x={tl:{x:l,y:d},tr:{x:a,y:d},br:{x:a,y:c},bl:{x:l,y:c}},p={tl:{...x.tl},tr:{...x.tr},br:{...x.br},bl:{...x.bl}},{topWorkSpaceCo:v,bottomWorkSpaceCo:T}=et(t,x,l,a);pt(t,v).integrateTop&&(p.tl={...v.tl},p.tr={...v.tr}),T&&(p.br={...T.br},p.bl={...T.bl});const A=j(I);let D=it(t,A),f=j(p);const G=2*o.DEFINED_MIN_HEIGHT_AND_WIDTH;let E=0,_={},C=0,R=0;for(;C!==m;){let e;if(0===E){await Mt(0);const{it:i}=At(t,A,I,D,s);e=i}else{if(1===E){const{itemsInWorkSpace:e,updatedItemsToArrange:i}=rt(t,x,v,T,p,_,h);D=e,h=i,m=i.length+C,E++;continue}if(E>=2){await Mt(0);const{it:i}=At(t,f,p,D,s);e=i}}const i=e.getSortedData();await Mt(0);const{mergedRectsIt:r}=await Et(t,i,s);await Mt(0);const{arranged:o}=await _t(t,h.filter(t=>!_[t]),r,j(w),j(y),0,s);_={..._,...o};const n=Object.values(o);if(D=[...D,...n],C+=n.length,C!==m&&E>=2&&(R++,p.br.y+=G,p.bl.y+=G,f=j(p)),E++,E>1e3)throw"Arrange time out"}const N=performance.now();return console.log("p1: ",n),console.log("p2: ",N),console.log("workSpaceResizeCount",R),console.log("arrange total: ",N-n),_},Vt=async(t,e,i)=>{const r=u(t),o=performance.now(),n={idCount:0},s=r.WIDTH,l=i,a=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,d=e.length,c={tl:{x:0,y:l},tr:{x:s,y:l},br:{x:s,y:a},bl:{x:0,y:a}},h={tl:{...c.tl},tr:{...c.tr},br:{...c.br},bl:{...c.bl}},{topWorkSpaceCo:m}=et(t,c,0,r.WIDTH);pt(t,m).integrateTop&&(h.tl={...m.tl},h.tr={...m.tr});let b=j(h),I=it(t,b);const w=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let y=0,g={},x=0,p=0;for(;x!==d;){await Mt(0);const{it:i}=At(t,b,h,I,n),r=i.getSortedData();await Mt(0);const{mergedRectsIt:o}=await Et(t,r,n);await Mt(0);const{arranged:s}=await _t(t,e.filter(t=>!g[t]),o,j(m),void 0,0,n);g={...g,...s};const l=Object.values(s);if(I=[...I,...l],x+=l.length,x!==d&&(p++,c.br.y+=w,c.bl.y+=w,h.br.y+=w,h.bl.y+=w,b=j(h)),y++,y>1e4)throw"Arrange time out"}const v=performance.now();return console.log("p1: ",o),console.log("p2: ",v),console.log("workSpaceResizeCount",p),console.log("arrange total: ",v-o),g},St=function(t,e,i){t.store.variables.status[e]=i},Ot=function(t,e){return t.store.variables.status[e]};var Lt=function(t,e){return t.store.constants.messages[e]};const Pt=async function(t,e,i){const r=p(this),o=w(this),n=A(this),s=m(this);if(t=parseInt(t),s.LATCH_MOVED_ITEM){const t=Ot(this,"resizeDemo");i=(null==t?void 0:t.height)||i,e=(null==t?void 0:t.width)||e}q(this,t,e,i),v(this,r);const l=T(this);l[t].width=e,l[t].height=i;const a={x:r[t].x,y:r[t].y,width:e,height:i},d=F(this,a,t);let c;c=s.USE_VERTICAL_ARR_ON_RESIZE?await $t(this,d,a.y+a.height,a.x+a.width):await Ht(this,d),x(this,l),o.$limberGridViewItems[t].style.width=l[t].width+"px",o.$limberGridViewItems[t].style.height=l[t].height+"px";const u=Object.keys(c),h=u.length;for(let t=0;t<h;t++){const e=u[t],i=c[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.resizeComplete(t,e,i,u)},Wt=async function(t,e,i){var r;const o=p(this),n=w(this),s=m(this);let l;t=parseInt(t),s.LATCH_MOVED_ITEM&&(l=((t,e,i,r)=>{const o=p(t),n=u(t),s=o.length,l={x:0,y:0,height:0,width:0},a=o[r].x,d=o[r].y,c={x:o[r].x+e,y:o[r].y},h={x:o[r].x+e,y:o[r].y+i},m={x:o[r].x,y:o[r].y+i};let b,I,w,y,g,x,v,T,A,D,f,G,E,_=Number.MAX_SAFE_INTEGER,C=Number.MAX_SAFE_INTEGER,R=Number.MAX_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,M=!1;for(let t=0;t<s;t++)l.x=o[t].x,l.y=o[t].y,l.width=o[t].width,l.height=o[t].height,t!==r&&(b={x:l.x,y:l.y+l.height},I={x:l.x+l.width,y:l.y+l.height},w={x:l.x+l.width,y:l.y},g=B(b,h),y=B(I,m),x=B(I,c),v=B(w,h),g<C&&g<_&&h.x<b.x&&Math.abs(h.y-b.y)<=n.MIN_HEIGHT_AND_WIDTH/10&&h.x+n.MARGIN<=n.WIDTH&&(i=b.y-c.y,C=g,M=!0,T=t,A="right",f=b),y<_&&y<C&&m.x>I.x&&Math.abs(m.y-I.y)<=n.MIN_HEIGHT_AND_WIDTH/10&&h.x+n.MARGIN<=n.WIDTH&&(i=I.y-d,_=y,M=!0,T=t,A="left",f=I),x<R&&x<N&&x<=n.WIDTH/4&&Math.abs(c.x-I.x)<=n.MIN_HEIGHT_AND_WIDTH/10&&(e=I.x-a,R=x,M=!0,T=t,D="top",G=I),v<N&&v<R&&v<=n.WIDTH/4&&Math.abs(h.x-w.x)<=n.MIN_HEIGHT_AND_WIDTH/10&&(e=w.x-m.x,N=v,M=!0,T=t,D="bottom",G=w));return f&&G?E={x:G.x,y:f.y}:f?E=f:G&&(E=G),{height:i,width:e,isToAdjPresent:M,toAdjIndex:T,hToAdjDirection:A,wToAdjDirection:D,latchPoint:E}})(this,e,i,t),St(this,"resizeDemo",l),i=l.height,e=l.width),(null===(r=l)||void 0===r?void 0:r.isToAdjPresent)?n.$limberGridViewCrossHairGuide.style.transform=`translate(${l.latchPoint.x-s.CROSS_HAIR_WIDTH/2}px, ${l.latchPoint.y-s.CROSS_HAIR_HEIGHT/2}px)`:n.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*s.CROSS_HAIR_WIDTH}px, -${2*s.CROSS_HAIR_HEIGHT}px)`,q(this,t,e,i),Q(this),v(this,o);const a=T(this);a[t].width=e,a[t].height=i;const d={x:o[t].x,y:o[t].y,width:e,height:i},c=F(this,d,t);let h;h=s.USE_VERTICAL_ARR_ON_RESIZE?await $t(this,c,d.y+d.height,d.x+d.width):await Ht(this,c);const b=Object.keys(h),I=b.length;for(let t=0;t<I;t++){const e=b[t],i=h[e];n.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},kt=async function(t,e,i){const r=p(this),o=w(this),n=A(this),s=m(this);if(t=parseInt(t),s.LATCH_MOVED_ITEM){const r=Ot(this,"moveDemo");if(null==r?void 0:r.latchingAdjacent)e=r.adjustedPt.toAdj.toX,i=r.adjustedPt.toAdj.toY;else if(r)e=r.adjustedPt.to.toX,i=r.adjustedPt.to.toY;else{const r=J(this,e,i,t);e=r.to.toX,i=r.to.toY}}K(this,t,e,i),v(this,r);const l=T(this);l[t].x=e,l[t].y=i;const a={x:e,y:i,width:r[t].width,height:r[t].height},d=Z(this,a,t),c=await Ht(this,d,i,i+r[t].height);x(this,l),o.$limberGridViewItems[t].style.transform=`translate(${l[t].x}px, ${l[t].y}px)`,s.ANIMATE_MOVED_ITEM||(o.$limberGridViewItems[t].style.transition="none",setTimeout(()=>{o.$limberGridViewItems[t].style.transition=""},s.ANIMATE_TIME));const u=Object.keys(c),h=u.length;for(let t=0;t<h;t++){const e=u[t],i=c[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}n.resizeComplete&&n.moveComplete(t,e,i,u)},jt=async function(t,e,i){const r=p(this),o=w(this),n=m(this);if(t=parseInt(t),n.LATCH_MOVED_ITEM){var s,l,a,d;const c=J(this,e,i,t);let u=Ot(this,"moveDemo");if(!isNaN(null===(s=u)||void 0===s||null===(l=s.adjustedPt)||void 0===l?void 0:l.overlappedItemIndex)&&H(r[u.adjustedPt.overlappedItemIndex],{x:e,y:i})){u={...u,adjustedPt:c};let t=!1;!u.latchingAdjacent&&u.adjustedPt.isToAdjPresent?(e=u.adjustedPt.toAdj.toX,i=u.adjustedPt.toAdj.toY,t=!0):(e=u.adjustedPt.to.toX,i=u.adjustedPt.to.toY),St(this,"moveDemo",{...u,latchingAdjacent:t})}else{let t=!1;isNaN(c.overlappedItemIndex)&&c.isToAdjPresent?(e=c.toAdj.toX,i=c.toAdj.toY,t=!0):(e=c.to.toX,i=c.to.toY),St(this,"moveDemo",{adjustedPt:c,latchingAdjacent:t})}u=Ot(this,"moveDemo"),isNaN(null===(a=u)||void 0===a||null===(d=a.adjustedPt)||void 0===d?void 0:d.overlappedItemIndex)||(o.$limberGridViewMoveGuide.style.transform="translate("+r[u.adjustedPt.overlappedItemIndex].x+"px, "+r[u.adjustedPt.overlappedItemIndex].y+"px)",o.$limberGridViewMoveGuide.style.width=r[u.adjustedPt.overlappedItemIndex].width+"px",o.$limberGridViewMoveGuide.style.height=r[u.adjustedPt.overlappedItemIndex].height+"px",o.$limberGridViewMoveGuide.classList.add("limber-grid-view-move-guide-active"),u.latchingAdjacent?o.$limberGridViewMoveGuide.innerHTML=Lt(this,"latchedMoveDemo2"):o.$limberGridViewMoveGuide.innerHTML=Lt(this,"latchedMoveDemo1")),u.latchingAdjacent?o.$limberGridViewCrossHairGuide.style.transform=`translate(${e-n.CROSS_HAIR_WIDTH/2}px, ${i-n.CROSS_HAIR_HEIGHT/2}px)`:o.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*n.CROSS_HAIR_WIDTH}px, -${2*n.CROSS_HAIR_HEIGHT}px)`}K(this,t,e,i),Q(this),v(this,r);const c=T(this);c[t].x=e,c[t].y=i;const u={x:e,y:i,width:r[t].width,height:r[t].height},h=Z(this,u,t),b=await Ht(this,h,i,i+r[t].height),I=Object.keys(b),y=I.length;for(let t=0;t<y;t++){const e=I[t],i=b[e];o.$limberGridViewItems[e].style.transform=`translate(${i.x}px, ${i.y}px)`}},zt=t=>t.store.variables.bindedFunctions,Xt=function(t){return t.store.variables.eventSpecific.itemInteraction},Ut=function(t){return t.store.variables.eventSpecific.deskInteraction},Yt=function(t){const e=w(this),i=m(this),r=p(this),o=Xt(this),n=zt(this),s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!1,document.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),clearTimeout(o.longPressCheck),o.longPressCheck=setTimeout(Ft.bind(this,t),i.MOUSE_DOWN_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.mouseDownCancel=!1,o.mouseDownTimerComplete=!0,e.$limberGridView.addEventListener("mousemove",n.onItemMouseMove),document.addEventListener("mouseup",n.onItemMouseUp),document.addEventListener("contextmenu",n.onItemContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,R(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Bt=function(t){const e=w(this),i=m(this),r=p(this),o=Xt(this),n=zt(this);if(1!==t.touches.length)return void ee.call(this,t);if(!1===G(this,t))return;const s=C(this,t);s&&(Object.assign(o.userActionData,s),"move"===o.userActionData.type?(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!1,document.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.longTouchCheck=setTimeout(Zt.bind(this,t),i.TOUCH_HOLD_TIME),t.preventDefault()):"resize"===o.userActionData.type&&(o.touchHoldCancel=!1,o.touchHoldTimerComplete=!0,e.$limberGridView.addEventListener("touchmove",n.onItemTouchMove),document.addEventListener("touchend",n.onItemTouchEnd),document.addEventListener("touchcancel",n.onItemTouchCancel),document.addEventListener("contextmenu",n.onItemTouchContextMenu),o.userActionData.itemX=r[o.userActionData.itemIndex].x,o.userActionData.itemY=r[o.userActionData.itemIndex].y,R(this,o.userActionData),t.preventDefault()),t.stopPropagation())},Ft=function(t){const e=Xt(this);!1===e.mouseDownCancel&&(e.mouseDownTimerComplete=!0,N(this,e.userActionData,t))},Zt=function(t){const e=Xt(this);!1===e.touchHoldCancel&&(e.touchHoldTimerComplete=!0,N(this,e.userActionData,t))},qt=function(t){const e=w(this),i=u(this),r=m(this),o=Xt(this);if(!0===o.mouseDownTimerComplete)if("move"===o.userActionData.type){M(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const e=D(this,t);if(!1!==e){const t=e.y;y(this,t),o.showMoveDemoTimeOutVariable=setTimeout(re.bind(this,o.userActionData.itemIndex,e),r.DEMO_WAIT_TIME)}}else{M(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.itemX,a=o.userActionData.itemY,d=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-a+n-i.PADDING_TOP;o.userActionData.newWidth=d,o.userActionData.newHeight=c;const u=t.offsetY+n;y(this,u),d>0&&c>0&&(e.$limberGridViewPseudoItem.style.width=d+"px",e.$limberGridViewPseudoItem.style.height=c+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),o.showResizeDemoTimeOutVariable=setTimeout(oe.bind(this,o.userActionData.itemIndex,d,c),r.DEMO_WAIT_TIME)}else o.mouseDownCancel=!0,te.call(this,t);t.preventDefault(),t.stopPropagation()},Kt=function(t){const e=w(this),i=u(this),r=m(this),o=Xt(this);if(!0===o.touchHoldTimerComplete&&1===t.touches.length)if("move"===o.userActionData.type){M(this,o.userActionData,t,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const n=f(this,t);if(!1!==n){const t=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=e.$limberGridView.getBoundingClientRect(),a=(e.$limberGridView.offsetWidth,l.left,e.$limberGridView.offsetHeight-l.top),d=(n.x,i.PADDING_LEFT,n.y+i.PADDING_TOP-t),c=n.y;y(this,c);!0!==g(this,d,a)&&(o.showMoveDemoTimeOutVariable=setTimeout(re.bind(this,o.userActionData.itemIndex,n),r.DEMO_WAIT_TIME))}}else{M(this,o.userActionData,t,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const n=o.userActionData.itemX,s=o.userActionData.itemY,l=f(this,t),a=l.x-n,d=l.y-s;if(!1!==l&&(o.userActionData.newWidth=a,o.userActionData.newHeight=d,a>0&&d>0&&(e.$limberGridViewPseudoItem.style.width=a+"px",e.$limberGridViewPseudoItem.style.height=d+"px",e.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(a)}px, h: ${parseInt(d)}px`))),!1!==l){const t=e.$limberGridView.scrollTop,n=e.$limberGridView.scrollLeft,s=e.$limberGridView.getBoundingClientRect(),c=(e.$limberGridView.offsetWidth,s.left,e.$limberGridView.offsetHeight-s.top),u=(l.x,i.PADDING_LEFT,l.y+i.PADDING_TOP-t),h=l.y;y(this,h);!0!==g(this,u,c)&&(o.showResizeDemoTimeOutVariable=setTimeout(oe.bind(this,o.userActionData.itemIndex,a,d),r.DEMO_WAIT_TIME))}}else o.touchHoldCancel=!0,ee.call(this,t);t.stopPropagation()},Qt=async function(t){const e=Xt(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.mouseDownTimerComplete)if("move"===e.userActionData.type){const r=D(this,t);var i={};try{if(!1===r)throw"Mouse position outside grid area.";await kt.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),ne(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Pt.call(this,e.userActionData.itemIndex,r,o)}catch(t){ne(this)}else e.mouseDownCancel=!0;te.call(this,t),e.userActionData={}},Jt=async function(t){const e=Xt(this);if(clearTimeout(e.showMoveDemoTimeOutVariable),clearTimeout(e.showResizeDemoTimeOutVariable),!0===e.touchHoldTimerComplete&&0===t.touches.length)if("move"===e.userActionData.type){const r=f(this,t);var i={};try{if(!1===r)throw"Touch position outside grid area.";await kt.call(this,e.userActionData.itemIndex,r.x,r.y),i.x=r.x,i.y=r.y}catch(t){console.error(t),ne(this)}}else try{var r=e.userActionData.newWidth,o=e.userActionData.newHeight;await Pt.call(this,e.userActionData.itemIndex,r,o)}catch(t){ne(this)}else e.touchHoldCancel=!0;ee.call(this,t),t.stopPropagation(),e.userActionData={}},te=function(t){const e=w(this),i=Xt(this),r=zt(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((t,e)=>{const i=w(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let t=0;t<r;t++)i.$limberGridViewItems[t].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((t,e)=>{const i=w(t),r=m(t);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[e.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(0px, 0px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing"),i.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*r.CROSS_HAIR_WIDTH}px, -${2*r.CROSS_HAIR_HEIGHT}px)`})(this,i.userActionData),w(this).$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),ne(this),document.removeEventListener("mousemove",r.onItemMouseMove),e.$limberGridView.removeEventListener("mousemove",r.onItemMouseMove),document.removeEventListener("mouseup",r.onItemMouseUp),document.removeEventListener("contextmenu",r.onItemContextMenu),document.removeEventListener("touchmove",r.onItemTouchMove),e.$limberGridView.removeEventListener("touchmove",r.onItemTouchMove),document.removeEventListener("touchend",r.onItemTouchEnd),document.removeEventListener("contextmenu",r.onItemTouchContextMenu),document.removeEventListener("touchcancel",r.onItemTouchCancel),i.userActionData={},St(this,"moveDemo",void 0),St(this,"resizeDemo",void 0);gt(this,"it").emptyTree(),t.preventDefault(),t.stopPropagation()},ee=function(t){te.call(this,t)},ie=function(t){te.call(this,t)},re=async function(t,e){const i=w(this);try{if(!1===e)throw"Invalid mouse position.";await jt.call(this,t,e.x,e.y),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-disallow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-allow")}catch(t){console.error(t),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow"),i.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-move-disallow")}},oe=async function(t,e,i){const r=w(this);try{await Wt.call(this,t,e,i),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-allow")}catch(t){console.error(t),r.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resize-disallow")}},ne=function(t){const e=w(t),i=p(t),r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].style.transform=`translate(${i[t].x}px, ${i[t].y}px)`},se=t=>{const e=w(t),i=m(t);e.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const r=e.$limberGridViewItems.length;for(let t=0;t<r;t++)e.$limberGridViewItems[t].classList.add("limber-grid-view-item-resizing-state");e.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state"),"ADD"===i.DESK_INTERACTION_MODE?e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&e.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},le=function(){const t=_(this),e=w(this),i=A(this),r=zt(this);if(!0===t.editable){Ct(this)||!1!==t.enableInteractiveAddAndCut&&(e.$limberGridView.addEventListener("mousedown",r.onDeskMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridView.addEventListener("touchstart",r.onDeskTouchStart));for(var o=e.$limberGridViewItems.length,n=0;n<o;n++)Ct(this)||(e.$limberGridViewItems[n].addEventListener("mousedown",r.onItemMouseDown),!1!==t.enableTouchInteraction&&e.$limberGridViewItems[n].addEventListener("touchstart",r.onItemTouchStart)),i.onItemClickCallback&&e.$limberGridViewItems[n].addEventListener("click",r.onItemClick)}},ae=function(){const t=_(this),e=w(this),i=zt(this);if(!0===t.editable&&(void 0!==e.$limberGridView&&(e.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),e.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),void 0!==e.$limberGridViewItems)){const t=e.$limberGridViewItems.length;for(let r=0;r<t;r++)e.$limberGridViewItems[r].removeEventListener("mousedown",i.onItemMouseDown),e.$limberGridViewItems[r].removeEventListener("touchstart",i.onItemTouchStart),e.$limberGridViewItems[r].removeEventListener("click",i.onItemClick)}},de=function(){const t=w(this),e=zt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].addEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].addEventListener("touchstart",e.onItemTouchStart)}},ce=function(){const t=w(this),e=zt(this);if(void 0!==t.$limberGridViewItems){const i=t.$limberGridViewItems.length;for(let r=0;r<i;r++)t.$limberGridViewItems[r].removeEventListener("mousedown",e.onItemMouseDown),t.$limberGridViewItems[r].removeEventListener("touchstart",e.onItemTouchStart)}},ue=function(t,e=!0){const i=_(t),r=p(t),o=u(t),n=m(t),s=w(t),l=A(t);ae.call(t);const a=r.length;let d=1;e&&(d=o.WIDTH_SCALE_FACTOR);const c=new Array(a);let h;if(Ct(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";h=me(r);for(let e=0;e<a;e++){r[e].x*=d,r[e].y*=d,r[e].width*=d,r[e].height*=d,h[e].width=o.WIDTH,h[e].height=o.WIDTH/n.MOBILE_ASPECT_RATIO;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",h[e].index),i.style.width=h[e].width+"px",i.style.height=h[e].height+"px",c[e]=i}}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable");for(let e=0;e<a;e++){r[e].x*=d,r[e].y*=d,r[e].width*=d,r[e].height*=d;const i=document.createElement("div");i.setAttribute("class",t),i.setAttribute("data-index",e),i.style.transform=`translate(${r[e].x}px, ${r[e].y}px)`,i.style.width=r[e].width+"px",i.style.height=r[e].height+"px",c[e]=i}}const b=s.$limberGridViewItems.length;for(let t=0;t<b;t++)s.$limberGridView.removeChild(s.$limberGridViewItems[t]);for(let t=0;t<a;t++)s.$limberGridView.appendChild(c[t]);for(let e=0;e<a;e++){const i=c[e];if(Ct(t)){const r=l.renderContent(e,h[e].width,h[e].height);be(t,r,i)}else{const o=l.renderContent(e,r[e].width,r[e].height);be(t,o,i)}}I(t,[...s.$limberGridView.getElementsByClassName("limber-grid-view-item")]),le.call(t),l.renderComplete&&l.renderComplete()},he=async function(t,e){const i=_(t),r=w(t),o=A(t),n=u(t),s=m(t);ae.call(t);try{if(e.x&&e.y&&e.width&&e.height){let i=!1;if(i=It(t,e.x,e.y,e.width,e.height),!i)return!1;{const i=p(t);v(t,i);const r=T(t);r.push(e),x(t,r)}}else{if(!e.width||!e.height||e.x||e.y)return!1;{if(e.width>n.WIDTH)return!1;const i=p(t);v(t,i);const r=T(t),o=(t=>{const e=p(t),i=u(t);let r,o=i.MARGIN;const n=e.length;for(let t=0;t<n;t++)r=ot(i.MARGIN,e[t]),r.y+r.height>o&&(o=r.y+r.height);return o})(t);r.push({x:void 0,y:void 0,width:e.width,height:e.height});await Vt(t,[r.length-1],o);x(t,r)}}const l=p(t),a=l.length-1;let d;const c=document.createElement("div");if(Ct(t)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";c.setAttribute("class",t),c.setAttribute("data-index",a),c.style.width=n.WIDTH+"px",c.style.height=n.WIDTH/s.MOBILE_ASPECT_RATIO+"px",d=o.renderContent(a,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO,"isAdd")}else{let t="limber-grid-view-item";!0===i.editable&&(t="limber-grid-view-item limber-grid-view-item-editable"),c.setAttribute("class",t),c.setAttribute("data-index",a),c.style.transform=`translate(${l[a].x}px, ${l[a].y}px)`,c.style.width=l[a].width+"px",c.style.height=l[a].height+"px",d=o.renderContent(a,l[a].width,l[a].height,"isAdd")}r.$limberGridView.appendChild(c),be(t,d,c),I(t,[...r.$limberGridView.getElementsByClassName("limber-grid-view-item")]),o.addComplete&&o.addComplete(a)}catch(t){console.error(t)}le.call(t)},me=t=>{const e=t.length,i=new Array(e);for(let r=0;r<e;r++)i[r]={...t[r]},i[r].index=r;return i.sort((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y)},be=(t,e,i)=>{const r=A(t);"string"==typeof e?i.innerHTML=e:e instanceof Element?(i.innerHTML="",i.appendChild(e)):r.renderPlugin&&r.renderPlugin(e,i)},Ie=function(t){const e=w(this),i=m(this),r=Ut(this),o=zt(this);t.target.classList.contains("limber-grid-view")&&(t.stopPropagation(),r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(ye.bind(this,t,t.offsetX,t.offsetY),i.MOUSE_DOWN_TIME),e.$limberGridView.addEventListener("mousemove",o.onDeskMouseMove),document.addEventListener("mouseup",o.onDeskMouseUp),document.addEventListener("contextmenu",o.onDeskContextMenu))},we=function(t){const e=w(this),i=m(this),r=Ut(this),o=zt(this);t.target.classList.contains("limber-grid-view")&&1===t.touches.length&&(r.tapHoldCancel=!1,r.tapHoldTimerComplete=!1,e.$limberGridView.addEventListener("touchmove",o.onDeskTouchMove),document.addEventListener("touchend",o.onDeskTouchEnd),document.addEventListener("touchcancel",o.onDeskTouchCancel),document.addEventListener("contextmenu",o.onDeskTouchContextMenu),ce.call(this),clearTimeout(r.longTouchCheck),r.longTouchCheck=setTimeout(ge.bind(this,t),i.TOUCH_HOLD_TIME),t.stopPropagation())},ye=function(t,e,i){const r=w(this),o=u(this),n=Ut(this);if(!1===n.mouseDownCancel){n.mouseDownTimerComplete=!0;var s=r.$limberGridView.scrollTop,l=e+r.$limberGridView.scrollLeft-o.PADDING_LEFT,a=i+s-o.PADDING_TOP;n.userActionData={type:"add",addPositionX:l,addPositionY:a},r.$limberGridViewAddCutGuide.style.height="1px",r.$limberGridViewAddCutGuide.style.width="1px",r.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${a}px)`,r.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),se(this)}},ge=function(t){const e=w(this),i=Ut(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;var r=f(this,t),o=r.x,n=r.y;i.userActionData={type:"add",addPositionX:o,addPositionY:n};setTimeout(function(){e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")}.bind(this),500),e.$limberGridViewAddCutGuide.style.height="1px",e.$limberGridViewAddCutGuide.style.width="1px",e.$limberGridViewAddCutGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),se(this),e.$limberGridViewTouchHoldGuide.style.transform=`translate(${o}px, ${n}px)`,e.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),t.preventDefault()}},xe=function(t){const e=w(this),i=u(this),r=m(this),o=Ut(this);if(!0===o.mouseDownTimerComplete){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,a=o.userActionData.addPositionY,d=t.offsetX-l+s-i.PADDING_LEFT,c=t.offsetY-a+n-i.PADDING_TOP;o.userActionData.newWidth=d,o.userActionData.newHeight=c;const u=t.offsetY+n;y(this,u),d>0&&c>0&&(e.$limberGridViewAddCutGuide.style.width=d+"px",e.$limberGridViewAddCutGuide.style.height=c+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),o.addItemAllowCheckTimeOutVariable=setTimeout(Ge.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),r.DEMO_WAIT_TIME)):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Ee.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,d,c),r.DEMO_WAIT_TIME))}else fe.call(this,t);t.stopPropagation()},pe=function(t){const e=w(this),i=u(this),r=m(this),o=Ut(this);if(!0===o.tapHoldTimerComplete&&1===t.touches.length){e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const n=e.$limberGridView.scrollTop,s=e.$limberGridView.scrollLeft,l=o.userActionData.addPositionX,a=o.userActionData.addPositionY,d=f(this,t),c=d.x-l,u=d.y-a;if(!1!==d&&(o.userActionData.newWidth=c,o.userActionData.newHeight=u,c>0&&u>0&&(e.$limberGridViewAddCutGuide.style.width=c+"px",e.$limberGridViewAddCutGuide.style.height=u+"px",e.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(c)}px, h: ${parseInt(u)}px`))),!1!==d){const t=e.$limberGridView.getBoundingClientRect(),s=(e.$limberGridView.offsetWidth,t.left,e.$limberGridView.offsetHeight-t.top),l=(d.x,i.PADDING_LEFT,d.y+i.PADDING_TOP-n),a=d.y;y(this,a);const h=g(this,l,s);"ADD"===r.DESK_INTERACTION_MODE?(clearTimeout(o.addItemAllowCheckTimeOutVariable),!0!==h&&(o.addItemAllowCheckTimeOutVariable=setTimeout(Ge.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME))):"CUTSPACE"===r.DESK_INTERACTION_MODE&&(clearTimeout(o.cutSpaceAllowCheckTimeOutVariable),!0!==h&&(o.cutSpaceAllowCheckTimeOutVariable=setTimeout(Ee.bind(this,o.userActionData.addPositionX,o.userActionData.addPositionY,c,u),r.DEMO_WAIT_TIME)))}t.preventDefault()}else fe.call(this);t.stopPropagation()},ve=function(t){const e=w(this),i=m(this),r=Ut(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longPressCheck),!0===r.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;he(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=wt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&bt(this,t.y,t.shiftHeight)}}else r.mouseDownCancel=!0;fe.call(this),t.stopPropagation()},Te=function(t){const e=w(this),i=m(this),r=Ut(this);if(clearTimeout(r.addItemAllowCheckTimeOutVariable),clearTimeout(r.longTouchCheck),!0===r.tapHoldTimerComplete&&0===t.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(It(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight)){var o={x:r.userActionData.addPositionX,y:r.userActionData.addPositionY,width:r.userActionData.newWidth,height:r.userActionData.newHeight},n=e.$limberGridView.scrollTop;he(this,o),e.$limberGridView.scrollTop=n}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const t=wt(this,r.userActionData.addPositionX,r.userActionData.addPositionY,r.userActionData.newWidth,r.userActionData.newHeight);t&&bt(this,t.y,t.shiftHeight)}}else r.tapHoldCancel=!0;fe.call(this),t.stopPropagation()},Ae=function(t){fe.call(this)},De=function(t){t.preventDefault()},fe=function(t){const e=w(this),i=Ut(this),r=zt(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(t=>{const e=w(t);e.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=e.$limberGridViewItems.length;for(var r=0;r<i;r++)e.$limberGridViewItems[r].classList.remove("limber-grid-view-item-resizing-state");e.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state"),e.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),e.$limberGridViewHeightAdjustGuide.style.height="0px",e.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),e.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active")})(this),e.$limberGridView.removeEventListener("mousemove",r.onDeskMouseMove),document.removeEventListener("mouseup",r.onDeskMouseUp),document.removeEventListener("contextmenu",r.onDeskContextMenu),e.$limberGridView.removeEventListener("touchmove",r.onDeskTouchMove),document.removeEventListener("touchend",r.onDeskTouchEnd),document.removeEventListener("touchcancel",r.onDeskTouchCancel),document.removeEventListener("contextmenu",r.onDeskTouchContextMenu),de.call(this),i.userActionData={},t&&(t.preventDefault(),t.stopPropagation())},Ge=function(t,e,i,r){const o=w(this);!1===It(this,t,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Ee=function(t,e,i,r){const o=w(this);!1===wt(this,0,e,i,r)?(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(o.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),o.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},_e={ADD:!0,CUTSPACE:!0},Ce=async function(t,e,i){const r=w(t),o=u(t),n=p(t);if(!0===i||!(t=>{if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){if(!t[i]||isNaN(t[i].x)||t[i].x<0||isNaN(t[i].y)||t[i].y<0||isNaN(t[i].height)||t[i].height<=0||isNaN(t[i].width)||t[i].width<=0)return!1;if(!W(k(t[i])))return!1}return!0}return!1})(n)){console.warn("Auto-arranging"),v(t,n);const e=T(t),i=n.length,r=new Array(i);for(let t=0;t<i;t++)r[t]=t,e[t].x=void 0,e[t].y=void 0,e[t].width=e[t].width/o.WIDTH_SCALE_FACTOR||2*o.MIN_HEIGHT_AND_WIDTH,e[t].height=e[t].height/o.WIDTH_SCALE_FACTOR||2*o.MIN_HEIGHT_AND_WIDTH,n[t].x=void 0,n[t].y=void 0,n[t].width=n[t].width/o.WIDTH_SCALE_FACTOR||2*o.MIN_HEIGHT_AND_WIDTH,n[t].height=n[t].height/o.WIDTH_SCALE_FACTOR||2*o.MIN_HEIGHT_AND_WIDTH;s(t,o.GRID_WIDTH),l(t,o.GRID_HEIGHT),d(t,o.GRID_MARGIN),a(t,1),c(t,o.MIN_HEIGHT_AND_WIDTH),await Vt(t,r,o.MARGIN),x(t,e)}if(function(t,e){t.store.constants.privateConstants.PADDING_LEFT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-left"))),function(t,e){t.store.constants.privateConstants.PADDING_RIGHT=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-right"))),function(t,e){t.store.constants.privateConstants.PADDING_TOP=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-top"))),function(t,e){t.store.constants.privateConstants.PADDING_BOTTOM=e}(t,parseInt(window.getComputedStyle(r.$limberGridView,null).getPropertyValue("padding-bottom"))),s(t,r.$limberGridView.clientWidth-o.PADDING_LEFT-o.PADDING_RIGHT),l(t,r.$limberGridView.clientHeight-o.PADDING_TOP-o.PADDING_BOTTOM),e){const t=n.length;for(let e=0;e<t;e++)n[e].x/=o.WIDTH_SCALE_FACTOR,n[e].y/=o.WIDTH_SCALE_FACTOR,n[e].width/=o.WIDTH_SCALE_FACTOR,n[e].height/=o.WIDTH_SCALE_FACTOR;o.MARGIN/=o.WIDTH_SCALE_FACTOR,o.DEFINED_MIN_HEIGHT_AND_WIDTH/=o.WIDTH_SCALE_FACTOR}a(t,o.WIDTH/o.GRID_WIDTH),d(t,o.MARGIN*o.WIDTH_SCALE_FACTOR),c(t,o.DEFINED_MIN_HEIGHT_AND_WIDTH*o.WIDTH_SCALE_FACTOR)},Re=function(t){var e,i,r,o,n,s,l,a,d,c,u,m,b,I,w,y,g,x,p,v,T,A,D,f;(null==t||null===(e=t.gridData)||void 0===e?void 0:e.WIDTH)&&!isNaN(t.gridData.WIDTH)&&(D=this,f=t.gridData.WIDTH,D.store.constants.privateConstants.GRID_WIDTH=f),(null==t||null===(i=t.gridData)||void 0===i?void 0:i.HEIGHT)&&!isNaN(t.gridData.HEIGHT)&&function(t,e){t.store.constants.privateConstants.GRID_HEIGHT=e}(this,t.gridData.HEIGHT),(null==t||null===(r=t.gridData)||void 0===r?void 0:r.MARGIN)&&!isNaN(t.gridData.MARGIN)&&function(t,e){t.store.constants.privateConstants.GRID_MARGIN=e}(this,t.gridData.MARGIN),(null==t||null===(o=t.gridData)||void 0===o?void 0:o.MIN_HEIGHT_AND_WIDTH)&&!isNaN(t.gridData.MIN_HEIGHT_AND_WIDTH)&&function(t,e){t.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=e}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),(null==t||null===(n=t.publicConstants)||void 0===n?void 0:n.mobileAspectRatio)&&!isNaN(t.publicConstants.mobileAspectRatio)&&h(this,"MOBILE_ASPECT_RATIO",t.publicConstants.mobileAspectRatio),(null==t||null===(s=t.publicConstants)||void 0===s?void 0:s.moveGuideRadius)&&!isNaN(t.publicConstants.moveGuideRadius)&&h(this,"MOVE_GUIDE_RADIUS",t.publicConstants.moveGuideRadius),(null==t||null===(l=t.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&!isNaN(t.publicConstants.resizeSquareGuideLength)&&h(this,"RESIZE_SQUARE_GUIDE_LENGTH",t.publicConstants.resizeSquareGuideLength),(null==t||null===(a=t.publicConstants)||void 0===a?void 0:a.resizeSquareBorderGuideWidth)&&!isNaN(t.publicConstants.resizeSquareBorderGuideWidth)&&h(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",t.publicConstants.resizeSquareBorderGuideWidth),(null==t||null===(d=t.publicConstants)||void 0===d?void 0:d.autoScrollDistance)&&!isNaN(t.publicConstants.autoScrollDistance)&&h(this,"AUTO_SCROLL_DISTANCE",t.publicConstants.autoScrollDistance),(null==t||null===(c=t.publicConstants)||void 0===c?void 0:c.autoScrollPoint)&&!isNaN(t.publicConstants.autoScrollPoint)&&h(this,"AUTO_SCROLL_POINT",t.publicConstants.autoScrollPoint),(null==t||null===(u=t.publicConstants)||void 0===u?void 0:u.moveOrResizeHeightIncrements)&&!isNaN(t.publicConstants.moveOrResizeHeightIncrements)&&h(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",t.publicConstants.moveOrResizeHeightIncrements),(null==t||null===(m=t.publicConstants)||void 0===m?void 0:m.mouseDownTime)&&!isNaN(t.publicConstants.mouseDownTime)&&h(this,"MOUSE_DOWN_TIME",t.publicConstants.mouseDownTime),(null==t||null===(b=t.publicConstants)||void 0===b?void 0:b.touchHoldTime)&&!isNaN(t.publicConstants.touchHoldTime)&&h(this,"TOUCH_HOLD_TIME",t.publicConstants.touchHoldTime),(null==t||null===(I=t.publicConstants)||void 0===I?void 0:I.demoWaitTime)&&!isNaN(t.publicConstants.demoWaitTime)&&h(this,"DEMO_WAIT_TIME",t.publicConstants.demoWaitTime),(null==t||null===(w=t.publicConstants)||void 0===w?void 0:w.windowResizeWaitTime)&&!isNaN(t.publicConstants.windowResizeWaitTime)&&h(this,"WINDOW_RESIZE_WAIT_TIME",t.publicConstants.windowResizeWaitTime),(null==t||null===(y=t.publicConstants)||void 0===y?void 0:y.deskInteractionMode)&&_e[t.publicConstants.deskInteractionMode]&&h(this,"DESK_INTERACTION_MODE",t.publicConstants.deskInteractionMode),"boolean"==typeof(null==t||null===(g=t.publicConstants)||void 0===g?void 0:g.latchMovedItem)&&h(this,"LATCH_MOVED_ITEM",t.publicConstants.latchMovedItem),"boolean"==typeof(null==t||null===(x=t.publicConstants)||void 0===x?void 0:x.animateMovedItem)&&h(this,"ANIMATE_MOVED_ITEM",t.publicConstants.animateMovedItem),(null==t||null===(p=t.publicConstants)||void 0===p?void 0:p.animateTime)&&!isNaN(t.publicConstants.animateTime)&&h(this,"ANIMATE_TIME",t.publicConstants.animateTime),(null==t||null===(v=t.publicConstants)||void 0===v?void 0:v.crossHairWidth)&&!isNaN(t.publicConstants.crossHairWidth)&&h(this,"CROSS_HAIR_WIDTH",t.publicConstants.crossHairWidth),(null==t||null===(T=t.publicConstants)||void 0===T?void 0:T.crossHairHeight)&&!isNaN(t.publicConstants.crossHairHeight)&&h(this,"CROSS_HAIR_HEIGHT",t.publicConstants.crossHairHeight),"boolean"==typeof(null==t||null===(A=t.publicConstants)||void 0===A?void 0:A.useVerticalArrOnResize)&&h(this,"USE_VERTICAL_ARR_ON_RESIZE",t.publicConstants.useVerticalArrOnResize)},Ne=function(){const t=w(this),e=E(this),i=m(this);var r,o;let n;r=this,o=document.getElementsByTagName("body")[0],r.store.variables.elements.$body=o;do{n="limber-grid-view-pseudo-container-"+Nt()}while(null!==document.getElementById(n));!function(t,e){t.store.variables.essentials.pseudoContainerId=e}(this,n);const s=document.createElement("div");if(s.setAttribute("class","limber-grid-view-pseudo-container"),s.setAttribute("id",n),function(t,e){t.store.variables.elements.$pseudoContainer=e}(this,s),e.pseudoElementContainer){let t;"string"==typeof e.pseudoElementContainer?t=document.getElementById(e.pseudoElementContainer):e.pseudoElementContainer instanceof Element&&(t=e.pseudoElementContainer),t.appendChild(s)}else t.$body.appendChild(s);t.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">Â©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright Â© 2018-2020 Subendra Kumar Sharma. License GPLv3+: GNU GPL version 3 or later &lthttps://www.gnu.org/licenses/&gt.</div></div></div>',function(t,e){t.store.variables.elements.$limberGridViewContainer=e}(this,t.$el.getElementsByClassName("limber-grid-view-container")[0]),function(t,e){t.store.variables.elements.$limberGridView=e}(this,t.$el.getElementsByClassName("limber-grid-view")[0]);const l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div");h.innerHTML="<div></div>";const b=document.createElement("div");b.innerHTML="<hr></hr><hr></hr>",l.setAttribute("class","limber-grid-view-pseudo-container-item"),a.setAttribute("class","limber-grid-view-pseudo-item"),d.setAttribute("class","limber-grid-view-move-guide"),c.setAttribute("class","limber-grid-view-height-adjust-guide"),u.setAttribute("class","limber-grid-view-add-cut-guide"),h.setAttribute("class","limber-grid-view-touch-hold-guide"),b.setAttribute("class","limber-grid-view-cross-hair-guide"),b.style.transform=`translate(-${2*i.CROSS_HAIR_WIDTH}px, -${2*i.CROSS_HAIR_HEIGHT}px)`,t.$pseudoContainer.appendChild(l),t.$limberGridView.appendChild(a),t.$limberGridView.appendChild(d),t.$limberGridView.appendChild(c),t.$limberGridView.appendChild(u),t.$limberGridView.appendChild(h),t.$limberGridView.appendChild(b),function(t,e){t.store.variables.elements.$pseudoContainerItem=e}(this,l),function(t,e){t.store.variables.elements.$limberGridViewPseudoItem=e}(this,a),function(t,e){t.store.variables.elements.$limberGridViewMoveGuide=e}(this,d),function(t,e){t.store.variables.elements.$limberGridViewHeightAdjustGuide=e}(this,c),function(t,e){t.store.variables.elements.$limberGridViewAddCutGuide=e}(this,u),function(t,e){t.store.variables.elements.$limberGridViewTouchHoldGuide=e}(this,h),function(t,e){t.store.variables.elements.$limberGridViewCrossHairGuide=e}(this,b)},Me=function(t){const e=m(this);setTimeout(zt(this).onWindowResizeTimerCallback,e.WINDOW_RESIZE_WAIT_TIME),window.removeEventListener("resize",zt(this).onWindowResize)},He=async function(t){await Ce(this,!0,!1),ue(this);!1!==_(this).reRenderOnResize&&window.addEventListener("resize",zt(this).onWindowResize)};function $e(t){var e,i;if(this.initializeStore(),function(t,e){Object.assign(t.options,e)}(this,t),x(this,t.positionData),e=this,i=t.callbacks,e.store.variables.essentials.callbacks=i,"string"==typeof t.el){const e=document.getElementById(t.el);if(!e)throw"No for element found for id "+t.el;b(this,e)}else{if(!(t.el instanceof Element))throw"Valid DOM Element or Id required";b(this,t.el)}Re.call(this,t),Ne.call(this),!0===this.options.reRenderOnResize&&window.addEventListener("resize",zt(this).onWindowResize),setTimeout(async function(){await Ce(this,!1,t.autoArrange),ue(this,!0)}.bind(this))}
/** @license LimberGridView

LimberGridView, a powerful JavaScript Libary that gives you movable, resizable(any size) and auto-arranging grids.

Copyright Â© 2018-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
$e.prototype.constructor=$e,$e.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:Yt.bind(this),onItemTouchStart:Bt.bind(this),onItemMouseMove:qt.bind(this),onItemTouchMove:Kt.bind(this),onItemMouseUp:Qt.bind(this),onItemTouchEnd:Jt.bind(this),onItemContextMenu:te.bind(this),onItemTouchContextMenu:ee.bind(this),onItemTouchCancel:ie.bind(this),onDeskMouseDown:Ie.bind(this),onDeskTouchStart:we.bind(this),onDeskMouseMove:xe.bind(this),onDeskTouchMove:pe.bind(this),onDeskMouseUp:ve.bind(this),onDeskTouchEnd:Te.bind(this),onDeskTouchCancel:Ae.bind(this),onDeskTouchContextMenu:De.bind(this),onDeskContextMenu:fe.bind(this),onWindowResize:Me.bind(this),onWindowResizeTimerCallback:He.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}},status:{},trees:{it:new r.IntervalTreesIterative({initialStackSize:100,initialQueueSize:100})},stacks:{stack:new o.ArrayStack,garbageStack:new o.ArrayStack,resStack:new o.ArrayStack,itemsToArrangeStack:new o.ArrayStack}},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,MOUSE_DOWN_TIME:300,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,DESK_INTERACTION_MODE:"ADD",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250,CROSS_HAIR_WIDTH:500,CROSS_HAIR_HEIGHT:500,USE_VERTICAL_ARR_ON_RESIZE:!1},messages:{latchedMoveDemo1:"Move curser close to an adjacent item over this box to latch next to that item.",latchedMoveDemo2:"Move curser over this box to latch on to this item."}}}},$e.prototype.renderItem=function(t){!function(t,e){const i=w(t),r=A(t),o=p(t),n=u(t),s=m(t);let l;l=Ct(t)?r.renderContent(e,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(e,o[e].width,o[e].height),be(t,l,i.$limberGridViewItems[e]),r.renderComplete&&r.renderComplete(e)}(this,t)},$e.prototype.getGridData=function(){const t=n(this),e=p(this),i=e.length,r=new Array(i);for(let o=0;o<i;o++)r[o]={x:Rt(e[o].x/t.WIDTH_SCALE_FACTOR),y:Rt(e[o].y/t.WIDTH_SCALE_FACTOR),width:Rt(e[o].width/t.WIDTH_SCALE_FACTOR),height:Rt(e[o].height/t.WIDTH_SCALE_FACTOR)};return{gridData:{height:t.GRID_HEIGHT,width:t.GRID_WIDTH,margin:t.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:t.MIN_HEIGHT_AND_WIDTH},positionData:r}},$e.prototype.setDeskInteractMode=function(t){_e[t]&&h(this,"DESK_INTERACTION_MODE",t)},$e.prototype.setLatchMovedItem=function(t){"boolean"==typeof t&&h(this,"LATCH_MOVED_ITEM",t)},$e.prototype.setUseVerticalArrOnResize=function(t){"boolean"==typeof t&&h(this,"USE_VERTICAL_ARR_ON_RESIZE",t)},$e.prototype.addItem=function(t){if(!t){const e=n(this);t={width:e.DEFINED_MIN_HEIGHT_AND_WIDTH,height:e.DEFINED_MIN_HEIGHT_AND_WIDTH}}he(this,t)},$e.prototype.removeItem=function(t){Number.isInteger(t)&&function(t,e){const i=w(t),r=A(t),o=p(t),n=u(t),s=m(t);ae.call(t),o.splice(e,1),r.removePlugin&&r.removePlugin(i.$limberGridViewItems[e]),i.$limberGridView.removeChild(i.$limberGridViewItems[e]),r.removeComplete&&r.removeComplete(e,i.$limberGridViewItems[e]),I(t,[...i.$limberGridView.getElementsByClassName("limber-grid-view-item")]);const l=o.length;for(let t=e;t<l;t++)i.$limberGridViewItems[t].setAttribute("data-index",t);for(let a=e;a<l;a++){let e;e=Ct(t)?r.renderContent(a,n.WIDTH,n.WIDTH/s.MOBILE_ASPECT_RATIO):r.renderContent(a,o[a].width,o[a].height),be(t,e,i.$limberGridViewItems[a])}le.call(t)}(this,t)},$e.prototype.setIsMobileCheck=function(t){this.options.isMobileCheck=t};e.default=$e}])}));