/** @license LimberGridView
 *
 * LimberGridView, a powerful JavaScript Library using Computational Geometry to render movable, dynamically resizable, and auto-arranging grids.
 *
 * Copyright © 2018-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)
 *
 * This file is part of LimberGridView.
 *
 * LimberGridView is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * LimberGridView is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.
 *
 * Written by Subendra Kumar Sharma.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["resize-observer-polyfill"],t):"object"==typeof exports?exports.LimberGridView=t(require("resize-observer-polyfill")):e.LimberGridView=t(e["resize-observer-polyfill"])}(window,(function(e){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=9)}([function(e,t,i){"use strict";
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/e.exports=i(5)},function(e,t,i){"use strict";
/** @license RTreeJS

RTreeJS, a JavaScript Tree library that helps to query, insert and delete Rectangles.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of RTreeJS.

RTreeJS is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

RTreeJS is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with RTreeJS.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/e.exports=i(4)},function(e,t,i){"use strict";
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/e.exports=i(6)},function(t,i){t.exports=e},function(e,t,i){
/** @license RTreeJS

RTreeJS, a JavaScript Tree library that helps to query, insert and delete Rectangles.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of RTreeJS.

RTreeJS is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

RTreeJS is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with RTreeJS.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=3)}([function(e,t,i){"use strict";
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/e.exports=i(1)},function(e,t,i){
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"ArrayStack",(function(){return r})),i.d(t,"ListStack",(function(){return n}));var s=function(e){var t;this.options=e,this.initialSize=(null==e?void 0:e.initialSize)||100,this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1,Array.isArray(null==e?void 0:e.data)&&this.constructStack(e.data,e.constructReverse),null===(t=this.options)||void 0===t||delete t.data};s.prototype.constructStack=function(e,t){var i=e.length;if(t)for(var s=i-1;s>=0;s--)this.push(e[s]);else for(var r=0;r<i;r++)this.push(e[r])},s.prototype.push=function(e){return null!=e&&(this.ptr===this.length-1&&this.resize(),this.stack[++this.ptr]=e,this.ptr+1)},s.prototype.pop=function(){if(this.ptr>=0){var e=this.stack[this.ptr];return this.ptr--,e}},s.prototype.resize=function(){var e=this.length,t=this.stack;this.length=2*this.length,this.stack=new Array(this.length);for(var i=0;i<e;i++)this.stack[i]=t[i]},s.prototype.isEmpty=function(){return this.ptr<0},s.prototype.peek=function(){if(this.ptr>=0)return this.stack[this.ptr]},s.prototype.getData=function(){for(var e=new Array(this.ptr+1),t=0;t<=this.ptr;t++)e[t]=this.stack[t];return e},s.prototype.setData=function(e){var t;this.empty(),this.constructStack(e,null===(t=this.options)||void 0===t?void 0:t.constructReverse)},s.prototype.getSize=function(){return this.ptr+1},s.prototype.empty=function(){this.ptr=-1},s.prototype.wipe=function(){this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1};var r=s;function o(e){this.length=0,this.HEAD=null,Array.isArray(null==e?void 0:e.data)&&this.constructStack(e.data,e.constructReverse)}o.prototype.constructNode=function(e){return{next:null,d:e}},o.prototype.constructStack=function(e,t){var i,s=e.length;if(t)for(i=s-1;i>=0;i--)this.push(e[i]);else for(i=0;i<s;i++)this.push(e[i])},o.prototype.push=function(e){var t=this.constructNode(e);return this.HEAD?(t.next=this.HEAD,this.HEAD=t):this.HEAD=t,++this.length},o.prototype.pop=function(){if(this.HEAD){var e=this.HEAD;return this.HEAD=this.HEAD.next,e.next=null,this.length--,e.d}},o.prototype.isEmpty=function(){return!this.HEAD},o.prototype.peek=function(){var e;return null===(e=this.HEAD)||void 0===e?void 0:e.d},o.prototype.getData=function(){for(var e=this.HEAD,t=new Array(this.length),i=0;null!=e;)t[i++]=e.d,e=e.next;return t},o.prototype.getSize=function(){return this.length},o.prototype.empty=function(){this.HEAD=null,this.length=0};var n=o;
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/}])},function(e,t,i){},function(e,t,i){"use strict";i.r(t),i.d(t,"RTreeIterative",(function(){return D}));var s=i(0);Math.sqrt(Number.MAX_SAFE_INTEGER);const r=e=>(e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1),o=(e,t)=>{const i=(e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1),s=(t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1);return i>s?i-s:s-i},n=(e,t)=>({x1:e.x1<t.x1?e.x1:t.x1,x2:e.x2>t.x2?e.x2:t.x2,y1:e.y1<t.y1?e.y1:t.y1,y2:e.y2>t.y2?e.y2:t.y2}),l=(e,t,i=0)=>{let s=Number.MAX_SAFE_INTEGER,r=0,o=Number.MAX_SAFE_INTEGER,n=0;for(let l=i;l<t;l++){const t=e[l];s=t.x1<s?t.x1:s,r=t.x2>r?t.x2:r,o=t.y1<o?t.y1:o,n=t.y2>n?t.y2:n}return{x1:s,x2:r,y1:o,y2:n}},a=(e,t)=>e.x1===t.x1&&e.x2===t.x2&&e.y1===t.y1&&e.y2===t.y2,d=(e,t)=>e.x1<=t.x1&&e.x2>=t.x2&&e.y1<=t.y1&&e.y2>=t.y2,c=(e,t)=>!(e.x1>=t.x2||t.x1>=e.x2||e.y1>=t.y2||t.y1>=e.y2),u=(e,t)=>!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2),h=(e,t,i)=>{let s=Number.MAX_SAFE_INTEGER,r=0;for(let l=0;l<i;l++){const i=e[l],a=o(n(i,t),i);a<s&&(s=a,r=l)}return r},m=(e,t,i)=>{for(let s=0;s<t;s++)if(a(e[s],i))return!0;return!1},p=(e,t,i)=>{for(let s=0;s<t;s++)if(a(e[s],i))return s;return-1},f=(e={size:0,keys:[],pointers:[]},t)=>{for(let i=t;i<e.size-1;i++)e.keys[i]=e.keys[i+1],e.pointers[i]=e.pointers[i+1];e.size--},y=(e={size:0,keys:[],pointers:[]},t,i)=>{let s=Number.MAX_SAFE_INTEGER,o=-1,l=-1;const a=e.keys[t];for(let d=0;d<e.size;d++){if(d===t||e.pointers[d].size===i)continue;const c=e.pointers[d].keys,u=e.pointers[d].size;for(let e=0;e<u;e++){const t=c[e],i=r(n(a,t));i<s&&(s=i,o=d,l=e)}}if(-1!==o)return{ptr:o,ptrPtr:l}},b=(e={size:0,keys:[],pointers:[]},t,i)=>{var s;const r=e.pointers[i.ptr]||{size:0,keys:[],pointers:[]},o=r.keys[i.ptrPtr],n=r.pointers[i.ptrPtr];for(let e=i.ptrPtr;e<r.size-1;e++)r.keys[e]=r.keys[e+1],r.pointers[e]=r.pointers[e+1];r.size--,e.keys[i.ptr]=l(r.keys,r.size);const a=(null===(s=e.pointers[t])||void 0===s?void 0:s.size)||0,d=e.pointers[t]||{size:0,keys:[],pointers:[]};d.keys[a]=o,d.pointers[a]=n,d.size++,e.keys[t]=l(d.keys,d.size)},v=(e={size:0,keys:[],pointers:[]},t,i)=>{let s=-1,o=Number.MAX_SAFE_INTEGER,l={x1:-1,x2:-1,y1:-1,y2:-1};for(let i=0;i<e.size;i++){if(i===t)continue;const a=n(e.keys[i],e.keys[t]),d=r(a);d<o&&(o=d,l=a,s=i)}if(-1===s)return void(e.size=0);e.keys[s]=l;const a=e.pointers[t]||{size:0,keys:[],pointers:[]},d=e.pointers[s]||{size:0,keys:[],pointers:[]};let c=0;for(;c<a.size;)d.keys[d.size]=a.keys[c],d.pointers[d.size]=a.pointers[c],c++,d.size++;for(let i=t;i<e.size-1;i++)e.keys[i]=e.keys[i+1],e.pointers[i]=e.pointers[i+1];e.size--},g=(e,t,i,s)=>{const r=e[i],o=t[i];e[i]=e[s],t[i]=t[s],e[s]=r,t[s]=o},I=(e={size:0,keys:[],pointers:[]},t,i,s)=>{const{keys:r=[],pointers:o=[]}=e||{};let n=0,l=0,a=Number.MAX_SAFE_INTEGER,d=0;r[s]=t,o[s]=i;for(const[e,t]of r.entries())t.x2<a&&(a=t.x2,n=e),t.x1>d&&(d=t.x1,l=e);g(r,o,0,n),g(r,o,s,l)},w=(e,t,i,s)=>{const r=new Array(s+1),o=new Array(s+1);let n=i,l=0;for(;n<s+1;)r[l]=e[n],o[l]=t[n],l++,n++;return{rightRect:r,rptrs:o,rightSize:l}},x=(e={size:0,keys:[],pointers:[]},t,i,s,o)=>{const{keys:a=[],pointers:d=[]}=e||{},c=[...a],u=[...d];I(e,t,i,s);const{rectArrY:h,nodeArrY:m}=((e,t,i,s,r)=>{let o=0,n=0,l=Number.MAX_SAFE_INTEGER,a=0;e[r]=i,t[r]=s;for(const[t,i]of e.entries())i.y2<l&&(l=i.y2,o=t),i.y1>a&&(a=i.y1,n=t);return g(e,t,0,o),g(e,t,r,n),{rectArrY:e,nodeArrY:t}})(c,u,t,i,s),p=a[0];let f,y=Number.MAX_SAFE_INTEGER;const b=h[0];let v,x,A,T=Number.MAX_SAFE_INTEGER,D=1;for(;D<s+1;){y=Number.MAX_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,f=D,v=D;for(let e=D;e<=s;e++)x=n(p,a[e]),A=r(x),A<y&&(f=e,y=A),x=n(b,h[e]),A=r(x),A<T&&(v=e,T=A);g(a,d,D,f),g(h,m,D,v),D++}let E=o,G=o;if(s%2==0){let e=a[0],t=r(e),i=a[o+1],l=r(i),d=a[0],c=r(e),u=a[o+1],m=r(i);for(let i=1;i<o;i++)e=n(e,a[i]),t=r(e),d=n(d,h[i]),c=r(d);for(let e=o+2;e<=s;e++)i=n(i,a[e]),l=r(i),u=n(u,h[e]),m=r(u);r(n(e,a[o]))-t<r(n(i,a[o]))-l&&E++,r(n(d,h[o]))-c<r(n(u,h[o]))-m&&G++}return r(l(a,E-1))+r(l(a,s+1,E))<r(l(h,G-1))+r(l(h,s+1,G))?(e.size=E,w(a,d,E,s)):(e.size=G,e.keys=h,e.pointers=m,w(h,m,G,s))},A=(e={size:0,keys:[],pointers:[]},t,i,s,o)=>{const{keys:l=[],pointers:a=[]}=e||{};I(e,t,i,s);let d,c,u,h,m,p,f,y,b,v,x,A,T=l[0],D=l[s],E=1,G=s-1,_=r(T),R=r(D);for(;E<=G;)u=l[E],h=l[G],m=n(u,T),b=r(m),p=n(u,D),v=r(p),d=b-_>v-R,f=n(h,T),x=r(f),y=n(h,D),A=r(y),c=A-R>x-_,d&&c?(g(l,a,E,G),T=f,_=x,D=p,R=v,E++,G--):d||c?d?c?(E++,G--):(A>v?(g(l,a,E,G),D=p,R=v):(D=y,R=A),G--):(b>x?(g(l,a,E,G),T=f,_=x):(T=m,_=b),E++):(T=m,_=b,D=y,R=A,E++,G--);return((e={size:0,keys:[],pointers:[]},t,i,s,o)=>{let l=o;if(s%2==0){let e=t[0],i=r(e),a=t[o+1],d=r(a);for(let s=1;s<o;s++)e=n(e,t[s]),i=r(e);for(let e=o+2;e<=s;e++)a=n(a,t[e]),d=r(a);r(n(e,t[o]))-i<r(n(a,t[o]))-d&&l++}return e.size=l,w(t,i,l,s)})(e,l,a,s,o)},T=["green","purple","blue","orange","aqua","blueviolet","brown","cadetblue","yellow","violet","thistle","teal","steelblue","silver","sienna","sandybrown","salmon","saddlebrown","olive"];var D=class{constructor(e){var t,i,r;if(this.options=e,this.M=e.M||4,this.M%2==0?this.m=this.M/2:this.m=Math.ceil(this.M/2),this.M<2)throw"Value of M cannot be less than 2";if((null==e?void 0:e.m)&&Number.isInteger(e.m)&&e.m<=Math.ceil(this.M/2)&&e.m>=1)this.m=e.m;else if(null==e?void 0:e.m)throw"Can't hard set value of m for M, invalid value of m provided";this.splitNode=x,"linear"===(null==e?void 0:e.splitNode)&&(this.splitNode=A),this.root=void 0,this.length=0,this.height=0,this.initialStackSize=2*(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.length)||(null==e?void 0:e.initialStackSize)||100,this.initialQueueSize=2*(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.length)||(null==e?void 0:e.initialQueueSize)||100,this.insertStack=new s.ArrayStack({initialSize:this.initialStackSize}),this.ptrStack=new s.ArrayStack({initialSize:this.initialStackSize}),this.resultStack=new s.ArrayStack({initialSize:this.initialStackSize}),Array.isArray(null==e?void 0:e.data)&&this.constructTree(e.data),null===(r=this.options)||void 0===r||delete r.data}getRoot(){return this.root}constructNode(e,t,i,s){const r={size:0,pointers:new Array(this.M+1),keys:new Array(this.M+1)};return e?(r.keys[0]=e,r.pointers[0]=void 0,r.size=1):t&&i&&(r.keys=t,r.pointers=i,r.size=s||0),r}constructTree(e){const t=e.length;for(let i=0;i<t;i++)this.insert(e[i])}insert(e){return this._insert(e)}_insert(e){var t,i,s,r,o,n,a,d;let c,u=!1;if(this.insertStack.empty(),void 0===this.root)return this.root=this.constructNode(e),this.length++,this.height++,this.root;for(this.insertStack.push({node:this.root,pos:-1});!this.insertStack.isEmpty();){const o=this.insertStack.peek(),n=o.node;if(u)if(c){const e=l((null===(t=null==c?void 0:c.left)||void 0===t?void 0:t.keys)||[],(null===(i=null==c?void 0:c.left)||void 0===i?void 0:i.size)||0);n.keys[o.pos]=e,n.pointers[o.pos]=null==c?void 0:c.left;const a=l((null===(s=null==c?void 0:c.right)||void 0===s?void 0:s.keys)||[],(null===(r=null==c?void 0:c.right)||void 0===r?void 0:r.size)||0);if(n.size<this.M)n.keys[n.size]=a,n.pointers[n.size]=null==c?void 0:c.right,n.size++,c=void 0;else{const e=this.splitNode(n,a,c.right,this.M,this.m);c={left:n,right:this.constructNode(void 0,e.rightRect,e.rptrs,e.rightSize)}}this.insertStack.pop()}else n.keys[o.pos]=l(n.pointers[o.pos].keys,n.pointers[o.pos].size),this.insertStack.pop();else{if(null==n?void 0:n.pointers[0]){const t=h(n.keys,e,n.size);o.pos=t,this.insertStack.push({node:n.pointers[t],pos:t});continue}if(m(n.keys,n.size,e))return;if(this.length++,n.size<this.M){n.keys[n.size]=e,n.size++,u=!0,this.insertStack.pop();continue}const t=this.splitNode(n,e,void 0,this.M,this.m);c={left:n,right:this.constructNode(void 0,t.rightRect,t.rptrs,t.rightSize)},u=!0,this.insertStack.pop()}}if(c){const e=l((null===(o=null==c?void 0:c.left)||void 0===o?void 0:o.keys)||[],(null===(n=null==c?void 0:c.left)||void 0===n?void 0:n.size)||0),t=l((null===(a=null==c?void 0:c.right)||void 0===a?void 0:a.keys)||[],(null===(d=null==c?void 0:c.right)||void 0===d?void 0:d.size)||0),i=this.constructNode();i&&(i.size=2,i.keys=[e,t],i.pointers=[null==c?void 0:c.left,null==c?void 0:c.right],this.root=i),this.height++}}remove(e){return this._remove(e)}_remove(e){let t=!1;if(this.ptrStack.empty(),this.root)for(this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const i=this.ptrStack.peek(),{node:s}=i;if(t)if(s.pointers[i.ptr].size<this.m){s.keys[i.ptr]=l(s.pointers[i.ptr].keys,s.pointers[i.ptr].size);const e=y(s,i.ptr,this.m);if(e)b(s,i.ptr,e);else if(v(s,i.ptr,this.m),s===this.root&&s.size<2){const e=this.root;this.root=e.pointers[0],e.keys=[];for(let t=0;t<this.M+1;t++)e.pointers[t]=void 0;this.height--,0===this.root.size&&(this.root=void 0,this.height=0,this.length=0)}this.ptrStack.pop()}else{const e=l(s.pointers[i.ptr].keys,s.pointers[i.ptr].size);s.keys[i.ptr]=e,this.ptrStack.pop()}else if(s.pointers[0]){const t=i.ptr+1;for(let r=t;r<s.size;r++)if(d(s.keys[r],e)){i.ptr=r,this.ptrStack.push({node:s.pointers[r],ptr:-1});break}i.ptr===t-1&&this.ptrStack.pop()}else{const i=p(s.keys,s.size,e);i>=0&&(f(s,i),t=!0,this.length--,s===this.root&&0===s.size&&(this.root=void 0,this.height=0,this.length=0)),this.ptrStack.pop()}}}find(e,t=!1,i=!1,s,r=!0){let o=c;return r&&(o=u),this._find(e,t,i,s,o)}_find(e,t=!1,i=!1,s,r){if(this.ptrStack.empty(),this.resultStack.empty(),!this.root&&i)return[];if(this.root){for(this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const o=this.ptrStack.peek(),{node:n}=o;if(n.pointers[0]){const s=o.ptr+1;for(let l=s;l<n.size;l++)if(t&&!i?d(n.keys[l],e):r(n.keys[l],e)){o.ptr=l,this.ptrStack.push({node:n.pointers[l],ptr:-1});break}o.ptr===s-1&&this.ptrStack.pop()}else{for(let o=0;o<n.size;o++)if(t&&!i){if(a(n.keys[o],e))return n.keys[o]}else if(i)!r(n.keys[o],e)||s&&!s(n.keys[o],e)||this.resultStack.push(n.keys[o]);else if(r(n.keys[o],e)&&(!s||s(n.keys[o],e)))return n.keys[o];this.ptrStack.pop()}}return i?this.resultStack.getData():void 0}}getData(e=!1){if(!this.root)return[];for(this.ptrStack.empty(),this.resultStack.empty(),this.ptrStack.push({node:this.root,ptr:-1});!this.ptrStack.isEmpty();){const t=this.ptrStack.peek(),{node:i}=t;if(i.pointers[0])t.ptr+1<i.size?(this.ptrStack.push({node:i.pointers[++t.ptr],ptr:-1}),e&&this.resultStack.push(i.keys[t.ptr])):this.ptrStack.pop();else{for(let e=0;e<i.size;e++)this.resultStack.push(i.keys[e]);this.ptrStack.pop()}}return this.resultStack.getData()}reset(){this.root=void 0,this.length=0,this.height=0}emptyTree(){this.root=void 0,this.length=0,this.height=0;const e=Math.max(this.insertStack.stack.length,this.ptrStack.length,this.resultStack.length);for(let t=0;t<e;t++)this.insertStack.stack[t]&&(this.insertStack.stack[t].node=void 0),this.ptrStack.stack[t]&&(this.ptrStack.stack[t].node=void 0),this.resultStack.stack[t]&&(this.resultStack.stack[t]=void 0)}printTree(){return((e,t,i)=>{const r=((e,t,i)=>{if(!e)return[];const r=new s.ArrayStack,o=new s.ArrayStack;let n=0;for(o.push({node:l(e.keys,e.size),HEIGHT:n}),r.push({node:e,ptr:-1,HEIGHT:n++});!r.isEmpty();){const e=r.peek(),{node:t}=e;if(t.pointers[0])e.ptr+1<t.size?(o.push({node:t.keys[e.ptr+1],HEIGHT:n}),r.push({node:t.pointers[++e.ptr],ptr:-1,HEIGHT:n++})):(r.pop(),n--);else{for(let e=0;e<t.size;e++)o.push({node:t.keys[e],HEIGHT:n});r.pop(),n--}}return o.getData()})(e);console.log("data",r);const o=T.length,n={},a=r.length;for(let e=0;e<a-1;e++)r[e].HEIGHT<o?n[r[e].HEIGHT]=T[r[e].HEIGHT]:n[r[e].HEIGHT]="black";n[i]="red";let d=0;r.forEach(e=>{d=e.node.x2>d?e.node.x2:d});let c=0;r.forEach(e=>{c=e.node.y2>c?e.node.y2:c});const u=r.map(e=>{const t=1e3*e.node.x1/d+4*e.HEIGHT;let i=1e3*e.node.x2/d;i=i>4*e.HEIGHT?i-4*e.HEIGHT:i;const s=1e3*e.node.y1/c+4*e.HEIGHT;let r=1e3*e.node.y2/c;return r=r>4*e.HEIGHT?r-4*e.HEIGHT:r,`<g transform="translate(${t}, ${s})">\n\t\t\t<rect width="${i-t>0?i-t:1}" height="${r-s>0?r-s:1}" stroke="${n[e.HEIGHT]}" stroke-width="2" fill-opacity="0"/>\n\t\t</g>`}).reduce((e,t)=>e+t,""),h=Object.keys(n).map((e,t)=>`<g transform="translate(${70*t+10}, 10)"><circle r="5" fill="${n[e]}"/><text dx="10" dy="5">height: ${t}</text></g>`);return r.sort((e,t)=>e.HEIGHT-t.HEIGHT),`<svg width="1020" height="1070"><g width="1000" height="1000" transform="translate(0, 0)">${h}</g>\n\t<rect transform="translate(2, 48)" width="1000" height="1000" stroke="black" stroke-width="2" fill-opacity="0"/>\n\t<g transform="translate(0, 50)">${u}</g></svg>\n\t<div style="margin: 16px;">\n\t<p>height 0 is not an actual node, its just a rect surrounding all the rects in root node.</p>\n\t<p>Non-leaf node have colours other then red.</p>\n\t<p>Leaf node is always Red.</p>\n\t</div>\n\t<div style="display: flex; flex-direction: column; margin: 16px;">${r.reduce((e,t)=>e+`<div style="display:flex;"><span style="flex: 1;">height: ${t.HEIGHT},</span><span style="flex: 1;">rect: x1: ${t.node.x1},</span><span style="flex: 1;">x2: ${t.node.x2},</span><span style="flex: 1;">y1: ${t.node.y1},</span><span style="flex: 1;">y2: ${t.node.y2}</span></div>`,"")}</div>\n\t`})(this.root,this.length,this.height)}};i(2),t.default=D}])},function(e,t,i){
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"ArrayStack",(function(){return r})),i.d(t,"ListStack",(function(){return n}));var s=function(e){var t;this.options=e,this.initialSize=(null==e?void 0:e.initialSize)||100,this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1,Array.isArray(null==e?void 0:e.data)&&this.constructStack(e.data,e.constructReverse),null===(t=this.options)||void 0===t||delete t.data};s.prototype.constructStack=function(e,t){var i=e.length;if(t)for(var s=i-1;s>=0;s--)this.push(e[s]);else for(var r=0;r<i;r++)this.push(e[r])},s.prototype.push=function(e){return null!=e&&(this.ptr===this.length-1&&this.resize(),this.stack[++this.ptr]=e,this.ptr+1)},s.prototype.pop=function(){if(this.ptr>=0){var e=this.stack[this.ptr];return this.ptr--,e}},s.prototype.resize=function(){var e=this.length,t=this.stack;this.length=2*this.length,this.stack=new Array(this.length);for(var i=0;i<e;i++)this.stack[i]=t[i]},s.prototype.isEmpty=function(){return this.ptr<0},s.prototype.peek=function(){if(this.ptr>=0)return this.stack[this.ptr]},s.prototype.getData=function(){for(var e=new Array(this.ptr+1),t=0;t<=this.ptr;t++)e[t]=this.stack[t];return e},s.prototype.setData=function(e){var t;this.empty(),this.constructStack(e,null===(t=this.options)||void 0===t?void 0:t.constructReverse)},s.prototype.getSize=function(){return this.ptr+1},s.prototype.empty=function(){this.ptr=-1},s.prototype.wipe=function(){this.length=this.initialSize,this.stack=new Array(this.length),this.ptr=-1};var r=s;function o(e){this.length=0,this.HEAD=null,Array.isArray(null==e?void 0:e.data)&&this.constructStack(e.data,e.constructReverse)}o.prototype.constructNode=function(e){return{next:null,d:e}},o.prototype.constructStack=function(e,t){var i,s=e.length;if(t)for(i=s-1;i>=0;i--)this.push(e[i]);else for(i=0;i<s;i++)this.push(e[i])},o.prototype.push=function(e){var t=this.constructNode(e);return this.HEAD?(t.next=this.HEAD,this.HEAD=t):this.HEAD=t,++this.length},o.prototype.pop=function(){if(this.HEAD){var e=this.HEAD;return this.HEAD=this.HEAD.next,e.next=null,this.length--,e.d}},o.prototype.isEmpty=function(){return!this.HEAD},o.prototype.peek=function(){var e;return null===(e=this.HEAD)||void 0===e?void 0:e.d},o.prototype.getData=function(){for(var e=this.HEAD,t=new Array(this.length),i=0;null!=e;)t[i++]=e.d,e=e.next;return t},o.prototype.getSize=function(){return this.length},o.prototype.empty=function(){this.HEAD=null,this.length=0};var n=o;
/** @license Stack

Stack, a JavaScript LIFO stack Data Structure.

Copyright © 2019-2020 Subendra Kumar Sharma. All Rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of Stack.

Stack is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Stack is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Stack.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/}])},function(e,t,i){
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
window,e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="assets",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),t.default=
/** @license undo-redo

undo-redo, a undo redo stack data structure.

Copyright © 2020-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of undo-redo.

undo-redo is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

undo-redo is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with undo-redo.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
class{constructor(e){this.HEAD=void 0,this.TAIL=void 0,this.CURR=void 0,this.size=(null==e?void 0:e.size)||50,this.length=0}constructNode(e){return{next:void 0,prev:void 0,data:e}}undo(){if(this.CURR!==this.TAIL)return this.CURR=this.CURR.prev,this.CURR.data}isUndoAvailable(){return!(this.CURR===this.TAIL)}redo(){if(this.CURR!==this.HEAD)return this.CURR=this.CURR.next,this.CURR.data}isRedoAvailable(){return!(this.CURR===this.HEAD)}push(e){const t=this.constructNode(e);if(void 0===this.CURR)this.CURR=t,this.HEAD=t,this.TAIL=t,this.length++,this.checkLength();else if(this.CURR===this.HEAD)this.HEAD=t,this.HEAD.prev=this.CURR,this.CURR.next=this.HEAD,this.CURR=this.HEAD,this.length++,this.checkLength();else{let e=this.CURR.next;t.prev=this.CURR,this.CURR.next=t,this.CURR=this.CURR.next,this.HEAD=this.CURR;let i=0;for(;void 0!==e;){const t=e;e=e.next,t.next=void 0,t.prev=void 0,i++}this.length-=i,this.length++}return e}checkLength(){this.length>this.size&&(this.TAIL=this.TAIL.next,this.length--)}getCurrent(){var e;return null===(e=this.CURR)||void 0===e?void 0:e.data}setCurrent(e){if(this.CURR)return this.CURR.data=e,this.CURR.data}getData(){let e=this.TAIL;const t=new Array(this.length);let i=0;for(;void 0!==e;)t[i++]=e.data,e=e.next;return t}reset(){this.HEAD=void 0,this.TAIL=void 0,this.CURR=void 0,this.length=0}}}])},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s=i(1),r=i(0),o=i(2),n=i.n(o);i(7),i(8);const l=function(e){return e.store.constants.privateConstants},a=function(e,t){e.store.constants.privateConstants.WIDTH=t},d=function(e){return e.store.constants.privateConstants.WIDTH},c=function(e,t){e.store.constants.privateConstants.HEIGHT=t},u=function(e,t){e.store.constants.privateConstants.WIDTH_SCALE_FACTOR=t},h=function(e,t){e.store.constants.privateConstants.MARGIN=t},m=function(e,t){e.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH=t},p=function(e){return e.store.constants.privateConstants.DEFINED_MIN_HEIGHT_AND_WIDTH};var f=l;const y=function(e){return e.store.constants.publicConstants},b=function(e,t,i){e.store.constants.publicConstants.hasOwnProperty(t)&&(e.store.constants.publicConstants[t]=i)};var v=y;const g=function(e,t){e.store.variables.elements.$el=t},I=function(e){return e.store.variables.elements.$limberGridView},w=function(e){return e.store.variables.elements.$limberGridViewIOTopHelper},x=function(e){return e.store.variables.elements.$limberGridViewIOBottomHelper},A=function(e,t){e.store.variables.elements.$limberGridViewDebugStackTopRect=t},T=function(e,t){e.store.variables.elements.$limberGridViewDebugUnmergedRects=t},D=function(e,t){e.store.variables.elements.$limberGridViewDebugMergedFreeRects=t};var E=function(e){return e.store.variables.elements};const G=function(e,t,i,s){if(function(e,t){const i=E(e),s=v(e),r=i.$limberGridView.scrollHeight;r-t<s.AUTO_SCROLL_POINT&&(i.$limberGridViewHeightAdjustGuide.style.height=r+s.MOVE_OR_RESIZE_HEIGHT_INCREMENTS+"px")}(e,t),s)return function(e,t){const i=E(e),s=v(e),r=f(e),o=i.$limberGridView.scrollTop;let n=!1;return r.HEIGHT-t<s.AUTO_SCROLL_POINT?(i.$limberGridView.scrollTop=o+s.AUTO_SCROLL_DISTANCE,n=!0):t<s.AUTO_SCROLL_POINT&&(i.$limberGridView.scrollTop=o-s.AUTO_SCROLL_DISTANCE,n=!0),n}(e,i)},_=function(e,t){const i=t.length,s=new Array(i);for(let e=0;e<i;e++)s[e]={...t[e]};e.store.variables.essentials.positionData=s},R=function(e){return e.store.variables.essentials.positionData},C=function(e,t){const i=t.length,s=new Array(i);for(let e=0;e<i;e++)s[e]={...t[e]};e.store.variables.essentials.modifiedPositionData=s},H=function(e){return e.store.variables.essentials.modifiedPositionData},M=function(e,t){const i=t.length,s=new Array(i);for(let e=0;e<i;e++)s[e]={...t[e]},s[e].index=e;s.sort((e,t)=>e.y===t.y?e.x-t.x:e.y-t.y),e.store.variables.essentials.serializedPositionData=s},S=function(e){return e.store.variables.essentials.serializedPositionData},$=function(e){return e.store.variables.essentials.callbacks},N=function(e,t){e.store.variables.essentials.limberGridViewBoundingClientRect=t},O=function(e){return e.store.variables.essentials.limberGridViewBoundingClientRect},k=function(e,t){e.store.variables.essentials.renderedItems=[...t]},V=function(e){return e.store.variables.essentials.renderedItems},L=function(e,t){e.store.variables.essentials.ioTopHelperPos=t},P=function(e){return e.store.variables.essentials.ioTopHelperPos},z=function(e,t){e.store.variables.essentials.ioBottomHelperPos=t},W=function(e){return e.store.variables.essentials.ioBottomHelperPos};const Y=function(e,t){const i=E(e),s=f(e),r=O(e);if(t.clientX>=r.left&&t.clientX<=r.left+r.width&&t.clientY>=r.top&&t.clientY<=r.top+r.height){const e=i.$limberGridView.scrollTop,o=i.$limberGridView.scrollLeft,n=t.clientX-r.left-s.PADDING_LEFT+o,l=t.clientY-r.top-s.PADDING_TOP+e;if(n<0||l<0)return;return{x:n,y:l,offsetX:n-o,offsetY:l-e}}},X=function(e,t){const i=E(e),s=f(e),r=O(e);let o;if(o="touchend"===t.type?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY},o.clientX>=r.left&&o.clientX<=r.left+r.width&&o.clientY>=r.top&&o.clientY<=r.top+r.height){const e=i.$limberGridView.scrollTop,t=i.$limberGridView.scrollLeft,n=o.clientX-r.left-s.PADDING_LEFT+t,l=o.clientY-r.top-s.PADDING_TOP+e;if(n<0||l<0)return;return{x:n,y:l,offsetX:n-t,offsetY:l-e}}},U=function(e,t){const i=E(e).$limberGridViewItems[t.currentTarget.attributes["data-index"].value].getBoundingClientRect();if(t.touches[0].clientX>=i.left&&t.touches[0].clientX<=i.left+i.width&&t.touches[0].clientY>=i.top&&t.touches[0].clientY<=i.top+i.height){return{x:t.touches[0].clientX-i.left,y:t.touches[0].clientY-i.top}}},F=function(e){return e.options};var j=F;const B=(e,t)=>{const i=v(e),s=j(e),r=R(e),o=parseInt(t.currentTarget.attributes["data-index"].value);let n,l,a,d;if(t.touches){if(!t.touches)return!1;if(l=U(e,t),!l)return!1;n=Math.sqrt(Math.pow(0-l.x,2)+Math.pow(0-l.y,2)),a=l.x,d=l.y}else n=Math.sqrt(Math.pow(0-t.offsetX,2)+Math.pow(0-t.offsetY,2)),a=t.offsetX,d=t.offsetY;const c=t.currentTarget.offsetWidth-i.RESIZE_SQUARE_GUIDE_LENGTH,u=t.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,h=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,m=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,p=-i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH,f=t.currentTarget.offsetHeight-i.RESIZE_SQUARE_GUIDE_LENGTH,y=i.RESIZE_SQUARE_GUIDE_LENGTH,b=i.RESIZE_SQUARE_GUIDE_LENGTH+i.RESIZE_SQUARE_GUIDE_BORDER_WIDTH;return s.itemMouseDownMoveCheck&&s.itemMouseDownMoveCheck(a,d,{...r[o]},o,t.target)||n<=i.MOVE_GUIDE_RADIUS&&!s.itemMouseDownMoveCheck?{type:"move",itemIndex:t.currentTarget.attributes["data-index"].value}:s.itemMouseDownResizeCheck&&s.itemMouseDownResizeCheck(a,d,{...r[o]},o,t.target,"bottomRight")?{type:"resize",itemIndex:t.currentTarget.attributes["data-index"].value}:s.itemMouseDownResizeCheck&&s.itemMouseDownResizeCheck(a,d,{...r[o]},o,t.target,"bottomLeft")?{type:"resizeBottomLeft",itemIndex:t.currentTarget.attributes["data-index"].value}:a>=c&&a<=c+h&&d>=u&&d<=u+m&&!s.itemMouseDownResizeCheck?{type:"resize",itemIndex:t.currentTarget.attributes["data-index"].value}:a>=p&&a<=y&&d>=f&&d<=f+b&&!s.itemMouseDownResizeCheck?{type:"resizeBottomLeft",itemIndex:t.currentTarget.attributes["data-index"].value}:void 0},Z=(e,t)=>{const i=E(e),s=R(e)[t.itemIndex];i.$limberGridViewHeightAdjustGuide.style.height="0px",i.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.style.width=s.width+"px",i.$limberGridViewPseudoItem.style.height=s.height+"px",i.$limberGridViewPseudoItem.setAttribute("data-after","w: 0px, h: 0px"),i.$limberGridViewPseudoItem.style.transform=`translate(${t.itemX}px,${t.itemY}px)`,i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow"),i.$body.classList.add("limber-grid-view-body-tag-state-editing");const r=i.$limberGridViewItems.length;for(let e=0;e<r;e++)i.$limberGridViewItems[e]&&i.$limberGridViewItems[e].classList.add("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state")},K=(e,t,i)=>{const s=E(e),r=R(e),o=$(e),n=r[t.itemIndex];let l,a;if(s.$limberGridViewHeightAdjustGuide.style.height="0px",s.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active"),s.$limberGridViewItems[t.itemIndex]&&s.$limberGridViewItems[t.itemIndex].classList.add("limber-grid-view-item-demo"),s.$pseudoContainerItem.classList.add("limber-grid-view-pseudo-container-item-active"),s.$pseudoContainerItem.style.width=n.width+"px",s.$pseudoContainerItem.style.height=n.height+"px",i.touches?i.touches&&(l=i.touches[0].pageX,a=i.touches[0].pageY):(l=i.pageX,a=i.pageY),o.offsetMovePseudoElement){const e=o.offsetMovePseudoElement(l,a,q(n));l=e.x,a=e.y}s.$pseudoContainerItem.style.transform=`translate(${l}px, ${a}px)`,s.$body.classList.add("limber-grid-view-body-tag-state-editing")},Q=(e,t,i,s)=>{const r=E(e),o=R(e),n=$(e),l=o[t.itemIndex];if("move"===s){let e,t;if(r.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),r.$limberGridViewMoveGuide.style.transform="translate(-1000px, -1000px)",r.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-move-allow","limber-grid-view-pseudo-container-item-move-disallow"),i.touches?i.touches&&(e=i.touches[0].pageX,t=i.touches[0].pageY):(e=i.pageX,t=i.pageY),n.offsetMovePseudoElement){const i=n.offsetMovePseudoElement(e,t,q(l));e=i.x,t=i.y}r.$pseudoContainerItem.style.transform=`translate(${e}px, ${t}px)`}else"resize"===s&&r.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resize-allow","limber-grid-view-pseudo-item-resize-disallow")},q=e=>({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}),J=(e,t,i,s)=>(i-e)*(i-e)+(s-t)*(s-t),ee=function(e,t){const i=e.options.isMobileCheck;return i?i(t||O(e)):(t=t||O(e)).width<980||window.innerHeight>window.innerWidth&&t.width<981},te=(e,t=6)=>Math.trunc(e*Math.pow(10,t))/Math.pow(10,t),ie=(e=22)=>{const t=new Array(e);for(let i=0;i<e;i++)t[i]="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];return t.join("")},se=e=>new Promise((t,i)=>{setTimeout(t,e)}),re=e=>{e.x1=e.x,e.x2=e.x+e.width,e.y1=e.y,e.y2=e.y+e.height},oe=e=>{const t=e%1,i=Math.trunc(e);return t<=.25?i:t<=.5?i+.25:t<=.75?i+.5:t<=.9999999999999999?i+.75:i-.25},ne=e=>{const t=e%1,i=Math.trunc(e);return t<=.25?i+.25:t<=.5?i+.5:t<=.75?i+.75:t<=.9999999999999999?i+1:i+.25},le=e=>{e.x1=ne(e.x1),e.y1=ne(e.y1),e.x2=oe(e.x2),e.y2=oe(e.y2),e.x=ne(e.x),e.y=ne(e.y),e.width=oe(e.width),e.height=oe(e.height)},ae=(e,t)=>!(e.mX1>=t.mX2||t.mX1>=e.mX2||e.mY1>=t.mY2||t.mY1>=e.mY2),de=(e,t)=>!(isNaN(e.x1)||isNaN(e.x2)||isNaN(t.mX1)||isNaN(t.mX2))&&!(e.x1>=t.mX2||t.mX1>=e.x2||e.y1>=t.mY2||t.mY1>=e.y2),ce=(e,t)=>!(isNaN(e.x1)||isNaN(e.x2)||isNaN(t.mX1)||isNaN(t.mX2))&&!(e.x1>t.mX2||t.mX1>e.x2||e.y1>t.mY2||t.mY1>e.y2),ue=(e,t)=>{if(e.x1<=t.mX1&&e.x2>=t.mX2&&e.y1<=t.mY1&&e.y2>=t.mY2)return!0},he=e=>{const t=e.x1,i=e.x2,s=e.y1,r=e.y2;e.x1=e.mX1,e.x2=e.mX2,e.y1=e.mY1,e.y2=e.mY2,e.mX1=t,e.mX2=i,e.mY1=s,e.mY2=r},me=function(e){return!(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))&&!(e.x>=e.x+e.width||e.y>=e.y+e.height)},pe=function(e,t){const i={};for(const[s]of e.entries())e[s].x1===t[s].x1&&e[s].x2===t[s].x2&&e[s].y1===t[s].y1&&e[s].y2===t[s].y2||(i[s]=!0);return i},fe=(e,t,i=!1,s)=>{const r=R(e),o=r.length,n=new Array(o);let l,a=0;for(let e=0;e<o;e++)l=r[e],s&&s[e]||de(t,l)&&(n[a++]=i?e:r[e]);return n.length=a,n},ye=(e,t)=>{if(t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2)return!0},be=(e,t)=>!(isNaN(e.x1)||isNaN(e.y1)||isNaN(e.x2)||isNaN(e.y2)||isNaN(t.x1)||isNaN(t.y1)||isNaN(t.x2)||isNaN(t.y2))&&!(e.x1>=t.x2||t.x1>=e.x2||e.y1>=t.y2||t.y1>=e.y2),ve=(e,t)=>{if(!be(e,t))return[];const i={subRectT:{x1:e.x1,x2:e.x2,y1:e.y1,y2:t.y1},subRectR:{x1:t.x2,x2:e.x2,y1:e.y1,y2:e.y2},subRectB:{x1:e.x1,x2:e.x2,y1:t.y2,y2:e.y2},subRectL:{x1:e.x1,x2:t.x1,y1:e.y1,y2:e.y2}};for(const e in i)we(i[e])||(i[e]=void 0);let s,r,o,n,l,a,d,c,u,h,m,p,f,y,b,v;i.subRectT&&i.subRectR&&(u={x1:i.subRectT.x1,x2:i.subRectR.x1,y1:i.subRectT.y1,y2:i.subRectT.y2},o={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectR.y1,y2:i.subRectT.y2},p={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectT.y2,y2:i.subRectR.y2}),i.subRectR&&i.subRectB&&(m={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectR.y1,y2:i.subRectB.y1},l={x1:i.subRectR.x1,x2:i.subRectR.x2,y1:i.subRectB.y1,y2:i.subRectR.y2},y={x1:i.subRectB.x1,x2:i.subRectR.x1,y1:i.subRectB.y1,y2:i.subRectR.y2}),i.subRectB&&i.subRectL&&(v={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectL.y1,y2:i.subRectB.y1},d={x1:i.subRectB.x1,x2:i.subRectL.x2,y1:i.subRectB.y1,y2:i.subRectL.y2},f={x1:i.subRectL.x2,x2:i.subRectB.x2,y1:i.subRectB.y1,y2:i.subRectB.y2}),i.subRectL&&i.subRectT&&(b={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectT.y2,y2:i.subRectL.y2},s={x1:i.subRectL.x1,x2:i.subRectL.x2,y1:i.subRectL.y1,y2:i.subRectT.y2},h={x1:i.subRectL.x2,x2:i.subRectT.x2,y1:i.subRectT.y1,y2:i.subRectT.y2}),r=ge(u,s)||ge(h,o)||u||h,n=Ie(m,o)||Ie(p,l)||m||p,a=ge(f,l)||ge(y,d)||f||y,c=Ie(b,d)||Ie(v,s)||b||v;let g=[s,r,o,n,l,a,d,c];if(g=g.filter(e=>e),0===g.length)for(const e in i)i[e]&&g.push(i[e]);return g},ge=(e,t)=>{if(!e||!t)return;let i;return e.x1===t.x1?i={x1:t.x2,x2:e.x2,y1:e.y1,y2:e.y2}:e.x2===t.x2&&(i={x1:e.x1,x2:t.x1,y1:e.y1,y2:e.y2}),i},Ie=(e,t)=>{if(!e||!t)return;let i;return e.y1===t.y1?i={x1:e.x1,x2:e.x2,y1:t.y2,y2:e.y2}:e.y2===t.y2&&(i={x1:e.x1,x2:e.x2,y1:e.y1,y2:t.y1}),i},we=function(e){return!(e.x1>=e.x2||e.y1>=e.y2)},xe=(e,t)=>{const i=new Array(2);let s=0;const r=e.x1<t.x1?e:t,o=e.x2>t.x2?e:t,n=e.y1>t.y1?e:t,l=e.y2<t.y2?e:t,a={x1:r.x1,x2:o.x2,y1:n.y1,y2:l.y2},d=e.x1>t.x1?e:t,c=e.x2<t.x2?e:t,u=e.y1<t.y1?e:t,h=e.y2>t.y2?e:t,m={x1:d.x1,x2:c.x2,y1:u.y1,y2:h.y2};return!we(a)||Ae(e,a)||Ae(t,a)||(i[s++]=a),!we(m)||Ae(e,m)||Ae(t,m)||(i[s++]=m),i.length=s,i},Ae=(e,t)=>{if(e.x1<=t.x1&&e.x2>=t.x2&&e.y1<=t.y1&&e.y2>=t.y2)return!0},Te=(e,t,i)=>{const s=R(e),r=H(e),o=s.length,n=new Array(o);let l=0;for(let e=0;e<o;e++)ae(t,s[e])&&e!==i&&(n[l++]=e,r[e].x1=void 0,r[e].y1=void 0,r[e].x2=void 0,r[e].y2=void 0,r[e].mX1=void 0,r[e].mY1=void 0,r[e].mX2=void 0,r[e].mY2=void 0,r[e].x=void 0,r[e].y=void 0,r[e].mX=void 0,r[e].mY=void 0);return n[l++]=i,n.length=l,n},De=(e,t,i)=>{const s=R(e),r=H(e),o=s.length,n=new Array(o);let l=0;for(let e=0;e<o;e++)ae(t,s[e])&&e!==i&&(n[l++]=e,r[e].x1=void 0,r[e].y1=void 0,r[e].x2=void 0,r[e].y2=void 0,r[e].mX1=void 0,r[e].mY1=void 0,r[e].mX2=void 0,r[e].mY2=void 0,r[e].x=void 0,r[e].y=void 0,r[e].mX=void 0,r[e].mY=void 0);return n[l++]=i,n.length=l,n},Ee=(e,t,i,s,r,o)=>{const n=R(e),l=f(e);if(t<0||t>=n.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof s)throw"x or y is not a number.";if(i<l.MARGIN||s<l.MARGIN)throw"Left edges falls outside the grid area.";if("number"!=typeof r||"number"!=typeof o)throw"Width or Height is not a number.";if(i+r+l.MARGIN>l.WIDTH)throw"Right edges falls outside the grid area.";if(r<l.DEFINED_MIN_HEIGHT_AND_WIDTH||o<l.DEFINED_MIN_HEIGHT_AND_WIDTH)throw`Width or height less than min height or width ${l.DEFINED_MIN_HEIGHT_AND_WIDTH}.`;if(o+2*l.MARGIN>l.HEIGHT)throw"Height cannot be greater than height of container.";return!0},Ge=(e,t,i,s)=>{const r=R(e),o=f(e);if(t<0||t>=r.length)throw"Index out of bounds.";if("number"!=typeof i||"number"!=typeof s)throw"toX or toY is not a number.";if(i<o.MARGIN||s<o.MARGIN)throw"Left edges falls outside the grid area.";if(i+r[t].width+o.MARGIN>o.WIDTH)throw"Right edges falls outside the grid area.";return!0},_e=(e,t,i,s,r)=>({x:e,y:t,width:i,height:s,mX:e-r,mY:t-r,mWidth:i+2*r,mHeight:s+2*r,x1:e,y1:t,x2:e+i,y2:t+s,mX1:e-r,mY1:t-r,mX2:e+i+r,mY2:t+s+r}),Re=(e,t,i,s)=>({x:e,y:t,width:i.width,height:i.height,mX:e-s,mY:t-s,mWidth:i.width+2*s,mHeight:i.height+2*s,x1:e,y1:t,x2:e+i.width,y2:t+i.height,mX1:e-s,mY1:t-s,mX2:e+i.width+s,mY2:t+i.height+s}),Ce=e=>{const t=R(e),i=E(e),s=t.length;for(let e=0;e<s;e++)i.$limberGridViewItems[e]&&(i.$limberGridViewItems[e].style.transform=`translate(${t[e].x1}px, ${t[e].y1}px)`,i.$limberGridViewItems[e].style.width=t[e].width+"px",i.$limberGridViewItems[e].style.height=t[e].height+"px")},He=(e,t)=>{const i=E(e);for(const e in t)if(i.$limberGridViewItems[e]){const s=t[e];i.$limberGridViewItems[e].style.transform=`translate(${s.x}px, ${s.y}px)`,i.$limberGridViewItems[e].style.width=s.width+"px",i.$limberGridViewItems[e].style.height=s.height+"px"}},Me=(e,t,i,s)=>{const r={x1:i,x2:s,y1:0,y2:t.y1<0?0:t.y1},o=((e,t,i)=>{const s=R(e);let r,o=0;const n=s.length;for(let e=0;e<n;e++)r=s[e],s[e].y2>o&&r.mX<i&&r.mX2>t&&(o=s[e].y2);return o})(e,i,s);return{topWorkSpace:r,bottomWorkSpace:{x1:i,x2:s,y1:t.y2,y2:o>t.y2?o:t.y2}}},Se=(e,t,i=!1,s)=>{const r=H(e),o=r.length,n=new Array(o);let l,a=0;for(let e=0;e<o;e++)l=r[e],s&&s[e]||de(t,l)&&(n[a++]=i?e:r[e]);return n.length=a,n},$e=(e,t)=>e.x1===t.x1?e.y1-t.y1:e.x1-t.x1,Ne=(e,t)=>e.y1===t.y1?e.x1-t.x1:e.y1-t.y1,Oe=function(e,t){if(Ae(e,t)&&e!==t)return!0},ke=(e,t,i,s,r)=>{if(t.mWidth*t.mWidth+t.mHeight*t.mHeight<J(e.x1,e.y1,e.x2,e.y2)&&e.x2-e.x1>=t.mWidth&&e.y2-e.y1>=t.mHeight)return!0;if(!r)return;const o=r;let n={width:0,height:0},l={width:0,height:0};const a=t.mWidth;if((100*a-100*(e.x2-e.x1))/a<=o){const s=(e.x2-e.x1)/t.mWidth,r=t.mHeight*s;r<=e.y2-e.y1&&(n={width:e.x2-e.x1-2*i,height:r-2*i})}const d=t.mHeight;if((100*d-100*(e.y2-e.y1))/d<=o){const s=(e.y2-e.y1)/t.mHeight*t.mWidth;s<=e.x2-e.x1&&(l={width:s-2*i,height:e.y2-e.y1-2*i})}(n.width<s||n.height<s)&&(n.width=0,n.height=0),(l.width<s||l.height<s)&&(l.width=0,l.height=0);const c=n.width*n.width+n.height*n.height,u=l.width*l.width+l.height*l.height;return(c<u||0===u)&&n.width>0?n:l.width>0?l:void 0},Ve=(e,t,i)=>{const s=H(e),r=t.length;for(let e=0;e<r;e++)s[t[e]].y+=i,s[t[e]].mY+=i,s[t[e]].y1+=i,s[t[e]].y2+=i,s[t[e]].mY1+=i,s[t[e]].mY2+=i},Le=function(e,t,i){const s=R(e),r=E(e),o=s.length;for(let e=0;e<o;e++)s[e].y>=t&&(s[e].y-=i,s[e].mY-=i,s[e].y1-=i,s[e].y2-=i,s[e].mY1-=i,s[e].mY2-=i,r.$limberGridViewItems[e]&&(r.$limberGridViewItems[e].style.transform="translate("+s[e].x1+"px, "+s[e].y1+"px)"))},Pe=function(e,t,i,s,r){const o=f(e),n=R(e);var l={x1:t-o.MARGIN,y1:i-o.MARGIN,x2:t+s+o.MARGIN,y2:i+r+o.MARGIN};if(t<0||i<0)return!1;if("number"!=typeof s||"number"!=typeof r)return!1;if(t+s>o.WIDTH)return!1;if(s<50||r<50)return!1;let a;const d=n.length;for(let e=0;e<d;e++)if(a=ce(l,n[e]),a)return!1;return!0},ze=function(e,t,i,s,r){const o=f(e),n=R(e),l={x1:0,y1:i,x2:o.WIDTH,y2:i+r};if("number"!=typeof s||"number"!=typeof r)return!1;let a=l.y2,d=l.y1;const c=n.length;for(let e=0;e<c;e++){if(ue(l,n[e])||n[e].mY1<l.y1&&n[e].mY2>l.y2)return!1;if(!ce(l,n[e]))continue;const t={x:n[e].mX1,y:n[e].mY1},i={x:n[e].mX2,y:n[e].mY2};n[e].mY1<a&&ye(l,t)&&(a=n[e].mY1),n[e].mY2>d&&ye(l,i)&&(d=n[e].mY2)}return a-d>0&&{y:d,shiftHeight:a-d}};var We=function(e,t){return e.store.variables.trees[t]};var Ye=function(e,t){return e.store.variables.stacks[t]};const Xe=(e,t)=>{const i=E(e);let s,r=i.$limberGridViewDebugUnmergedRects.length;for(let e=0;e<r;e++)i.$limberGridView.removeChild(i.$limberGridViewDebugUnmergedRects[e]);T(e,[]),r=t.length;for(let e=0;e<r;e++)s=document.createElement("div"),s.setAttribute("class","limber-grid-view-debug-rect limber-grid-view-debug-unmerged-rect"),s.setAttribute("id","limber-grid-view-debug-unmerged-rect-"+t[e].id),s.setAttribute("tabindex","-1"),s.setAttribute("title",""+t[e].id),s.innerHTML=t[e].id,s.style.transform=`translate(${t[e].x1}px, ${t[e].y1}px)`,s.style.width=t[e].x2-t[e].x1+"px",s.style.height=t[e].y2-t[e].y1+"px",i.$limberGridView.appendChild(s);T(e,i.$limberGridView.querySelectorAll(".limber-grid-view-debug-unmerged-rect"))},Ue=(e,t)=>{const i=E(e);let s,r=i.$limberGridViewDebugMergedFreeRects.length;for(let e=0;e<r;e++)i.$limberGridView.removeChild(i.$limberGridViewDebugMergedFreeRects[e]);D(e,[]),r=t.length;for(let e=0;e<r;e++)s=document.createElement("div"),s.setAttribute("class","limber-grid-view-debug-rect limber-grid-view-debug-merged-free-rect"),s.setAttribute("id","limber-grid-view-debug-merged-free-rect-"+t[e].id),s.setAttribute("tabindex",-1),s.setAttribute("title",""+t[e].id),s.innerHTML=t[e].id,s.style.transform=`translate(${t[e].x1}px, ${t[e].y1}px)`,s.style.width=t[e].x2-t[e].x1+"px",s.style.height=t[e].y2-t[e].y1+"px",i.$limberGridView.appendChild(s);D(e,i.$limberGridView.querySelectorAll(".limber-grid-view-debug-merged-free-rect"))},Fe=(e,t)=>{const i=E(e);if(!t)return void(i.$limberGridViewDebugStackTopRect&&(i.$limberGridView.removeChild(i.$limberGridViewDebugStackTopRect),A(e,void 0)));i.$limberGridViewDebugStackTopRect&&i.$limberGridView.removeChild(i.$limberGridViewDebugStackTopRect);const s=document.createElement("div");s.setAttribute("class","limber-grid-view-debug-rect limber-grid-view-debug-stack-top-rect"),s.setAttribute("id","limber-grid-view-debug-stack-top-rect"),s.setAttribute("tabindex",-1),s.setAttribute("title",""+t.id),s.innerHTML=t.id||"",s.style.transform=`translate(${t.x1}px, ${t.y1}px)`,s.style.width=t.x2-t.x1+"px",s.style.height=t.y2-t.y1+"px",i.$limberGridView.appendChild(s),A(e,i.$limberGridView.querySelectorAll(".limber-grid-view-debug-stack-top-rect")[0])},je=(e,t,i)=>{let s,r;const o=We(e,"rt");if(t){s=Se(e,t);const i=Be(e,t,s,o);t.y1=i}if(i){r=Se(e,i);const t=Ze(e,i,r,o);i.y2=t}},Be=(e,t,i,s)=>{s.reset();const r=i.length;for(let e=0;e<r;e++)s.insert(i[e]);let o=t.y2;const n=d(e),l=p(e);let a=0;const c={x1:0,x2:0,y1:t.y1,y2:t.y2};let u;for(;a<n;){c.x1=a,c.x2=a+l,u=s.find(c,!1,!0,void 0,!1);const e=u.length;let t=-1;for(let i=0;i<e;i++)u[i].mY2>t&&(t=u[i].mY2);-1!==t&&t<o&&(o=t),a=c.x2}return o},Ze=(e,t,i,s)=>{s.reset();const r=i.length;for(let e=0;e<r;e++)s.insert(i[e]);let o=t.y1;const n=d(e),l=p(e);let a=0;const c={x1:0,x2:0,y1:t.y1,y2:t.y2};let u;for(;a<n;){c.x1=a,c.x2=a+l,u=s.find(c,!1,!0,void 0,!1);const e=u.length;let t=Number.MAX_SAFE_INTEGER;for(let i=0;i<e;i++)u[i].mY1<t&&(t=u[i].mY1);t!==Number.MAX_SAFE_INTEGER&&t>o&&(o=t),a=c.x2}return o},Ke=async(e,t,i,s)=>{const r=We(e,"rt");let o,n;r.reset(),t.id=s.idCount++,r.insert(t);let l,a=0,d=0;const c=i.length;for(let t=0;t<c;t++){o=i[t],await se(1e3),Xe(e,r.getData()),await se(1e3),Fe(e,o),n=r.find(o,!1,!0,void 0,!1),a=n.length;for(let e=0;e<a;e++){he(o),l=ve(n[e],o),he(o),r.remove(n[e]),d=l.length;for(let e=0;e<d;e++)l[e].x2-l[e].x1<=.5||l[e].y2-l[e].y1<=.5||(l[e].id=s.idCount++,r.insert(l[e]))}}return await se(1e3),Xe(e,r.getData()),await se(3e3),{rt:r}},Qe=async(e,t,i,s)=>{let r=!1;for(;!t.isEmpty();){await se(1e3),Ue(e,i.getData());const o=t.pop();r=!1;const n={x1:o.x1-.5>=0?o.x1-.5:0,x2:o.x2+.5,y1:o.y1-.5>=0?o.y1-.5:0,y2:o.y2+.5},l=i.find(n,!1,!0,void 0,!0),a=(null==l?void 0:l.length)||0;if(a>0){for(let e=0;e<a;e++){const t=l[e],n=xe(t,o);if(1===n.length){const e=n[0];e.id=s.idCount++,Ae(e,t)&&i.remove(t),Ae(e,o)&&(r=!0),i.insert(e)}}!1===r&&(o.id=s.idCount++,i.insert(o))}else o.id=s.idCount++,i.insert(o)}await se(1e3),Ue(e,i.getData())},qe=e=>{const t=e.getData(),i=t.length;for(let s=0;s<i;s++){const i=t[s];e.find(i,void 0,void 0,Oe,!1)&&e.remove(i)}},Je=async(e,t,i,s)=>{let r;const o=Ye(e,"stack");Array.isArray(t)?(o.setData(t.sort($e),!0),r=We(e,"rt"),r.reset()):(o.setData(s.sort($e),!0),r=t),await se(1e3),Xe(e,o.getData()),Ue(e,[]),await Qe(e,o,r,i),qe(r),await se(1e3),Xe(e,r.getData()),Ue(e,[]);const n=r.getData();return o.setData(n.sort(Ne),!0),r.reset(),await Qe(e,o,r,i),qe(r),await se(1e3),Xe(e,[]),Ue(e,r.getData()),await se(3e3),{mergedRectsRt:r}},et=async(e,t,i,s,r,o,n)=>{const l=H(e),a=R(e),d=f(e),c=v(e),u={},h={},m={};let p,y,b,g=i.getData();t.sort((e=>(t,i)=>J(e[t].x,e[t].y,e[t].x+e[t].width,e[t].y+e[t].height)-J(e[i].x,e[i].y,e[i].x+e[i].width,e[i].y+e[i].height))(a));const I=Ye(e,"garbageStack");let w=t.length;for(;w>0;){let s;p=t[--w],y=l[p],b=a[p];let o,f=Number.MAX_SAFE_INTEGER,v=y;const T=b||{mX1:0,mY1:0,mX2:0,mY2:0},D=g.length;for(let e=0;e<D;e++){const t=g[e],i=(A=T,J((x=t).x1,x.y1,A.mX1,A.mY1)),r=ke(t,v,d.MARGIN,d.DEFINED_MIN_HEIGHT_AND_WIDTH,c.SHRINK_TO_FIT);r&&i<f&&(f=i,s=g[e],o="object"==typeof r?r:void 0)}if(!s)continue;o&&(y.width=o.width,y.height=o.height,m[p]=!0),y.x=s.x1+d.MARGIN,y.y=s.y1+d.MARGIN,y.x1=y.x,y.y1=y.y,y.x2=y.x+y.width,y.y2=y.y+y.height,le(y),y.mX=y.x-d.MARGIN,y.mY=y.y-d.MARGIN,y.mWidth=y.width+2*d.MARGIN,y.mHeight=y.height+2*d.MARGIN,y.mX1=y.x1-d.MARGIN,y.mY1=y.y1-d.MARGIN,y.mX2=y.x2+d.MARGIN,y.mY2=y.y2+d.MARGIN,u[p]=y,r&&Ae(r,s)&&(h[p]=p),I.empty();const E=i.find(s,!1,!0,void 0,!1),G=E.length;v={...y},v.x1-=d.MARGIN,v.x2+=d.MARGIN,v.y1-=d.MARGIN,v.y2+=d.MARGIN;for(let e=0;e<G;e++){const t=E[e],s=ve(t,v),r=(null==s?void 0:s.length)||0;for(let e=0;e<r;e++)s[e].id=n.idCount++,I.push(s[e]);i.remove(t)}await se(1e3),Xe(e,[]),Ue(e,[]);const{mergedRectsRt:_}=await Je(e,i,n,I.getData());g=(i=_).getData()}var x,A;return{arranged:u,itemsInBottomWorkSpace:h,resized:m}},tt=async(e,t,i,s)=>{var r;const o=f(e),n=H(e),l=performance.now(),a={idCount:0},{minY:d,maxY:c}=((e,t,i,s,r,o,n)=>{const l=R(e),a=H(e),d=f(e);let c=Number.MAX_SAFE_INTEGER,u=0,h=Number.MAX_SAFE_INTEGER,m=0;const p=t.length;for(let e=0;e<p;e++)l[t[e]].y<c&&(c=l[t[e]].y),l[t[e]].y2>u&&(u=l[t[e]].y2),l[t[e]].x<h&&(h=l[t[e]].x),l[t[e]].x2>m&&(m=l[t[e]].x2);return r>u&&(u=r),s>m&&(m=s),i<h&&(h=i),o<c&&(c=o),n>u&&(u=n),u-c>1.5*d.HEIGHT&&(c=a[t[p-1]].y,u=a[t[p-1]].y2),{minX:h-d.MARGIN,maxX:m+d.MARGIN,minY:c-d.MARGIN,maxY:u+d.MARGIN}})(e,t,void 0,void 0,void 0,i,s),u=new Array(t.length-1),h=t.length-1;for(let e=0;e<h;e++)u[e]=t[e];const m={x1:0,x2:o.WIDTH,y1:d,y2:c};await se(1e3),Fe(e,m);const p={...m},{topWorkSpace:y,bottomWorkSpace:b}=Me(e,m,0,o.WIDTH);await se(1e3),Fe(e,y),await se(1e3),Fe(e,b),je(e,y,b),await se(1e3),Fe(e,y),await se(1e3),Fe(e,b),p.y1=y.y1,p.y2=b.y2,await se(1e3),Fe(e,p);let v=Se(e,p),g=Se(e,p,!0);g=(e=>{const t={};for(const i of e)t[i]=!0;return t})(g);let I=Se(e,b,!0,g);const w=((e,t,i=!1,s)=>{const r=H(e);if(!t)return[];const o=r.length,n=new Array(o);let l=0;for(let e=0;e<o;e++)s&&s[e]||t.y2<=r[e].mY1&&(n[l++]=i?e:r[e]);return n.length=l,n})(e,b,!0,g),x=(o.DEFINED_MIN_HEIGHT_AND_WIDTH-2*o.MARGIN)/2;let A=0,T={},D=0,E={},G=0;for(;D!==h;){Ue(e,[]);const{rt:t}=await Ke(e,p,v,a);await se(1e3),Fe(e);let i=t.getData();i=i.filter(e=>e.x2-e.x1>.5&&e.y2-e.y1>.5),await se(1e3),Xe(e,i),Ue(e,[]),await se(3e3),Xe(e,[]),Ue(e,[]);const{mergedRectsRt:s}=await Je(e,i,a),{arranged:r,itemsInBottomWorkSpace:o,resized:n}=await et(e,u.filter(e=>!T[e]),s,0,b,0,a);I=[...I,...Object.keys(o)],T={...T,...r},E={...E,...n};const l=Object.values(r);if(v=[...v,...l],D+=l.length,D!==h&&(G++,m.y2+=x,b&&(b.y1+=x,b.y2+=x),p.y2+=x,Ve(e,I,x)),A++,A>1e3)throw"Arrange time out"}if(G>0){Ve(e,w,x*G);let t=I.length;for(let e=0;e<t;e++)T[I[e]]=n[I[e]];t=w.length;for(let e=0;e<t;e++)T[w[e]]=n[w[e]]}await se(1e3),Xe(e,[]),Ue(e,[]);const _=performance.now();return console.log("p1: ",l),console.log("p2: ",_),console.log("workSpaceResizeCount",G),console.log("itemsToArrange",h),console.log("arrange total: ",_-l),null!==(r=e.options.callbacks)&&void 0!==r&&r.getArrangeTime&&e.options.callbacks.getArrangeTime(_-l,G,a.idCount),{arranged:T,resized:E}},it=function(e,t,i){e.store.variables.status[t]=i},st=function(e,t){return e.store.variables.status[t]};const rt=e=>e.store.variables.bindedFunctions,ot=function(){const e=j(this),t=E(this),i=$(this),s=rt(this);if(e.editable){ee(this)||e.enableInteractiveAddAndCut&&(t.$limberGridView.addEventListener("mousedown",s.onDeskMouseDown),e.enableTouchInteraction&&t.$limberGridView.addEventListener("touchstart",s.onDeskTouchStart));for(var r=t.$limberGridViewItems.length,o=0;o<r;o++)!ee(this)&&t.$limberGridViewItems[o]&&(t.$limberGridViewItems[o].addEventListener("mousedown",s.onItemMouseDown),e.enableTouchInteraction&&t.$limberGridViewItems[o].addEventListener("touchstart",s.onItemTouchStart)),i.onItemClickCallback&&t.$limberGridViewItems[o]&&t.$limberGridViewItems[o].addEventListener("click",s.onItemClick)}},nt=function(){const e=j(this),t=E(this),i=rt(this);if(e.editable&&(t.$limberGridView&&(t.$limberGridView.removeEventListener("mousedown",i.onDeskMouseDown),t.$limberGridView.removeEventListener("touchstart",i.onDeskTouchStart)),t.$limberGridViewItems)){const e=t.$limberGridViewItems.length;for(let s=0;s<e;s++)t.$limberGridViewItems[s]&&(t.$limberGridViewItems[s].removeEventListener("mousedown",i.onItemMouseDown),t.$limberGridViewItems[s].removeEventListener("touchstart",i.onItemTouchStart),t.$limberGridViewItems[s].removeEventListener("click",i.onItemClick))}},lt=function(){const e=E(this),t=rt(this);if(e.$limberGridViewItems){const i=e.$limberGridViewItems.length;for(let s=0;s<i;s++)e.$limberGridViewItems[s]&&(e.$limberGridViewItems[s].addEventListener("mousedown",t.onItemMouseDown),e.$limberGridViewItems[s].addEventListener("touchstart",t.onItemTouchStart))}},at=function(){const e=E(this),t=rt(this);if(e.$limberGridViewItems){const i=e.$limberGridViewItems.length;for(let s=0;s<i;s++)e.$limberGridViewItems[s]&&(e.$limberGridViewItems[s].removeEventListener("mousedown",t.onItemMouseDown),e.$limberGridViewItems[s].removeEventListener("touchstart",t.onItemTouchStart))}};var dt=function(e){return e.store.variables.undoRedo};const ct=function(e,t=!0){const i=j(e),s=R(e),r=f(e),o=v(e),n=E(e),l=$(e);nt.call(e);const a=s.length;let d=1;t&&(d=r.WIDTH_SCALE_FACTOR);for(let e=0;e<a;e++)s[e].x1*=d,s[e].x2*=d,s[e].y1*=d,s[e].y2*=d,s[e].x=s[e].x1,s[e].y=s[e].y1,s[e].width*=d,s[e].height*=d,le(s[e]),s[e].mX1=s[e].x1-r.MARGIN,s[e].mX2=s[e].x2+r.MARGIN,s[e].mY1=s[e].y1-r.MARGIN,s[e].mY2=s[e].y2+r.MARGIN,s[e].mX=s[e].x-r.MARGIN,s[e].mY=s[e].y-r.MARGIN,s[e].mWidth=s[e].width+2*r.MARGIN,s[e].mHeight=s[e].height+2*r.MARGIN;dt(e).setCurrent(s);const c=V(e),u=c.length,h=new Array(u),m=new Array(a);let p;if(ee(e)){const t="limber-grid-view-item limber-grid-view-item-mobile-view";p=S(e);for(let e=0;e<u;e++){const i=c[e];p[i].width=r.WIDTH,p[i].height=r.WIDTH/o.MOBILE_ASPECT_RATIO;const s=document.createElement("div");s.setAttribute("class",t),s.setAttribute("data-index",p[i].index),s.style.width=p[i].width+"px",s.style.height=p[i].height+"px",h[e]=s,m[i]=s}x(e).style.transform=`translate(0px, ${r.WIDTH/o.MOBILE_ASPECT_RATIO*15+14*r.MARGIN-50}px)`}else{let e="limber-grid-view-item";!0===i.editable&&(e="limber-grid-view-item limber-grid-view-item-editable "+(o.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":""));for(let t=0;t<u;t++){const i=c[t],r=document.createElement("div");r.setAttribute("class",e),r.setAttribute("data-index",i),r.style.transform=`translate(${s[i].x}px, ${s[i].y}px)`,r.style.width=s[i].width+"px",r.style.height=s[i].height+"px",h[t]=r,m[i]=r}}const y=n.$limberGridViewItems.length;for(let e=0;e<y;e++)n.$limberGridViewItems[e]&&(n.$limberGridView.removeChild(n.$limberGridViewItems[e]),n.$limberGridViewItems[e]=void 0);for(let e=0;e<u;e++)n.$limberGridView.appendChild(h[e]);for(let t=0;t<u;t++){const i=c[t],r=h[t];if(ee(e)){const t=l.renderContent(p[i].index,p[i].width,p[i].height);ft(e,t,r)}else{const t=l.renderContent(i,s[i].width,s[i].height);ft(e,t,r)}}!function(e,t){e.store.variables.elements.$limberGridViewItems=t}(e,m),ot.call(e),l.renderComplete&&l.renderComplete()},ut=function(e,t){const i=E(e),s=$(e),r=R(e),o=f(e),n=v(e);let l;l=ee(e)?s.renderContent(t,o.WIDTH,o.WIDTH/n.MOBILE_ASPECT_RATIO):s.renderContent(t,r[t].width,r[t].height),ft(e,l,i.$limberGridViewItems[t]),s.renderComplete&&s.renderComplete(t)},ht=function(e,t){nt.call(e);const i=$(e),s=E(e);for(const e in t){const t=s.$limberGridViewItems[e];i.removePlugin&&i.removePlugin(s.$limberGridViewItems[e]),t&&t.remove(),s.$limberGridViewItems[e]=void 0}},mt=function(e,t,i=!1){const s=j(e),r=v(e),o=f(e),n=R(e),l=$(e),a=E(e),d=V(e);let c,u="limber-grid-view-item";!0===s.editable&&(u="limber-grid-view-item limber-grid-view-item-editable "+(r.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":""));const h=t.length,m=new Array(h);if(ee(e)){const i="limber-grid-view-item limber-grid-view-item-mobile-view";c=S(e);for(let e=0;e<h;e++){const s=t[e];c[s].width=o.WIDTH,c[s].height=o.WIDTH/r.MOBILE_ASPECT_RATIO;const n=document.createElement("div");n.setAttribute("class",i),n.setAttribute("data-index",c[s].index),n.style.width=c[s].width+"px",n.style.height=c[s].height+"px",m[e]=n,a.$limberGridViewItems[s]=n}x(e).style.transform=`translate(0px, ${o.WIDTH/r.MOBILE_ASPECT_RATIO*d.length+o.MARGIN*(d.length-1)-50}px)`}else for(let e=0;e<h;e++){const i=t[e],s=document.createElement("div");s.setAttribute("class",u),s.setAttribute("data-index",i),s.style.transform=`translate(${n[i].x}px, ${n[i].y}px)`,s.style.width=n[i].width+"px",s.style.height=n[i].height+"px",m[e]=s,a.$limberGridViewItems[i]=s}for(let i=0;i<h;i++){const s=t[i],r=m[i];if(ee(e)){const t=l.renderContent(c[s].index,c[s].width,c[s].height);ft(e,t,r)}else{const t=l.renderContent(s,n[s].width,n[s].height);ft(e,t,r)}}let p;void 0!==t[0]&&(p=a.$limberGridViewItems[t[0]+1]);for(let e=0;e<h;e++)i?(a.$limberGridView.insertBefore(m[e],p),p=m[e]):a.$limberGridView.appendChild(m[e]);ot.call(e)},pt=async function(e,t){const i=j(e),s=E(e),r=$(e),o=f(e),n=v(e);nt.call(e);try{if(t.x&&t.y&&t.width&&t.height){re(t),Object.assign(t,{mX:t.x-o.MARGIN,mY:t.y-o.MARGIN,mWidth:t.width+2*o.MARGIN,mHeight:t.height+2*o.MARGIN,mX1:t.x1-o.MARGIN,mY1:t.y1-o.MARGIN,mX2:t.x2+o.MARGIN,mY2:t.y2+o.MARGIN});let i=!1;if(i=Pe(e,t.x,t.y,t.width,t.height),!i)return!1;{const i=R(e);C(e,i);const s=H(e);s.push(t),_(e,s),M(e,s),dt(e).reset(),dt(e).push(s)}}else{if(!t.width||!t.height||t.x||t.y)return!1;{if(t.width>o.WIDTH)return!1;const i=R(e);C(e,i);const s=H(e),r=(e=>{const t=R(e);let i=f(e).MARGIN;const s=t.length;for(let e=0;e<s;e++)t[e].mY2>i&&(i=t[e].mY2);return i})(e);s.push({x:void 0,y:void 0,width:t.width,height:t.height,mX:void 0,mY:void 0,mWidth:t.width+2*o.MARGIN,mHeight:t.height+2*o.MARGIN,x1:void 0,y1:void 0,x2:void 0,y2:void 0,mX1:void 0,mY1:void 0,mX2:void 0,mY2:void 0}),await(async(e,t,i)=>{var s;const r=f(e),o=performance.now(),n={idCount:0},l=r.WIDTH,a=i,d=i+r.DEFINED_MIN_HEIGHT_AND_WIDTH,c=t.length,u={x1:0,x2:l,y1:a,y2:d},h={...u},{topWorkSpace:m}=Me(e,u,0,r.WIDTH);je(e,m),h.y1=m.y1;let p=Se(e,h);const y=r.DEFINED_MIN_HEIGHT_AND_WIDTH-2*r.MARGIN-10;let b=0,v={},g=0,I=0;for(;g!==c;){const{rt:i}=Ke(e,h,p,n),s=i.getData(),{mergedRectsRt:r}=await Je(e,s,n),{arranged:o}=await et(e,t.filter(e=>!v[e]),r,0,void 0,0,n);v={...v,...o};const l=Object.values(o);if(p=[...p,...l],g+=l.length,g!==c&&(I++,u.y2+=y,h.y2+=y),b++,b>1e4)throw"Arrange time out"}const w=performance.now();return console.log("p1: ",o),console.log("p2: ",w),console.log("workSpaceResizeCount",I),console.log("arrange total: ",w-o),null!==(s=e.options.callbacks)&&void 0!==s&&s.getArrangeTime&&e.options.callbacks.getArrangeTime(w-o,I,n.idCount),v})(e,[s.length-1],r),le(s[s.length-1]),_(e,s),M(e,s),dt(e).reset(),dt(e).push(s)}}const l=R(e),a=l.length-1;let d;const c=document.createElement("div");if(ee(e)){const e="limber-grid-view-item limber-grid-view-item-mobile-view";c.setAttribute("class",e),c.setAttribute("data-index",a),c.style.width=o.WIDTH+"px",c.style.height=o.WIDTH/n.MOBILE_ASPECT_RATIO+"px",d=r.renderContent(a,o.WIDTH,o.WIDTH/n.MOBILE_ASPECT_RATIO,"isAdd")}else{let e="limber-grid-view-item";!0===i.editable&&(e="limber-grid-view-item limber-grid-view-item-editable "+(n.SHOW_BOTTOM_LEFT_RESIZE_GUIDE?"limber-grid-view-item-editable-left-resize":"")),c.setAttribute("class",e),c.setAttribute("data-index",a),c.style.transform=`translate(${l[a].x}px, ${l[a].y}px)`,c.style.width=l[a].width+"px",c.style.height=l[a].height+"px",d=r.renderContent(a,l[a].width,l[a].height,"isAdd")}ee(e)||(s.$limberGridView.appendChild(c),ft(e,d,c),s.$limberGridViewItems.push(c),V(e).push(a)),ee(e)||s.$limberGridView.scrollTo({left:0,top:l[a].y1,behavior:"smooth"}),r.addComplete&&r.addComplete(a)}catch(e){$(this).getLogMessage({type:"error",message:e}),console.error(e)}ot.call(e)},ft=(e,t,i)=>{const s=$(e);"string"==typeof t?i.innerHTML=t:t instanceof Element?(i.innerHTML="",i.appendChild(t)):s.renderPlugin&&s.renderPlugin(t,i)},yt=async function(e,t,i,s,r){const o=R(this),n=E(this),l=$(this),a=v(this),d=f(this);if(e=parseInt(e),a.LATCH_MOVED_ITEM){const e=st(this,"resizeDemo");t=(null==e?void 0:e.x)||t,i=(null==e?void 0:e.y)||i,r=(null==e?void 0:e.height)||r,s=(null==e?void 0:e.width)||s}Ee(this,e,t,i,s,r),C(this,o);const c=H(this),u=_e(t,i,s,r,d.MARGIN);c[e]={...u};const h=Te(this,u,e);let m,p;({arranged:m,resized:p}=await tt(this,h,i,i+r)),_(this,c),dt(this).push(c),n.$limberGridViewItems[e]&&(n.$limberGridViewItems[e].style.transform=`translate(${t}px, ${t}px)`,n.$limberGridViewItems[e].style.width=c[e].width+"px",n.$limberGridViewItems[e].style.height=c[e].height+"px"),He(this,m),l.resizeComplete&&l.resizeComplete(e,s,r,Object.keys(m)),ut(this,e);for(const e in p)ut(this,e)},bt=async function(e,t,i){const s=R(this),r=E(this),o=$(this),n=v(this),l=f(this);e=parseInt(e);const a=st(this,"moveDemo");n.LATCH_MOVED_ITEM&&a&&a.toAdj.toX!==Number.MAX_SAFE_INTEGER&&(t=a.toAdj.toX,i=a.toAdj.toY),Ge(this,e,t,i),C(this,s);const d=H(this),c=Re(t,i,s[e],l.MARGIN);d[e]={...c};const u=De(this,c,e),{arranged:h,resized:m}=await tt(this,u,i,i+s[e].height);_(this,d),dt(this).push(d),r.$limberGridViewItems[e]?(r.$limberGridViewItems[e].style.transform=`translate(${d[e].x}px, ${d[e].y}px)`,n.ANIMATE_MOVED_ITEM||(r.$limberGridViewItems[e].style.transition="none",setTimeout(()=>{r.$limberGridViewItems[e].style.transition=""},n.ANIMATE_TIME))):mt(this,[e]),He(this,h),o.moveComplete&&o.moveComplete(e,t,i,Object.keys(h));for(const e in m)ut(this,e)},vt=function(e){return e.store.variables.eventSpecific.itemInteraction},gt=function(e){return e.store.variables.eventSpecific.deskInteraction},It=function(e){const t=E(this),i=v(this),s=R(this),r=vt(this),o=rt(this),n=B(this,e);n&&(Object.assign(r.userActionData,n),"move"===r.userActionData.type?(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!1,document.addEventListener("mousemove",o.onItemMouseMove),document.addEventListener("mouseup",o.onItemMouseUp),document.addEventListener("contextmenu",o.onItemContextMenu),clearTimeout(r.longPressCheck),r.longPressCheck=setTimeout(xt.bind(this,e),i.MOUSE_DOWN_TIME),e.preventDefault()):"resize"!==r.userActionData.type&&"resizeBottomLeft"!==r.userActionData.type||(r.mouseDownCancel=!1,r.mouseDownTimerComplete=!0,t.$limberGridView.addEventListener("mousemove",o.onItemMouseMove),document.addEventListener("mouseup",o.onItemMouseUp),document.addEventListener("contextmenu",o.onItemContextMenu),r.userActionData.itemX=s[r.userActionData.itemIndex].x,r.userActionData.itemY=s[r.userActionData.itemIndex].y,r.userActionData.itemX2=s[r.userActionData.itemIndex].x2,r.userActionData.itemY2=s[r.userActionData.itemIndex].y2,Z(this,r.userActionData),e.preventDefault()),e.stopPropagation())},wt=function(e){const t=E(this),i=v(this),s=R(this),r=vt(this),o=rt(this);if(1!==e.touches.length)return void Rt.call(this,e);if(!U(this,e))return;const n=B(this,e);n&&(Object.assign(r.userActionData,n),"move"===r.userActionData.type?(r.touchHoldCancel=!1,r.touchHoldTimerComplete=!1,document.addEventListener("touchmove",o.onItemTouchMove),document.addEventListener("touchend",o.onItemTouchEnd),document.addEventListener("touchcancel",o.onItemTouchCancel),document.addEventListener("contextmenu",o.onItemTouchContextMenu),r.longTouchCheck=setTimeout(At.bind(this,e),i.TOUCH_HOLD_TIME),e.preventDefault()):"resize"!==r.userActionData.type&&"resizeBottomLeft"!==r.userActionData.type||(r.touchHoldCancel=!1,r.touchHoldTimerComplete=!0,t.$limberGridView.addEventListener("touchmove",o.onItemTouchMove),document.addEventListener("touchend",o.onItemTouchEnd),document.addEventListener("touchcancel",o.onItemTouchCancel),document.addEventListener("contextmenu",o.onItemTouchContextMenu),r.userActionData.itemX=s[r.userActionData.itemIndex].x,r.userActionData.itemY=s[r.userActionData.itemIndex].y,r.userActionData.itemX2=s[r.userActionData.itemIndex].x2,r.userActionData.itemY2=s[r.userActionData.itemIndex].y2,Z(this,r.userActionData),e.preventDefault()),e.stopPropagation())},xt=function(e){const t=vt(this);!1===t.mouseDownCancel&&(t.mouseDownTimerComplete=!0,K(this,t.userActionData,e))},At=function(e){const t=vt(this);!1===t.touchHoldCancel&&(t.touchHoldTimerComplete=!0,K(this,t.userActionData,e))},Tt=function(e){const t=E(this),i=f(this),s=v(this),r=$(this),o=R(this),n=vt(this);if(!0===n.mouseDownTimerComplete)if("move"===n.userActionData.type){Q(this,n.userActionData,e,"move"),clearTimeout(n.showMoveDemoTimeOutVariable);const t=Y(this,e);let i;if(r.offsetMovePseudoElement&&t){const e=r.offsetMovePseudoElement(t.x,t.y,q(o[n.userActionData.itemIndex]));i=t.y,t.x=e.x,t.y=e.y}t&&(n.isScrolling||(n.isScrolling=!0,setTimeout(()=>{G(this,i,t.offsetY,s.AUTO_SCROLL_FOR_MOUSE),n.isScrolling=!1},s.AUTO_SCROLL_DELAY)))}else{Q(this,n.userActionData,e,"resize"),clearTimeout(n.showResizeDemoTimeOutVariable);const r=t.$limberGridView.scrollTop,o=t.$limberGridView.scrollLeft,l=n.userActionData.itemX,a=n.userActionData.itemY;let d,c,u,h;"resize"===n.userActionData.type?(d=l,c=a,u=e.offsetX-l+o-i.PADDING_LEFT,h=e.offsetY-a+r-i.PADDING_TOP):(d=e.offsetX+o-i.PADDING_LEFT,c=a,u=n.userActionData.itemX2-d,h=e.offsetY+r-i.PADDING_TOP-c),n.userActionData.newX1=d,n.userActionData.newY1=c,n.userActionData.newWidth=u,n.userActionData.newHeight=h;const m=e.offsetY,p=e.offsetY+r;n.isScrolling||(n.isScrolling=!0,setTimeout(()=>{G(this,p,m,s.AUTO_SCROLL_FOR_MOUSE),n.isScrolling=!1},s.AUTO_SCROLL_DELAY)),u>0&&h>0&&(t.$limberGridViewPseudoItem.style.transform=`translate(${d}px, ${c}px)`,t.$limberGridViewPseudoItem.style.width=u+"px",t.$limberGridViewPseudoItem.style.height=h+"px",t.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(u)}px, h: ${parseInt(h)}px`))}else n.mouseDownCancel=!0,_t.call(this,e);e.preventDefault(),e.stopPropagation()},Dt=function(e){const t=E(this),i=v(this),s=$(this),r=R(this),o=vt(this);if(!0===o.touchHoldTimerComplete&&1===e.touches.length)if("move"===o.userActionData.type){Q(this,o.userActionData,e,"move"),clearTimeout(o.showMoveDemoTimeOutVariable);const t=X(this,e);let n;if(s.offsetMovePseudoElement&&t){const e=s.offsetMovePseudoElement(t.x,t.y,q(r[o.userActionData.itemIndex]));n=t.y,t.x=e.x,t.y=e.y}if(t){let e;o.isScrolling||(o.isScrolling=!0,setTimeout(()=>{e=G(this,n,t.offsetY,!0),o.isScrolling=!1},i.AUTO_SCROLL_DELAY))}}else{Q(this,o.userActionData,e,"resize"),clearTimeout(o.showResizeDemoTimeOutVariable);const s=o.userActionData.itemX,r=o.userActionData.itemY,n=X(this,e);let l,a,d,c;if("resize"===o.userActionData.type&&n?(l=s,a=r,d=n.x-s,c=n.y-r):n&&(l=n.x,a=r,d=o.userActionData.itemX2-n.x,c=n.y-r),n&&(o.userActionData.newX1=l,o.userActionData.newY1=a,o.userActionData.newWidth=d,o.userActionData.newHeight=c,d>0&&c>0&&(t.$limberGridViewPseudoItem.style.transform=`translate(${l}px, ${a}px)`,t.$limberGridViewPseudoItem.style.width=d+"px",t.$limberGridViewPseudoItem.style.height=c+"px",t.$limberGridViewPseudoItem.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`))),n){const e=n.y;let t;o.isScrolling||(o.isScrolling=!0,setTimeout(()=>{t=G(this,e,n.offsetY,!0),o.isScrolling=!1},i.AUTO_SCROLL_DELAY))}}else o.touchHoldCancel=!0,Rt.call(this,e);e.stopPropagation()},Et=async function(e){if(0!==e.button)return;const t=vt(this),i=$(this),s=R(this);if(clearTimeout(t.showMoveDemoTimeOutVariable),clearTimeout(t.showResizeDemoTimeOutVariable),!0===t.mouseDownTimerComplete)if("move"===t.userActionData.type){const o=Y(this,e);if(i.offsetMovePseudoElement&&o){const e=i.offsetMovePseudoElement(o.x,o.y,q(s[t.userActionData.itemIndex]));o.x=e.x,o.y=e.y}var r={};try{if(!o)throw"Mouse position outside grid area.";await bt.call(this,t.userActionData.itemIndex,o.x,o.y),r.x=o.x,r.y=o.y}catch(e){console.error(e),$(this).getLogMessage({type:"error",message:e}),Ht(this)}}else try{const e=t.userActionData.newX1,i=t.userActionData.newY1,s=t.userActionData.newWidth,r=t.userActionData.newHeight;await yt.call(this,t.userActionData.itemIndex,e,i,s,r,"resize"===t.userActionData.type)}catch(e){console.error(e),$(this).getLogMessage({type:"error",message:e}),Ht(this)}else t.mouseDownCancel=!0;_t.call(this,e),t.userActionData={}},Gt=async function(e){const t=vt(this),i=$(this),s=R(this);if(clearTimeout(t.showMoveDemoTimeOutVariable),clearTimeout(t.showResizeDemoTimeOutVariable),!0===t.touchHoldTimerComplete&&0===e.touches.length)if("move"===t.userActionData.type){const o=X(this,e);if(i.offsetMovePseudoElement&&o){const e=i.offsetMovePseudoElement(o.x,o.y,q(s[t.userActionData.itemIndex]));o.x=e.x,o.y=e.y}var r={};try{if(!o)throw"Touch position outside grid area.";await bt.call(this,t.userActionData.itemIndex,o.x,o.y),r.x=o.x,r.y=o.y}catch(e){console.error(e),$(this).getLogMessage({type:"error",message:e}),Ht(this)}}else try{const e=t.userActionData.newX1,i=t.userActionData.newY1,s=t.userActionData.newWidth,r=t.userActionData.newHeight;await yt.call(this,t.userActionData.itemIndex,e,i,s,r,"resize"===t.userActionData.type)}catch(e){console.error(e),$(this).getLogMessage({type:"error",message:e}),Ht(this)}else t.touchHoldCancel=!0;Rt.call(this,e),e.stopPropagation(),t.userActionData={}},_t=function(e){const t=E(this),i=vt(this),s=rt(this);clearTimeout(i.showMoveDemoTimeOutVariable),clearTimeout(i.showResizeDemoTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),((e,t)=>{const i=E(e);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-active"),i.$limberGridViewPseudoItem.style.transform="translate(-1000px, -1000px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing");const s=i.$limberGridViewItems.length;for(let e=0;e<s;e++)i.$limberGridViewItems[e]&&i.$limberGridViewItems[e].classList.remove("limber-grid-view-item-resizing-state");i.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state")})(this,i.userActionData),((e,t)=>{const i=E(e),s=v(e);i.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),i.$limberGridViewItems[t.itemIndex]&&i.$limberGridViewItems[t.itemIndex].classList.remove("limber-grid-view-item-demo"),i.$pseudoContainerItem.classList.remove("limber-grid-view-pseudo-container-item-active"),i.$pseudoContainerItem.style.width="0px",i.$pseudoContainerItem.style.height="0px",i.$pseudoContainerItem.style.transform="translate(-1000px, -1000px)",i.$body.classList.remove("limber-grid-view-body-tag-state-editing"),i.$limberGridViewCrossHairGuide.style.transform=`translate(-${2*s.CROSS_HAIR_WIDTH}px, -${2*s.CROSS_HAIR_HEIGHT}px)`})(this,i.userActionData),(e=>{const t=E(e);t.$limberGridViewMoveGuide.classList.remove("limber-grid-view-move-guide-active"),t.$limberGridViewMoveGuide.style.transform="translate(-1000px, -1000px)"})(this),Ht(this),document.removeEventListener("mousemove",s.onItemMouseMove),t.$limberGridView.removeEventListener("mousemove",s.onItemMouseMove),document.removeEventListener("mouseup",s.onItemMouseUp),document.removeEventListener("contextmenu",s.onItemContextMenu),document.removeEventListener("touchmove",s.onItemTouchMove),t.$limberGridView.removeEventListener("touchmove",s.onItemTouchMove),document.removeEventListener("touchend",s.onItemTouchEnd),document.removeEventListener("contextmenu",s.onItemTouchContextMenu),document.removeEventListener("touchcancel",s.onItemTouchCancel),i.userActionData={},it(this,"moveDemo",void 0),it(this,"resizeDemo",void 0);We(this,"rt").emptyTree(),e.preventDefault(),e.stopPropagation()},Rt=function(e){_t.call(this,e)},Ct=function(e){_t.call(this,e)},Ht=Ce,Mt=e=>{const t=E(e),i=v(e);t.$body.classList.add("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const s=t.$limberGridViewItems.length;for(let e=0;e<s;e++)t.$limberGridViewItems[e]&&t.$limberGridViewItems[e].classList.add("limber-grid-view-item-resizing-state");t.$limberGridViewPseudoItem.classList.add("limber-grid-view-pseudo-item-resizing-state"),"ADD"===i.DESK_INTERACTION_MODE?t.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active"):"CUTSPACE"===i.DESK_INTERACTION_MODE&&t.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode"),t.$limberGridViewHeightAdjustGuide.style.height="0px",t.$limberGridViewHeightAdjustGuide.classList.add("limber-grid-view-height-adjust-guide-active")},St=function(e){const t=E(this),i=v(this),s=gt(this),r=rt(this);e.target.classList.contains("limber-grid-view")&&(e.stopPropagation(),s.mouseDownCancel=!1,s.mouseDownTimerComplete=!1,clearTimeout(s.longPressCheck),s.longPressCheck=setTimeout(Nt.bind(this,e,e.offsetX,e.offsetY),i.MOUSE_DOWN_TIME),t.$limberGridView.addEventListener("mousemove",r.onDeskMouseMove),document.addEventListener("mouseup",r.onDeskMouseUp),document.addEventListener("contextmenu",r.onDeskContextMenu))},$t=function(e){const t=E(this),i=v(this),s=gt(this),r=rt(this);e.target.classList.contains("limber-grid-view")&&1===e.touches.length&&(s.tapHoldCancel=!1,s.tapHoldTimerComplete=!1,t.$limberGridView.addEventListener("touchmove",r.onDeskTouchMove),document.addEventListener("touchend",r.onDeskTouchEnd),document.addEventListener("touchcancel",r.onDeskTouchCancel),document.addEventListener("contextmenu",r.onDeskTouchContextMenu),at.call(this),clearTimeout(s.longTouchCheck),s.longTouchCheck=setTimeout(Ot.bind(this,e),i.TOUCH_HOLD_TIME),e.stopPropagation())},Nt=function(e,t,i){const s=E(this),r=f(this),o=gt(this);if(!1===o.mouseDownCancel){o.mouseDownTimerComplete=!0;var n=s.$limberGridView.scrollTop,l=t+s.$limberGridView.scrollLeft-r.PADDING_LEFT,a=i+n-r.PADDING_TOP;o.userActionData={type:"add",addPositionX:l,addPositionY:a},s.$limberGridViewAddCutGuide.style.height="1px",s.$limberGridViewAddCutGuide.style.width="1px",s.$limberGridViewAddCutGuide.style.transform=`translate(${l}px, ${a}px)`,s.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Mt(this)}},Ot=function(e){const t=E(this),i=gt(this);if(!1===i.tapHoldCancel){i.tapHoldTimerComplete=!0;const s=X(this,e),r=s.x,o=s.y;i.userActionData={type:"add",addPositionX:r,addPositionY:o};setTimeout(function(){t.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active"),t.$limberGridViewTouchHoldGuide.style.transform="translate(-1000px, -1000px)"}.bind(this),500),t.$limberGridViewAddCutGuide.style.height="1px",t.$limberGridViewAddCutGuide.style.width="1px",t.$limberGridViewAddCutGuide.style.transform=`translate(${r}px, ${o}px)`,t.$limberGridViewAddCutGuide.setAttribute("data-after","w: 0px, h: 0px"),Mt(this),t.$limberGridViewTouchHoldGuide.style.transform=`translate(${r}px, ${o}px)`,t.$limberGridViewTouchHoldGuide.classList.add("limber-grid-view-touch-hold-guide-active"),e.preventDefault()}},kt=function(e){const t=E(this),i=f(this),s=v(this),r=gt(this);if(!0===r.mouseDownTimerComplete){t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const o=t.$limberGridView.scrollTop,n=t.$limberGridView.scrollLeft,l=r.userActionData.addPositionX,a=r.userActionData.addPositionY,d=e.offsetX-l+n-i.PADDING_LEFT,c=e.offsetY-a+o-i.PADDING_TOP;r.userActionData.newWidth=d,r.userActionData.newHeight=c;const u=e.offsetY,h=e.offsetY+o;r.isScrolling||(r.isScrolling=!0,setTimeout(()=>{G(this,h,u,s.AUTO_SCROLL_FOR_MOUSE),r.isScrolling=!1},s.AUTO_SCROLL_DELAY)),d>0&&c>0&&(t.$limberGridViewAddCutGuide.style.width=d+"px",t.$limberGridViewAddCutGuide.style.height=c+"px",t.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(d)}px, h: ${parseInt(c)}px`)),"ADD"===s.DESK_INTERACTION_MODE?(clearTimeout(r.addItemAllowCheckTimeOutVariable),r.addItemAllowCheckTimeOutVariable=setTimeout(Xt.bind(this,r.userActionData.addPositionX,r.userActionData.addPositionY,d,c),s.DEMO_WAIT_TIME)):"CUTSPACE"===s.DESK_INTERACTION_MODE&&(clearTimeout(r.cutSpaceAllowCheckTimeOutVariable),r.cutSpaceAllowCheckTimeOutVariable=setTimeout(Ut.bind(this,r.userActionData.addPositionX,r.userActionData.addPositionY,d,c),s.DEMO_WAIT_TIME))}else Yt.call(this,e);e.stopPropagation()},Vt=function(e){const t=E(this),i=v(this),s=gt(this);if(!0===s.tapHoldTimerComplete&&1===e.touches.length){t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow","limber-grid-view-add-cut-guide-disallow");const r=s.userActionData.addPositionX,o=s.userActionData.addPositionY,n=X(this,e),l=(null==n?void 0:n.x)-r,a=(null==n?void 0:n.y)-o;if(n&&(s.userActionData.newWidth=l,s.userActionData.newHeight=a,l>0&&a>0&&(t.$limberGridViewAddCutGuide.style.width=l+"px",t.$limberGridViewAddCutGuide.style.height=a+"px",t.$limberGridViewAddCutGuide.setAttribute("data-after",`w: ${parseInt(l)}px, h: ${parseInt(a)}px`))),n){const e=n.y;let t;s.isScrolling||(s.isScrolling=!0,setTimeout(()=>{t=G(this,e,n.offsetY,!0),s.isScrolling=!1},i.AUTO_SCROLL_DELAY)),"ADD"===i.DESK_INTERACTION_MODE?(clearTimeout(s.addItemAllowCheckTimeOutVariable),!0!==t&&(s.addItemAllowCheckTimeOutVariable=setTimeout(Xt.bind(this,s.userActionData.addPositionX,s.userActionData.addPositionY,l,a),i.DEMO_WAIT_TIME))):"CUTSPACE"===i.DESK_INTERACTION_MODE&&(clearTimeout(s.cutSpaceAllowCheckTimeOutVariable),!0!==t&&(s.cutSpaceAllowCheckTimeOutVariable=setTimeout(Ut.bind(this,s.userActionData.addPositionX,s.userActionData.addPositionY,l,a),i.DEMO_WAIT_TIME)))}e.preventDefault()}else Yt.call(this);e.stopPropagation()},Lt=function(e){if(0!==e.button)return;const t=E(this),i=v(this),s=$(this),r=R(this),o=gt(this);if(clearTimeout(o.addItemAllowCheckTimeOutVariable),clearTimeout(o.longPressCheck),!0===o.mouseDownTimerComplete){if("ADD"===i.DESK_INTERACTION_MODE){if(Pe(this,o.userActionData.addPositionX,o.userActionData.addPositionY,o.userActionData.newWidth,o.userActionData.newHeight)){var n={x:o.userActionData.addPositionX,y:o.userActionData.addPositionY,width:o.userActionData.newWidth,height:o.userActionData.newHeight},l=t.$limberGridView.scrollTop;pt(this,n),t.$limberGridView.scrollTop=l}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const e=ze(this,o.userActionData.addPositionX,o.userActionData.addPositionY,o.userActionData.newWidth,o.userActionData.newHeight);e&&(Le(this,e.y,e.shiftHeight),dt(this).push(r),s.cutSpaceComplete&&s.cutSpaceComplete())}}else o.mouseDownCancel=!0;Yt.call(this),e.stopPropagation()},Pt=function(e){const t=E(this),i=v(this),s=$(this),r=R(this),o=gt(this);if(clearTimeout(o.addItemAllowCheckTimeOutVariable),clearTimeout(o.longTouchCheck),!0===o.tapHoldTimerComplete&&0===e.touches.length){if("ADD"===i.DESK_INTERACTION_MODE){if(Pe(this,o.userActionData.addPositionX,o.userActionData.addPositionY,o.userActionData.newWidth,o.userActionData.newHeight)){const e={x:o.userActionData.addPositionX,y:o.userActionData.addPositionY,width:o.userActionData.newWidth,height:o.userActionData.newHeight},i=t.$limberGridView.scrollTop;pt(this,e),t.$limberGridView.scrollTop=i}}else if("CUTSPACE"===i.DESK_INTERACTION_MODE){const e=ze(this,o.userActionData.addPositionX,o.userActionData.addPositionY,o.userActionData.newWidth,o.userActionData.newHeight);e&&(Le(this,e.y,e.shiftHeight),dt(this).push(r),s.cutSpaceComplete&&s.cutSpaceComplete())}}else o.tapHoldCancel=!0;Yt.call(this),e.stopPropagation()},zt=function(e){Yt.call(this)},Wt=function(e){e.preventDefault()},Yt=function(e){const t=E(this),i=gt(this),s=rt(this);clearTimeout(i.addItemAllowCheckTimeOutVariable),clearTimeout(i.cutSpaceAllowCheckTimeOutVariable),clearTimeout(i.longPressCheck),clearTimeout(i.longTouchCheck),(e=>{const t=E(e);t.$body.classList.remove("limber-grid-view-body-tag-state-editing","limber-grid-view-body-tag-state-editing-adding-cutting");const i=t.$limberGridViewItems.length;for(var s=0;s<i;s++)t.$limberGridViewItems[s]&&t.$limberGridViewItems[s].classList.remove("limber-grid-view-item-resizing-state");t.$limberGridViewPseudoItem.classList.remove("limber-grid-view-pseudo-item-resizing-state"),t.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-active","limber-grid-view-add-cut-guide-cut-mode","limber-grid-view-add-cut-guide-add-allow","limber-grid-view-add-cut-guide-add-disallow"),t.$limberGridViewAddCutGuide.style.transform="translate(-1000px, -1000px)",t.$limberGridViewHeightAdjustGuide.style.height="0px",t.$limberGridViewHeightAdjustGuide.classList.remove("limber-grid-view-height-adjust-guide-active"),t.$limberGridViewTouchHoldGuide.classList.remove("limber-grid-view-touch-hold-guide-active"),t.$limberGridViewTouchHoldGuide.style.transform="translate(-1000px, -1000px)"})(this),t.$limberGridView.removeEventListener("mousemove",s.onDeskMouseMove),document.removeEventListener("mouseup",s.onDeskMouseUp),document.removeEventListener("contextmenu",s.onDeskContextMenu),t.$limberGridView.removeEventListener("touchmove",s.onDeskTouchMove),document.removeEventListener("touchend",s.onDeskTouchEnd),document.removeEventListener("touchcancel",s.onDeskTouchCancel),document.removeEventListener("contextmenu",s.onDeskTouchContextMenu),lt.call(this),i.userActionData={},e&&(e.preventDefault(),e.stopPropagation())},Xt=function(e,t,i,s){const r=E(this);!1===Pe(this,e,t,i,s)?(r.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),r.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(r.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),r.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))},Ut=function(e,t,i,s){const r=E(this);!1===ze(this,0,t,i,s)?(r.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-allow"),r.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-disallow")):(r.$limberGridViewAddCutGuide.classList.remove("limber-grid-view-add-cut-guide-disallow"),r.$limberGridViewAddCutGuide.classList.add("limber-grid-view-add-cut-guide-allow"))};var Ft=i(3),jt=i.n(Ft);const Bt={ADD:!0,CUTSPACE:!0},Zt=async function(e,t,i){const s=E(e),r=f(e),o=R(e);if(!0===i||!(e=>{if(Array.isArray(e)){const s=e.length;for(let r=0;r<s;r++)if(i=e[r],isNaN(i.x1)||isNaN(i.x2)||isNaN(i.y1)||isNaN(i.y2)||i.x1>=i.x2||i.y1>=i.y2){if(!me(e[r]))return!1;re(e[r])}else(t=e[r]).x=t.x1,t.y=t.y1,t.width=t.x2-t.x1,t.height=t.y2-t.y1;return!0}var t,i;return!1})(o)){console.warn("Auto-arranging"),C(e,o);const t=H(e),i=o.length,s=new Array(i);for(let e=0;e<i;e++)s[e]=e,t[e].x1=0,t[e].x2=0,t[e].y1=0,t[e].y2=0,t[e].x=0,t[e].y=0,t[e].width=t[e].width/r.WIDTH_SCALE_FACTOR||2*r.MIN_HEIGHT_AND_WIDTH,t[e].height=t[e].height/r.WIDTH_SCALE_FACTOR||2*r.MIN_HEIGHT_AND_WIDTH,t[e].mX1=0,t[e].mX2=0,t[e].mY1=0,t[e].mY2=0,t[e].mX=0,t[e].mY=0,t[e].mWidth=t[e].width+2*r.MARGIN,t[e].mHeight=t[e].height+2*r.MARGIN,Object.assign(o[e],t[e]);a(e,r.GRID_WIDTH),c(e,r.GRID_HEIGHT),h(e,r.GRID_MARGIN),u(e,1),m(e,r.MIN_HEIGHT_AND_WIDTH),await(async e=>{const t=H(e),i=f(e),s=2*i.MIN_HEIGHT_AND_WIDTH,r=s,o=Math.floor(i.WIDTH/s),n=t.length;let l=0;for(let e=0;e<n;e+=o){const a=e/o;for(let e=0;e<o&&l<n;e++)t[l].x1=e*i.MARGIN*2+e*s+i.MARGIN,t[l].x2=t[l].x1+s,t[l].y1=a*i.MARGIN*2+a*r+i.MARGIN,t[l].y2=t[l].y1+r,t[l].x=t[l].x1,t[l].y=t[l].y1,le(t[l]),t[l].mX1=t[l].x1-i.MARGIN,t[l].mX2=t[l].x2+i.MARGIN,t[l].mY1=t[l].y1-i.MARGIN,t[l].mY2=t[l].y1+i.MARGIN,t[l].mX=t[l].mX1,t[l].mY=t[l].mY2,l++}})(e),_(e,t)}if(function(e,t){e.store.constants.privateConstants.PADDING_LEFT=t}(e,parseInt(window.getComputedStyle(s.$limberGridView,null).getPropertyValue("padding-left"))),function(e,t){e.store.constants.privateConstants.PADDING_RIGHT=t}(e,parseInt(window.getComputedStyle(s.$limberGridView,null).getPropertyValue("padding-right"))),function(e,t){e.store.constants.privateConstants.PADDING_TOP=t}(e,parseInt(window.getComputedStyle(s.$limberGridView,null).getPropertyValue("padding-top"))),function(e,t){e.store.constants.privateConstants.PADDING_BOTTOM=t}(e,parseInt(window.getComputedStyle(s.$limberGridView,null).getPropertyValue("padding-bottom"))),a(e,s.$limberGridView.clientWidth-r.PADDING_LEFT-r.PADDING_RIGHT),c(e,s.$limberGridView.clientHeight-r.PADDING_TOP-r.PADDING_BOTTOM),t){const e=o.length;for(let t=0;t<e;t++)o[t].x1/=r.WIDTH_SCALE_FACTOR,o[t].x2/=r.WIDTH_SCALE_FACTOR,o[t].y1/=r.WIDTH_SCALE_FACTOR,o[t].y2/=r.WIDTH_SCALE_FACTOR,o[t].x/=r.WIDTH_SCALE_FACTOR,o[t].y/=r.WIDTH_SCALE_FACTOR,o[t].width/=r.WIDTH_SCALE_FACTOR,o[t].height/=r.WIDTH_SCALE_FACTOR;r.MARGIN/=r.WIDTH_SCALE_FACTOR,r.DEFINED_MIN_HEIGHT_AND_WIDTH/=r.WIDTH_SCALE_FACTOR}if(u(e,r.WIDTH/r.GRID_WIDTH),h(e,r.MARGIN*r.WIDTH_SCALE_FACTOR),m(e,r.DEFINED_MIN_HEIGHT_AND_WIDTH*r.WIDTH_SCALE_FACTOR),ee(e)){w(e).style.transform="translate(1px, 1px)",M(e,o);const t=S(e),i=o.length<15?o.length:15,s=new Array(i).fill(0).map((e,t)=>t);k(e,s);for(let e=0;e<i;e++)t[s[e]].renderIndex=e}else{w(e).style.transform=`translate(0px, ${P(e)*r.HEIGHT}px)`,x(e).style.transform=`translate(0px, ${W(e)*r.HEIGHT}px)`;const t={x1:0,x2:r.WIDTH,y1:P(e)*r.HEIGHT-r.HEIGHT/2,y2:W(e)*r.HEIGHT+r.HEIGHT/2};k(e,fe(e,t,!0))}},Kt=function(e){var t,i,s,r,o,n,l,a,d,c,u,h,m,p,f,y,v,g,I,w,x,A,T,D,E,G,_,R;"number"==typeof(null==e||null===(t=e.gridData)||void 0===t?void 0:t.WIDTH)&&(_=this,R=e.gridData.WIDTH,_.store.constants.privateConstants.GRID_WIDTH=R),"number"==typeof(null==e||null===(i=e.gridData)||void 0===i?void 0:i.HEIGHT)&&function(e,t){e.store.constants.privateConstants.GRID_HEIGHT=t}(this,e.gridData.HEIGHT),"number"==typeof(null==e||null===(s=e.gridData)||void 0===s?void 0:s.MARGIN)&&function(e,t){e.store.constants.privateConstants.GRID_MARGIN=t}(this,e.gridData.MARGIN),"number"==typeof(null==e||null===(r=e.gridData)||void 0===r?void 0:r.MIN_HEIGHT_AND_WIDTH)&&function(e,t){e.store.constants.privateConstants.MIN_HEIGHT_AND_WIDTH=t}(this.options.gridData.MIN_HEIGHT_AND_WIDTH),"number"==typeof(null==e||null===(o=e.publicConstants)||void 0===o?void 0:o.mobileAspectRatio)&&b(this,"MOBILE_ASPECT_RATIO",e.publicConstants.mobileAspectRatio),"number"==typeof(null==e||null===(n=e.publicConstants)||void 0===n?void 0:n.moveGuideRadius)&&b(this,"MOVE_GUIDE_RADIUS",e.publicConstants.moveGuideRadius),"number"==typeof(null==e||null===(l=e.publicConstants)||void 0===l?void 0:l.resizeSquareGuideLength)&&b(this,"RESIZE_SQUARE_GUIDE_LENGTH",e.publicConstants.resizeSquareGuideLength),"number"==typeof(null==e||null===(a=e.publicConstants)||void 0===a?void 0:a.resizeSquareBorderGuideWidth)&&b(this,"RESIZE_SQUARE_GUIDE_BORDER_WIDTH",e.publicConstants.resizeSquareBorderGuideWidth),"boolean"==typeof(null==e||null===(d=e.publicConstants)||void 0===d?void 0:d.showBottomLeftResizeGuide)&&b(this,"SHOW_BOTTOM_LEFT_RESIZE_GUIDE",e.publicConstants.showBottomLeftResizeGuide),"number"==typeof(null==e||null===(c=e.publicConstants)||void 0===c?void 0:c.autoScrollDistance)&&b(this,"AUTO_SCROLL_DISTANCE",e.publicConstants.autoScrollDistance),"number"==typeof(null==e||null===(u=e.publicConstants)||void 0===u?void 0:u.autoScrollPoint)&&b(this,"AUTO_SCROLL_POINT",e.publicConstants.autoScrollPoint),"number"==typeof(null==e||null===(h=e.publicConstants)||void 0===h?void 0:h.moveOrResizeHeightIncrements)&&b(this,"MOVE_OR_RESIZE_HEIGHT_INCREMENTS",e.publicConstants.moveOrResizeHeightIncrements),"boolean"==typeof(null==e||null===(m=e.publicConstants)||void 0===m?void 0:m.autoScrollForMouse)&&b(this,"AUTO_SCROLL_FOR_MOUSE",e.publicConstants.autoScrollForMouse),"number"==typeof(null==e||null===(p=e.publicConstants)||void 0===p?void 0:p.mouseDownTime)&&b(this,"MOUSE_DOWN_TIME",e.publicConstants.mouseDownTime),"number"==typeof(null==e||null===(f=e.publicConstants)||void 0===f?void 0:f.touchHoldTime)&&b(this,"TOUCH_HOLD_TIME",e.publicConstants.touchHoldTime),"number"==typeof(null==e||null===(y=e.publicConstants)||void 0===y?void 0:y.demoWaitTime)&&b(this,"DEMO_WAIT_TIME",e.publicConstants.demoWaitTime),"number"==typeof(null==e||null===(v=e.publicConstants)||void 0===v?void 0:v.windowResizeWaitTime)&&b(this,"WINDOW_RESIZE_WAIT_TIME",e.publicConstants.windowResizeWaitTime),"number"==typeof(null==e||null===(g=e.publicConstants)||void 0===g?void 0:g.autoScrollDelay)&&b(this,"AUTO_SCROLL_DELAY",e.publicConstants.autoScrollDelay),null!=e&&null!==(I=e.publicConstants)&&void 0!==I&&I.deskInteractionMode&&Bt[e.publicConstants.deskInteractionMode]&&b(this,"DESK_INTERACTION_MODE",e.publicConstants.deskInteractionMode),"boolean"==typeof(null==e||null===(w=e.publicConstants)||void 0===w?void 0:w.latchMovedItem)&&b(this,"LATCH_MOVED_ITEM",e.publicConstants.latchMovedItem),"boolean"==typeof(null==e||null===(x=e.publicConstants)||void 0===x?void 0:x.animateMovedItem)&&b(this,"ANIMATE_MOVED_ITEM",e.publicConstants.animateMovedItem),"number"==typeof(null==e||null===(A=e.publicConstants)||void 0===A?void 0:A.animateTime)&&b(this,"ANIMATE_TIME",e.publicConstants.animateTime),"number"==typeof(null==e||null===(T=e.publicConstants)||void 0===T?void 0:T.crossHairWidth)&&b(this,"CROSS_HAIR_WIDTH",e.publicConstants.crossHairWidth),"number"==typeof(null==e||null===(D=e.publicConstants)||void 0===D?void 0:D.crossHairHeight)&&b(this,"CROSS_HAIR_HEIGHT",e.publicConstants.crossHairHeight),"number"==typeof(null==e||null===(E=e.publicConstants)||void 0===E?void 0:E.shrinkToFit)&&(null==e||null===(G=e.publicConstants)||void 0===G?void 0:G.shrinkToFit)<=10&&b(this,"SHRINK_TO_FIT",e.publicConstants.shrinkToFit)},Qt=function(){const e=E(this),t=F(this),i=v(this);var s,r;let o;s=this,r=document.getElementsByTagName("body")[0],s.store.variables.elements.$body=r;do{o="limber-grid-view-pseudo-container-"+ie()}while(null!==document.getElementById(o));!function(e,t){e.store.variables.essentials.pseudoContainerId=t}(this,o);const n=document.createElement("div");if(n.setAttribute("class","limber-grid-view-pseudo-container"),n.setAttribute("id",o),function(e,t){e.store.variables.elements.$pseudoContainer=t}(this,n),t.pseudoElementContainer){let e;"string"==typeof t.pseudoElementContainer?e=document.getElementById(t.pseudoElementContainer):t.pseudoElementContainer instanceof Element&&(e=t.pseudoElementContainer),e.appendChild(n)}else e.$body.appendChild(n);e.$el.innerHTML='<div class = "limber-grid-view-container"><div class = "limber-grid-view"></div><div class = "limber-grid-view-license"><div class = "limber-grid-view-license-icon">©</div><div class = "limber-grid-view-license-details">LimberGridView Copyright © 2018-2021 Subendra Kumar Sharma. License GPLv3+: GNU GPL version 3 or later &lthttps://www.gnu.org/licenses/&gt.</div></div></div>',function(e,t){e.store.variables.elements.$limberGridViewContainer=t}(this,e.$el.getElementsByClassName("limber-grid-view-container")[0]),function(e,t){e.store.variables.elements.$limberGridView=t}(this,e.$el.getElementsByClassName("limber-grid-view")[0]);const l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div");h.innerHTML="<div></div>";const m=document.createElement("div");m.innerHTML="<hr></hr><hr></hr>";const p=document.createElement("div"),f=document.createElement("div");l.setAttribute("class","limber-grid-view-pseudo-container-item"),a.setAttribute("class","limber-grid-view-pseudo-item"),d.setAttribute("class","limber-grid-view-move-guide"),c.setAttribute("class","limber-grid-view-height-adjust-guide"),u.setAttribute("class","limber-grid-view-add-cut-guide"),h.setAttribute("class","limber-grid-view-touch-hold-guide"),m.setAttribute("class","limber-grid-view-cross-hair-guide"),m.style.transform=`translate(-${2*i.CROSS_HAIR_WIDTH}px, -${2*i.CROSS_HAIR_HEIGHT}px)`,p.setAttribute("class","limber-grid-view-io-top-helper"),f.setAttribute("class","limber-grid-view-io-bottom-helper"),e.$pseudoContainer.appendChild(l),e.$limberGridView.appendChild(a),e.$limberGridView.appendChild(d),e.$limberGridView.appendChild(c),e.$limberGridView.appendChild(u),e.$limberGridView.appendChild(h),e.$limberGridView.appendChild(m),e.$limberGridView.appendChild(p),e.$limberGridView.appendChild(f),function(e,t){e.store.variables.elements.$pseudoContainerItem=t}(this,l),function(e,t){e.store.variables.elements.$limberGridViewPseudoItem=t}(this,a),function(e,t){e.store.variables.elements.$limberGridViewMoveGuide=t}(this,d),function(e,t){e.store.variables.elements.$limberGridViewHeightAdjustGuide=t}(this,c),function(e,t){e.store.variables.elements.$limberGridViewAddCutGuide=t}(this,u),function(e,t){e.store.variables.elements.$limberGridViewTouchHoldGuide=t}(this,h),function(e,t){e.store.variables.elements.$limberGridViewCrossHairGuide=t}(this,m),function(e,t){e.store.variables.elements.$limberGridViewIOTopHelper=t}(this,p),function(e,t){e.store.variables.elements.$limberGridViewIOBottomHelper=t}(this,f)},qt=function(e,t){e.store.observer.resizeObserver.isResizeObserving=t},Jt=function(e){$(this).onItemClickCallback(e)},ei=function(){N(this,ii(I(this).getBoundingClientRect()));const e=window.ResizeObserver?window.ResizeObserver:jt.a;this.store.observer.resizeObserver.resizeObserver=new e(rt(this).resizeObserverCallback),this.store.observer.resizeObserver.resizeObserver.observe(I(this))},ti=function(){const e=v(this);this.store.observer.resizeObserver.isResizeObserving||(qt(this,!0),setTimeout(async()=>{const e=O(this);N(this,ii(I(this).getBoundingClientRect())),!ee(this)&&ee(this,e)&&(L(this,-1),z(this,1.5),k(this,[])),await Zt(this,!0,!1),ct(this),qt(this,!1)},e.WINDOW_RESIZE_WAIT_TIME))},ii=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left}},si=function(){this.store.observer.intersectionObserver.intersectionObserver=new IntersectionObserver(rt(this).intersectionObserverCallback,{root:I(this),threshold:1}),this.store.observer.intersectionObserver.intersectionObserver.observe(w(this)),this.store.observer.intersectionObserver.intersectionObserver.observe(x(this))},ri=function(e,t){if(1!==e.length||!e[0].isIntersecting)return;const i=e[0];if(ee(this)){const e=V(this),t=R(this).length,s=S(this);let r,o=!1;if(i.target.classList.contains("limber-grid-view-io-top-helper")){const t=e[0];r=t-9>0?t-9:0,o=!0}else{const t=e[e.length-1];r=t-4>0?t-4:0}const n=r+14<t?r+14:t-1;if(n<0){const t={};for(const i of e)t[i]=!0;return ht(this,t),mt(this,[]),void k(this,[])}const a=[],d={},c={},u={},h=[];let m=0;for(let e=r;e<=n;e++)a.push(e),d[e]=!0,s[e].renderIndex=m++;for(const t of e)c[t]=!0,d[t]||(u[t]=!0);for(const e of a)c[e]||h.push(e);k(this,a),o&&h.reverse(),ht(this,u),mt(this,h,o);const p=E(this),f=l(this),b=y(this);o&&h.length&&p.$limberGridView.scrollTo({left:0,top:f.WIDTH/b.MOBILE_ASPECT_RATIO*h.length,behavior:"auto"})}else i.target.classList.contains("limber-grid-view-io-top-helper")?(z(this,P(this)+1.5),L(this,P(this)-1)):(L(this,W(this)-1.5),z(this,W(this)+1)),oi(this)},oi=function(e){const t=l(e),i={x1:0,x2:t.WIDTH,y1:P(e)*t.HEIGHT-t.HEIGHT/2,y2:W(e)*t.HEIGHT+t.HEIGHT/2},s=fe(e,i,!0),r={};for(const e of s)r[e]=!0;const o=V(e),n={};for(const e of o)n[e]=!0;const a={};for(const e of s)n[e]||(a[e]=!0);const d={};for(const e of o)r[e]||(d[e]=!0);k(e,s),ht(e,d),mt(e,Object.keys(a)),w(e).style.transform=`translate(0px, ${P(e)*t.HEIGHT}px)`,x(e).style.transform=`translate(0px, ${W(e)*t.HEIGHT}px)`},ni=function(e){clearTimeout(this.store.variables.essentials.onScrollTimeout),function(e,t){e.store.variables.essentials.onScrollTimeout=t}(this,setTimeout(rt(this).onScrollCallback,1e3))},li=function(e){const t=l(this),i=I(this);if(!ee(this)){const e=i.scrollTop,o={x1:0,x2:t.WIDTH,y1:e,y2:e+t.HEIGHT},n={x1:0,x2:t.WIDTH,y1:P(this)*t.HEIGHT,y2:W(this)*t.HEIGHT};if(s=o,r=n,isNaN(s.x1)||isNaN(s.y1)||isNaN(s.x2)||isNaN(s.y2)||isNaN(r.x1)||isNaN(r.y1)||isNaN(r.x2)||isNaN(r.y2)||s.x1>r.x2||r.x1>s.x2||s.y1>r.y2||r.y1>s.y2){const e={...o};e.y1=o.y1-.75*t.HEIGHT;let i=te(e.y1/t.HEIGHT,1);i=i%1>.66?Math.ceil(i):i%1<.33?Math.trunc(i):Math.trunc(i)+.5;const s=i+2.5;L(this,i),z(this,s),oi(this)}}var s,r};
/** @license LimberGridView

LimberGridView, a powerful JavaScript Library using Computational Geometry to render movable, dynamically resizable, and auto-arranging grids.

Copyright © 2018-2021 Subendra Kumar Sharma. All rights reserved. (jobs.sharma.subendra.kr@gmail.com)

This file is part of LimberGridView.

LimberGridView is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

LimberGridView is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with LimberGridView.  If not, see <https://www.gnu.org/licenses/>.

Written by Subendra Kumar Sharma.

*/
function ai(e){var t,i;if(this.initializeStore(),function(e,t){Object.assign(e.options,t)}(this,e),_(this,e.positionData),t=this,i=e.callbacks,t.store.variables.essentials.callbacks=i,dt(this).push(R(this)),"string"==typeof e.el){const t=document.getElementById(e.el);if(!t)throw"No for element found for id "+e.el;g(this,t)}else{if(!(e.el instanceof Element))throw"Valid DOM Element or Id required";g(this,e.el)}Kt.call(this,e),Qt.call(this),ei.call(this),si.call(this);E(this).$limberGridView.addEventListener("scroll",rt(this).onScroll),setTimeout(async function(){await Zt(this,!1,e.autoArrange),ct(this,!0)}.bind(this))}ai.prototype.initializeStore=function(){this.options={editable:!0,reRenderOnResize:!0,enableInteractiveAddAndCut:!0,enableTouchInteraction:!0},this.store={variables:{elements:{$body:void 0,$pseudoContainer:void 0,$pseudoContainerItem:void 0,$el:void 0,$limberGridViewContainer:void 0,$limberGridView:void 0,$limberGridViewItems:[],$limberGridViewPseudoItem:void 0,$limberGridViewMoveGuide:void 0,$limberGridViewHeightAdjustGuide:void 0,$limberGridViewAddCutGuide:void 0,$limberGridViewTouchHoldGuide:void 0,$limberGridViewDebugMergedTempRects:[],$limberGridViewDebugStackTopRect:void 0,$limberGridViewDebugStackTopAdjRect:void 0,$limberGridViewDebugMergedRect:void 0,$limberGridViewDebugAdjRect:void 0,$limberGridViewDebugResultStackRects:[],$limberGridViewDebugStackRects:[],$limberGridViewDebugUnmergedRects:[],$limberGridViewDebugMergedFreeRects:[]},essentials:{pseudoContainerId:void 0,positionData:[],modifiedPositionData:[],renderedItems:[],ioTopHelperPos:-1,ioBottomHelperPos:1.5,gridData:{},callbacks:{}},bindedFunctions:{onItemMouseDown:It.bind(this),onItemTouchStart:wt.bind(this),onItemMouseMove:Tt.bind(this),onItemTouchMove:Dt.bind(this),onItemMouseUp:Et.bind(this),onItemTouchEnd:Gt.bind(this),onItemContextMenu:_t.bind(this),onItemTouchContextMenu:Rt.bind(this),onItemTouchCancel:Ct.bind(this),onItemClick:Jt.bind(this),onDeskMouseDown:St.bind(this),onDeskTouchStart:$t.bind(this),onDeskMouseMove:kt.bind(this),onDeskTouchMove:Vt.bind(this),onDeskMouseUp:Lt.bind(this),onDeskTouchEnd:Pt.bind(this),onDeskTouchCancel:zt.bind(this),onDeskTouchContextMenu:Wt.bind(this),onDeskContextMenu:Yt.bind(this),resizeObserverCallback:ti.bind(this),intersectionObserverCallback:ri.bind(this),onScroll:ni.bind(this),onScrollCallback:li.bind(this)},eventSpecific:{itemInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!0,touchHoldCancel:!1,touchHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,showResizeDemoTimeOutVariable:void 0,showMoveDemoTimeOutVariable:void 0},deskInteraction:{userActionData:{},mouseDownCancel:!1,mouseDownTimerComplete:!1,tapHoldCancel:!1,tapHoldTimerComplete:!1,longPressCheck:void 0,longTouchCheck:void 0,addItemAllowCheckTimeOutVariable:void 0,cutSpaceAllowCheckTimeOutVariable:void 0}},status:{},trees:{rt:new s.RTreeIterative({M:4})},stacks:{stack:new r.ArrayStack({constructReverse:!0}),garbageStack:new r.ArrayStack({constructReverse:!0})},undoRedo:new n.a},constants:{privateConstants:{WIDTH:0,HEIGHT:0,PADDING_LEFT:0,PADDING_RIGHT:0,PADDING_TOP:0,PADDING_BOTTOM:0,WIDTH_SCALE_FACTOR:1,MARGIN:8,DEFINED_MIN_HEIGHT_AND_WIDTH:150,GRID_WIDTH:1920,GRID_HEIGHT:1080,GRID_MARGIN:8,MIN_HEIGHT_AND_WIDTH:150},publicConstants:{MOBILE_ASPECT_RATIO:5/4,MOVE_GUIDE_RADIUS:10,RESIZE_SQUARE_GUIDE_LENGTH:10,RESIZE_SQUARE_GUIDE_BORDER_WIDTH:3,SHOW_BOTTOM_LEFT_RESIZE_GUIDE:!1,AUTO_SCROLL_DISTANCE:50,AUTO_SCROLL_POINT:50,MOVE_OR_RESIZE_HEIGHT_INCREMENTS:50,AUTO_SCROLL_FOR_MOUSE:!1,MOUSE_DOWN_TIME:0,TOUCH_HOLD_TIME:300,DEMO_WAIT_TIME:500,WINDOW_RESIZE_WAIT_TIME:1e3,AUTO_SCROLL_DELAY:100,DESK_INTERACTION_MODE:"CUTSPACE",LATCH_MOVED_ITEM:!0,ANIMATE_MOVED_ITEM:!1,ANIMATE_TIME:250,CROSS_HAIR_WIDTH:500,CROSS_HAIR_HEIGHT:500,SHRINK_TO_FIT:10},messages:{latchedMoveDemo1:"Move curser close to an adjacent item over this box to latch next to that item.",latchedMoveDemo2:"Move curser over this box to latch on to this item."}},observer:{resizeObserver:{resizeObserver:void 0,isResizeObserving:!1},intersectionObserver:{intersectionObserver:void 0}}}},ai.prototype.renderItem=function(e){ut(this,e)},ai.prototype.getGridData=function(){const e=l(this),t=R(this),i=t.length,s=new Array(i);for(let r=0;r<i;r++)s[r]={x:te(t[r].x/e.WIDTH_SCALE_FACTOR),y:te(t[r].y/e.WIDTH_SCALE_FACTOR),width:te(t[r].width/e.WIDTH_SCALE_FACTOR),height:te(t[r].height/e.WIDTH_SCALE_FACTOR)};return{gridData:{height:e.GRID_HEIGHT,width:e.GRID_WIDTH,margin:e.GRID_MARGIN,MIN_HEIGHT_AND_WIDTH:e.MIN_HEIGHT_AND_WIDTH},positionData:s}},ai.prototype.setDeskInteractMode=function(e){Bt[e]&&b(this,"DESK_INTERACTION_MODE",e)},ai.prototype.setLatchMovedItem=function(e){"boolean"==typeof e&&b(this,"LATCH_MOVED_ITEM",e)},ai.prototype.setShrinkToFit=function(e){"number"==typeof e&&e<=10&&b(this,"SHRINK_TO_FIT",e)},ai.prototype.addItem=function(e){if(!e){const t=l(this);e={width:t.DEFINED_MIN_HEIGHT_AND_WIDTH,height:t.DEFINED_MIN_HEIGHT_AND_WIDTH}}pt(this,e)},ai.prototype.removeItem=function(e){Number.isInteger(parseInt(e))&&function(e,t){t=parseInt(t);const i=E(e),s=$(e),r=R(e),o=S(e),n=f(e),l=v(e),a=V(e);let d;d=ee(e)?o.findIndex(e=>e.index===t):t;const c=a.findIndex(e=>e===d);if(c<0)return;nt.call(e);const u=r.length;if(ee(e)){if(ee(e)){const e={};for(let t=0;t<u;t++)e[o[t].index]=t;for(let s=t+1;s<u;s++){const t=e[s];i.$limberGridViewItems[t]&&i.$limberGridViewItems[t].setAttribute("data-index",s-1)}}}else for(let e=t+1;e<u;e++)i.$limberGridViewItems[e]&&i.$limberGridViewItems[e].setAttribute("data-index",e-1);const h=a.length;for(let e=0;e<h;e++)a[e]>d&&a[e]--;if(ee(e))for(let e=0;e<u;e++)o[e].index>t&&o[e].index--;const m=i.$limberGridViewItems[d];i.$limberGridViewItems.splice(d,1),a.splice(c,1),ee(e)&&o.splice(d,1),r.splice(t,1),dt(e).reset(),dt(e).push(r),s.removePlugin&&s.removePlugin(m),i.$limberGridView.removeChild(m),s.removeComplete&&s.removeComplete(t,m);for(let n=0;n<a.length;n++){let l,d=a[n],c=r[d].width,u=r[d].height;(ee(e)&&(c=o[d].width,u=o[d].height,d=o[d].index),d<t)||(l=(ee(e),s.renderContent(d,c,u)),ft(e,l,i.$limberGridViewItems[a[n]]))}ee(e)&&(x(e).style.transform=`translate(0px, ${n.WIDTH/l.MOBILE_ASPECT_RATIO*a.length+n.MARGIN*(a.length-1)-50}px)`),ot.call(e)}(this,e)},ai.prototype.setIsMobileCheck=function(e){this.options.isMobileCheck=e},ai.prototype.undo=function(){const e=dt(this).undo();if(e){const t=pe(R(this),e);_(this,e),Ce(this);for(const e in t)this.renderItem(e)}},ai.prototype.redo=function(){const e=dt(this).redo();if(e){const t=pe(R(this),e);_(this,e),Ce(this);for(const e in t)this.renderItem(e)}},ai.prototype.isUndoAvailable=function(){return dt(this).isUndoAvailable()},ai.prototype.isRedoAvailable=function(){return dt(this).isRedoAvailable()},ai.prototype.setAutoScrollDelay=function(e){"number"==typeof e&&b(this,"AUTO_SCROLL_DELAY",e)},ai.prototype.setAutoScrollForMouse=function(e){"boolean"==typeof e&&b(this,"AUTO_SCROLL_FOR_MOUSE",e)},ai.prototype.destroy=function(e){nt.call(this);const t=this.store.variables.elements.$pseudoContainer;const i=function(e){return e.store.variables.elements.$limberGridViewContainer}(this);t.remove(),i.remove()};t.default=ai}])}));